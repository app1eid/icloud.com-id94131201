/*
 * Babel v5.8.25
 * https://babeljs.io/
 * Licensed under the MIT license
 */

/*
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */

/*
 * CanJS - 2.3.5
 * http://canjs.com/
 * Copyright (c) 2015 Bitovi
 * Thu, 03 Dec 2015 23:34:11 GMT
 * Licensed MIT
 */

/*!
 * Detectizr v2.2.0
 * http://barisaydinoglu.github.com/Detectizr/
 *
 * Written by Baris Aydinoglu (http://baris.aydinoglu.info) - Copyright 2012
 * Released under the MIT license
 *
 * Date: 2015-09-28T21:37Z
 */

/*
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

/*!
 * jquery.inputmask
 * http://github.com/RobinHerbots/jquery.inputmask
 * Copyright (c) 2010 - 2015 Robin Herbots
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * Version: 3.2.0
 */

/*
 * lodash 3.10.1 lodash.com/license
 * Underscore.js 1.8.3 underscorejs.org/LICENSE
 */

/*
 * spin.js 2.3.2
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 * http://spin.js.org/
 */

/*
 * SystemJS v0.19.6
 * https://github.com/systemjs/systemjs
 * Copyright (C) 2013-2015 Guy Bedford
 * Licensed MIT
 */

//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*
 * Modernizr v2.8.3
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */

/*
 * pmrpc 0.7.1 - Inter-widget remote procedure call library based on HTML5
 *               postMessage API and JSON-RPC. https://github.com/izuzak/pmrpc
 *
 * Copyright 2012 Ivan Zuzak, Marko Ivankovic
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */System.register("frontend/node_modules/idms-web-components/modules/helpers/replacePlaceholder.js",["can/util/library","can/view/stache"],function(e){"use strict";function t(e,t,o){return e.replace(new RegExp(t,"g"),o)}var o;return{setters:[function(e){o=e["default"]},function(e){}],execute:function(){o.stache.registerHelper("replacePlaceholder",function(e,o){var n,i,r=[],s=o.context,a="function"==typeof e?e():e;if(o.hash.arguments&&(n="function"==typeof o.hash.arguments?o.hash.arguments():o.hash.arguments,n&&"string"==typeof n))for(r=n.split(","),i=0;i<r.length;i++)a=t(a,"\\(#"+i+"\\)",s.attr(r[i]));return a})}}}),System.registerDynamic("frontend/clients/widget/auth/components/choosePhone/choosePhone.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_1117947102",o.exports}),System.register("frontend/clients/widget/auth/components/choosePhone/choosePhone.js",["can/view","can/component","can/map/define","idms/modules/helpers/str_eq","idms/modules/helpers/replacePlaceholder","widget/auth/modules/serviceClients/phoneClient","widget/auth/modules/util/spinner","idms/modules/managers/localizationManager","widget/auth/modules/serviceClients/redirectClient","bootData","./choosePhone.jstache!"],function(e){"use strict";var t,o,n,i,r,s,a,l,d,c,u,h;return{setters:[function(e){t=e["default"]},function(e){},function(e){},function(e){},function(e){},function(e){o=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]},function(e){r=e["default"]},function(e){s=e.data},function(e){a=e["default"]}],execute:function(){l=function(e,o){var n=null;return 1===o.length?n=o[0]:t.each(o,function(t,o){t.id==e&&(n=t)}),n},d=function(e,o){t.each(e.phones,function(t,n){t.id!==e.selectedPhone.id&&t.attr("disable",o)})},c=function(e){var o=function(e){-1!==s.twoSV.supportedPushModes.indexOf(e.pushMode)&&("voice"===e.pushMode?e.attr("lastUsedPushModeText",i.getString("voiceCall")):"sms"===e.pushMode&&e.attr("lastUsedPushModeText",i.getString("textMsg")))};1===e.length?o(e[0]):t.each(e,function(t,n){o(e[n])})},u=function(e,t){var o=$("phones");switch(e.status){case 400:e.responseJSON.service_errors&&e.responseJSON.service_errors[0].message?t.attr("errorMessage",e.responseJSON.service_errors[0].message):e.responseJSON.serviceErrors&&e.responseJSON.serviceErrors[0].message?t.attr("errorMessage",e.responseJSON.serviceErrors[0].message):e.responseJSON.validationErrors&&e.responseJSON.validationErrors[0].message?t.attr("errorMessage",e.responseJSON.validationErrors[0].message):t.attr("errorMessage",i.getString("fallback"));break;case 409:o.trigger("next_409",[e]);break;case 423:e.responseJSON.securityCode.tooManyCodesSent&&t.attr("lastCodeSentTo.errorMessage",i.getString("tooManyCodesSent")),(e.responseJSON.securityCode.tooManyCodesValidated||e.responseJSON.securityCode.securityCodeLocked)&&t.attr("lastCodeSentTo.errorMessage",i.getString("securityCodeLocked")),o.trigger("phoneSelected",[e,t.attr("lastCodeSentTo")]);break;default:t.attr("errorMessage",i.getString("fallback"))}},h=t.Component.extend({tag:"phones",template:t.view(a),viewModel:{define:{appleIdLinkTarget:{type:"string",value:function(){return s.appleIdLinkTarget}}},phones:{},lastCodeSentTo:null,isSendCodeLocked:!1,errorMessage:"",verifyMode:"",suppressIforgot:null,selectedPhone:null,showHelpDialog:!1,dialog:{moreVerificationOptions:{links:{learnHow:s.urlBag.verificationCodeHelp,recovery:"#",disclaimer:s.urlBag.accountRecoveryHelp},title:i.getString("verifyDeviceShowHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"},noIforgotOptions:{title:i.getString("noIforgotHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"}},accRecoveryClick:function(e,t){var o=this;r.getRedirectUrl("/auth/account/recovery").done(function(e,t,n){o.attr("dialog.moreVerificationOptions.links.recovery",n.getResponseHeader("Location"))}).fail(function(e,t,n){u(e,o)}).always(function(){o.attr("showHelpDialog",!1),o.attr("showNoIforgotHelpDialog",!1),o.attr("dialog.moreVerificationOptions.links.recovery","#")})}},events:{inserted:function(e,t){this.viewModel.attr("phones",s.twoSV.phoneNumberVerification.trustedPhoneNumbers),this.spinner=n,this.spinner.setColor("#000000"),c(this.viewModel.phones),e.find("[tabindex=-1]")&&$(e.find("[tabindex=-1]")[0]).focus()},".si-phone-row mouseup":function(e,t){if(1===t.which){var o=this;o.viewModel.attr("selectedPhone",l(e.attr("phone-id"),o.viewModel.phones)),o.viewModel.selectedPhone.attr("selected",!0)}},".si-phone-row click":function(e,t){var n=this;setTimeout(function(){n.viewModel.attr("hideChev",!0),n.viewModel.selectedPhone.attr("selected",!1),n.spinner.start($(".arrow[data-id="+n.viewModel.selectedPhone.id+"]")),d(n.viewModel,!0),o.sendNewCode(n.viewModel.selectedPhone.id,n.viewModel.selectedPhone.pushMode).done(function(e,t,o){n.element.trigger("phoneSelected",[e])}).fail(function(e){423===e.status&&(n.viewModel.attr("lastCodeSentTo",n.viewModel.phones[0]),n.viewModel.attr("lastCodeSentTo.tooManyCodesSentLockObject",e.responseJSON)),u(e,n.viewModel)}).always(function(e,t,o){d(n.viewModel,!1),n.viewModel.attr("hideChev",!1),n.spinner.stop()})},200)},".error click":function(e,t){this.viewModel.attr("errorMessage","")},"#open-help click":function(e,t){this.viewModel.attr("showHelpDialog",!0)},"#suppressIforgot click":function(e,t){this.viewModel.attr("showNoIforgotHelpDialog",!0)},"#ok click":function(e,t){this.viewModel.attr("showHelpDialog",!1)},"idms-modal modalClose":function(e,t){this.viewModel.attr("showHelpDialog",!1),this.viewModel.attr("showNoIforgotHelpDialog",!1)},'[role="button"] focus':function(e,t){this.viewModel.attr("selectedPhone",l(e.attr("phone-id"),this.viewModel.phones))},"{viewModel} errorMessage":function(){if(this.viewModel.errorMessage){var e=this;setTimeout(function(){$(".error",e.element).focus()},1e3)}}}}),e("default",h)}}}),System.registerDynamic("frontend/clients/widget/auth/components/verifyPhone/verifyPhone.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_255186910",o.exports}),System.register("frontend/clients/widget/auth/components/verifyPhone/verifyPhone.js",["can/view","can/component","can/map/define","idms/modules/helpers/str_eq","idms/components/security_code/securityCode","idms/modules/helpers/and","widget/auth/modules/serviceClients/phoneClient","bootData","widget/auth/modules/util/spinner","widget/auth/modules/serviceClients/redirectClient","idms/modules/managers/localizationManager","./verifyPhone.jstache!"],function(e){"use strict";var t,o,n,i,r,s,a,l,d,c,u,h,f;return{setters:[function(e){t=e["default"]},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){o=e["default"]},function(e){n=e.data},function(e){i=e["default"]},function(e){r=e["default"]},function(e){s=e["default"]},function(e){a=e["default"]}],execute:function(){l=300,d={widthThresholdForOptsPopover:425,heightThresholdForOptsPopover:412},c=function(e){e.element.find(".char-field").val(""),e.viewModel.attr("verifyCode",""),e.element.find(".char-field").first().focus()},u=function(e,t){var o=$("verify-phone");switch(e.status){case 400:e.responseJSON.service_errors&&e.responseJSON.service_errors[0].message?t.attr("errorMessage",e.responseJSON.service_errors[0].message):e.responseJSON.serviceErrors&&e.responseJSON.serviceErrors[0].message?t.attr("errorMessage",e.responseJSON.serviceErrors[0].message):e.responseJSON.validationErrors&&e.responseJSON.validationErrors[0].message?t.attr("errorMessage",e.responseJSON.validationErrors[0].message):t.attr("errorMessage",s.getString("fallback"));break;case 409:o.trigger("next_409",[e]);break;case 423:e.responseJSON.securityCode.tooManyCodesSent&&(t.attr("errorMessage",s.getString("tooManyCodesSent")),t.attr("tooManyCodesSent",!0)),(e.responseJSON.securityCode.tooManyCodesValidated||e.responseJSON.securityCode.securityCodeLocked)&&t.attr("errorMessage",s.getString("securityCodeLocked"));break;case 412:o.trigger("repairAppleID",[e]);break;default:t.attr("errorMessage",s.getString("fallback"))}},h=function(e){e.viewModel.attr("errorMessage",""),e.viewModel.attr("showSpinnerFor.verifyingCode",!0),e.viewModel.tooManyCodesSent&&e.viewModel.lastCodeSentToPhone?o.verifyPhone(e.viewModel.lastCodeSentToPhone.id,e.viewModel.verifyCode,e.viewModel.lastCodeSentToPhone.tooManyCodesSentLockObject.mode).done(function(t,o,n){e.element.trigger("authCompleted",[n])}).fail(function(t,o,n){c(e),u(t,e.viewModel),e.viewModel.attr("showSpinnerFor.verifyingCode",!1)}):o.verifyPhone(e.viewModel.codeSentToPhone.phoneNumber.id,e.viewModel.verifyCode,e.viewModel.codeSentToPhone.phoneNumber.pushMode).done(function(t,o,n){e.element.trigger("authCompleted",[n])}).fail(function(t,o,n){c(e),u(t,e.viewModel),e.viewModel.attr("showSpinnerFor.verifyingCode",!1)})},f=t.Component.extend({tag:"verify-phone",template:t.view(a),viewModel:{define:{appleIdLinkTarget:{type:"string",value:function(){return n.appleIdLinkTarget}}},codeSentToPhone:null,verifyCode:"",errorMessage:"",codeLength:null,usedPushMode:"",localisedDigit:s.getString("localisedDigit"),allow:{verifyCode:!1},showSpinnerFor:{verifyingCode:!1,sendingCode:!1,calling:!1},otherOptionsClicked:!1,showAlternateOptions:!1,showHelpDialog:!1,showNoIforgotHelpDialog:!1,dialog:{moreVerificationOptions:{links:{learnHow:n.urlBag.verificationCodeHelp.trim(),recovery:"#",disclaimer:n.urlBag.accountRecoveryHelp.trim()},title:s.getString("verifyDeviceShowHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"},noIforgotOptions:{title:s.getString("noIforgotHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"}},suppressIforgot:null,hasMoreThanOneTrustedPhoneNumbers:!1,viewportWidth:window.innerWidth<=d.widthThresholdForOptsPopover||window.innerHeight<=d.heightThresholdForOptsPopover?"small":"large",accRecoveryClick:function(e,t){var o=this;r.getRedirectUrl("/auth/account/recovery").done(function(e,t,n){o.attr("dialog.moreVerificationOptions.links.recovery",n.getResponseHeader("Location"))}).fail(function(e,t,n){u(e,o)}).always(function(){o.attr("showHelpDialog",!1),o.attr("showNoIforgotHelpDialog",!1),o.attr("dialog.moreVerificationOptions.links.recovery","#")})}},events:{inserted:function(e,t){this.spinner=i,"lite"===n.envConfigFromConsumer.theme&&this.spinner.setColor("#fff");var o=this.viewModel;if(o.lastCodeSentToPhone&&""!==o.lastCodeSentToPhone.errorMessage)o.attr("errorMessage",o.lastCodeSentToPhone.errorMessage),o.attr("codeSentToPhoneNumber",o.lastCodeSentToPhone.obfuscatedNumber),o.attr("usedPushMode",o.lastCodeSentToPhone.pushMode),o.attr("codeLength",6),o.codeSentToPhone&&o.codeSentToPhone.securityCode&&o.codeSentToPhone.securityCode.tooManyCodesSent&&o.attr("tooManyCodesSent",o.codeSentToPhone.securityCode.tooManyCodesSent);else if(o.codeSentToPhone&&o.codeSentToPhone.securityCode){if(o.codeSentToPhone.serviceErrors||o.codeSentToPhone.service_errors||o.codeSentToPhone.validationErrors){var r="";o.codeSentToPhone.serviceErrors?r=o.codeSentToPhone.serviceErrors[0].message:o.codeSentToPhone.service_errors?r=o.codeSentToPhone.service_errors[0].message:o.codeSentToPhone.validationErrors&&(r=o.codeSentToPhone.validationErrors[0].message),o.attr("errorMessage",r)}o.attr("codeSentToPhoneNumber",o.codeSentToPhone.phoneNumber.obfuscatedNumber),o.attr("usedPushMode",o.codeSentToPhone.phoneNumber.pushMode),o.codeSentToPhone.securityCode.length&&""!==o.codeSentToPhone.securityCode.length?o.attr("codeLength",o.codeSentToPhone.securityCode.length):o.attr("codeLength",6)}o.attr("hasMoreThanOneTrustedPhoneNumbers",n.twoSV.phoneNumberVerification.trustedPhoneNumbers.length>1)}," keyup":function(e,t){27===t.which&&this.viewModel.showAlternateOptions&&(this.viewModel.attr("showAlternateOptions",!1),this.viewModel.otherOptionsClicked&&this.viewModel.attr("otherOptionsClicked",!1))},"security-code completed":function(e,t,o){this.viewModel.attr("verifyCode",o),h(this)},".char-field keypress":function(e,t){this.viewModel.attr("errorMessage","")},"#didnt-get-code click":function(e,t){this.viewModel.attr("showAlternateOptions",!this.viewModel.showAlternateOptions)},"#use-diff-ph click":function(e,t){this.element.trigger("usePhone")},"#other-opts click":function(e,t){this.viewModel.attr("otherOptionsClicked",!this.viewModel.otherOptionsClicked),this.viewModel.attr("showAlternateOptions",!this.viewModel.showAlternateOptions)},".error click":function(e,t){this.viewModel.attr("errorMessage","")},"#try-again-link click":function(e,t){var n=this;setTimeout(function(){n.viewModel.attr("showSpinnerFor.calling",!0),o.sendNewCode(n.viewModel.codeSentToPhone.phoneNumber.id,n.viewModel.codeSentToPhone.phoneNumber.pushMode).done(function(e,t,o){}).fail(function(e){u(e,n.viewModel)}).always(function(e,t,o){n.viewModel.attr("showSpinnerFor.calling",!1),n.viewModel.attr("showAlternateOptions",!1)})},l)},"#call-me-link click":function(e,t){var n=this;n.viewModel.attr("showAlternateOptions",!1),n.element.find(".char-field").first().focus(),setTimeout(function(){n.viewModel.attr("showSpinnerFor.sendingCode",!0),o.sendNewCode(n.viewModel.codeSentToPhone.phoneNumber.id,"voice").done(function(e,t,o){n.viewModel.attr("codeSentToPhone",e),n.viewModel.attr("usedPushMode","voice")}).fail(function(e){u(e,n.viewModel)}).always(function(e,t,o){n.viewModel.attr("showSpinnerFor.sendingCode",!1)})},l)},"#sms-me-link click":function(e,t){var n=this;n.viewModel.attr("showAlternateOptions",!1),n.element.find(".char-field").first().focus(),setTimeout(function(){n.viewModel.attr("showSpinnerFor.sendingCode",!0),o.sendNewCode(n.viewModel.codeSentToPhone.phoneNumber.id,"sms").done(function(e,t,o){n.viewModel.attr("codeSentToPhone",e),n.viewModel.attr("usedPushMode","sms")}).fail(function(e){u(e,n.viewModel)}).always(function(e,t,o){n.viewModel.attr("showSpinnerFor.sendingCode",!1)})},l)},"#need-help-link click":function(e,t){this.viewModel.attr("showAlternateOptions",!1),this.viewModel.suppressIforgot?this.viewModel.attr("showNoIforgotHelpDialog",!0):this.viewModel.attr("showHelpDialog",!0)},"#ok click":function(e,t){this.viewModel.attr("showHelpDialog",!1)},"idms-modal modalClose":function(e,t){this.viewModel.attr("showHelpDialog",!1),this.viewModel.attr("showNoIforgotHelpDialog",!1)},"{scope} showSpinnerFor.verifyingCode":function(e,t,o){var n=this,i="small";o?n.spinner.start($("#verifying-code"),i):n.spinner.stop()},"{scope} showAlternateOptions":function(e,t,o,n){o||this.viewModel.attr("otherOptionsClicked",!1)},"{scope} showSpinnerFor.sendingCode":function(e,t,o){var n=this;o?n.spinner.start($("#sending-code")):n.spinner.stop()}}}),e("default",f)}}}),System.registerDynamic("frontend/node_modules/idms-web-components/components/security_code/securityCode.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_868675209",o.exports}),System.registerDynamic("frontend/node_modules/idms-web-components/components/popovers/idmsPopover/idmsPopover.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_1835066767",o.exports}),System.registerDynamic("frontend/node_modules/lodash/date/now.js",["../internal/getNative"],!0,function(e,t,o){var n=e("../internal/getNative"),i=n(Date,"now"),r=i||function(){return(new Date).getTime()};return o.exports=r,o.exports}),System.registerDynamic("frontend/node_modules/lodash/function/debounce.js",["../lang/isObject","../date/now"],!0,function(e,t,o){function n(e,t,o){function n(){w&&clearTimeout(w),f&&clearTimeout(f),M=0,f=w=m=void 0}function l(t,o){o&&clearTimeout(o),f=w=m=void 0,t&&(M=r(),p=e.apply(g,h),w||f||(h=g=void 0))}function d(){var e=t-(r()-v);0>=e||e>t?l(m,f):w=setTimeout(d,e)}function c(){l(S,w)}function u(){if(h=arguments,v=r(),g=this,m=S&&(w||!C),y===!1)var o=C&&!w;else{f||C||(M=v);var n=y-(v-M),i=0>=n||n>y;i?(f&&(f=clearTimeout(f)),M=v,p=e.apply(g,h)):f||(f=setTimeout(c,n))}return i&&w?w=clearTimeout(w):w||t===y||(w=setTimeout(d,t)),o&&(i=!0,p=e.apply(g,h)),!i||w||f||(h=g=void 0),p}var h,f,p,v,g,w,m,M=0,y=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);if(t=0>t?0:+t||0,o===!0){var C=!0;S=!1}else i(o)&&(C=!!o.leading,y="maxWait"in o&&a(+o.maxWait||0,t),S="trailing"in o?!!o.trailing:S);return u.cancel=n,u}var i=e("../lang/isObject"),r=e("../date/now"),s="Expected a function",a=Math.max;return o.exports=n,o.exports}),System.registerDynamic("frontend/node_modules/lodash/function/throttle.js",["./debounce","../lang/isObject"],!0,function(e,t,o){function n(e,t,o){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError(s);return o===!1?n=!1:r(o)&&(n="leading"in o?!!o.leading:n,a="trailing"in o?!!o.trailing:a),i(e,t,{leading:n,maxWait:+t,trailing:a})}var i=e("./debounce"),r=e("../lang/isObject"),s="Expected a function";return o.exports=n,o.exports}),System.registerDynamic("frontend/node_modules/lodash/internal/baseDelay.js",[],!0,function(e,t,o){function n(e,t,o){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,o)},t)}var i="Expected a function";return o.exports=n,o.exports}),System.registerDynamic("frontend/node_modules/lodash/function/defer.js",["../internal/baseDelay","./restParam"],!0,function(e,t,o){var n=e("../internal/baseDelay"),i=e("./restParam"),r=i(function(e,t){return n(e,1,t)});return o.exports=r,o.exports}),System.register("frontend/node_modules/idms-web-components/components/popovers/idmsPopover/idmsPopover.js",["./idmsPopover.jstache!","can/view","can/component","jquery","lodash/function/throttle","lodash/function/defer","idms/modules/utils/uid.js"],function(e){"use strict";function t(e){return d(e.viewModel.attr("anchorElement"))}function o(e,t,o){if("top"===e)return"top";if("bottom"===e)return"bottom";var n=window.innerHeight,i=d(window).scrollTop(),r=t.height,s=o.top-i;n-s-o.height;return s>r+p+v?"top":"bottom"}function n(e,t,o){var n=0;return n="top"===e?o.top-t.top-p:o.top-t.top+o.height+p}function i(e,t,o){var n=e.viewModel.attr("_rect.width"),i=t.left,r=void 0;if("right"===e.viewModel.attr("_align"))r=Math.floor(o-(i+i)),e.viewModel.attr("_rect.width",r);else{var s=o-(n-Math.abs(i));r=Math.floor(o-(s+s)),e.viewModel.attr("_rect.width",r)}}function r(e){var r=M(t(e)),s=M(e.element.find(".idms-popover-container")),a=void 0,l=void 0,d=e.viewModel.attr("_documentWidth");e.viewModel.attr("_align","center"),e.viewModel.attr("_rect.left",r.left-s.left+r.width/2),l=y(e.element.find(".idms-popover")),"auto"===e.viewModel.attr("maxWidth")?e.viewModel.attr("_rect.width",r.width):"content"===e.viewModel.attr("maxWidth")?e.viewModel.attr("_rect.width",l):"deviceWidth"===e.viewModel.attr("maxWidth")?e.viewModel.attr("_rect.width",d-20):e.viewModel.attr("_rect.width",e.viewModel.attr("maxWidth")),a=M(e.element.find(".idms-popover-wrapper")),l=y(e.element.find(".idms-popover")),a.width>l&&"deviceWidth"!==e.viewModel.attr("maxWidth")&&(e.viewModel.attr("_rect.width",l),a=M(e.element.find(".idms-popover-wrapper")));var c=a.left<v,u=a.left+a.width>d-v;c?(e.viewModel.attr("_align","right"),a=M(e.element.find(".idms-popover-wrapper")),a.left+e.viewModel.attr("_rect.width")>d&&i(e,a,d)):u&&(e.viewModel.attr("_align","left"),a=M(e.element.find(".idms-popover-wrapper")),a.left<0&&i(e,a,d)),e.viewModel.attr("_direction",o(e.viewModel.attr("floatMode"),a,r)),e.viewModel.attr("_rect.top",n(e.viewModel.attr("_direction"),s,r))}function s(e,t){var o="#idms-popover-"+t.attr("uid");e.is(o)||e.closest(o).length||e.is(d(t.attr("anchorElement")))||t.close()}var a,l,d,c,u,h,f,p,v,g,w,m,M,y,S;return{setters:[function(e){a=e["default"]},function(e){l=e["default"]},function(e){},function(e){d=e["default"]},function(e){c=e["default"]},function(e){u=e["default"]},function(e){h=e.uid}],execute:function(){f=300,p=9,v=5,g=100,w=100,m=500,M=function(e){return d.extend({},e[0].getBoundingClientRect(),e.offset())},y=function(e){return e.outerWidth()+1},S=l.Component.extend({tag:"idms-popover",template:l.view(a),leakScope:!1,viewModel:{uid:null,show:!1,animations:!0,openAnimation:!0,closeAnimation:!1,toolbar:!1,anchorElement:"",floatMode:"auto",type:"default",maxWidth:f,define:{autoClose:{type:"boolean",value:!0}},open:function(){this.attr("_isShown")||(this.attr("_documentWidth",d(document).width()),this.attr("_isShown",!0),this.attr("animations")&&this.attr("openAnimation")&&this.attr("_openAnimationInProgress",!0)),this.attr("show",!0)},close:function(){this.attr("_isShown")&&(this.attr("animations")&&this.attr("closeAnimation")?this.attr("_closeAnimationInProgress",!0):this.attr("_isShown",!1)),this.attr("show",!1)},toggle:function(){this.attr("_isShown")?this.close():this.open()},clickHandler:function(e){this.dispatch(e)},_openAnimationInProgress:!1,_closeAnimationInProgress:!1,_isShown:!1,_direction:"top",_align:"center",_rect:{top:0,left:0,width:0},_documentWidth:0},init:function(){this.viewModel.attr("uid",h())},events:{inserted:function(){var e=this;this._updatePopoverThrottle=c(function(){u(function(){e.viewModel.attr("_isShown")&&r(e)})},g),this._windowScrollEventHandler=c(function(){e._updatePopoverThrottle()},m),this._windowResizeEventHandler=c(function(){e.viewModel.attr("_documentWidth",d(document).width()),e._updatePopoverThrottle()},w),this._updatePopoverThrottle(),this.viewModel.attr("show")?this.viewModel.open():this.viewModel.close()},"{viewModel} show":function(e,t,o){o?this.viewModel.open():this.viewModel.close()},"{viewModel} _isShown":function(e,t,o){this._updatePopoverThrottle(),o?(l.on.call(window,"resize",this._windowResizeEventHandler),"auto"===this.viewModel.attr("floatMode")&&l.on.call(window,"scroll",this._windowScrollEventHandler)):(l.off.call(window,"resize",this._windowResizeEventHandler),l.off.call(window,"scroll",this._windowScrollEventHandler))},".idms-popover-animation-open animationend":function(){this.viewModel.attr("_openAnimationInProgress",!1)},".idms-popover-animation-close animationend":function(){this.viewModel.attr("_closeAnimationInProgress",!1),this.viewModel.attr("_isShown",!1)},removed:function(){l.off.call(window,"resize",this._windowResizeEventHandler),l.off.call(window,"scroll",this._windowScrollEventHandler)},"{document} click":function(e,t){this.viewModel.attr("autoClose")&&this.viewModel.attr("_isShown")&&!this.viewModel.attr("_openAnimationInProgress")&&s(d(t.target),this.viewModel)},"{document} touchend":function(e,t){this.viewModel.attr("autoClose")&&this.viewModel.attr("_isShown")&&s(d(t.target),this.viewModel)}}}),e("default",S)}}}),System.register("frontend/node_modules/idms-web-components/components/security_code/securityCode.js",["./securityCode.jstache!","idms/components/popovers/idmsPopover/idmsPopover.js","idms/modules/utils/uid.js","idms/modules/utils/mediaQuery.js","can/view","can/component","jquery"],function(e){"use strict";function t(e){e.element.find(".char-field").val(""),e.viewModel.attr("code",""),e.element.find(".char-field").first().focus()}function o(e){var t=p(".field-wrap .char-field"),o=t.map(function(){var e=p.trim(this.value);return e?e:void 0}).get(),n=o.join("");e.attr("code",n)}function n(e,t){var o=t.parent().nextAll(".field-wrap:first");o.length>0?o.children()[0].focus():t.select()}function i(e,t){var o=t.parent().prevAll(".field-wrap:first");o.length>0&&o.children()[0].focus()}function r(e,t){var o=e.element.find(".char-field");return t>=o.length&&(t=o.length-1),p(o[t])}function s(e,t){return t>=48&&57>=t}function a(e,t){return 9===t}function l(e,t){return 8===t}function d(e,t){return e.metaKey&&118===t}var c,u,h,f,p,v;return{setters:[function(e){c=e["default"]},function(e){},function(e){u=e.uid},function(e){h=e.needToAdaptTo},function(e){f=e["default"]},function(e){},function(e){p=e["default"]}],execute:function(){v=f.Component.extend({tag:"security-code",template:f.view(c),viewModel:{uid:null,length:4,code:"",inputBoxes:[],didReachMaxLength:!1,type:"text",errorMessage:"",errorLabel:"",define:{blurOnComplete:{type:"boolean",value:!0},hasErrors:{get:function(){return!!this.attr("errorMessage")}},usePopover:{type:"boolean",value:!1},isPhone:{get:function(){return h("phone")}}},clearCode:function(){this.attr("code","")}},helpers:{indexNum:function(e){var t=e.scope.attr("%index");return"function"==typeof t&&(t=t()),t+1}},init:function(){this.viewModel.attr("uid",u())},events:{inserted:function(){for(var e=0;e<this.viewModel.attr("length");e++)this.viewModel.attr("inputBoxes").push(!0);var t=0,o=this.element.find(".char-field"),n=this.viewModel.attr("code").split("");this.viewModel.attr("code").length>0&&(t=this.viewModel.attr("code").length<this.viewModel.attr("length")?this.viewModel.attr("code").length:this.viewModel.attr("length")-1);for(var e=0;e<n.length;e++){var i=p(o.get(e));if(!i.val)break;i.val(n[e])}o&&o.length>=t+1&&o[t].focus()},".char-field paste":function(e,t){var n,i=this,s="",a=this.element.find(".char-field"),l=parseInt(e.attr("data-index")),d=0;for(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData?s=t.originalEvent.clipboardData.getData("Text"):window.clipboardData&&window.clipboardData.getData&&(s=window.clipboardData.getData("Text")),s=s.substr(0,a.length-l).split(""),n=0;n<s.length&&!isNaN(parseInt(s[n]));n++)d++,p(a[n+l]).val(s[n]);return o(this.viewModel),setTimeout(function(){i.viewModel.attr("code").length===i.viewModel.attr("length")?(i.viewModel.attr("blurOnComplete")?e.blur():r(i,i.viewModel.attr("code").length-1).focus(),i.element.trigger("completed",[i.viewModel.attr("code")])):r(i,l+d).focus()},0),t.preventDefault(),!1},".char-field input":function(e){e.val().length>1&&e.val(e.val().substr(0,1)),o(this.viewModel),this.viewModel.attr("code").length===this.viewModel.attr("length")?(this.viewModel.attr("blurOnComplete")?e.blur():n(this,e),this.element.trigger("completed",[this.viewModel.attr("code")])):""!==e.val()&&n(this,e)},".char-field keydown":function(e,t){var o=t.which||t.keyCode;if(8===o)""===e.val()&&i(this,e);else if(o>=37&&41>=o)return 37===o?i(this,e):39===o&&n(this,e),t.preventDefault(),!1},".char-field keypress":function(e,t){var o=t.which||t.keyCode;return s(t,o)||a(t,o)||l(t,o)||d(t,o)?void 0:(t.preventDefault(),!1)},".char-field focus":function(e){p("body").addClass("fix-fixed"),this.viewModel.attr("isPhone")||e.select()},".char-field blur":function(){p("body").removeClass("fix-fixed")}," clear":function(){t(this)},"{viewModel} code":function(e,o,n){n.length==this.viewModel.length?this.viewModel.attr("didReachMaxLength",!0):this.viewModel.attr("didReachMaxLength")&&(this.viewModel.attr("didReachMaxLength",!1),this.element.trigger("isNotMaxLength",[e.code])),0===n.length&&t(this),this.viewModel.attr("errorMessage")&&this.viewModel.attr("errorMessage","")},"{viewModel} errorMessage":function(e,t,o,n){""!==o.trim()&&this.element.find(".char-field")[0].focus()}}}),e("default",v)}}}),System.register("frontend/node_modules/idms-web-components/modules/helpers/and.js",["can/util/library","can/view/stache"],function(e){"use strict";var t;return{setters:[function(e){t=e["default"]},function(e){}],execute:function(){t.stache.registerHelper("and",function(e,t,o){var n,i;return n="function"==typeof e?e():e,i="function"==typeof t?t():t,n&&i?o.fn(this):o.inverse(this)})}}}),System.register("frontend/clients/widget/auth/modules/serviceClients/phoneClient.js",["idms/modules/serviceClients/ServiceClient","can/util/library","can/construct","bootData"],function(e){"use strict";var t,o,n,i,r;return{setters:[function(e){t=e["default"]},function(e){o=e["default"]},function(e){},function(e){n=e.data}],execute:function(){i={},r=function(){},r.prototype=new t,r.prototype.constructor=r,r.prototype.verifyPhone=function(e,t,o){var i={};return i.url=n.urlContext+"/auth/verify/phone/securitycode"+n.referrerQuery,i.data=JSON.stringify({phoneNumber:{id:e},securityCode:{code:t},mode:o}),i.headers={Accept:"application/json"},this.post(i)},r.prototype.verifyDevice=function(e){var t={};return t.data=JSON.stringify({securityCode:{code:e}}),t.url=n.urlContext+"/auth/verify/trusteddevice/securitycode"+n.referrerQuery,t.headers={Accept:"application/json"},this.post(t)},r.prototype.sendNewCode=function(e,t){var o={url:n.urlContext+"/auth/verify/phone",data:JSON.stringify({phoneNumber:{id:e},mode:t})};return o.headers={Accept:"application/json"},this.put(o)},e("default",new r)}}}),System.register("frontend/clients/widget/auth/modules/serviceClients/trustedDeviceClient.js",["idms/modules/serviceClients/ServiceClient","bootData"],function(e){"use strict";var t,o,n;return{setters:[function(e){t=e["default"]},function(e){o=e.data}],execute:function(){n=function(){},n.prototype=new t,n.prototype.constructor=n,n.prototype.pushAuthCode=function(e){return this.put({url:o.urlContext+e})},e("default",new n)}}}),System.registerDynamic("frontend/clients/widget/auth/components/verifyDevice/verifyDevice.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_228732498",o.exports}),System.register("frontend/clients/widget/auth/components/verifyDevice/verifyDevice.js",["can/view","can/component","can/map/define","idms/modules/helpers/str_eq","idms/components/security_code/securityCode","idms/modules/helpers/and","idms/modules/helpers/or","idms/modules/managers/localizationManager","widget/auth/modules/serviceClients/phoneClient","widget/auth/modules/serviceClients/redirectClient","widget/auth/modules/serviceClients/trustedDeviceClient","bootData","widget/auth/modules/util/spinner","../shared/dialog/dialog","./verifyDevice.jstache!"],function(e){"use strict";var t,o,n,i,r,s,a,l,d,c,u,h,f,p;return{setters:[function(e){t=e["default"]},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){o=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]},function(e){r=e["default"]},function(e){s=e.data},function(e){a=e["default"]},function(e){l=e["default"]},function(e){d=e["default"]}],execute:function(){c={widthThresholdForOptsPopover:425,heightThresholdForOptsPopover:412},u=function(e){e.element.find(".char-field").val(""),e.viewModel.attr("verifyCode",""),e.element.find(".char-field").first().focus()},h=function(e,t){var n=$("verify-device");switch(e.status){case 400:e.responseJSON.service_errors&&e.responseJSON.service_errors[0].message?t.attr("errorMessage",e.responseJSON.service_errors[0].message):e.responseJSON.serviceErrors&&e.responseJSON.serviceErrors[0].message?t.attr("errorMessage",e.responseJSON.serviceErrors[0].message):e.responseJSON.validationErrors&&e.responseJSON.validationErrors[0].message?t.attr("errorMessage",e.responseJSON.validationErrors[0].message):t.attr("errorMessage",o.getString("fallback"));break;case 409:n.trigger("next_409",[e]);break;case 423:e.responseJSON.serviceErrors&&e.responseJSON.serviceErrors[0].message?t.attr("errorMessage",e.responseJSON.serviceErrors[0].message):e.responseJSON.securityCode.tooManyCodesSent?t.attr("errorMessage",o.getString("tooManyCodesSent")):(e.responseJSON.securityCode.tooManyCodesValidated||e.responseJSON.securityCode.securityCodeLocked)&&t.attr("errorMessage",o.getString("securityCodeLocked"));break;case 412:n.trigger("repairAppleID",[e]);break;default:t.attr("errorMessage",o.getString("fallback"))}},f=function(e){e.viewModel.attr("errorMessage",""),e.viewModel.attr("showSpinnerFor.verifyingCode",!0),n.verifyDevice(e.viewModel.verifyCode).done(function(t,o,n){e.element.trigger("authCompleted",[n])}).fail(function(t,o,n){u(e),h(t,e.viewModel)}).always(function(){e.viewModel.attr("showSpinnerFor.verifyingCode",!1)})},p=t.Component.extend({tag:"verify-device",template:t.view(d),viewModel:{define:{appleIdLinkTarget:{type:"string",value:function(){return s.appleIdLinkTarget;
}}},verifyCode:"",errorMessage:"",codeLength:null,allow:{verifyCode:!1,resendCode:!0,sendText:!0},suppressIforgot:null,showSpinnerFor:{verifyingCode:!1,gettingRecoveryPath:!1},showAlternateOptions:!1,localisedDigit:o.getString("localisedDigit"),lastUsedPushMode:"",hasOnlyOneTrustedPhoneNumber:!1,showHelpDialog:!1,dialog:{moreVerificationOptions:{links:{learnHow:s.urlBag.verificationCodeHelp,recovery:"#",disclaimer:s.urlBag.accountRecoveryHelp},title:o.getString("verifyDeviceShowHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"},noIforgotOptions:{title:o.getString("noIforgotHelpDialogTitle"),titleAlign:"center",bodyAlign:"left",showAppleLogo:!1,theme:"translucent"}},viewportWidth:window.innerWidth<=c.widthThresholdForOptsPopover||window.innerHeight<=c.heightThresholdForOptsPopover?"small":"large",accRecoveryClick:function(){var e=this;e.attr("showSpinnerFor.gettingRecoveryPath",!0),i.getRedirectUrl("/auth/account/recovery").done(function(t,o,n){e.attr("dialog.moreVerificationOptions.links.recovery",n.getResponseHeader("Location"))}).fail(function(t,o,n){h(t,e)}).always(function(){e.attr("showSpinnerFor.gettingRecoveryPath",!1),e.attr("showHelpDialog",!1),e.attr("showNoIforgotHelpDialog",!1),e.attr("dialog.moreVerificationOptions.links.recovery","#"),$("security-code").find(".char-field").first().focus()})}},events:{inserted:function(e,t){s.twoSV.phoneNumberVerification.trustedPhoneNumbers&&this.viewModel.attr("hasOnlyOneTrustedPhoneNumber",1===s.twoSV.phoneNumberVerification.trustedPhoneNumbers.length),this.spinner=a,"lite"===s.envConfigFromConsumer.theme&&this.spinner.setColor("#fff"),this.viewModel.hasOnlyOneTrustedPhoneNumber&&this.viewModel.attr("lastUsedPushMode",s.twoSV.phoneNumberVerification.trustedPhoneNumbers[0].pushMode);var o=this.viewModel;this.element.find(".char-field").first().focus(),o.attr("codeLength",6)},keyup:function(e,t){27===t.which&&this.viewModel.showAlternateOptions&&this.viewModel.attr("showAlternateOptions",!1)},"security-code completed":function(e,t,o){this.viewModel.attr("verifyCode",o),f(this)},".char-field keyup":function(e,t){this.viewModel.attr("errorMessage","")},"#no-trstd-device-pop click":function(e,t){this.viewModel.attr("showAlternateOptions",this.viewModel.showAlternateOptions?!1:!0),this.viewModel.attr("showAlternateOptions")||this.element.find(".char-field").first().focus()},"#use-phone-link click":function(e,t){var o=s.twoSV.phoneNumberVerification.trustedPhoneNumbers,i=this;1===o.length?n.sendNewCode(o[0].id,o[0].pushMode).done(function(e){i.element.trigger("codeSent",[e])}).fail(function(e){i.viewModel.attr("allow.sendText",!(423===e.status)),h(e,i.viewModel)}).always(function(e){}):i.element.trigger("usePhone")},"#need-help-link click":function(e,t){this.viewModel.attr("showAlternateOptions",!1),this.viewModel.suppressIforgot?this.viewModel.attr("showNoIforgotHelpDialog",!0):this.viewModel.attr("showHelpDialog",!0)},"#try-again-link click":function(e,t){var o=this;r.pushAuthCode("/auth/verify/trusteddevice/securitycode").fail(function(e,t,n){o.viewModel.attr("allow.resendCode",!(423===e.status)),h(e,o.viewModel)}),o.viewModel.attr("showAlternateOptions",o.viewModel.showAlternateOptions?!1:!0),this.element.find(".char-field").first().focus()},".error click":function(e,t){this.viewModel.attr("errorMessage","")},"#ok click":function(e,t){this.viewModel.attr("showHelpDialog",!1)},"idms-modal modalClose":function(e,t){this.viewModel.attr("showHelpDialog",!1),this.element.find(".char-field").first().focus(),this.viewModel.attr("showNoIforgotHelpDialog",!1)},"{viewModel} showSpinnerFor.verifyingCode":function(e,t,o){var n=this,i="small";o?n.spinner.start($("#verifying-code"),i):n.spinner.stop()},"{viewModel} showSpinnerFor.gettingRecoveryPath":function(e,t,o){var n=this;o?n.spinner.start($("#getting-recovery-path")):n.spinner.stop()}}}),e("default",p)}}}),System.register("frontend/clients/widget/auth/modules/serviceClients/trustBrowserClient.js",["idms/modules/serviceClients/ServiceClient","bootData"],function(e){"use strict";var t,o,n;return{setters:[function(e){t=e["default"]},function(e){o=e.data}],execute:function(){n=function(){},n.prototype=new t,n.prototype.constructor=n,n.prototype.trust=function(e){return this.get({url:o.urlContext+e})},n.prototype.dontTrust=function(e){return this.get({url:o.urlContext+e})},e("default",new n)}}}),System.registerDynamic("frontend/clients/widget/auth/components/trustMyBrowser/trustBrowser.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_1141056514",o.exports}),System.register("frontend/clients/widget/auth/components/trustMyBrowser/trustBrowser.js",["can/view","can/component","widget/auth/components/shared/dialog/dialog","bootData","idms/modules/managers/localizationManager","idms/modules/utils/hashCode","widget/auth/modules/util/spinner","widget/auth/modules/serviceClients/trustBrowserClient","./trustBrowser.jstache!"],function(e){"use strict";var t,o,n,i,r,s,a,l;return{setters:[function(e){t=e["default"]},function(e){},function(e){},function(e){o=e.data},function(e){n=e["default"]},function(e){i=e["default"]},function(e){r=e["default"]},function(e){s=e["default"]},function(e){a=e["default"]}],execute:function(){l=t.Component.extend({tag:"trust-browser",template:t.view(a),viewModel:{dialog:{title:n.getString("trustThisBrowserTitle"),showAppleLogo:!1,titleAlign:"center",bodyAlign:"center",theme:"translucent",btnOpts:{btnTexts:[n.getString("trustThisBrowserBtnTrust"),n.getString("trustThisBrowserBtnDontTrust")],direction:"center"}},isSA:!1,hideDialog:!1,dialogClick:function(e,t){var o=this;if(o.attr("hideDialog",!0),r.start($("#trust")),e==i.getHashCode(n.getString("trustThisBrowserBtnTrust").trim().toLowerCase())){var o=this;s.trust("/auth/2sv/trust").done(function(e,t,o){$("trust-browser").trigger("complete",[o])}).fail(function(e,t,o){$("trust-browser").trigger("complete",[o])})}else if(e==i.getHashCode(n.getString("trustThisBrowserBtnDontTrust").trim().toLowerCase())){var o=this;s.trust("/auth/2sv/donttrust").done(function(e,t,o){$("trust-browser").trigger("complete",[o])}).fail(function(e,t,o){$("trust-browser").trigger("complete",[o])})}else"idms-modal"===t.toLowerCase()&&this.element.trigger("complete")}},events:{inserted:function(e,t){},"idms-modal modalClose":function(e,t){this.viewModel.attr("hideDialog")===!1&&(this.viewModel.attr("hideDialog",!0),this.element.trigger("complete"))}}}),e("default",l)}}}),System.registerDynamic("frontend/clients/widget/auth/components/hsa2/hsa2.jstache!frontend/node_modules/idms-web-components/modules/plugins/jstache/systemjs/jstache2.js",[],!0,function(e,t,o){return o.exports="jstache_1108483186",o.exports}),System.register("frontend/clients/widget/auth/components/hsa2/hsa2.js",["can/view","can/component","widget/auth/components/choosePhone/choosePhone","widget/auth/components/verifyPhone/verifyPhone","widget/auth/components/verifyDevice/verifyDevice","idms/modules/helpers/str_eq","widget/auth/components/trustMyBrowser/trustBrowser","bootData","idms/modules/managers/localizationManager","./hsa2.jstache!"],function(e){"use strict";var t,o,n,i,r,s;return{setters:[function(e){t=e["default"]},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){o=e.data},function(e){n=e["default"]},function(e){i=e["default"]}],execute:function(){r=function(e,t,o){e.attr("lastCodeSentToPhone",o),t.responseJSON?e.attr("codeSentToPhone",t.responseJSON):e.attr("codeSentToPhone",t),e.attr("section","verifyPhone")},s=t.Component.extend({tag:"hsa2",template:t.view(i),viewModel:{section:"",selectedPhone:null,xhr:null,suppressIforgot:!1},init:function(e,t){},events:{inserted:function(){this.element.trigger("__inserted"),o.hasTrustedDevices?this.viewModel.attr("section","verifyDevice"):o.twoSV.phoneNumberVerification&&(o.twoSV.phoneNumberVerification.trustedPhoneNumbers?0===o.twoSV.phoneNumberVerification.trustedPhoneNumbers.length||(1===o.twoSV.phoneNumberVerification.trustedPhoneNumbers.length?r(this.viewModel,o.twoSV.phoneNumberVerification):o.twoSV.phoneNumberVerification.trustedPhoneNumbers.length>1&&this.viewModel.attr("section","phones")):(o.twoSV.phoneNumberVerification.trustedPhoneNumbers=[],o.twoSV.phoneNumberVerification.trustedPhoneNumbers.push(o.twoSV.phoneNumberVerification),r(this.viewModel,o.twoSV.phoneNumberVerification)))},"phones phoneSelected":function(e,t,o,n){r(this.viewModel,o,n)},"verify-phone authCompleted":function(e,t,n){o.is2SVTrustEligible?(n&&this.viewModel.attr("xhr",n),this.viewModel.attr("section","trustMyBrowser")):this.element.trigger("authSuccess",n)},"verify-phone next_409":function(e,t,o){this.element.trigger("next_409",[o])},"verify-phone noTrustedPhones":function(e,t){this.viewModel.attr("section","phones")},"verify-phone usePhone":function(e,t){this.viewModel.attr("section","phones")},"verify-device codeSent":function(e,t,o){r(this.viewModel,o)},"verify-device authCompleted":function(e,t,n){o.is2SVTrustEligible?(n&&this.viewModel.attr("xhr",n),this.viewModel.attr("section","trustMyBrowser")):this.element.trigger("authSuccess",n)},"verify-device usePhone":function(e,t){this.viewModel.attr("section","phones")},"verify-device next_409":function(e,t,o){this.element.trigger("next_409",[o])},"trust-browser complete":function(e,t,o){o?this.element.trigger("authSuccess",o):this.element.trigger("authSuccess",this.viewModel.xhr)}}}),e("default",s)}}});
