
    
/*!
 * @license
 * ==========================================================================
 * Copyright (c) 2015 Denis Pushkarev
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * ==========================================================================
 */

    

    
/*!
 * @license
 * ==========================================================================
 * https://github.com/es-shims/es5-shim
 *
 * The MIT License (MIT)
 *
 * Copyright (C) 2009-2014 Kristopher Michael Kowal and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * ==========================================================================
 */

    

    
/*!
 * @license
 * ==========================================================================
 * https://developer.mozilla.org/en-US/docs/Web/API/Element.classList
 *
 * The MIT License (MIT)
 * 
 * Copyright (c) 2009-2013 Jonathan_Watt and Mozilla Contributors
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * ==========================================================================
 */


/*!
 * @license
 * ==========================================================================
 * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener
 *
 * Any copyright is dedicated to the Public Domain. http://creativecommons.org/publicdomain/zero/1.0/
 * ==========================================================================
*/

    

    
/*!
 * @license
 * ==========================================================================
 * https://github.com/spicyj/jquery-splendid-textchange
 *
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013 Ben Alpert
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * ==========================================================================
 */

    

    
/*!
 * @license
 * ==========================================================================
 * https://github.com/jakearchibald/es6-promise

 * Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
 * of the Software, and to permit persons to whom the Software is furnished to do
 * so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * ==========================================================================
 */

    



var main;


(function (global) {
    
        
var n$20,
    n$292,
    n$11,
    n$23,
    n$22,
    n$901,
    n$24,
    n$102,
    n$25,
    n$28,
    n$26,
    n$27,
    n$17,
    n$30,
    n$31,
    n$32,
    n$29,
    n$33,
    n$34,
    n$37,
    n$39,
    n$35,
    n$36,
    n$38,
    n$164,
    n$40,
    n$41,
    n$51,
    n$45,
    n$43,
    n$44,
    n$15,
    n$16,
    n$47,
    n$46,
    n$48,
    n$49,
    n$52,
    n$53,
    n$50,
    n$54,
    n$5,
    n$42,
    n$84,
    n$902,
    n$80,
    n$55,
    n$56,
    n$57,
    n$58,
    n$59,
    n$60,
    n$61,
    n$903,
    n$3,
    n$4,
    n$62,
    n$19,
    n$209,
    n$63,
    n$66,
    n$65,
    n$67,
    n$70,
    n$71,
    n$72,
    n$73,
    n$68,
    n$69,
    n$904,
    n$905,
    n$74,
    n$13,
    n$14,
    n$165,
    n$10,
    n$78,
    n$79,
    n$8,
    n$9,
    n$81,
    n$906,
    n$82,
    n$83,
    n$556,
    n$85,
    n$907,
    n$106,
    n$86,
    n$94,
    n$87,
    n$88,
    n$89,
    n$90,
    n$91,
    n$92,
    n$95,
    n$93,
    n$96,
    n$97,
    n$99,
    n$98,
    n$100,
    n$101,
    n$104,
    n$105,
    n$107,
    n$108,
    n$109,
    n$110,
    n$908,
    n$111,
    n$909,
    n$77,
    n$6,
    n$76,
    n$7,
    n$170,
    n$75,
    n$12,
    n$216,
    n$125,
    n$155,
    n$910,
    n$135,
    n$126,
    n$127,
    n$129,
    n$130,
    n$128,
    n$131,
    n$133,
    n$132,
    n$134,
    n$136,
    n$156,
    n$509,
    n$911,
    n$912,
    n$146,
    n$138,
    n$142,
    n$913,
    n$140,
    n$139,
    n$141,
    n$147,
    n$914,
    n$148,
    n$143,
    n$144,
    n$149,
    n$145,
    n$150,
    n$151,
    n$152,
    n$153,
    n$154,
    n$157,
    n$196,
    n$197,
    n$174,
    n$178,
    n$159,
    n$915,
    n$916,
    n$917,
    n$918,
    n$160,
    n$161,
    n$162,
    n$163,
    n$166,
    n$167,
    n$179,
    n$168,
    n$183,
    n$181,
    n$182,
    n$184,
    n$176,
    n$171,
    n$173,
    n$919,
    n$172,
    n$175,
    n$158,
    n$169,
    n$920,
    n$177,
    n$185,
    n$180,
    n$589,
    n$186,
    n$187,
    n$188,
    n$189,
    n$190,
    n$191,
    n$192,
    n$193,
    n$194,
    n$198,
    n$217,
    n$199,
    n$215,
    n$213,
    n$921,
    n$896,
    n$200,
    n$201,
    n$206,
    n$207,
    n$202,
    n$208,
    n$203,
    n$204,
    n$205,
    n$210,
    n$298,
    n$310,
    n$211,
    n$212,
    n$214,
    n$588,
    n$290,
    n$922,
    n$260,
    n$218,
    n$219,
    n$103,
    n$223,
    n$220,
    n$221,
    n$923,
    n$222,
    n$224,
    n$225,
    n$251,
    n$252,
    n$924,
    n$226,
    n$227,
    n$228,
    n$229,
    n$253,
    n$230,
    n$232,
    n$234,
    n$254,
    n$231,
    n$233,
    n$255,
    n$256,
    n$235,
    n$237,
    n$238,
    n$239,
    n$236,
    n$240,
    n$241,
    n$257,
    n$258,
    n$242,
    n$750,
    n$925,
    n$243,
    n$259,
    n$244,
    n$245,
    n$261,
    n$246,
    n$248,
    n$247,
    n$249,
    n$250,
    n$262,
    n$926,
    n$927,
    n$472,
    n$386,
    n$294,
    n$267,
    n$268,
    n$274,
    n$288,
    n$269,
    n$270,
    n$287,
    n$289,
    n$263,
    n$285,
    n$271,
    n$286,
    n$378,
    n$928,
    n$929,
    n$264,
    n$280,
    n$265,
    n$272,
    n$266,
    n$273,
    n$279,
    n$275,
    n$282,
    n$930,
    n$283,
    n$276,
    n$278,
    n$931,
    n$932,
    n$277,
    n$281,
    n$284,
    n$291,
    n$295,
    n$427,
    n$515,
    n$439,
    n$297,
    n$724,
    n$305,
    n$424,
    n$514,
    n$836,
    n$299,
    n$528,
    n$300,
    n$301,
    n$302,
    n$933,
    n$364,
    n$934,
    n$355,
    n$303,
    n$304,
    n$317,
    n$306,
    n$437,
    n$935,
    n$936,
    n$937,
    n$938,
    n$319,
    n$307,
    n$499,
    n$500,
    n$308,
    n$366,
    n$318,
    n$452,
    n$325,
    n$314,
    n$315,
    n$316,
    n$320,
    n$321,
    n$324,
    n$371,
    n$328,
    n$336,
    n$327,
    n$329,
    n$346,
    n$347,
    n$337,
    n$332,
    n$333,
    n$334,
    n$335,
    n$338,
    n$330,
    n$340,
    n$342,
    n$343,
    n$344,
    n$341,
    n$345,
    n$348,
    n$349,
    n$326,
    n$339,
    n$350,
    n$351,
    n$353,
    n$331,
    n$352,
    n$363,
    n$356,
    n$357,
    n$359,
    n$358,
    n$360,
    n$939,
    n$361,
    n$365,
    n$362,
    n$369,
    n$370,
    n$372,
    n$367,
    n$940,
    n$447,
    n$375,
    n$376,
    n$374,
    n$377,
    n$516,
    n$379,
    n$380,
    n$381,
    n$382,
    n$476,
    n$475,
    n$387,
    n$383,
    n$384,
    n$385,
    n$388,
    n$462,
    n$421,
    n$398,
    n$391,
    n$392,
    n$941,
    n$393,
    n$399,
    n$394,
    n$395,
    n$400,
    n$397,
    n$401,
    n$418,
    n$402,
    n$404,
    n$942,
    n$406,
    n$405,
    n$407,
    n$409,
    n$414,
    n$411,
    n$562,
    n$412,
    n$413,
    n$416,
    n$419,
    n$420,
    n$422,
    n$423,
    n$425,
    n$426,
    n$473,
    n$428,
    n$943,
    n$464,
    n$467,
    n$430,
    n$431,
    n$432,
    n$944,
    n$468,
    n$433,
    n$434,
    n$633,
    n$446,
    n$448,
    n$435,
    n$436,
    n$438,
    n$440,
    n$443,
    n$449,
    n$368,
    n$450,
    n$309,
    n$451,
    n$455,
    n$453,
    n$456,
    n$454,
    n$458,
    n$457,
    n$460,
    n$459,
    n$461,
    n$469,
    n$463,
    n$470,
    n$465,
    n$945,
    n$466,
    n$478,
    n$505,
    n$471,
    n$373,
    n$474,
    n$477,
    n$517,
    n$946,
    n$479,
    n$480,
    n$481,
    n$486,
    n$482,
    n$483,
    n$484,
    n$487,
    n$485,
    n$488,
    n$518,
    n$442,
    n$441,
    n$493,
    n$495,
    n$496,
    n$492,
    n$494,
    n$497,
    n$502,
    n$498,
    n$501,
    n$503,
    n$504,
    n$506,
    n$491,
    n$507,
    n$629,
    n$489,
    n$508,
    n$510,
    n$512,
    n$513,
    n$519,
    n$323,
    n$429,
    n$897,
    n$522,
    n$521,
    n$523,
    n$524,
    n$525,
    n$947,
    n$527,
    n$529,
    n$674,
    n$531,
    n$532,
    n$533,
    n$822,
    n$948,
    n$675,
    n$535,
    n$536,
    n$537,
    n$538,
    n$676,
    n$677,
    n$678,
    n$679,
    n$680,
    n$540,
    n$545,
    n$546,
    n$542,
    n$543,
    n$547,
    n$681,
    n$573,
    n$549,
    n$553,
    n$551,
    n$554,
    n$552,
    n$555,
    n$949,
    n$950,
    n$558,
    n$557,
    n$951,
    n$952,
    n$559,
    n$569,
    n$561,
    n$566,
    n$563,
    n$953,
    n$564,
    n$565,
    n$567,
    n$568,
    n$570,
    n$574,
    n$682,
    n$683,
    n$578,
    n$579,
    n$684,
    n$954,
    n$580,
    n$591,
    n$592,
    n$582,
    n$585,
    n$586,
    n$587,
    n$593,
    n$685,
    n$595,
    n$610,
    n$596,
    n$597,
    n$598,
    n$599,
    n$600,
    n$607,
    n$604,
    n$603,
    n$602,
    n$605,
    n$955,
    n$606,
    n$608,
    n$609,
    n$611,
    n$686,
    n$614,
    n$612,
    n$613,
    n$615,
    n$622,
    n$616,
    n$617,
    n$623,
    n$618,
    n$956,
    n$619,
    n$620,
    n$624,
    n$625,
    n$661,
    n$957,
    n$626,
    n$638,
    n$627,
    n$634,
    n$958,
    n$879,
    n$959,
    n$628,
    n$635,
    n$630,
    n$636,
    n$632,
    n$637,
    n$639,
    n$640,
    n$641,
    n$644,
    n$645,
    n$643,
    n$652,
    n$662,
    n$658,
    n$960,
    n$659,
    n$660,
    n$667,
    n$663,
    n$669,
    n$664,
    n$665,
    n$670,
    n$666,
    n$668,
    n$671,
    n$673,
    n$687,
    n$695,
    n$696,
    n$444,
    n$690,
    n$691,
    n$697,
    n$886,
    n$699,
    n$887,
    n$704,
    n$700,
    n$701,
    n$705,
    n$702,
    n$961,
    n$703,
    n$706,
    n$707,
    n$708,
    n$714,
    n$709,
    n$710,
    n$962,
    n$715,
    n$716,
    n$717,
    n$963,
    n$711,
    n$718,
    n$719,
    n$736,
    n$712,
    n$720,
    n$726,
    n$698,
    n$723,
    n$727,
    n$728,
    n$732,
    n$964,
    n$733,
    n$730,
    n$731,
    n$734,
    n$965,
    n$735,
    n$966,
    n$737,
    n$738,
    n$967,
    n$823,
    n$810,
    n$739,
    n$740,
    n$741,
    n$742,
    n$745,
    n$743,
    n$744,
    n$968,
    n$811,
    n$746,
    n$812,
    n$808,
    n$748,
    n$806,
    n$752,
    n$749,
    n$751,
    n$969,
    n$970,
    n$971,
    n$972,
    n$768,
    n$769,
    n$973,
    n$974,
    n$975,
    n$756,
    n$757,
    n$976,
    n$977,
    n$758,
    n$978,
    n$979,
    n$980,
    n$981,
    n$753,
    n$754,
    n$760,
    n$755,
    n$800,
    n$762,
    n$761,
    n$763,
    n$759,
    n$791,
    n$792,
    n$793,
    n$765,
    n$766,
    n$794,
    n$767,
    n$780,
    n$795,
    n$796,
    n$982,
    n$770,
    n$983,
    n$775,
    n$771,
    n$772,
    n$773,
    n$776,
    n$984,
    n$778,
    n$779,
    n$786,
    n$787,
    n$985,
    n$783,
    n$986,
    n$784,
    n$788,
    n$789,
    n$790,
    n$797,
    n$782,
    n$804,
    n$801,
    n$802,
    n$803,
    n$805,
    n$807,
    n$809,
    n$813,
    n$987,
    n$818,
    n$816,
    n$814,
    n$817,
    n$819,
    n$820,
    n$821,
    n$825,
    n$831,
    n$832,
    n$988,
    n$827,
    n$828,
    n$830,
    n$989,
    n$833,
    n$834,
    n$888,
    n$835,
    n$838,
    n$837,
    n$839,
    n$840,
    n$990,
    n$874,
    n$872,
    n$991,
    n$844,
    n$843,
    n$490,
    n$845,
    n$847,
    n$857,
    n$848,
    n$849,
    n$851,
    n$853,
    n$854,
    n$858,
    n$859,
    n$860,
    n$873,
    n$869,
    n$864,
    n$870,
    n$867,
    n$868,
    n$871,
    n$875,
    n$876,
    n$885,
    n$889,
    n$882,
    n$890,
    n$891,
    n$992,
    n$892,
    n$993,
    n$884,
    n$893,
    n$894,
    n$895,
    n$520,
    n$898,
    n$899,
    n$994,
    n$311,
    n$312,
    n$313,
    n$654,
    n$995,
    n$996,
    n$997,
    n$998,
    n$655,
    n$656,
    n$657,
    n$417,
    n$541,
    n$581,
    n$584,
    n$781,
    n$798,
    n$900,
    n$646,
    n$647,
    n$648,
    n$649,
    n$650,
    n$651,
    n$856,
    n$880,
    n$881;
var n$18 = [];

    
    
        
n$417 = "{\n   \"Alert.Details.Label\" : \"詳細資訊\"\n}";
    
    
        
n$541 = "{\n   \"Date.Day.StandAlone.Tuesday.Abbreviated\" : \"週二\",\n   \"Date.Month.Prepositional.December.Abbreviated\" : \"12\",\n   \"Date.Month.StandAlone.December.Abbreviated\" : \"12月\",\n   \"Date.Quarter.StandAlone.Q4.Full\" : \"第 4 季\",\n   \"Date.Day.StandAlone.Saturday.Abbreviated\" : \"週六\",\n   \"Date.Day.Tuesday.Full\" : \"星期二\",\n   \"Date.Month.Prepositional.September.Full\" : \"9\",\n   \"Date.Month.StandAlone.November.Abbreviated\" : \"11月\",\n   \"Date.Month.StandAlone.September.Letter\" : \"9\",\n   \"Date.Month.February.Abbreviated\" : \"2月\",\n   \"Date.Month.StandAlone.January.Abbreviated\" : \"1月\",\n   \"Date.Day.Sunday.Letter\" : \"日\",\n   \"Date.Month.Prepositional.November.Letter\" : \"11\",\n   \"Date.Month.StandAlone.June.Letter\" : \"6\",\n   \"Date.Month.StandAlone.March.Full\" : \"3月\",\n   \"Date.Quarter.StandAlone.Q2.Full\" : \"第 2 季\",\n   \"Date.Day.Monday.Abbreviated\" : \"週一\",\n   \"Date.Era.BC.Full\" : \"紀元前\",\n   \"Date.Month.December.Full\" : \"12月\",\n   \"Date.Day.StandAlone.Thursday.Abbreviated\" : \"週四\",\n   \"Date.Month.June.Letter\" : \"6\",\n   \"Date.Day.Saturday.Full\" : \"星期六\",\n   \"Date.Month.January.Full\" : \"1月\",\n   \"Date.Day.Sunday.Full\" : \"星期日\",\n   \"Date.Quarter.Q2.Abbreviated\" : \"Q2\",\n   \"Date.Month.Prepositional.October.Abbreviated\" : \"10\",\n   \"Date.Month.August.Letter\" : \"8\",\n   \"Date.Day.Thursday.Full\" : \"星期四\",\n   \"Date.Day.StandAlone.Tuesday.Full\" : \"星期二\",\n   \"Date.Month.StandAlone.July.Full\" : \"7月\",\n   \"Date.Month.March.Abbreviated\" : \"3月\",\n   \"Date.Month.StandAlone.October.Abbreviated\" : \"10月\",\n   \"Date.Day.Thursday.Letter\" : \"四\",\n   \"Date.Month.StandAlone.June.Abbreviated\" : \"6月\",\n   \"Date.Month.Prepositional.October.Letter\" : \"10\",\n   \"Date.Month.StandAlone.May.Abbreviated\" : \"5月\",\n   \"Date.Day.StandAlone.Thursday.Letter\" : \"四\",\n   \"Date.Month.September.Full\" : \"9月\",\n   \"Date.Month.Prepositional.March.Full\" : \"3\",\n   \"Date.Month.Prepositional.June.Full\" : \"6\",\n   \"Date.Month.March.Letter\" : \"3\",\n   \"Date.Period.PM\" : \"下午\",\n   \"Date.Quarter.Q4.Abbreviated\" : \"Q4\",\n   \"Date.Month.April.Letter\" : \"4\",\n   \"Date.Month.Prepositional.September.Letter\" : \"9\",\n   \"Date.Month.Prepositional.December.Letter\" : \"12\",\n   \"Date.Day.StandAlone.Saturday.Letter\" : \"六\",\n   \"Date.Month.April.Abbreviated\" : \"4月\",\n   \"Date.Month.July.Full\" : \"7月\",\n   \"Date.Day.StandAlone.Friday.Full\" : \"星期五\",\n   \"Date.Day.Saturday.Letter\" : \"六\",\n   \"Date.Month.June.Abbreviated\" : \"6月\",\n   \"Date.Day.StandAlone.Sunday.Full\" : \"星期日\",\n   \"Date.Quarter.StandAlone.Q4.Abbreviated\" : \"Q4\",\n   \"Date.Month.November.Letter\" : \"11\",\n   \"Date.Quarter.Q3.Full\" : \"第 3 季\",\n   \"Date.Day.Tuesday.Letter\" : \"二\",\n   \"Date.Month.StandAlone.April.Abbreviated\" : \"4月\",\n   \"Date.Month.Prepositional.March.Letter\" : \"3\",\n   \"Date.Month.StandAlone.April.Letter\" : \"4\",\n   \"Date.Day.StandAlone.Friday.Abbreviated\" : \"週五\",\n   \"Date.Day.Friday.Letter\" : \"五\",\n   \"Date.Month.June.Full\" : \"6月\",\n   \"Date.Day.StandAlone.Sunday.Abbreviated\" : \"週日\",\n   \"Date.Day.Wednesday.Letter\" : \"三\",\n   \"Date.Day.Wednesday.Full\" : \"星期三\",\n   \"Date.Month.StandAlone.June.Full\" : \"6月\",\n   \"Date.Day.Tuesday.Abbreviated\" : \"週二\",\n   \"Date.Day.StandAlone.Thursday.Full\" : \"星期四\",\n   \"Date.Month.October.Full\" : \"10月\",\n   \"Date.Period.AM\" : \"上午\",\n   \"Date.Month.Prepositional.August.Full\" : \"8月\",\n   \"Date.Month.Prepositional.November.Full\" : \"11\",\n   \"Date.Quarter.Q1.Abbreviated\" : \"Q1\",\n   \"Date.Day.Sunday.Abbreviated\" : \"週日\",\n   \"Date.Month.September.Abbreviated\" : \"9月\",\n   \"Date.Month.StandAlone.August.Letter\" : \"8\",\n   \"Date.Month.StandAlone.September.Abbreviated\" : \"9月\",\n   \"Date.Month.July.Abbreviated\" : \"7月\",\n   \"Date.Month.StandAlone.October.Letter\" : \"10\",\n   \"Date.Month.Prepositional.May.Abbreviated\" : \"5\",\n   \"Date.Month.February.Full\" : \"2月\",\n   \"Date.Month.StandAlone.April.Full\" : \"4月\",\n   \"Date.Month.November.Full\" : \"11月\",\n   \"Date.Month.Prepositional.November.Abbreviated\" : \"11\",\n   \"Date.Month.Prepositional.March.Abbreviated\" : \"3\",\n   \"Date.Month.January.Letter\" : \"1\",\n   \"Date.Day.Monday.Full\" : \"星期一\",\n   \"Date.Month.Prepositional.April.Letter\" : \"4\",\n   \"Date.Month.StandAlone.August.Abbreviated\" : \"8月\",\n   \"Date.Month.Prepositional.May.Letter\" : \"5\",\n   \"Date.Month.StandAlone.May.Letter\" : \"5\",\n   \"Date.Month.Prepositional.August.Abbreviated\" : \"8月\",\n   \"Date.Era.BC.Letter\" : \"紀元前\",\n   \"Date.Month.StandAlone.July.Abbreviated\" : \"7月\",\n   \"Date.Day.StandAlone.Monday.Full\" : \"星期一\",\n   \"Date.Month.May.Abbreviated\" : \"5月\",\n   \"Date.Quarter.StandAlone.Q2.Abbreviated\" : \"Q2\",\n   \"Date.Month.StandAlone.December.Full\" : \"12月\",\n   \"Date.Month.StandAlone.September.Full\" : \"9月\",\n   \"Date.Month.StandAlone.November.Letter\" : \"11\",\n   \"Date.Month.StandAlone.January.Letter\" : \"1\",\n   \"Date.Month.December.Abbreviated\" : \"12月\",\n   \"Date.Quarter.Q1.Full\" : \"第 1 季\",\n   \"Date.Day.Thursday.Abbreviated\" : \"週四\",\n   \"Date.Month.Prepositional.December.Full\" : \"12\",\n   \"Date.Month.Prepositional.July.Abbreviated\" : \"7\",\n   \"Date.Day.Friday.Full\" : \"星期五\",\n   \"Date.Quarter.Q3.Abbreviated\" : \"Q3\",\n   \"Date.Month.StandAlone.July.Letter\" : \"7\",\n   \"Date.Quarter.Q4.Full\" : \"第 4 季\",\n   \"Date.Day.Wednesday.Abbreviated\" : \"週三\",\n   \"Date.Month.Prepositional.April.Abbreviated\" : \"4月\",\n   \"Date.Day.StandAlone.Tuesday.Letter\" : \"二\",\n   \"Date.Month.StandAlone.December.Letter\" : \"12\",\n   \"Date.Day.Friday.Abbreviated\" : \"週五\",\n   \"Date.Era.BC.Abbreviated\" : \"紀元前\",\n   \"Date.Day.StandAlone.Monday.Letter\" : \"一\",\n   \"Date.Month.StandAlone.January.Full\" : \"1月\",\n   \"Date.Month.Prepositional.February.Letter\" : \"2\",\n   \"Date.Day.StandAlone.Friday.Letter\" : \"五\",\n   \"Date.Month.Prepositional.April.Full\" : \"4月\",\n   \"Date.Month.October.Abbreviated\" : \"10月\",\n   \"Date.Month.August.Full\" : \"8月\",\n   \"Date.Month.October.Letter\" : \"10\",\n   \"Date.Month.StandAlone.August.Full\" : \"8月\",\n   \"Date.Quarter.StandAlone.Q3.Abbreviated\" : \"Q3\",\n   \"Date.Era.AD.Full\" : \"西元\",\n   \"Date.Month.StandAlone.May.Full\" : \"5月\",\n   \"Date.Month.April.Full\" : \"4月\",\n   \"Date.Month.StandAlone.March.Letter\" : \"3\",\n   \"Date.Month.Prepositional.June.Abbreviated\" : \"6\",\n   \"Date.Month.May.Letter\" : \"5\",\n   \"Date.Quarter.StandAlone.Q1.Abbreviated\" : \"Q1\",\n   \"Date.Month.May.Full\" : \"5月\",\n   \"Date.Day.StandAlone.Wednesday.Full\" : \"星期三\",\n   \"Date.Month.Prepositional.January.Full\" : \"1\",\n   \"Date.Month.Prepositional.May.Full\" : \"5\",\n   \"Date.Month.Prepositional.February.Abbreviated\" : \"2\",\n   \"Date.Month.StandAlone.November.Full\" : \"11月\",\n   \"Date.Day.StandAlone.Sunday.Letter\" : \"日\",\n   \"Date.Month.Prepositional.July.Letter\" : \"7\",\n   \"Date.Month.StandAlone.March.Abbreviated\" : \"3月\",\n   \"Date.Month.Prepositional.August.Letter\" : \"8\",\n   \"Date.Month.Prepositional.January.Abbreviated\" : \"1\",\n   \"Date.Month.StandAlone.February.Abbreviated\" : \"2月\",\n   \"Date.Era.AD.Letter\" : \"西元\",\n   \"Date.Month.February.Letter\" : \"2\",\n   \"Date.Month.Prepositional.January.Letter\" : \"1\",\n   \"Date.Quarter.StandAlone.Q1.Full\" : \"第 1 季\",\n   \"Date.Month.Prepositional.February.Full\" : \"2\",\n   \"Date.Day.StandAlone.Wednesday.Abbreviated\" : \"週三\",\n   \"Date.Month.November.Abbreviated\" : \"11月\",\n   \"Date.Quarter.Q2.Full\" : \"第 2 季\",\n   \"Date.Month.August.Abbreviated\" : \"8月\",\n   \"Date.Day.StandAlone.Wednesday.Letter\" : \"三\",\n   \"Date.Month.StandAlone.February.Full\" : \"2月\",\n   \"Date.Month.StandAlone.February.Letter\" : \"2\",\n   \"Date.Day.StandAlone.Saturday.Full\" : \"星期六\",\n   \"Date.Day.StandAlone.Monday.Abbreviated\" : \"週一\",\n   \"Date.Month.Prepositional.October.Full\" : \"10\",\n   \"Date.Month.Prepositional.September.Abbreviated\" : \"9\",\n   \"Date.Day.Monday.Letter\" : \"一\",\n   \"Date.Day.Saturday.Abbreviated\" : \"週六\",\n   \"Date.Month.Prepositional.July.Full\" : \"7\",\n   \"Date.Era.AD.Abbreviated\" : \"西元\",\n   \"Date.Month.January.Abbreviated\" : \"1月\",\n   \"Date.Month.StandAlone.October.Full\" : \"10月\",\n   \"Date.Quarter.StandAlone.Q3.Full\" : \"第 3 季\",\n   \"Date.Month.Prepositional.June.Letter\" : \"6\",\n   \"Date.Month.March.Full\" : \"3月\",\n   \"Date.Month.July.Letter\" : \"7\",\n   \"Date.Month.September.Letter\" : \"9\",\n   \"Date.Month.December.Letter\" : \"12\"\n}";
    
    
        
n$581 = "{\n   \"Button.Help.Tooltip\" : \"說明與支援\",\n   \"AccountMenu.AccountSettings\" : \"帳號設定\",\n   \"Name.Display.FirstAndFamilyNames\" : \"%{familyName}%{firstName}\",\n   \"AccountMenu.SignOut\" : \"登出\",\n   \"Toolbar.AppSwitcher.Tooltip\" : \"切換應用程式\",\n   \"Toolbar.Button.Action.UserAction\" : \"iCloud 設定與登出\"\n}";
    
    
        
n$584 = "{\n   \"Button.Help.Tooltip\" : \"說明與支援\",\n   \"AccountMenu.AccountSettings\" : \"帳號設定\",\n   \"Name.Display.FirstAndFamilyNames\" : \"%{familyName}%{firstName}\",\n   \"AccountMenu.SignOut\" : \"登出\",\n   \"Toolbar.AppSwitcher.Tooltip\" : \"切換應用程式\",\n   \"Toolbar.Button.Action.UserAction\" : \"iCloud 設定與登出\"\n}";
    
    
        
n$781 = "{\n   \"Share.Validation.TooManyVideos\" : \"影片過多\",\n   \"Facebook.ExplainLogout.Message\" : \"從 Facebook 登出\",\n   \"Facebook.PostToAlbum.Some.Failed\" : \"無法發佈您的部分項目至 Facebook。\",\n   \"Facebook.Cannot.Login.Description\" : \"連接 Facebook 時發生問題。\",\n   \"Facebook.Login.Videos.1\" : \"您必須登入 Facebook 以分享此影片。\",\n   \"Facebook.PostToAlbum.Upload.InProgress\" : \"正在發佈至 Facebook。如果您離開，未完成的上傳將會取消。\",\n   \"Facebook.Login.Photos.More.Videos.More\" : \"您必須登入 Facebook 以分享這些照片和影片。\",\n   \"Facebook.Login.Photos.More\" : \"您必須登入 Facebook 以分享這些照片。\",\n   \"Facebook.MessagePlaceholder\" : \"在此輸入訊息⋯\",\n   \"Facebook.Cannot.Login.Message\" : \"無法登入 Facebook。\",\n   \"Facebook.Login.Videos.More\" : \"您必須登入 Facebook 以分享這些影片。\",\n   \"Facebook.PostToAlbum.Failed.Message\" : \"無法分享至 Facebook。\",\n   \"Facebook.ConfirmCancel.Cancel\" : \"取消\",\n   \"Facebook.ExplainLogout.Cancel\" : \"取消\",\n   \"Share.Validation.FileSizeLimitExceeded\" : \"項目大小超過 %{maxMegabytes} MB。\",\n   \"Facebook.ConfirmCancel.Description\" : \"您已輸入文字。如果取消，您的訊息將會遺失。您仍要取消嗎？\",\n   \"Share.Validation.TooManyPhotos\" : \"照片過多\",\n   \"Facebook.PostToAlbum.1.Failed\" : \"無法發佈您的項目至 Facebook。\",\n   \"Facebook.Cannot.Connect.Description\" : \"連結 Facebook 時發生問題。\",\n   \"Facebook.Error.Description\" : \"發生問題。請嘗試再發佈一次。\",\n   \"Share.Validation.BrowserOutOfDate\" : \"瀏覽器版本太舊。\",\n   \"Share.Validation.VideoSharingDisabled\" : \"目前無法分享影片。\",\n   \"Facebook.Login.Photos.1.Videos.1\" : \"您必須登入 Facebook 以分享此照片和影片。\",\n   \"Toolbar.Album\" : \"相簿⋯\",\n   \"Facebook.Cannot.Logout.Description\" : \"連接 Facebook 時發生問題。\",\n   \"Facebook.ExplainLogout.Description\" : \"若要更換帳號，請從目前使用的 Facebook 帳號登出。\",\n   \"Facebook.PostToAlbum.All.Failed\" : \"無法發佈您的項目至 Facebook。\",\n   \"Facebook.iCloudPermissions\" : \"iCloud 需要權限以分享至 Facebook。\",\n   \"Facebook.Login.Photos.1.Videos.More\" : \"您必須登入 Facebook 以分享此照片和這些影片。\",\n   \"Share.DisplayNames.Email\" : \"郵件\",\n   \"Button.Continue\" : \"繼續\",\n   \"Share.Validation.NotEnoughPhotos\" : \"照片不足\",\n   \"Facebook.UserName\" : \"%{lastName}%{firstName}\",\n   \"Facebook.Login.Photos.More.Videos.1\" : \"您必須登入 Facebook 以分享這些照片和此影片。\",\n   \"Facebook.Error.Message\" : \"無法分享至 Facebook。\",\n   \"Share.VendorButton.Disabled\" : \"「%{vendorName}」無法使用。\",\n   \"Facebook.Cannot.Connect.Message\" : \"無法連接 Facebook。\",\n   \"Facebook.Login.Photos.1\" : \"您必須登入 Facebook 以分享此照片。\",\n   \"Share.Validation.MailNotEnabled\" : \"此帳號的「iCould 郵件」尚未啟用。\",\n   \"Toolbar.Privacy\" : \"隱私權⋯\",\n   \"Facebook.CharacterLimitWarning\" : \"%{length}/%{maxLength}\",\n   \"Facebook.ConfirmCancel.Message\" : \"您確定要取消嗎？\",\n   \"Button.Post\" : \"發佈\",\n   \"Facebook.Timeline\" : \"動態時報\",\n   \"Share.DisplayNames.Facebook\" : \"Facebook\",\n   \"Share.Validation.NotEnoughVideos\" : \"影片不足\",\n   \"Facebook.Login\" : \"您必須登入 Facebook 以分享。\",\n   \"Button.Not.You\" : \"不是您？\",\n   \"Facebook.Cannot.Logout.Message\" : \"無法登出 Facebook。\",\n   \"Facebook.ConfirmCancel.Continue\" : \"繼續\",\n   \"Facebook.ExplainLogout.OpenFacebook\" : \"開啟 Facebook\"\n}";
    
    
        
n$798 = "{\n   \"Share.Validation.TooManyVideos\" : \"影片過多\",\n   \"Facebook.ExplainLogout.Message\" : \"從 Facebook 登出\",\n   \"Facebook.PostToAlbum.Some.Failed\" : \"無法發佈您的部分項目至 Facebook。\",\n   \"Facebook.Cannot.Login.Description\" : \"連接 Facebook 時發生問題。\",\n   \"Facebook.Login.Videos.1\" : \"您必須登入 Facebook 以分享此影片。\",\n   \"Facebook.PostToAlbum.Upload.InProgress\" : \"正在發佈至 Facebook。如果您離開，未完成的上傳將會取消。\",\n   \"Facebook.Login.Photos.More.Videos.More\" : \"您必須登入 Facebook 以分享這些照片和影片。\",\n   \"Facebook.Login.Photos.More\" : \"您必須登入 Facebook 以分享這些照片。\",\n   \"Facebook.MessagePlaceholder\" : \"在此輸入訊息⋯\",\n   \"Facebook.Cannot.Login.Message\" : \"無法登入 Facebook。\",\n   \"Facebook.Login.Videos.More\" : \"您必須登入 Facebook 以分享這些影片。\",\n   \"Facebook.PostToAlbum.Failed.Message\" : \"無法分享至 Facebook。\",\n   \"Facebook.ConfirmCancel.Cancel\" : \"取消\",\n   \"Facebook.ExplainLogout.Cancel\" : \"取消\",\n   \"Share.Validation.FileSizeLimitExceeded\" : \"項目大小超過 %{maxMegabytes} MB。\",\n   \"Facebook.ConfirmCancel.Description\" : \"您已輸入文字。如果取消，您的訊息將會遺失。您仍要取消嗎？\",\n   \"Share.Validation.TooManyPhotos\" : \"照片過多\",\n   \"Facebook.PostToAlbum.1.Failed\" : \"無法發佈您的項目至 Facebook。\",\n   \"Facebook.Cannot.Connect.Description\" : \"連結 Facebook 時發生問題。\",\n   \"Facebook.Error.Description\" : \"發生問題。請嘗試再發佈一次。\",\n   \"Share.Validation.BrowserOutOfDate\" : \"瀏覽器版本太舊。\",\n   \"Share.Validation.VideoSharingDisabled\" : \"目前無法分享影片。\",\n   \"Facebook.Login.Photos.1.Videos.1\" : \"您必須登入 Facebook 以分享此照片和影片。\",\n   \"Toolbar.Album\" : \"相簿⋯\",\n   \"Facebook.Cannot.Logout.Description\" : \"連接 Facebook 時發生問題。\",\n   \"Facebook.ExplainLogout.Description\" : \"若要更換帳號，請從目前使用的 Facebook 帳號登出。\",\n   \"Facebook.PostToAlbum.All.Failed\" : \"無法發佈您的項目至 Facebook。\",\n   \"Facebook.iCloudPermissions\" : \"iCloud 需要權限以分享至 Facebook。\",\n   \"Facebook.Login.Photos.1.Videos.More\" : \"您必須登入 Facebook 以分享此照片和這些影片。\",\n   \"Share.DisplayNames.Email\" : \"郵件\",\n   \"Button.Continue\" : \"繼續\",\n   \"Share.Validation.NotEnoughPhotos\" : \"照片不足\",\n   \"Facebook.UserName\" : \"%{lastName}%{firstName}\",\n   \"Facebook.Login.Photos.More.Videos.1\" : \"您必須登入 Facebook 以分享這些照片和此影片。\",\n   \"Facebook.Error.Message\" : \"無法分享至 Facebook。\",\n   \"Share.VendorButton.Disabled\" : \"「%{vendorName}」無法使用。\",\n   \"Facebook.Cannot.Connect.Message\" : \"無法連接 Facebook。\",\n   \"Facebook.Login.Photos.1\" : \"您必須登入 Facebook 以分享此照片。\",\n   \"Share.Validation.MailNotEnabled\" : \"此帳號的「iCould 郵件」尚未啟用。\",\n   \"Toolbar.Privacy\" : \"隱私權⋯\",\n   \"Facebook.CharacterLimitWarning\" : \"%{length}/%{maxLength}\",\n   \"Facebook.ConfirmCancel.Message\" : \"您確定要取消嗎？\",\n   \"Button.Post\" : \"發佈\",\n   \"Facebook.Timeline\" : \"動態時報\",\n   \"Share.DisplayNames.Facebook\" : \"Facebook\",\n   \"Share.Validation.NotEnoughVideos\" : \"影片不足\",\n   \"Facebook.Login\" : \"您必須登入 Facebook 以分享。\",\n   \"Button.Not.You\" : \"不是您？\",\n   \"Facebook.Cannot.Logout.Message\" : \"無法登出 Facebook。\",\n   \"Facebook.ConfirmCancel.Continue\" : \"繼續\",\n   \"Facebook.ExplainLogout.OpenFacebook\" : \"開啟 Facebook\"\n}";
    
    
        
n$900 = "{\n   \"Toolbar.Folder.Title.Subtitle\" : \"%{dateRange} · %{countString}\",\n   \"Alert.Expunge.Failed.Generic.MultipleItems.Message\" : \"無法刪除部分項目。\",\n   \"FirstRun.Error.Message\" : \"「照片」無法載入您的照片和影片。\",\n   \"FirstRun.Loading.LargeLibrary.Message\" : \"即使您退出 iCloud.com，此程序仍會繼續。\",\n   \"Folder.TimeLapse\" : \"縮時攝影\",\n   \"Alert.Delete.Button.Title\" : \"刪除\",\n   \"Toolbars.AlbumContentsSelection.ContinueButton.Title\" : \"繼續\",\n   \"Alert.Upload.Failed.Validation.Folder.SingleItem.Message\" : \"不支援上傳檔案夾。\",\n   \"OneUp.CloseBurst\" : \"關閉\",\n   \"Alert.Cancel.Button.Title\" : \"取消\",\n   \"RecentlyDeleted.MinutesRemaining.More\" : \"剩餘 %{count} 分鐘\",\n   \"Alert.Remove.SingleItem.Description\" : \"將從此相簿移除此項目，但檔案仍會留在照片圖庫中。\",\n   \"Alert.Add.Failed.Generic.Description\" : \"伺服器發生錯誤，無法新增某一項目。\",\n   \"Alert.Add.Failed.Generic.Message\" : \"無法新增項目。\",\n   \"Date.Range.Days.Of.Week\" : \"%{date1:EEEE} – %{date2:EEEE}\",\n   \"RecentlyDeleted.Explanation\" : \"照片和影片會顯示在刪除前還剩餘多少時間。此時間過後，項目將會被永久刪除。最長可達 40 天。\",\n   \"Date.Range.Same.Month\" : \"%{date1:yyyy}年%{date1:MMMM}%{date1:d} – %{date2:d}日\",\n   \"Alert.Delete.Failed.Generic.Description\" : \"伺服器發生錯誤，無法刪除某一項目。\",\n   \"Upload.Bar.Progress.Status\" : \"已完成 %{completed} 個，共有 %{total} 個\",\n   \"Toolbar.Folder.Info.Tooltip\" : \"檔案夾資訊\",\n   \"Toolbar.OneUp.Title.BurstCount.2\" : \"連拍 (2 張照片)\",\n   \"Alert.Upload.Failed.Server.StorageFull.MultipleItems.Description\" : \"請刪除部分項目，或升級儲存空間方案。\",\n   \"Toolbar.OneUp.ZoomSlider.Tooltip\" : \"縮放\",\n   \"Toolbar.OneUp.Button.Delete.Title\" : \"刪除\",\n   \"EmptyFolder.Message\" : \"空的檔案夾\",\n   \"Albums.Error.LoadFailed.Action\" : \"請稍後再試。\",\n   \"Toolbar.Folder.Title.AssetCount.More\" : \"%{count} 個項目\",\n   \"Moments.SelectMomentButton.Title\" : \"選取時刻\",\n   \"Alert.Upload.Failed.Generic.Generic.SingleItem.Message\" : \"上傳此照片時發生問題。\",\n   \"Alert.Upload.Failed.Generic.Generic.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Alert.Delete.Burst.Description\" : \"所有裝置的 iCloud 照片圖庫將會刪除 %{count} 張相片。\",\n   \"Grid.Footer.SingleItem.Text\" : \"1 個照片和影片\",\n   \"Asset.Info.EV\" : \"ev\",\n   \"Toolbar.OneUp.Favorite.Tooltip\" : \"喜好項目\",\n   \"Alert.LeavingWhileSaving.Message\" : \"Photos 還在儲存您所做的更改。如果您現在離開，將會遺失尚未儲存的變更。\",\n   \"Alert.Add.Failed.Generic.MultipleItems.Message\" : \"無法新增項目。\",\n   \"Alert.Update.Failed.Generic.MultipleItems.Message\" : \"無法更新部分項目。\",\n   \"Date.Range.Same.Day.Today\" : \"今天\",\n   \"RecentlyDeleted.DaysRemaining.More\" : \"剩餘 %{count} 天\",\n   \"RecentlyDeleted.MinutesRemaining.1\" : \"剩餘 1 分鐘\",\n   \"Alert.Expunge.SingleVideo.Message\" : \"永久刪除影片？\",\n   \"Alert.Remove.Failed.Generic.MultipleItems.Message\" : \"無法移除部分項目。\",\n   \"Alert.Rename.Failed.Generic.SingleAlbum.Message\" : \"無法重新命名相簿。\",\n   \"EmptyAlbum.Advice\" : \"從您的資料庫加入照片和影片，或是將照片拖曳至此視窗以上傳新的照片。\",\n   \"Alert.Download.Failed.Generic.Message.2\" : \"下載這些項目時發生問題。\",\n   \"FirstRun.Loading.Message\" : \"正在準備您的照片圖庫…這可能需要幾分鐘。\",\n   \"Alert.Remove.SingleVideo.Description\" : \"將從此相簿移除這部影片，但檔案仍會留在照片圖庫中。\",\n   \"Alert.Expunge.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法刪除部分項目。\",\n   \"Grid.Footer.UpdatedAt.Text\" : \"上傳時間 %{dateUpdated:a}%{dateUpdated:h}:%{dateUpdated:mm}\",\n   \"Alert.Upload.Failed.Validation.FileFormat.MultipleItems.Message\" : \"%{count} 個檔案無法上傳。\",\n   \"Alert.Upload.Failed.Server.Exif.SingleItem.Description\" : \"照片包含無效的 Exif 元資料。\",\n   \"Album.SmartAlbumUnsupported.Advice\" : \"網頁上不支援智慧型相簿。請使用 macOS 版「照片」來檢視或編輯您的智慧型相簿。\",\n   \"EmptyLibrary.Advice\" : \"從您的裝置加入照片和影片，或是將照片拖曳至此視窗以上傳照片。\",\n   \"Alert.Delete.Success.SingleItem.Message\" : \"已移動此項目至「最近刪除」。\",\n   \"Date.Range.Same.Day.Day.Of.Week\" : \"%{date1:EEEE}\",\n   \"Date.Range.Same.Day.Today.Same.Time\" : \"%{date1:a}%{date1:h}:%{date1:mm}\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Photo.SingleItem.Description\" : \"照片超過所允許的附件大小上限 (%{maxFileSizeInMB} MB)。\",\n   \"OneUp.ExpandBurst\" : \"展開\",\n   \"Alert.Remove.SinglePhoto.Message\" : \"從相簿中移除照片？\",\n   \"Alert.Delete.SinglePhoto.Description\" : \"所有裝置的 iCloud 照片圖庫將會刪除此照片。\",\n   \"Alert.Expunge.Burst.Message\" : \"永久刪除 Burst 連拍？\",\n   \"Date.Range.Same.Day.Tomorrow\" : \"明天\",\n   \"Alert.Upload.Failed.Validation.FileFormat.SingleItem.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Folder.Info.DeleteFolder.Title\" : \"刪除檔案夾\",\n   \"Alert.Upload.Failed.Server.Derivative.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Alert.Delete.Success.Description\" : \"在相簿檢視中選擇「最近刪除」以回復或永久刪除照片和影片。將在 30 天後自動永久刪除這些項目。\",\n   \"Date.Range.Day.Of.Week.To.Yesterday\" : \"%{date1:EEEE} – 昨天\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Photo.SingleItem.Message\" : \"無法寄出照片。\",\n   \"Folder.Videos\" : \"影片\",\n   \"Alert.Delete.Success.MultipleItems.Message\" : \"已移動這些項目至「最近刪除」。\",\n   \"Alert.Upload.Failed.Server.StorageFull.Detailed.Description\" : \"可用空間不足。\",\n   \"Alert.Download.MultipleItems.Message\" : \"下載 %{count} 個項目？\",\n   \"Folder.Panoramas\" : \"全景畫面\",\n   \"Alert.Upload.Failed.Validation.FileFormat.SingleItem.Message\" : \"上傳此檔案時發生問題。\",\n   \"FirstRun.Contents.Message\" : \"「照片」App 與「iCloud 照片圖庫」可完美搭配運作，將您所有的照片與影片儲存在 iCloud，並在網上、iPhone、iPad、iPod touch 和 Mac 上皆保持最新狀態。\",\n   \"Alert.Download.Failed.Generic.Message.More\" : \"下載這些項目時發生問題。\",\n   \"Date.Range.Yesterday.To.Today\" : \"昨天 – 今天\",\n   \"Toolbar.Folder.Title.AssetCount.1\" : \"1 個項目\",\n   \"Alert.Upload.Failed.Validation.FileSizeSmall.SingleItem.Message\" : \"上傳此照片時發生問題。\",\n   \"Alert.Delete.SingleItem.Description\" : \"所有裝置的 iCloud 照片圖庫將會刪除此項目。\",\n   \"Alert.Share.GeneralError\" : \"發生錯誤，您的照片無法分享。請稍後再試。\\n\",\n   \"AlbumsPopover.NewAlbum\" : \"新增相簿\",\n   \"Alert.Create.Failed.Generic.SingleAlbum.Description\" : \"由於伺服器發生錯誤，無法建立相簿。\",\n   \"Alert.Upload.Failed.Validation.FileSizeSmall.Detailed.Description\" : \"檔案太小。照片大小必須大於 1 KB。\",\n   \"FirstRun.NotEnabled.Advice\" : \"若要使用「照片」，請前往您 iOS 裝置上的 iCloud 設定，點一下「照片」，然後開啟「iCloud 照片圖庫」。在 Mac 上，開啟「照片」，前往「偏好設定」，然後開啟「iCloud 照片圖庫」。\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Video.SingleItem.Description\" : \"影片超過所允許的附件大小上限 (%{maxFileSizeInMB} MB)。\",\n   \"Alert.Upload.Failed.Server.StorageFull.SingleItem.Description\" : \"請刪除部分項目，或升級儲存空間方案。\",\n   \"Toolbars.Selection.AddToAlbumButton.Title\" : \"新增位置\",\n   \"EmptyFolder.Advice\" : \"此檔案夾未包含相簿。\",\n   \"Toolbar.SavingSpinner.Tooltip\" : \"正在儲存...\",\n   \"Date.Range.Days.Prior.For.Days.Of.The.Week\" : \"6\",\n   \"Folder.AllPhotos\" : \"所有照片\",\n   \"Alert.LeavingWhileDownload.Message\" : \"「照片」正在下載您的檔案。如果您離開，部分檔案將無法下載。\",\n   \"Alert.Share.ErrorTitle\" : \"無法分享照片\",\n   \"Toolbar.OneUp.Title.DateWithYearShort\" : \"%{date:y}年%{date:MMM}%{date:d}日\",\n   \"Alert.Expunge.Button.Title\" : \"刪除\",\n   \"EmptyAlbum.Message.Button.Title\" : \"加入照片和影片\",\n   \"Toolbar.OneUp.Title.Time\" : \"%{date:a}%{date:h}:%{date:mm}\",\n   \"Alert.Create.Failed.Generic.SingleAlbum.Message\" : \"無法建立相簿。\",\n   \"Toolbar.OneUp.ZoomSlider.FitsInWindow\" : \"適中\",\n   \"Alert.Delete.Album.Button.Title\" : \"刪除相簿\",\n   \"Folder.Info.Done.Title\" : \"完成\",\n   \"Folder.Favorites\" : \"喜好項目\",\n   \"Alert.Update.Failed.Generic.Message\" : \"無法更新項目。\",\n   \"RevGeo.Title.EndJoiner.N\" : \" & \",\n   \"Alert.Upload.Failed.Server.StorageFull.MultipleItems.Title\" : \"%{fileName} 及其他 %{count} 個檔案\",\n   \"RecentlyDeleted.HoursRemaining.2\" : \"剩餘 2 小時\",\n   \"Popover.AddToAlbum.NewAlbum.Title\" : \"新增相簿\",\n   \"Toolbar.OneUp.Title.BurstCount.More\" : \"連拍 (%{count} 張照片)\",\n   \"Alert.Upload.Failed.Validation.FileSizeBig.Detailed.Description\" : \"檔案太大。照片大小必須小於 100 MB。\",\n   \"Alert.Email.Failed.Attachment.Generic.Item.SingleItem.Message\" : \"無法寄出項目。\",\n   \"Banner.ExitedHyperion.MultipleDaysRemaining.Description\" : \"您還剩下 %{daysRemaining} 天可以確保您擁有照片和影片的完整副本。\",\n   \"Alert.Email.Failed.Attachment.Generic.Photo.SingleItem.Message\" : \"無法寄出照片。\",\n   \"Toolbars.Selection.UndeleteButton.Title\" : \"回復\",\n   \"Alert.Email.Failed.Attachment.Generic.Video.SingleItem.Description\" : \"伺服器發生錯誤，無法寄出影片。\",\n   \"Alert.Remove.Burst.Description\" : \"將從此相簿移除 %{count} 張照片，但檔案仍會留在照片圖庫中。\",\n   \"Alert.Email.Failed.Attachment.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法寄出項目。\",\n   \"Tab.Collections\" : \"書籤集\",\n   \"Alert.Upload.Failed.Server.Exif.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Toolbars.Selection.CancelButton.Title\" : \"取消\",\n   \"OneUp.Error.LoadFailed.Generic\" : \"無法載入項目\",\n   \"OneUp.Error.LoadFailed.Video\" : \"無法載入影片\",\n   \"Alert.Recover.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法回復部分項目。\",\n   \"Alert.Remove.SingleItem.Message\" : \"從相簿中移除項目？\",\n   \"Toolbars.Selection.RemoveButton.Title\" : \"移除\",\n   \"Toolbar.OneUp.Title.DateShort\" : \"%{date:MMM}%{date:d}日\",\n   \"Date.Range.Today.To.Tomorrow\" : \"今天 – 明天\",\n   \"OneUp.Error.LoadFailed.Burst\" : \"無法載入連拍\",\n   \"RecentlyDeleted.MinutesRemaining.0\" : \"剩餘 0 分鐘\",\n   \"Alert.Remove.SingleVideo.Message\" : \"從相簿中移除影片？\",\n   \"Asset.Info.No.Lens\" : \"沒有鏡頭資訊\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.MultipleItems.Message\" : \"您選取的項目無法寄出。\",\n   \"Tab.Moments\" : \"時刻\",\n   \"Alert.Upload.Failed.Validation.Folder.MultipleItems.Message\" : \"不支援上傳檔案夾。\",\n   \"Alert.Expunge.Failed.Generic.Description\" : \"伺服器發生錯誤，無法刪除某一項目。\",\n   \"Asset.Info.No.Date\" : \"沒有日期資訊\",\n   \"Toolbars.AlbumContentsSelection.SingleItemSelected.Title\" : \"新增一個項目至 %{albumName}\",\n   \"Toolbar.NewAlbum\" : \"新增相簿\",\n   \"Toolbar.OneUp.Title.DateWithYear\" : \"%{date:y}年%{date:MMMM}%{date:d}日\",\n   \"Alert.OK.Button.Title\" : \"好\",\n   \"Alert.Delete.SingleItem.Message\" : \"從所有裝置刪除 1 個項目？\",\n   \"Toolbar.OneUp.AddTo.Tooltip\" : \"新增至相簿\",\n   \"Alert.Upload.Not.Supported.Browser.Message\" : \"此瀏覽器不支援上傳功能。\",\n   \"Asset.Info.KB\" : \"KB\",\n   \"Asset.Info.No.Camera\" : \"沒有相機資訊\",\n   \"FirstRun.Error.Title\" : \"無法載入圖庫\",\n   \"Alert.Unable.Play.Video.Description\" : \"由於伺服器錯誤，無法播放這部影片。\",\n   \"RevGeo.Title.SuffixJoiner\" : \",\",\n   \"Toolbars.Selection.SelectItems.Title\" : \"選取照片和影片\",\n   \"Alert.Delete.Folder.Button.Title\" : \"刪除檔案夾\",\n   \"Alert.Email.Failed.Attachment.Generic.Video.SingleItem.Message\" : \"無法寄出影片。\",\n   \"Toolbar.Folder.Title.AssetCount.0\" : \"0 個項目\",\n   \"Popover.AddToAlbum.Title\" : \"新增至相簿\",\n   \"RevGeo.Title.MidJoiner\" : \", \",\n   \"Toolbar.Select.Photos\" : \"選取照片\",\n   \"Alert.Upload.Failed.Validation.FileSizeBig.MultipleItems.Description\" : \"若要上傳至「照片」，每個檔案不可大於 100 MB。\",\n   \"Moments.DeselectMomentButton.Title\" : \"取消選取時刻\",\n   \"Folder.Info.DeleteAlbum.Title\" : \"刪除相簿\",\n   \"Grid.Footer.NumberOfItems.Text\" : \"%{numberOfItems} 個照片和影片\",\n   \"Toolbar.OneUp.Remove.Tooltip\" : \"移除\",\n   \"Alert.Upload.Failed.Validation.FileSizeBig.SingleItem.Message\" : \"上傳此照片時發生問題。\",\n   \"RecentlyDeleted.HoursRemaining.More\" : \"剩餘 %{count} 小時\",\n   \"Toolbar.OneUp.Email.Tooltip\" : \"電子郵件\",\n   \"Grid.Footer.UpdateNow.Text\" : \"立即更新\",\n   \"Alert.Upload.Failed.Validation.FileSizeSmall.MultipleItems.Description\" : \"若要上傳至「照片」，每個檔案必須大於 1 KB。\",\n   \"Alert.Upload.Failed.Server.Derivative.SingleItem.Description\" : \"請稍後再嘗試上傳照片。\",\n   \"Application.Title\" : \"iCloud 照片\",\n   \"Alert.Expunge.Burst.Description\" : \"將刪除 %{count} 張照片。此動作無法還原。\",\n   \"Alert.Expunge.SingleItem.Message\" : \"永久刪除 1 個項目？\",\n   \"Tab.Years\" : \"年\",\n   \"Alert.Upload.Failed.Validation.Folder.MultipleItems.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Alert.Unable.Play.Video.Message\" : \"無法播放影片。\",\n   \"Toolbar.OneUp.Title.Date.Day.Of.Week\" : \"%{date:EEEE}\",\n   \"Toolbar.OneUp.Title.Date\" : \"%{date:MMMM}%{date:d}日\",\n   \"Alert.Delete.Failed.Generic.SingleFolder.Description\" : \"由於伺服器發生錯誤，無法刪除檔案夾。\",\n   \"FirstRun.Footnote\" : \"* iCloud「照片」需要具有 iOS 8.1 或以上版本，或者 macOS 10.10.3 或以上的版本。\",\n   \"Folder.Hidden\" : \"隱藏\",\n   \"RecentlyDeleted.DaysRemaining.2\" : \"剩餘 2 天\",\n   \"Alert.Expunge.SinglePhoto.Message\" : \"永久刪除照片？\",\n   \"Toolbar.OneUp.Title.BurstCount.1\" : \"連拍 (1 張照片)\",\n   \"Toolbar.Folder.Title.AssetCount.2\" : \"2 個項目\",\n   \"Alert.Upload.Failed.Validation.FileSizeSmall.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Alert.Upload.Failed.Server.Exif.MultipleItems.Description\" : \"照片包含無效的 Exif 中繼資料。\",\n   \"Alert.Upload.Failed.Validation.FileFormat.Detailed.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Upload.Bar.Uploading.MultipleItems\" : \"正在上傳 %{total} 個項目⋯\",\n   \"Alert.Delete.Failed.Generic.SingleAlbum.Description\" : \"由於伺服器發生錯誤，無法刪除相簿。\",\n   \"Alert.Upload.Failed.Server.StorageFull.MultipleItems.Message\" : \"因可用空間不足，有 %{count} 張照片無法上傳。\",\n   \"Asset.Info.B\" : \"B\",\n   \"Alert.Upload.Failed.Coalesced.Generic.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Folder.Recently.Deleted\" : \"最近刪除\",\n   \"Alert.Remove.SinglePhoto.Description\" : \"將從此相簿移除這張照片，但檔案仍會留在照片圖庫中。\",\n   \"Alert.Recover.Failed.Generic.Message\" : \"無法復原項目。\",\n   \"Alert.Upload.Failed.Validation.FileSizeSmall.SingleItem.Description\" : \"若要上傳至「照片」，檔案必須大於 1 KB。\",\n   \"Alert.Download.Failed.Generic.Description.2\" : \"請稍後再嘗試下載這些項目。\",\n   \"Grid.Footer.Updating.Text\" : \"正在更新…\",\n   \"Alert.Delete.SingleAlbum.Description\" : \"照片不會刪除。\",\n   \"Upload.Bar.Uploading.SingleItem\" : \"正在上傳 1 個項目⋯\",\n   \"Album.DefaultTitle\" : \"未命名的相簿\",\n   \"Alert.Expunge.Failed.Generic.Message\" : \"無法刪除項目。\",\n   \"Moments.Moment.Title.DateRange\" : \" · %{dateRange}\",\n   \"Alert.Remove.MultipleItems.Message\" : \"從相簿中移除 %{count} 個項目？\",\n   \"Alert.Delete.SingleFolder.Message\" : \"確定要刪除檔案夾「%{title}」嗎？\",\n   \"Alert.Remove.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法移除部分項目。\",\n   \"Alert.Upload.Failed.Server.StorageFull.Button.Title\" : \"更多內容\",\n   \"Date.Range.Day.Of.Week.To.Today\" : \"%{date1:EEEE} – 今天\",\n   \"Albums.Error.LoadFailed.Title\" : \"無法載入相簿。\",\n   \"Toolbars.Selection.DownloadButton.Title\" : \"下載\",\n   \"Alert.Delete.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法刪除部分項目。\",\n   \"Date.Range.No.Similarities\" : \"%{date1:yyyy}年%{date1:MMMM}%{date1:d}日 – %{date2:yyyy}年%{date2:MMMM}%{date2:d}日\",\n   \"Toolbars.Selection.EmailButton.Title\" : \"電子郵件\",\n   \"Album.SmartAlbumUnsupported.Message\" : \"無法載入「%{albumTitle}」。\",\n   \"Toolbars.Selection.DeleteButton.Title\" : \"刪除\",\n   \"Moments.Moment.Title.AssetCount.2\" : \"2 個項目\",\n   \"Banner.ExitedHyperion.LinkText\" : \"進一步瞭解 »\",\n   \"Date.Range.Same.Day\" : \"%{date1:yyyy}年%{date1:MMMM}%{date1:d}日\",\n   \"Folder.Recently.Added\" : \"最近加入\",\n   \"Alert.Expunge.MultipleItems.Message\" : \"永久刪除 %{count} 個項目？\",\n   \"Alert.Update.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法更新部分項目。\",\n   \"FirstRun.ComingSoon.Advice\" : \"我們每天都在加入使用者。請稍後返回使用「照片」。\",\n   \"Toolbars.Selection.ShareButton.Title\" : \"共享\",\n   \"Alert.Share.NetworkError\" : \"伺服器發生錯誤，您的照片無法分享。請稍後再試。\",\n   \"Alert.Upload.Failed.Coalesced.Generic.MultipleItems.Description\" : \"部分照片無法上傳。檢視詳細資料，以瞭解更多資訊。\",\n   \"Alert.Delete.Failed.Generic.SingleAlbum.Message\" : \"無法刪除相簿。\",\n   \"Asset.Info.Date.Format\" : \"%{date:y}年%{date:MMMM}%{date:d}日%{date:a}%{date:hh}:%{date:mm}:%{date:ss}\",\n   \"Alert.Delete.MultipleItems.Message\" : \"從所有裝置刪除 %{count} 個項目？\",\n   \"Toolbars.AlbumContentsSelection.SelectItems.Title\" : \"選取您要新增至 %{albumName} 的照片和影片\",\n   \"Toolbars.Selection.ExpungeButton.Title\" : \"刪除\",\n   \"Toolbar.Select.Videos\" : \"選取影片\",\n   \"Folder.Selfies\" : \"自拍\",\n   \"Alert.Email.Failed.Attachment.Generic.Photo.SingleItem.Description\" : \"伺服器發生錯誤，無法寄出照片。\",\n   \"Alert.Recover.Failed.Generic.MultipleItems.Message\" : \"無法復原項目。\",\n   \"Alert.Expunge.MultipleItems.Description\" : \"此動作無法還原。\",\n   \"Toolbars.Selection.ExpungeButton.Title.All\" : \"全部刪除\",\n   \"Alert.Remove.Burst.Message\" : \"從相簿中移除連拍？\",\n   \"Alert.Delete.SingleAlbum.Message\" : \"確定要刪除相簿「%{title}」嗎？\",\n   \"Toolbar.OneUp.Title.DateAndTime\" : \"%{dateString} · %{timeString}\",\n   \"Folder.Info.Folder.Name\" : \"檔案夾名稱\",\n   \"Alert.Upload.Failed.Validation.FileSizeBig.MultipleItems.Message\" : \"%{count} 張照片無法上傳。\",\n   \"Alert.Delete.Failed.Generic.MultipleItems.Message\" : \"無法刪除部分項目。\",\n   \"Alert.Delete.Failed.Generic.SingleFolder.Message\" : \"無法刪除檔案夾。\",\n   \"RecentlyDeleted.Toolbar.Button.Delete.All\" : \"全部刪除\",\n   \"Alert.Upload.Failed.Validation.FileFormat.MultipleItems.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Alert.Upload.Not.Supported.Browser.Description\" : \"若要上傳照片或影片，請更新您的網頁瀏覽器。\",\n   \"Toolbar.Album.Info.Tooltip\" : \"相簿資訊\",\n   \"Alert.Rename.Failed.Generic.SingleFolder.Message\" : \"無法重新命名檔案夾。\",\n   \"Upload.Bar.Stop.Upload\" : \"停止上傳\",\n   \"Asset.Info.GB\" : \"GB\",\n   \"Toolbars.Selection.SingleItemSelected.Title\" : \"已選取 1 個項目\",\n   \"Date.Range.Day.Of.Week.To.Tomorrow\" : \"%{date1:EEEE} – 明天\",\n   \"EmptyLibrary.Message\" : \"您的 iCloud 照片圖庫是空的。\",\n   \"Alert.Download.Failed.Generic.Description.1\" : \"請稍後再嘗試下載此項目。\",\n   \"Toolbars.Selection.UndeleteButton.Title.All\" : \"全部回復\",\n   \"Alert.Remove.Failed.Generic.Message\" : \"無法移除項目。\",\n   \"Date.Range.Same.Day.Yesterday\" : \"昨天\",\n   \"Alert.Remove.Button.Title\" : \"移除\",\n   \"Folder.Screenshots\" : \"螢幕快照\",\n   \"Toolbar.OneUp.Title.TimeShort\" : \"%{date:a}%{date:h}:%{date:mm}\",\n   \"Alert.Upload.Failed.Server.StorageFull.SingleItem.Message\" : \"可用空間不夠，無法上傳此照片。\",\n   \"Banner.ExitedHyperion.Title\" : \"已停用「iCloud 照片圖庫」。\",\n   \"Alert.Upload.Failed.Validation.Folder.SingleItem.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Toolbar.Upload\" : \"上傳\",\n   \"Alert.Delete.SingleVideo.Message\" : \"從所有裝置刪除影片？\",\n   \"Date.Range.Yesterday.To.Tomorrow\" : \"昨天 – 明天\",\n   \"Toolbar.OneUp.Share.Tooltip\" : \"共享\",\n   \"Folder.My.Albums.Header\" : \"我的相簿\",\n   \"Toolbar.OneUp.Delete.Tooltip\" : \"刪除\",\n   \"Alert.Delete.Burst.Message\" : \"從所有裝置刪除連拍？\",\n   \"Toolbars.AlbumContentsSelection.CancelButton.Title\" : \"取消\",\n   \"Banner.ExitedHyperion.SingleDayRemaining.Description\" : \"您還剩下 1 天可以確保您擁有照片和影片的完整副本。\",\n   \"RecentlyDeleted.DaysRemaining.1\" : \"剩餘 1 天\",\n   \"Alert.Upload.Failed.Validation.FileSizeBig.SingleItem.Description\" : \"若要上傳至「照片」，檔案必須小於 100 MB。\",\n   \"Alert.Delete.MultipleItems.Description\" : \"所有裝置的 iCloud 照片圖庫將會刪除這些項目。\",\n   \"Tab.Albums\" : \"相簿\",\n   \"Alert.Share.RecordFailure\" : \"你所選取的照片無法取得。請稍後再試。\",\n   \"RecentlyDeleted.HoursRemaining.1\" : \"剩餘 1 小時\",\n   \"Toolbar.OneUp.Download.Tooltip\" : \"下載\",\n   \"OneUp.Error.LoadFailed.Video.Format\" : \"您的瀏覽器目前不支援此影片格式。\",\n   \"Alert.Upload.Failed.Server.Derivative.MultipleItems.Description\" : \"請稍後再嘗試上傳照片。\",\n   \"Alert.Delete.SinglePhoto.Message\" : \"從所有裝置刪除照片？\",\n   \"Toolbar.Back\" : \"返回\",\n   \"Alert.Upload.Failed.Server.Derivative.Detailed.Description\" : \"未知的錯誤。\",\n   \"OneUp.Error.LoadFailed.Photo\" : \"無法載入照片\",\n   \"Alert.Download.MultipleItems.Description\" : \"將下載 %{count} 個項目至您的電腦。\",\n   \"Toolbars.Selection.MultipleItemsSelected.Title\" : \"已選取 %{count} 個項目\",\n   \"FirstRun.Title\" : \"歡迎使用「照片」\",\n   \"Alert.Download.Failed.Generic.Message.1\" : \"下載此項目時發生問題。\",\n   \"IndexFile.Meta.Description\" : \"使用 iCloud 儲存您所有的照片和影片，讓您隨時可透過 iOS 裝置和網路進行存取。\",\n   \"Alert.Download.Button.Title\" : \"下載\",\n   \"Alert.Email.Failed.Attachment.Generic.Item.SingleItem.Description\" : \"伺服器發生錯誤，無法寄出項目。\",\n   \"Alert.Expunge.SingleItem.Description\" : \"此動作無法還原。\",\n   \"Date.Range.Same.Day.Today.Time.Range.Same.Period\" : \"%{date1:h}:%{date1:mm} – %{date2:a}%{date2:h}:%{date2:mm}\",\n   \"Alert.Delete.SingleFolder.Description\" : \"照片不會刪除。\",\n   \"Alert.LeavingWhileUploading.Message\" : \"「照片」正在上傳您的檔案。如果您現在離開，未完成的上傳將被取消。\",\n   \"Toolbar.Info\" : \"資訊\",\n   \"Alert.Download.Failed.Generic.Description.More\" : \"請稍後再嘗試下載這些項目。\",\n   \"OneUp.AudioLabel\" : \"音訊檔案 · %{duration}\",\n   \"Alert.Upload.Failed.Validation.Folder.Detailed.Description\" : \"只能上傳 JPEG 格式的檔案。\",\n   \"Folder.Bursts\" : \"連拍照片\",\n   \"Alert.Upload.Failed.Generic.Generic.MultipleItems.Description\" : \"請稍後再嘗試上傳照片。\",\n   \"Moments.Moment.Title.AssetCount.1\" : \"1 個項目\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.MultipleItems.Description\" : \"您選取的項目超過所允許的附件大小上限 (%{maxFileSizeInMB} MB)。\",\n   \"Alert.Delete.SingleVideo.Description\" : \"所有裝置的 iCloud 照片圖庫將會刪除此影片。\",\n   \"Date.Range.Same.Year\" : \"%{date1:yyyy}年%{date1:MMMM}%{date1:d}日 – %{date2:MMMM}%{date2:d}日\",\n   \"Alert.Delete.Failed.Generic.Message\" : \"無法刪除項目。\",\n   \"Alert.Update.Failed.Generic.Description\" : \"伺服器發生錯誤，無法更新某一項目。\",\n   \"Alert.Upload.Failed.Server.Derivative.SingleItem.Message\" : \"上傳此照片時發生問題。\",\n   \"Moments.Moment.Title.AssetCount.More\" : \"%{count} 項目\",\n   \"Alert.Expunge.SingleVideo.Description\" : \"此動作無法還原。\",\n   \"AlbumsPopover.NavBar.Back\" : \"上一頁\",\n   \"RevGeo.Title.PrefixJoiner\" : \" - \",\n   \"Popover.AddToAlbum.Back\" : \"上一頁\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Item.SingleItem.Description\" : \"項目超過所允許的附件大小上限 (%{maxFileSizeInMB} MB)。\",\n   \"Alert.Remove.Failed.Generic.Description\" : \"伺服器發生錯誤，無法移除某一項目。\",\n   \"Asset.Info.MB\" : \"MB\",\n   \"Alert.Upload.Failed.Generic.Generic.Detailed.Description\" : \"未知的錯誤。\",\n   \"Toolbar.Home\" : \"照片\",\n   \"Alert.Upload.Failed.Server.Exif.Detailed.Description\" : \"照片包含無效的 Exif 元資料。\",\n   \"Alert.Upload.Failed.Server.Exif.SingleItem.Message\" : \"上傳此照片時發生問題。\",\n   \"AlbumsPopover.NavBar.Albums\" : \"相簿\",\n   \"Folder.SloMo\" : \"慢動作\",\n   \"Folder.Info.Album.Name\" : \"相簿名稱\",\n   \"Alert.Expunge.SinglePhoto.Description\" : \"此動作無法還原。\",\n   \"Date.Range.Same.Day.Today.Time.Range\" : \"%{date1:a}%{date1:h}:%{date1:mm} – %{date2:a}%{date2:h}:%{date2:mm}\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Item.SingleItem.Message\" : \"無法寄出項目。\",\n   \"RevGeo.Title.EndJoiner.1\" : \" & \",\n   \"Asset.Info.MM\" : \"mm\",\n   \"Alert.Rename.Failed.Generic.SingleFolder.Description\" : \"由於伺服器發生錯誤，無法重新命名檔案夾。\",\n   \"Toolbars.AlbumContentsSelection.MultipleItemsSelected.Title\" : \"新增 %{count} 個項目至 %{albumName}\",\n   \"Alert.Add.Failed.Generic.MultipleItems.Description\" : \"伺服器發生錯誤，無法新增部分項目。\",\n   \"RecentlyDeleted.MinutesRemaining.2\" : \"剩餘 2 分鐘\",\n   \"Alert.Email.Failed.Attachment.Generic.MultipleItems.Message\" : \"無法寄出項目。\",\n   \"Alert.Email.Failed.Attachment.OverSizeLimit.Video.SingleItem.Message\" : \"無法寄出影片。\",\n   \"Alert.Rename.Failed.Generic.SingleAlbum.Description\" : \"由於伺服器發生錯誤，無法重新命名相簿。\",\n   \"Toolbar.OneUp.Button.Undelete.Title\" : \"回復\",\n   \"Alert.Recover.Failed.Generic.Description\" : \"伺服器發生錯誤，無法回復某一項目。\",\n   \"Alert.Upload.Failed.Generic.Generic.SingleItem.Description\" : \"請稍後再嘗試上傳照片。\",\n   \"Alert.Remove.MultipleItems.Description\" : \"將從此相簿移除這些項目，但檔案仍會留在照片圖庫中。\"\n}";
    
    
        
n$646 = "resources/n$646.svg";
    
    
        
n$647 = "resources/n$647.svg";
    
    
        
n$648 = "resources/n$648.svg";
    
    
        
n$649 = "resources/n$649.svg";
    
    
        
n$650 = "resources/n$650.svg";
    
    
        
n$651 = "resources/n$651.svg";
    
    
        
n$856 = "resources/n$856.svg";
    
    
        
n$880 = "resources/n$880.jpg";
    
    
        
n$881 = "resources/n$881.jpg";
    
    
        
n$18.push(JSON.parse(n$417));
    
    
        
n$18.push(JSON.parse(n$541));
    
    
        
n$18.push(JSON.parse(n$581));
    
    
        
n$18.push(JSON.parse(n$584));
    
    
        
n$18.push(JSON.parse(n$781));
    
    
        
n$18.push(JSON.parse(n$798));
    
    
        
n$18.push(JSON.parse(n$900));
    
    
        
!function(t){"use strict";var e=null,n=null;!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),n(14)},function(e,n,i){function r(t){var e=N[t]=c.set(C(F.prototype),x,t);return w&&M&&U(y,t,{configurable:!0,set:function(e){S(this,L)&&S(this[L],t)&&(this[L][t]=!1),U(this,t,D(1,e))}}),e}function a(t,e,n){return n&&S(N,e)?(n.enumerable?(S(t,L)&&t[L][e]&&(t[L][e]=!1),n=C(n,{enumerable:D(0,!1)})):(S(t,L)||A(t,L,D(1,{})),t[L][e]=!0),U(t,e,n)):A(t,e,n)}function s(t,e){I(t);for(var n,i=$(e=P(e)),r=0,s=i.length;s>r;)a(t,n=i[r++],e[n]);return t}function o(e,n){return n===t?C(e):s(C(e),n)}function l(t){var e=O.call(this,t);return e||!S(this,t)||!S(N,t)||S(this,L)&&this[L][t]?e:!0}function h(t,e){var n=b(t=P(t),e);return!n||!S(N,e)||S(t,L)&&t[L][e]||(n.enumerable=!0),n}function d(t){for(var e,n=T(P(t)),i=[],r=0;n.length>r;)S(N,e=n[r++])||e==L||i.push(e);return i}function u(t){for(var e,n=T(P(t)),i=[],r=0;n.length>r;)S(N,e=n[r++])&&i.push(N[e]);return i}var c=i(2),_=i(4).set,p=i(7),g=i(6),f=i(8),v=i(9),m=i(10),$=i(11),I=i(12).obj,y=Object.prototype,w=c.DESC,S=c.has,C=c.create,b=c.getDesc,A=c.setDesc,D=c.desc,E=i(13),T=E.get,P=c.toObject,F=c.g.Symbol,M=!1,x=p("tag"),L=p("hidden"),O={}.propertyIsEnumerable,R=g("symbol-registry"),N=g("symbols"),V=c.isFunction(F),U=w?function(){try{return C(A({},L,{get:function(){return A(this,L,{value:!1})[L]}}))[L]||A}catch(t){return function(t,e,n){var i=b(y,e);i&&delete y[e],A(t,e,n),i&&t!==y&&A(y,e,i)
}}}():A;V||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor");return r(p(arguments[0]))},v(F.prototype,"toString",function(){return this[x]}),c.create=o,c.setDesc=a,c.getDesc=h,c.setDescs=s,c.getNames=E.get=d,c.getSymbols=u,c.DESC&&c.FW&&v(y,"propertyIsEnumerable",l,!0));var B={"for":function(t){return S(R,t+="")?R[t]:R[t]=F(t)},keyFor:function(t){return m(R,t)},useSetter:function(){M=!0},useSimple:function(){M=!1}};c.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=i(5)(t);B[t]=V?e:r(e)}),M=!0,f(f.G+f.W,{Symbol:F}),f(f.S,"Symbol",B),f(f.S+f.F*!V,"Object",{create:o,defineProperty:a,defineProperties:s,getOwnPropertyDescriptor:h,getOwnPropertyNames:d,getOwnPropertySymbols:u}),_(F,"Symbol"),_(Math,"Math",!0),_(c.g.JSON,"JSON",!0)},function(i,r,a){function s(t){return isNaN(t=+t)?0:(t>0?m:v)(t)}function o(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function l(t,e,n){return t[e]=n,t}function h(t){return y?function(e,n,i){return S.setDesc(e,n,o(t,i))}:l}function d(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function u(t){return"function"==typeof t}function c(e){if(e==t)throw TypeError("Can't call method on  "+e);return e}var _="undefined"!=typeof self?self:Function("return this")(),p={},g=Object.defineProperty,f={}.hasOwnProperty,v=Math.ceil,m=Math.floor,$=Math.max,I=Math.min,y=!!function(){try{return 2==g({},"a",{get:function(){return 2}}).a}catch(t){}}(),w=h(1),S=i.exports=a(3)({g:_,core:p,html:_.document&&document.documentElement,isObject:d,isFunction:u,that:function(){return this
},toInteger:s,toLength:function(t){return t>0?I(s(t),9007199254740991):0},toIndex:function(t,e){return t=s(t),0>t?$(t+e,0):I(t,e)},has:function(t,e){return f.call(t,e)},create:Object.create,getProto:Object.getPrototypeOf,DESC:y,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:g,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(t){return S.ES5Object(c(t))},hide:w,def:h(0),set:_.Symbol?l:w,each:[].forEach});"undefined"!=typeof e&&(e=p),"undefined"!=typeof n&&(n=_)},function(t){t.exports=function(t){return t.FW=!0,t.path=t.g,t}},function(e,n,i){function r(t){return o.call(t).slice(8,-1)}var a=i(2),s=i(5)("toStringTag"),o={}.toString;r.classof=function(e){var n,i;return e==t?e===t?"Undefined":"Null":"string"==typeof(i=(n=Object(e))[s])?i:r(n)},r.set=function(t,e,n){t&&!a.has(t=n?t:t.prototype,s)&&a.hide(t,s,e)},e.exports=r},function(t,e,n){var i=n(2).g,r=n(6)("wks");t.exports=function(t){return r[t]||(r[t]=i.Symbol&&i.Symbol[t]||n(7).safe("Symbol."+t))}},function(t,e,n){var i=n(2),r="__core-js_shared__",a=i.g[r]||(i.g[r]={});t.exports=function(t){return a[t]||(a[t]={})}},function(e,n,i){function r(e){return"Symbol(".concat(e===t?"":e,")_",(++a+Math.random()).toString(36))}var a=0;r.safe=i(2).g.Symbol||r,e.exports=r},function(t,e,n){function i(t,e){return function(){return t.apply(e,arguments)}}function r(t,e,n){var d,u,c,_,p=t&r.G,g=t&r.P,f=p?s:t&r.S?s[e]:(s[e]||{}).prototype,v=p?o:o[e]||(o[e]={});p&&(n=e);for(d in n)u=!(t&r.F)&&f&&d in f,c=(u?f:n)[d],_=t&r.B&&u?i(c,s):g&&l(c)?i(Function.call,c):c,f&&!u&&h(f,d,c),v[d]!=c&&a.hide(v,d,_),g&&((v.prototype||(v.prototype={}))[d]=c)
}var a=n(2),s=a.g,o=a.core,l=a.isFunction,h=n(9);s.core=o,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},function(t,e,n){function i(t,e,n,i){if(r.isFunction(n)){var o=t[e];r.hide(n,s,o?String(o):a.replace(/hasOwnProperty/,String(e))),"name"in n||(n.name=e)}t===r.g?t[e]=n:(i||delete t[e],r.hide(t,e,n))}var r=n(2),a=String({}.hasOwnProperty),s=n(7).safe("src"),o=Function.toString;i(Function.prototype,"toString",function(){return r.has(this,s)?this[s]:o.call(this)}),r.core.inspectSource=function(t){return o.call(t)},t.exports=i},function(t,e,n){var i=n(2);t.exports=function(t,e){for(var n,r=i.toObject(t),a=i.getKeys(r),s=a.length,o=0;s>o;)if(r[n=a[o++]]===e)return n}},function(t,e,n){var i=n(2);t.exports=function(t){var e=i.getKeys(t),n=i.getDesc,r=i.getSymbols;return r&&i.each.call(r(t),function(i){n(t,i).enumerable&&e.push(i)}),e}},function(t,e,n){function i(t,e,n){if(!t)throw TypeError(n?e+n:e)}var r=n(2);i.def=r.assertDefined,i.fn=function(t){if(!r.isFunction(t))throw TypeError(t+" is not a function!");return t},i.obj=function(t){if(!r.isObject(t))throw TypeError(t+" is not an object!");return t},i.inst=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t},t.exports=i},function(t,e,n){function i(t){try{return s(t)}catch(e){return o.slice()}}var r=n(2),a={}.toString,s=r.getNames,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(t){return o&&"[object Window]"==a.call(t)?i(t):s(r.toObject(t))}},function(t,e,n){var i=n(8);i(i.S,"Object",{is:n(15)})},function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e
}}]),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):n.core=e}();
    
    
        
!function(){if((!window||!window.parent||window!==window.parent)&&window.parent.postMessage){var e=window.location.pathname.match(/applications\/(.*?)\/current/)[1],t=function(t){console.log("recordApplicationMessage: "+t[0]+" sent to CloudOS"),window.parent.postMessage(JSON.stringify({isCloudOSMessage:!0,methodName:"recordApplicationMessage",appName:e,args:t}),"*")};window.onerror=function(e,n,i,r,s){console.warn("onerror exception: "+e+" Script: "+n+" Line: "+i);var a={error:e,url:n,lineNumber:i,stack:s?s.stack:"not available"};t(["OnErrorException",a])},t(["OnErrorExceptionHandlerWasConfigured"])}}();
    
    
        

    
    
        
!function(){!function(){function t(){}function r(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function e(t){var r=typeof t;return null===t||"undefined"===r||"boolean"===r||"number"===r||"string"===r}function n(t){var r,n,o;if(e(t))return t;if(n=t.valueOf,"function"==typeof n&&(r=n.call(t),e(r)))return r;if(o=t.toString,"function"==typeof o&&(r=o.call(t),e(r)))return r;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(r){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=f.call(arguments,1),o=function(){if(this instanceof p){var t=e.apply(this,n.concat(f.call(arguments)));return Object(t)===t?t:this}return e.apply(r,n.concat(f.call(arguments)))},i=Math.max(0,e.length-n.length),a=[],u=0;i>u;u++)a.push("$"+u);var p=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(o);return e.prototype&&(t.prototype=e.prototype,p.prototype=new t,t.prototype=null),p});var o,i,a,u,p,l=Function.prototype.call,s=Array.prototype,c=Object.prototype,f=s.slice,h=l.bind(c.toString),y=l.bind(c.hasOwnProperty);if((p=y(c,"__defineGetter__"))&&(o=l.bind(c.__defineGetter__),i=l.bind(c.__defineSetter__),a=l.bind(c.__lookupGetter__),u=l.bind(c.__lookupSetter__)),2!=[1,2].splice(0).length){var g=Array.prototype.splice,v=Array.prototype.push,b=Array.prototype.unshift;Array.prototype.splice=function(){function t(t){for(var r=[];t--;)r.unshift(t);return r}var r,e=[];return e.splice.bind(e,0,0).apply(null,t(20)),e.splice.bind(e,0,0).apply(null,t(26)),r=e.length,e.splice(5,0,"XXX"),r+1==e.length?!0:void 0
}()?function(t,r){return arguments.length?g.apply(this,[void 0===t?0:t,void 0===r?this.length-t:r].concat(f.call(arguments,2))):[]}:function(t,r){var e,n=f.call(arguments,2),o=n.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===r&&(r=this.length-t),o>0){if(0>=r){if(t==this.length)return v.apply(this,n),[];if(0==t)return b.apply(this,n),[]}return e=f.call(this,t,t+r),n.push.apply(n,f.call(this,t+r,this.length)),n.unshift.apply(n,f.call(this,0,t)),n.unshift(0,this.length),g.apply(this,n),e}return g.call(this,t,r)}}if(1!=[].unshift(0)){var b=Array.prototype.unshift;Array.prototype.unshift=function(){return b.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==h(t)});var d=Object("a"),m="a"!=d[0]||!(0 in d),w=function(t){var r=!0;return t&&t.call("foo",function(t,e,n){"object"!=typeof n&&(r=!1)}),!!t&&r};if(Array.prototype.forEach&&w(Array.prototype.forEach)||(Array.prototype.forEach=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=arguments[1],o=-1,i=e.length>>>0;if("[object Function]"!=h(t))throw new TypeError;for(;++o<i;)o in e&&t.call(n,e[o],o,r)}),Array.prototype.map&&w(Array.prototype.map)||(Array.prototype.map=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=e.length>>>0,o=Array(n),i=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var a=0;n>a;a++)a in e&&(o[a]=t.call(i,e[a],a,r));return o}),Array.prototype.filter&&w(Array.prototype.filter)||(Array.prototype.filter=function(t){var r,e=U(this),n=m&&"[object String]"==h(this)?this.split(""):e,o=n.length>>>0,i=[],a=arguments[1];
if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var u=0;o>u;u++)u in n&&(r=n[u],t.call(a,r,u,e)&&i.push(r));return i}),Array.prototype.every&&w(Array.prototype.every)||(Array.prototype.every=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=e.length>>>0,o=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var i=0;n>i;i++)if(i in e&&!t.call(o,e[i],i,r))return!1;return!0}),Array.prototype.some&&w(Array.prototype.some)||(Array.prototype.some=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=e.length>>>0,o=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var i=0;n>i;i++)if(i in e&&t.call(o,e[i],i,r))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=e.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,i=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(i in e){o=e[i++];break}if(++i>=n)throw new TypeError("reduce of empty array with no initial value")}for(;n>i;i++)i in e&&(o=t.call(void 0,o,e[i],i,r));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var r=U(this),e=m&&"[object String]"==h(this)?this.split(""):r,n=e.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");
var o,i=n-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(i in e){o=e[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>i)return o;do i in this&&(o=t.call(void 0,o,e[i],i,r));while(i--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=m&&"[object String]"==h(this)?this.split(""):U(this),n=e.length>>>0;if(!n)return-1;var o=0;for(arguments.length>1&&(o=r(arguments[1])),o=o>=0?o:Math.max(0,n+o);n>o;o++)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=m&&"[object String]"==h(this)?this.split(""):U(this),n=e.length>>>0;if(!n)return-1;var o=n-1;for(arguments.length>1&&(o=Math.min(o,r(arguments[1]))),o=o>=0?o:n-Math.abs(o);o>=0;o--)if(o in e&&t===e[o])return o;return-1}),!Object.keys){var S=!{toString:null}.propertyIsEnumerable("toString"),A=function(){}.propertyIsEnumerable("prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],x=j.length,O=function(t){return"[object Function]"===h(t)},E=function(t){var r=h(t),e="[object Arguments]"===r;return e||(e=!Array.isArray(r)&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&O(t.callee)),e};Object.keys=function k(t){var r=O(t),e=E(t),n=null!==t&&"object"==typeof t,o=n&&"[object String]"===h(t);if(!n&&!r&&!e)throw new TypeError("Object.keys called on a non-object");var k=[],i=A&&r;if(o||e)for(var a=0;a<t.length;++a)k.push(String(a));else for(var u in t)i&&"prototype"===u||!y(t,u)||k.push(String(u));
if(S)for(var p=t.constructor,l=p&&p.prototype===t,a=0;x>a;a++){var s=j[a];l&&"constructor"===s||!y(t,s)||k.push(s)}return k}}var T=-621987552e5,N="-000001";Date.prototype.toISOString&&-1!==new Date(T).toISOString().indexOf(N)||(Date.prototype.toISOString=function(){var t,r,e,n,o;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(n=this.getUTCFullYear(),o=this.getUTCMonth(),n+=Math.floor(o/12),o=(o%12+12)%12,t=[o+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],n=(0>n?"-":n>9999?"+":"")+("00000"+Math.abs(n)).slice(n>=0&&9999>=n?-4:-6),r=t.length;r--;)e=t[r],10>e&&(t[r]="0"+e);return n+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var F=!1;try{F=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(T).toJSON().indexOf(N)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(_){}F||(Date.prototype.toJSON=function(){var t,r=Object(this),e=n(r);if("number"==typeof e&&!isFinite(e))return null;if(t=r.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(r)}),(!Date.parse||isNaN(Date.parse("2000-01-01T00:00:00.000Z")))&&(Date=function(t){function r(e,n,o,i,a,u,p){var l=arguments.length;if(this instanceof t){var s=1==l&&String(e)===e?new t(r.parse(e)):l>=7?new t(e,n,o,i,a,u,p):l>=6?new t(e,n,o,i,a,u):l>=5?new t(e,n,o,i,a):l>=4?new t(e,n,o,i):l>=3?new t(e,n,o):l>=2?new t(e,n):l>=1?new t(e):new t;return s.constructor=r,s}return t.apply(this,arguments)}function e(t,r){var e=r>1?1:0;
return i[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)}function n(r){return Number(new t(1970,0,1,0,0,0,r))}var o=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in t)r[a]=t[a];return r.now=t.now,r.UTC=t.UTC,r.prototype=t.prototype,r.prototype.constructor=r,r.parse=function(r){var i=o.exec(r);if(i){var a,u=Number(i[1]),p=Number(i[2]||1)-1,l=Number(i[3]||1)-1,s=Number(i[4]||0),c=Number(i[5]||0),f=Number(i[6]||0),h=Math.floor(1e3*Number(i[7]||0)),y=Boolean(i[4]&&!i[8]),g="-"===i[9]?1:-1,v=Number(i[10]||0),b=Number(i[11]||0);return(c>0||f>0||h>0?24:25)>s&&60>c&&60>f&&1e3>h&&p>-1&&12>p&&24>v&&60>b&&l>-1&&l<e(u,p+1)-e(u,p)&&(a=60*(24*(e(u,p)+l)+s+v*g),a=1e3*(60*(a+c+b*g)+f)+h,y&&(a=n(a)),a>=-864e13&&864e13>=a)?a:0/0}return t.parse.apply(this,arguments)},r}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||function(){function t(t,r){for(var e=-1;++e<a;)r+=t*u[e],u[e]=r%i,r=Math.floor(r/i)}function r(t){for(var r=a,e=0;--r>=0;)e+=u[r],u[r]=Math.floor(e/t),e=e%t*i}function e(){for(var t=a,r="";--t>=0;)if(""!==r||0===t||0!==u[t]){var e=String(u[t]);""===r?r=e:r+="0000000".slice(0,7-e.length)+e}return r}function n(t,r,e){return 0===r?e:1===r%2?n(t,r-1,e*t):n(t*t,r/2,e)}function o(t){for(var r=0;t>=4096;)r+=12,t/=4096;
for(;t>=2;)r+=1,t/=2;return r}var i,a,u;i=1e7,a=6,u=[0,0,0,0,0,0],Number.prototype.toFixed=function(i){var a,u,p,l,s,c,f,h;if(a=Number(i),a=a!==a?0:Math.floor(a),0>a||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(u=Number(this),u!==u)return"NaN";if(-1e21>=u||u>=1e21)return String(u);if(p="",0>u&&(p="-",u=-u),l="0",u>1e-21)if(s=o(u*n(2,69,1))-69,c=0>s?u*n(2,-s,1):u/n(2,s,1),c*=4503599627370496,s=52-s,s>0){for(t(0,c),f=a;f>=7;)t(1e7,0),f-=7;for(t(n(10,f,1),0),f=s-1;f>=23;)r(1<<23),f-=23;r(1<<f),t(1,1),r(2),l=e()}else t(0,c),t(1<<-s,0),l=e()+"0.00000000000000000000".slice(2,2+a);return a>0?(h=l.length,l=a>=h?p+"0.0000000000000000000".slice(0,a-h+2)+l:p+l.slice(0,h-a)+"."+l.slice(h-a)):l=p+l,l}}();var I=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(r,e){var n=this;if(void 0===r&&0===e)return[];if("[object RegExp]"!==Object.prototype.toString.call(r))return I.apply(this,arguments);var o,i,a,u,p=[],l=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),s=0,r=new RegExp(r.source,l+"g");for(n+="",t||(o=new RegExp("^"+r.source+"$(?!\\s)",l)),e=void 0===e?-1>>>0:e>>>0;(i=r.exec(n))&&(a=i.index+i[0].length,!(a>s&&(p.push(n.slice(s,i.index)),!t&&i.length>1&&i[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(i[t]=void 0)}),i.length>1&&i.index<n.length&&Array.prototype.push.apply(p,i.slice(1)),u=i[0].length,s=a,p.length>=e)));)r.lastIndex===i.index&&r.lastIndex++;
return s===n.length?(u||!r.test(""))&&p.push(""):p.push(n.slice(s)),p.length>e?p.slice(0,e):p}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,r){return void 0===t&&0===r?[]:I.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var M=String.prototype.substr;String.prototype.substr=function(t,r){return M.call(this,0>t?(t=this.length+t)<0?0:t:t,r)}}var D="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||D.trim()){D="["+D+"]";var R=new RegExp("^"+D+D+"*"),C=new RegExp(D+D+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(R,"").replace(C,"")}}(8!==parseInt(D+"08")||22!==parseInt(D+"0x16"))&&(parseInt=function(t){var r=/^0[xX]/;return function(e,n){return e=String(e).trim(),+n||(n=r.test(e)?16:10),t(e,n)}}(parseInt));var U=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}()}();
    
    
        
!function(){"use strict";function n(n,t,i){return t in n||(n[t]=i),n}n$20=n}();
    
    
        
!function(){function r(t,e){var o;if(t instanceof Error?o=t:(t&&(t=n$19(t,e)),o=new Error(t)),o.context=e,!r._checkedBrowserSupport){try{throw new Error}catch(c){r._browserDoesNotSupportStackTrace=!c.stack}r._checkedBrowserSupport=!0}return r._browserDoesNotSupportStackTrace&&(o.stack=r.recordStack()),o}r.MAX_STACK_TRACE_DEPTH=25,r.MAX_DISPLAY_NAME_LENGTH=150,r._checkedBrowserSupport=!1,r._browserDoesNotSupportStackTrace=!1,r._getDisplayNameForFunction=function(t){var e=t.displayName,o=r.MAX_DISPLAY_NAME_LENGTH;if(e||(e=t.name),!e){var c=t.toString(),a=c.match(/function ([\w|\$]+)/);e=(a?a[1]:c).toString()}return e.length>o&&(e=e.substring(0,o)),e},r.recordStack=function(){var e="";try{var o,c=arguments.callee,a=c?c.caller:null,n=0,u=r.MAX_STACK_TRACE_DEPTH,s={};for(a=a.caller,a===t&&(a=a.caller);a&&u>n&&(o=r._getDisplayNameForFunction(a),!s[o]);)e+=o+"\n",a=a.caller,++n,s[o]=!0;e=e.trim()}catch(_){""===e&&(e="Could not generate a stack trace for this fatal error.")}return e};var t=function(t,e){throw new r(t,e)};n$292=r,n$11=t}();
    
    
        
!function(){"use strict";function t(){this.constructor=Object}n$20(Object,"create",function(e,r){return r&&n$11("this browser does not support property descriptors"),t.prototype=e,new t}),n$20(Object,"freeze",function(t){return t})}();
    
    
        
!function(){"use strict";var t,e,n=window.Window;n&&(t=n.prototype);var r=window.HTMLDocument;r&&(e=r.prototype);var i=Element.prototype,s=[];if(!("addEventListener"in i)){var a=function(t,e,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var r=0,i=s.length;i>r;r++){var a=s[r];if(a.type===t&&a.listener===e)return}var o=this,c=function(t){t.target=t.srcElement,t.currentTarget=o,e.call(o,t)},u=t,l=c;if("DOMContentLoaded"===t&&(u="readystatechange",l=function(t){"complete"===document.readyState&&c(t)},"complete"===document.readyState)){var v=document.createEventObject();v.srcElement=window,l(v)}this.attachEvent("on"+u,l),s.push({object:this,type:t,listener:e,wrapper:l})};n$20(i,"addEventListener",a),t&&n$20(t,"addEventListener",a),e&&n$20(e,"addEventListener",a)}if(!("removeEventListener"in i)){var o=function(t,e,n){if(n)throw new Error("The optional `useCapture` argument is not supported in this browser");for(var r=-1,i=s.length;++r<i;){var a=s[r];if(a.object===this&&a.type===t&&a.listener===e){var o;o="DOMContentLoaded"===t?"readystatechange":t,this.detachEvent("on"+o,a.wrapper),s.splice(r,1);break}}};n$20(i,"removeEventListener",o),t&&n$20(t,"removeEventListener",o),e&&n$20(e,"removeEventListener",o)}var c=i.hasOwnProperty("classList");if(!c){var u=function(t){this.element=t},l=u.prototype;l.item=function(t){var e=this.element.getAttribute("class"),n=e?e.trim().split(/\s+/):null;return n?n[t]:void 0},l.contains=function(t){var e=this.element.getAttribute("class"),n=e?" "+e+" ":"";return n.indexOf(" "+t+" ")>-1},l.add=function(){for(var t=this.element,e=t.getAttribute("class"),n=e?" "+e+" ":" ",r=!1,i=arguments.length,s=0;i>s;s++){var a=arguments[s]+" ";
-1===n.indexOf(" "+a)&&(n+=a,r=!0)}r&&t.setAttribute("class",n.substring(1,n.length-1))},l.remove=function(){for(var t=this.element,e=t.getAttribute("class"),n=e?" "+e+" ":" ",r=!1,i=arguments.length,s=0;i>s;s++)for(var a,o=arguments[s],c=" "+o+" ";(a=n.indexOf(c))>-1;)n=n.substr(0,a)+n.substr(a+o.length+1),r=!0;r&&(n=n.substring(1,n.length-1)," "===n&&(n=""),t.setAttribute("class",n))},l.toggle=function(t,e){var n=this.contains(t),r=!1;return 2===arguments.length?(n&&!e&&(r="remove"),!n&&e&&(r="add")):r=n?"remove":"add",r?(this[r](t),!n):n},l.toString=function(){return this.element.getAttribute("class")||""},Object.defineProperty&&Object.defineProperty(i,"classList",{get:function(){return new u(this)},configurable:!0})}if(window.DOMTokenList){var v=window.DOMTokenList.prototype,d=document.createElement("div");if(d.classList.toggle("polyfill-test-class",!1)!==!1){var f=v.toggle;v.toggle=function(t,e){if(1===arguments.length)return f.call(this,t);var n=this.contains(t),r=e?n?!1:"add":n?"remove":!1;return r?(this[r](t),!n):n}}if(d.classList.add("foo","bar","baz"),!d.classList.contains("baz")){var g=v.add;v.add=function(){for(var t=arguments.length,e=0;t>e;e++)g.call(this,arguments[e])}}if(d.classList.add("foo","bar","baz"),d.classList.remove("foo","bar","baz"),d.classList.contains("baz")){var h=v.remove;v.remove=function(){for(var t=arguments.length,e=0;t>e;e++)h.call(this,arguments[e])}}}n$20(i,"addEventListener",a),n$20(window,"addEventListener",a),n$20(i,"removeEventListener",o),n$20(window,"removeEventListener",o);var m=CSSStyleDeclaration.prototype;"setProperty"in m||n$20(m,"setProperty",function(t,e){return this.setAttribute.call(this,t,e)
})}();
    
    
        
!function(){"use strict";var r=Event.prototype;n$20(r,"preventDefault",function(){this.returnValue=!1}),n$20(r,"stopPropagation",function(){this.cancelBubble=!0})}();
    
    
        
!function(){"use strict";var r=function(){};n$23=r}();
    
    
        
!function(){"use strict";var t=0,e=function(e){if(null===e)return"_null";if(void 0===e)return"_undefined";if(e.hasOwnProperty("_cwGUID"))return e._cwGUID;var n=typeof e;switch(n){case"number":Object.is(e,-0)&&(e="-0");case"string":case"boolean":return n+e;case"object":case"function":t++;var i=n+t;return r.value=i,global.Object.defineProperty(e,"_cwGUID",r),i;default:n$11("unrecognized object type")}},n=function(){t=0},r={value:"",enumerable:!1,writable:!1,configurable:!1};n$22=e,n$901=n}();
    
    
        
!function(){"use strict";function t(t){return n(t.constructor)||n(t)||"<object>"}function n(t){var n=t.__QUALIFIED_CLASS_NAME__;if(n)return t.hasOwnProperty("__QUALIFIED_CLASS_NAME__")||(n+=t.isClass&&!t.isInitialized?"(Uninitialized subclass "+n$22(t)+")":"(Anonymous subclass "+n$22(t)+")"),n}n$24=t}();
    
    
        
!function(){"use strict";function n(n,t,s){for(var o,i=e,c=n.apply(t,s);e>i;)e--,o=r[e],r[e]=void 0,o.release();return c}function t(n){r[e]=n,e++}var r=[],e=0;n$102=n,n$25=t}();
    
    
        
!function(){"use strict";function e(e,n){var i,r,s=n.length;for(i=0;s>i;i++)r=n[i],r.isClass&&n$11("Error: attempting to mixin class "+r.toString+" as a mixin to "+e.toString(),{"class":e,mixin:r}),e.hasMixin(r)||t(e,r);return e}function t(t,r){var s,a,o;return s=r.mixinDependencies,s&&e(t,s),t.mixins.push(r),a=r.staticMembers,n(t,a),i(t,a),o=t.prototype,n(o,r),i(o,r),t.mixinWasApplied(r),t}function n(e,t){if(t){var n=t.__superMap,i=e[s];i=i?Object.create(i):{};for(var r in n){var a=n[r];i[r]=e[a]}e[s]=i}}function i(e,t){if(t){var n=Object.getOwnPropertyNames(t);n.push.apply(n,Object.getOwnPropertySymbols(t));for(var i=n.length,r=0;i>r;r++){var s=n[r];if("staticMembers"!==s&&"mixinDependencies"!==s){for(var a=t[s];a&&a.initializeMember;)a=a.initializeMember(e,s);void 0!==a&&(e[s]=a)}}}}function r(e){e.isDisposed&&n$11("Cannot dispose object because object is already disposed.",e),e.isDisposing=!0,e.dispose(),e._baseDisposeCalled||n$11("Base dispose was never invoked. Overridden dispose methods must always call `super()`."),e.isDisposing=!1,e.isDisposed=!0}var s="__s",a={isClass:!0,name:null,isNamed:null,mixins:[],ancestors:[],superclass:null,create:function(){var e=new this.Constructor,t=e._metadataKeysForCreate;if(t){var n,i,r,s=e._metadataForCreateByKey,a=t.length;for(n=0;a>n;n++)i=t[n],r=s[i].initializeMemberForInstance(e,i),void 0!==r?e[i]=r:delete e[i]}return e.init.apply(e,arguments),e._baseInitCalled||n$11("Base init was never invoked. Overridden init methods must always call `super()`."),e.isInitialized=!0,e},mixinWasApplied:n$23,isInitialized:!0,extend:function(){var t=global.Object.create(this),n=t.prototype=global.Object.create(t.prototype);
t.isInitialized=!1,n.isInitialized=!1,t.mixins=t.mixins.slice();var i=new Function;return i.prototype=n,t.Constructor=i,n.constructor=t,t.ancestors=this.ancestors.slice(),t.ancestors.push(this),t.superclass=this,e(t,arguments),t._baseInitCalled=!1,n._baseInitCalled=!1,t.init(),t._baseInitCalled||n$11("Base init was never invoked. Overridden init methods must always call `super()`."),t.isInitialized=!0,t},init:function(){this._baseInitCalled=!0},hasMixin:function(e){return this.mixins.indexOf(e)>=0},subclassOf:function(e){return this.ancestors.indexOf(e)>=0?!0:!1},kindOf:function(e){return e?this.hasMixin(e)||this.subclassOf(e)||this===e:!1},toString:function(){return"[Class "+n$24(this)+"]"},toJSON:function(){return this.toString()},prototype:{_cwGUID:"",init:function(e){arguments.length>1&&n$11("Default initializer only supports at most one argument; if you would like to apply a mixin it should be done when calling .extend()."),i(this,e),this._baseInitCalled=!0},_baseInitCalled:!1,_metadataKeysForCreate:null,isObject:!0,isInitialized:!0,isDisposing:!1,isDisposed:!1,_retainCount:0,retain:function(){return this.isDisposed&&n$11("Cannot retain an object that has already been disposed.",this),this._retainCount++,this},release:function(){var e=--this._retainCount;return 0>e&&n$11("Cannot release an object that has never been retained.",this),0===e&&r(this),this},autorelease:function(){return n$25(this),this},dispose:function(){this._baseDisposeCalled=!0;var e=this._weakReferences;if(e){var t,n,i,r,s=e.length;for(t=0;s>t;t+=3)i=e[t],i&&(n=e[t+1],r=e[t+2],n.call(i,r));e.length=0}},registerWeakReference:function(e,t,n){var i,r=this._weakReferences;
if(r){var s=this._weakReferenceAvailableIndicesLength;s>=0?(i=this._weakReferenceAvailableIndices[s],this._weakReferenceAvailableIndicesLength=s-1):i=r.length+1}else r=this._weakReferences=[],this._weakReferenceAvailableIndices=[],this._weakReferenceAvailableIndicesLength=-1,i=1;return r[i-1]=e,r[i]=t,r[i+1]=n,i},deregisterWeakReference:function(e){var t=this._weakReferences;t[e-1]||n$11("Cannot deregister a weak reference that wasn't registered or was previously deregistered.",this),t[e-1]=t[e]=t[e+1]=null,this._weakReferenceAvailableIndices[++this._weakReferenceAvailableIndicesLength]=e},_weakReferences:null,_weakReferenceAvailableIndices:null,_weakReferenceAvailableIndicesLength:-1,hasMixin:function(e){return this.constructor.hasMixin(e)},instanceOf:function(e){if(!e)return!1;if(e.isClass){var t=e&&e.Constructor;return t?this instanceof t:!1}return this.hasMixin(e)}}};Object.defineProperties(a,{name:{get:function(){return n$24(this)}},isNamed:{get:function(){return this.hasOwnProperty("__QUALIFIED_CLASS_NAME__")}}});var o=new Function;o.prototype=a.prototype,a.Constructor=o,a.prototype.constructor=a,n$28=a}();
    
    
        
!function(){"use strict";function n(n,t,r,e){void 0===r&&(r=0),void 0===e&&(e=r);var o=t.length;n.length=o+r-e;for(var i=e,s=r;o>i;i++,s++)n[s]=t[i];return n}n$26=n}();
    
    
        
!function(){"use strict";function r(r,n,e){return void 0===n&&(n=0),void 0===e&&(e=0),t.length=0,n$26(t,r,n,e)}var t=[];n$27=r}();
    
    
        
!function(){"use strict";function t(t){var n=n$27(arguments,0,1);return t.define.apply(t,n)}var n=n$28.extend({staticMembers:{define:function(){return this.create.apply(this,arguments)}},value:void 0,initializeMember:function(t,n){return t.hasMixin(n$29)||n$11("cannot add metadata to a class without CW.MetadataSupport"),t.registerMetadata(n,this),this.getValue(t,n)},wasRegistered:n$23,getValue:function(){return this.value},initializeMemberForInstance:null,requiresSupport:null,allowedOnClass:!1,allowedOnInstance:!0,allowAtExtend:!0,allowAtRuntime:!1,allowAtCreate:!1,isOnlyMetadataForKey:!0});n$17=t,n$30=n,n.__QUALIFIED_CLASS_NAME__="CW.Metadata"}();
    
    
        
!function(){"use strict";function e(e,t){return e&&e.kindOf&&e.kindOf(t)}n$31=e}();
    
    
        
!function(){"use strict";function t(t,n){return t&&t.instanceOf?t.instanceOf(n):n===global.Event||"function"==typeof n?t instanceof n:!1}n$32=t}();
    
    
        
!function(){"use strict";function t(t){t.hasOwnProperty(c)||(a(t,c),e(t[c]),a(t,d),a(t,l),t._metadataKeysForCreate&&(t._metadataKeysForCreate=t._metadataKeysForCreate.slice()))}function a(t,a){t[a]&&(t[a]=Object.create(t[a]))}function e(t){for(var e in t)a(t,e)}function i(a,e){a||n$11("'key' is required"),e||n$11("'metadata' is required"),n$32(e,n$30)||n$11("Metadata must inherit from CW.Metadata");var i=e.key;i&&i!==a&&n$11("metadata cannot be registered on key '"+a+"'; it is already registered for a different key '"+i);var n=e.requiresSupport,s=this.isClass?this:this.constructor;n&&!s.kindOf(n)&&n$11("This class does not support metadata of type "+n$24(e)+".",e),this.isClass?(e.allowedOnClass||n$11("This metadata cannot be added to a class because `allowedOnClass` is false (key: '"+a+"', class: "+this+", metadata: "+e.constructor+").",{key:a,onClass:this,metadata:e}),this.isInitialized||e.allowAtExtend||e.allowAtCreate||n$11("New static metadata may not be added at extend time when `allowAtExtend` and `allowAtCreate` are false (key: '"+a+"', class: "+this+", metadata: "+e.constructor+").",{key:a,onClass:this,metadata:e})):(e.allowedOnInstance||n$11("This metadata cannot be added to an instance because `allowedOnInstance` is false (key: '"+a+"', instance of: "+this.constructor+", metadata: "+e.constructor+").",{key:a,instance:this,metadata:e}),this.constructor.isInitialized||this.isInitialized||e.allowAtExtend||n$11("New metadata may not be added in extend when `allowAtExtend` is false (key: '"+a+"', instance of: "+this.constructor+", metadata: "+e.constructor+").",{key:a,instance:this,metadata:e}),!this.constructor.isInitialized||this.isInitialized||e.allowAtCreate||n$11("New metadata may not be added in create when `allowAtCreate` is false (key: '"+a+"', instance of: "+this.constructor+", metadata: "+e.constructor+").",{key:a,instance:this,metadata:e})),this.isInitialized&&(e.allowAtRuntime?this.initializeRuntime():n$11("New metadata may not be added at runtime when `allowAtRuntime` is false (key: '"+a+"', instance: "+this+", metadata: "+e.constructor+").",{key:a,instance:this,metadata:e}));
var r=e.constructor,o=this._metadataByKey[a],c=r.ancestors;o&&o.isOnlyMetadataForKey&&e.isOnlyMetadataForKey&&!e.instanceOf(o.constructor)&&n$11("isOnlyMetadataForKey metadata may only be overridden if the new value is the same type or a subclass (key: '"+a+"', target: "+this+", metadata: "+e.constructor+").",{key:a,target:this,metadata:e}),t(this);var d=this._metadataByKey,l=c.length,y=this._metadataByType;for(e.isOnlyMetadataForKey||(o=null);r&&r!==n$30;){var h=n$22(r),m=y[h];m||(m=y[h]={},u[h]=r),o||(o=m[a]),m[a]=e,r=c[--l]}e.isOnlyMetadataForKey&&(d[a]=e);var f=this._metadataForCreateByKey,_=this._metadataKeysForCreate;e.initializeMemberForInstance?(f&&_||(f=this._metadataForCreateByKey={},_=this._metadataKeysForCreate=[]),f[a]&&_.splice(_.indexOf(a),1),_.push(a),f[a]=e):f&&f[a]&&(f[a]=void 0,_.splice(_.indexOf(a),1)),e.key=a;var p=e.getValue(this,a);this.isInitialized&&void 0!==p&&(this[a]=p),e.wasRegistered(this,a,o)}function n(t){return this._metadataByType[n$22(t)]||y}function s(t){return this._metadataByKey[t]}var r={initializeMember:function(){return{}}},o={staticMembers:{init:function(a){var e=this.prototype;t(this),t(e),this.__s._4fLGJhq1OEM$UO$init.call(this,a),e.initializeClass(),this.initializeClass(),this.initializeInstance()},_metadataByType:r,_metadataByKey:r,registerMetadata:i,getMetadataByType:n,getMetadata:s,initializeClass:n$23,initializeInstance:n$23,initializeRuntime:n$23,__superMap:{_4fLGJhq1OEM$UO$init:"init"}},init:function(t){this.__s._4fLGJhq1OEM$1CF$init.call(this,t),this.initializeInstance()},_metadataByType:r,_metadataByKey:r,registerMetadata:i,getMetadataByType:n,getMetadata:s,initializeClass:n$23,initializeInstance:n$23,initializeRuntime:n$23,__superMap:{_4fLGJhq1OEM$1CF$init:"init"}},c="_metadataByType",d="_metadataByKey",l="_metadataForCreateByKey",u={},y={};
n$29=o}();
    
    
        
!function(){"use strict";function e(e){return!(!e||!e.isObject)}n$33=e}();
    
    
        
!function(){"use strict";function t(t){return!(!t||!t.isClass)}n$34=t}();
    
    
        
!function(){"use strict";function t(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)&&!n$33(t)&&!n$34(t)}n$37=t}();
    
    
        
!function(){"use strict";function n(n){return n instanceof global.Function||!(!n||"function"!=typeof n||n instanceof global.Element)}n$39=n}();
    
    
        
!function(){"use strict";var e=function(e,t,n){return Array.prototype.slice.call(e,0|t,n)};n$35=e}();
    
    
        
!function(){"use strict";function t(t){return Array.isArray(t)?!0:t&&"[object Arguments]"==""+t}n$36=t}();
    
    
        
!function(){"use strict";var t=function(t,e){var i,n=t;if(n$36(t)){if(n=n$35(t),e){for(var s=n.length,r=0,o=0;s>o;o++)i=e.call(this,n[o],e,o),i!==a&&(n[r]=i,r++);r!==s&&(n.length=r)}}else if(n$37(t)){n=global.Object.create(global.Object.getPrototypeOf(t));for(var c=Object.keys(t),l=c.length,d=0;l>d;d++){var u=c[d];i=t[u],e&&(i=e.call(this,i,e,u)),i!==a&&(n[u]=i)}}return n},a={};n$38=t,n$164=a}();
    
    
        
!function(){"use strict";var t=function(t){return n$38.call(this,t)};n$40=t}();
    
    
        
!function(){"use strict";function e(e){return null!==e&&void 0!==e}n$41=e}();
    
    
        
!function(){"use strict";function t(t,n,e){n$39(e)&&(e=e.call(this,t));var i,a=n$37(e),r=Array.isArray(e),s=!n$41(e);return a||r||s?n===Object?s?i={}:a?i=n$40(e):n$11("invalid configuration for Object: must be either a hash or empty"):n===Array?s?i=[]:r?i=n$40(e):n$11("invalid configuration for Array: must be either an array or empty"):n.create&&(s?i=n.create({owner:this}):(e.owner=this,i=n.create(e))):i=e,i}var n={mixinDependencies:[n$29],staticMembers:{initializeInstance:function(){var n=this.getMetadataByType(n$42);for(var e in n){var i,a=n[e];i=this.hasOwnProperty(e)?this[e]:a.value;var r=a.objectType;this[e]=t.call(this,e,r,i)}this.__s._3Pbl0vm5l_d$Kj$initializeInstance.call(this)},__superMap:{_3Pbl0vm5l_d$Kj$initializeInstance:"initializeInstance"}},initializeInstance:function(){var n=this.getMetadataByType(n$42);for(var e in n){var i=this[e],a=n[e],r=a.objectType;this[e]=t.call(this,e,r,i)}this.__s._3Pbl0vm5l_d$SJ$initializeInstance.call(this)},__superMap:{_3Pbl0vm5l_d$SJ$initializeInstance:"initializeInstance"}};n$51=n}();
    
    
        
!function(){"use strict";var t={staticMembers:{init:function(t){return this.isAbstract&&!this.hasOwnProperty("isAbstract")&&(this.isAbstract=!1),this.__s._3XmC_kFMDgm$Fd$init.call(this,t)},isAbstract:!0,__superMap:{_3XmC_kFMDgm$Fd$init:"init"}},init:function(t){this.constructor.isAbstract?n$11("this class cannot be instantiated because it is abstract"):this.__s._3XmC_kFMDgm$Lq$init.call(this,t)},__superMap:{_3XmC_kFMDgm$Lq$init:"init"}};n$45=t}();
    
    
        
!function(){"use strict";function e(e){var t=arguments.length;1>=t&&n$11("[CW.Utils#mixin] Must provide objects to mixin method");for(var n=1;t>n;n++){var i=arguments[n];if(i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}n$43=e}();
    
    
        
!function(){"use strict";var t=function(){var t=arguments.length;0===t&&n$11("[CW.Utils#merge] Must provides objects to merge");var n=n$27(arguments,1);return n[0]={},n$43.apply(this,n)};n$44=t}();
    
    
        
!function(){"use strict";var t="[CW.Property#extendedForAccumulatorDefaultValue] Cannot extend property.",a=n$28.extend({init:function(t){this.value=t,this.__s._Uq3sv927GK$dI$init.call(this)},value:null,initializeMember:function(a,e){var i,n=a[e],s=this.value;return Array.isArray(n)?i=n.concat(s):n$37(n)?n$37(s)?i=n$44(n,s):n$11(t+" The default value of the superclass property is a hash, but the subclass does not provide a hash.",{value:s,property:this}):n$34(n)?n$37(s)?i=n.extend(s):n$11(t+" The default value of the superclass property is a class, but the subclass does not provide a hash.",{value:s,property:this}):n$41(n)?n$11(t+" This property class returned a default value that is not valid for aggregation. "+" It must be either an array or a hash object.",{property:this,previousValue:n}):n$37(s)||Array.isArray(s)?i=s:n$11(t+" If the default value of the superclass property is "+n+", the subclass must provide a hash or an array.",{value:s,property:this}),i},__superMap:{_Uq3sv927GK$dI$init:"init"}}),e=function(){return a.create.apply(a,arguments)};n$15=a,n$16=e,a.__QUALIFIED_CLASS_NAME__="CW.Accumulator"}();
    
    
        
!function(){"use strict";function t(t){var r=t.getMetadataByType(n$46),e="";for(var n in r)r[n].validate(t,n)||(e+="\n    "+n);return e}var r={mixinDependencies:[n$45,n$29],initializeClass:function(){var r=t(this),e=this.constructor;e.isAbstract=!!r,e.missingRequires=r,this.__s._1Rbc__dwvEf$fn$initializeClass.call(this)},staticMembers:{initializeClass:function(){var r=t(this);this.isAbstract=this.isAbstract||!!r,this.missingRequires+=r,this.__s._1Rbc__dwvEf$ow$initializeClass.call(this)},__superMap:{_1Rbc__dwvEf$ow$initializeClass:"initializeClass"}},init:function(t){this.constructor.isAbstract?n$11(this+" cannot be instantiated because it is abstract. Missing keys: "+this.constructor.missingRequires):this.__s._1Rbc__dwvEf$vO$init.call(this,t)},__superMap:{_1Rbc__dwvEf$fn$initializeClass:"initializeClass",_1Rbc__dwvEf$vO$init:"init"}};n$47=r}();
    
    
        
!function(){"use strict";var t=n$30.extend({validate:function(t,n){return n in t},requiresSupport:n$47,isOnlyMetadataForKey:!1,allowedOnClass:!0});n$46=t,t.__QUALIFIED_CLASS_NAME__="CW.Required"}();
    
    
        
!function(){"use strict";var e=n$46.extend({validate:function(e,t){return n$39(e[t])}});n$48=e,e.__QUALIFIED_CLASS_NAME__="CW.RequiredMethod"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$47],get:n$17(n$48),set:n$17(n$48)};n$49=t}();
    
    
        
!function(){"use strict";function n(n,t){return n?n$31(n,n$50)||n$32(n,n$49)?n.get(t):n[t]:void 0}n$52=n}();
    
    
        
!function(){"use strict";function t(t,a,e){return t?(n$31(t,n$50)||n$32(t,n$49)?t.set(a,e):t[a]=e,t):void 0}n$53=t}();
    
    
        
!function(){"use strict";function t(){this._properties=this.getMetadataByType(n$3)}function e(){var t,e,a,i=this.getMetadataByType(n$3),n=d.staticMembers.defaultValuePrefix;for(t in i)a=i[t],a.initForObject&&a.initForObject(this,t);this.propertiesAreInitialized=!0;for(t in i){a=i[t];var s=n+t;e=this[s],delete this[s],n$39(e)&&(e=e.call(this)),a.setInitialValueForObject&&a.setInitialValueForObject(this,t,e)}}function a(t,e){for(var a,i,n=0;t&&-1!==(i=e.indexOf(".",n));)a=e.substring(n,i),t=n$52(t,a),n=i+1;return t}function i(t){return t.substring(t.lastIndexOf(".")+1)}function n(t,e){var n=a(this,t);return n||n$11("cannot call set on null or undefined object"),n$53(n,i(t),e),this}function s(t){var e=a(this,t);if(e)return n$52(e,i(t))}function r(t){var e=this._properties[t];return e?e.getForObject(this,t):this[t]}function o(t,e){var a=this._properties[t];return a?a.setForObject(this,t,e):this[t]=e,this}function c(){for(var t={},e=0;e<arguments.length;e++)t[arguments[e]]=this.get(arguments[e]);return t}function l(t){for(var e in t)t.hasOwnProperty(e)&&this.set(e,t[e]);return this}function u(){return Array.prototype.map.call(arguments,this.get,this)}function h(t,e){t.length>e.length&&n$11("Not enough values to set");for(var a=0;a<t.length;a++)this.set(t[a],e[a]);return this}var d={mixinDependencies:[n$51,n$49],staticMembers:{get:r,set:o,setPath:n,getPath:s,getPropertiesAsObject:c,setPropertiesWithObject:l,getPropertiesAsArray:u,setPropertiesWithArrays:h,initializeClass:function(){this.__s._45M2rPFq29y$wc$initializeClass.call(this),t.call(this)},initializeInstance:function(){this.__s._45M2rPFq29y$_3$initializeInstance.call(this),e.call(this)
},defaultValuePrefix:"__CW__",propertiesAreInitialized:!1,mixinWasApplied:function(){this.propertiesAreInitialized=!1},__superMap:{_45M2rPFq29y$wc$initializeClass:"initializeClass",_45M2rPFq29y$_3$initializeInstance:"initializeInstance"}},initializeClass:function(){this.__s._45M2rPFq29y$199$initializeClass.call(this),t.call(this)},initializeInstance:function(){this.__s._45M2rPFq29y$1C9$initializeInstance.call(this),e.call(this)},get:r,set:o,setPath:n,getPath:s,getPropertiesAsObject:c,setPropertiesWithObject:l,getPropertiesAsArray:u,setPropertiesWithArrays:h,propertiesAreInitialized:!1,__superMap:{_45M2rPFq29y$199$initializeClass:"initializeClass",_45M2rPFq29y$1C9$initializeInstance:"initializeInstance"}};n$50=d}();
    
    
        
!function(){"use strict";function t(t){var r=this.get(t);return this.set(t,++r),r}function r(t){var r=this.get(t);return this.set(t,--r),r}function e(t,r){var e=!0;if(!n$8.isInsideSetter){var n=this.get(t);e=r!==n}return e?(this.set(t,r),!0):!1}var n={staticMembers:{increment:t,decrement:r,setIfChanged:e},increment:t,decrement:r,setIfChanged:e};n$54=n}();
    
    
        
!function(){"use strict";var n=n$28.extend(n$50,{toString:function(){var n=n$24(this);return"[Object "+n+":"+n$22(this)+"]"},hashCode:function(){return n$22(this)}},n$54);n$5=n,n.__QUALIFIED_CLASS_NAME__="CW.Object"}();
    
    
        
!function(){"use strict";function e(){return n.create.apply(n,arguments)}function t(e,t){return n.create.call(n,{objectType:e,value:t,shouldExtend:!0})}var n=n$30.extend({init:function(e,t){return n$37(e)?this.__s._FYhTZMAFSG$14G$init.call(this,e):(this.objectType=e,this.value=t||null,this.__s._FYhTZMAFSG$15k$init.call(this),void 0)},wasRegistered:function(e,t,n){this.shouldExtend&&(this.objectType=n.objectType.extend(this.objectType))},requiresSupport:n$51,objectType:null,isOnlyMetadataForKey:!1,allowedOnClass:!0,shouldExtend:!1,__superMap:{_FYhTZMAFSG$14G$init:"init",_FYhTZMAFSG$15k$init:"init"}});n$42=n,n$84=e,n$902=t,n.__QUALIFIED_CLASS_NAME__="CW.Instance"}();
    
    
        
!function(){"use strict";var e=n$46.extend({metadataType:null,validate:function(e,t){if(!n$32(e,n$29))return!1;var n=e.getMetadata(t);return n$32(n,this.metadataType)}});n$80=e,e.__QUALIFIED_CLASS_NAME__="CW.RequiredMetadata"}();
    
    
        
!function(){"use strict";function n(n){return"boolean"==typeof n}n$55=n}();
    
    
        
!function(){"use strict";function t(t){return"number"==typeof t}n$56=t}();
    
    
        
!function(){"use strict";function e(e){return"string"==typeof e}n$57=e}();
    
    
        
!function(){"use strict";function t(t){var c=t.type;if(null!==c){c=r(c,t);var l,f;"integer"===c?l=e:"number"===c?l=n:"string"===c?l=n$57:"boolean"===c?l=n$55:"simple-object"===c?l=n$37:"hash"===c?l=u:c.isClass?l=i(c):"function"==(f=typeof c)||p(c)?l=a(c):"object"===f?l=o(c):n$11('Cannot create property "%{key}" with unknown type `%{type}`.',{property:t,key:t.key,type:c}),l=s(l),t._validateType=l}}function r(t,r){switch(void 0===t&&n$11('Error defining property "%{key}". You must specify a type, or provide a `validate` method.',{property:r,key:r.key}),t){case Number:t="number";break;case String:t="string";break;case Boolean:t="boolean";break;case"object":t=Object;break;case"function":t=Function}return t}function n(t){return n$56(t)&&!Number.isNaN(t)}function e(t){return(0|t)===t}function i(t){return function(r){var n;return r.isObject&&((n=r.constructor)===t||n.subclassOf(t))}}function o(t){return function(r){return r.hasMixin&&r.hasMixin(t)}}function a(t){return function(r){return r instanceof t}}function s(t){return function(r){return n$41(r)?t.call(this,r):!0}}function u(t){var r=t.constructor;if(r===Object)return!0;var n;for(n=0;f>n;n++)if(r===l[n])return!0;return!1}function c(t){l[f]=t,f++}var p;p="function"!=typeof global.XMLHttpRequest?function(t){return t.prototype&&t.prototype.constructor}:n$23;var l=[],f=0;n$58=t,n$59=c}();
    
    
        
!function(){"use strict";function t(t){return e.test(t)}var e=/^[$A-Z_][$A-Z_0-9]*$/i;n$60=t}();
    
    
        
!function(){"use strict";var n=n$5.extend({message:"",validate:function(){return!1}});n$61=n,n.__QUALIFIED_CLASS_NAME__="CW.Data.Validator"}();
    
    
        
!function(){"use strict";var PROPERTY_NOT_WRITTEN={},VALUE_SENTINEL="$value",Property=n$30.extend({staticMembers:{registerHashConstructor:function(e){n$59(e)},_getForObjectString:"",_setForObjectReadWriteString:""},readOnly:!1,defaultValue:void 0,set:null,get:null,setterReturnArray:[],usesBuiltinGet:!1,usesBuiltinSet:!1,isComputedProperty:!1,type:null,validators:null,init:function(e){n$37(e)?(this.defaultValue=e.defaultValue,delete e.defaultValue,this.__s._65bfiRHBfd$4Co$init.call(this,e)):(this.defaultValue=e,this.__s._65bfiRHBfd$487$init.call(this));var t=this.validators;if(t&&t.length){var n;for(n=0;n<t.length;++n){var i=t[n];n$32(i,n$61)||(t[n]=i.create())}}},requiresSupport:n$50,allowedOnClass:!0,getValue:function(){return this.defaultValue},_ivar:null,_getParamOffset:0,_setParamOffset:0,_callsGetSuper:!1,_callsSetSuper:!1,_validateType:function(){return!0},wasRegistered:function(e,t,n){this.__s._65bfiRHBfd$4pA$wasRegistered.apply(this,arguments),n&&this._inheritFromSuperMap(e,n,t),this._didFirstPropertyRegister||(!this.writeDependencies&&this.dependencies&&(this.writeDependencies=this.dependencies),n&&this.inheritFrom(n),this._setUpInternalVariables(t),this._synthesizeInternalMethods(),this._didFirstPropertyRegister=!0),this._moveDefaultValuesToPrepareForNativeAccessors(e,t),this.setUpNativeAccessors(e)},inheritFrom:function(e){this.get||e.usesBuiltinGet||(this.get=e.get),this.set||e.usesBuiltinSet||(this.set=e.set),e.dependencies&&(this.dependencies?this._callsGetSuper&&(this.dependencies=e.dependencies.concat(this.dependencies),this._getParamOffset=e.dependencies.length):this.dependencies=e.dependencies),e.writeDependencies&&(this.writeDependencies?this._callsGetSuper&&(this.writeDependencies=e.writeDependencies.concat(this.writeDependencies),this._setParamOffset=e.writeDependencies.length):this.writeDependencies=e.writeDependencies),e.hasOwnProperty("readOnly")&&!this.hasOwnProperty("readOnly")&&(this.readOnly=e.readOnly)
},_inheritFromSuperMap:function(e,t,n){var i=e.__s,r=this.__superMap,s=!1;for(var a in r){var o=r[a];("get"===o||"set"===o)&&(s=!0,i[a]=t[o],"get"===o&&(this._callsGetSuper=!0),"set"===o&&(this._callsSetSuper=!0))}s&&this._didFirstPropertyRegister&&n$11("Calling super from within a getter or setter is not permited for properties on mixins when the mixin is mixed into multiple parent classes. key: %{key}",{key:n,object:e})},_setUpInternalVariables:function(e){this._ivar="_"+e,this.dependencies=this._validateDependecyArray(this.dependencies),this.writeDependencies=this._validateDependecyArray(this.writeDependencies)},_moveDefaultValuesToPrepareForNativeAccessors:function(e,t){var n=n$50.staticMembers.defaultValuePrefix;e.hasOwnProperty(t)&&(e[n+t]=e[t])},_validateDependecyArray:function(e){return e},_synthesizeInternalMethods:function(){if(this._synthesizeAccessorsIfNeeded(),this._mutateAccessorsForSuperIfNeeded(),this._synthesizeInternalSet(),this._fillSetPathMap(),n$58(this),this._setUpInternalAccessors(),this.getForObject||this._synthesizeGetForObject(),!this.setForObject){var e=this.writeDependencies;e&&(this.setterReturnArray=new Array(e.length)),this._synthesizeSetForObject()}},_synthesizeAccessorsIfNeeded:function(){this.get||(this.usesBuiltinGet=!0,this.get=function(e){return e}),this.set||(this.usesBuiltinSet=!0,this.set=function(e){return e}),this.isComputedProperty=!this.usesBuiltinGet||!this.usesBuiltinSet},_mutateAccessorsForSuperIfNeeded:function(){var e=this.get;if(!e.generated){var t=this._getParamOffset;this.get=function(n,i,r,s){return e.call(this,n,i,t,s)},this.get.generated=!0
}var n=this.set;if(!n.generated){var i=this._setParamOffset;this.set=function(e,t,r,s,a){return n.call(this,e,t,r,i,a)},this.set.generated=!0}},_fillSetPathMap:function(){var e=this.writeDependencySetPathMap;e||(e=this.writeDependencySetPathMap=[!1]);for(var t=e.length,n=0;t>n;n++)e[n]=e[n]?this.internalSetPath:this.internalSet},initForObject:null,setInitialValueForObject:function(e,t,n){void 0!==n&&this.setForObjectReadWrite(e,t,n)},setUpNativeAccessors:function(e){var t=this.key,n=this,i=this.setForObject,r=this.getForObject;Object.defineProperty(e,t,{get:function(){return r.call(n,this,t)},set:function(e){return i.call(n,this,t,e)},configurable:!0})},_setUpInternalAccessors:n$23,getForObject:null,_synthesizeGetForObject:function(){var dependencies=this.dependencies,getter=this.get,self=this,getForObjectString=Property._getForObjectTemplate;if(!getForObjectString){var getForObjectTemplate=function(e){return e.propertiesAreInitialized?getter.call(e,e.COMPILED_ACCESSOR_STRING,dependencies,0,self):e.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY};getForObjectString=getForObjectTemplate.toString(),getForObjectString="("+getForObjectString+")",Property._getForObjectString=getForObjectString}var defaultValueStringifiedKey=JSON.stringify(n$50.staticMembers.defaultValuePrefix+this.key);defaultValueStringifiedKey="["+defaultValueStringifiedKey+"]",getForObjectString=getForObjectString.replace(/\.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY/g,defaultValueStringifiedKey);var ivar=this._ivar,accessorString=n$60(ivar)?"."+ivar:"["+JSON.stringify(ivar)+"]";getForObjectString=getForObjectString.replace(/\.COMPILED_ACCESSOR_STRING/g,accessorString),this.getForObject=eval(getForObjectString)
},setForObject:null,setForObjectReadWrite:null,_synthesizeSetForObject:function(){var writeDependencies=this.writeDependencies,setterReturnArray=this.setterReturnArray,setter=this.set,self=this,validateType=this._validateType,setterReturnArrayLength=setterReturnArray.length,setPathMap=this.writeDependencySetPathMap;this.clearSetterReturnArray(setterReturnArray);var unmangledFatalError=n$11,setForObjectReadWriteString=Property._setForObjectReadWriteTemplate;if(!setForObjectReadWriteString){var setForObjectReadWriteTemplate=function(e,t,n){if(!e.propertiesAreInitialized)return e.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY=n,void 0;validateType.call(e,n)||unmangledFatalError("Type error: cannot set value `%{value}` to property `%{key}` on %{object}.",{object:e,key:t,value:n});var i=setter.call(e,n,e.COMPILED_ACCESSOR_STRING,setterReturnArray,0,self);e.COMPILED_ACCESSOR_STRING=i;for(var r=0;setterReturnArrayLength>r;r++)setterReturnArray[r]!==PROPERTY_NOT_WRITTEN&&setPathMap[r](e,writeDependencies[r],setterReturnArray[r]);return this.clearSetterReturnArray(setterReturnArray),i};setForObjectReadWriteString=setForObjectReadWriteTemplate.toString(),setForObjectReadWriteString="("+setForObjectReadWriteString+")",Property._setForObjectReadWriteTemplate=setForObjectReadWriteString}var ivar=this._ivar,accessorString=n$60(ivar)?"."+ivar:"["+JSON.stringify(ivar)+"]",defaultValueStringifiedKey=JSON.stringify(n$50.staticMembers.defaultValuePrefix+this.key);defaultValueStringifiedKey="["+defaultValueStringifiedKey+"]",setForObjectReadWriteString=setForObjectReadWriteString.replace(/\.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY/g,defaultValueStringifiedKey),setForObjectReadWriteString=setForObjectReadWriteString.replace(/\.COMPILED_ACCESSOR_STRING/g,accessorString);
var setForObjectReadWrite=eval(setForObjectReadWriteString);if(this.setForObjectReadWrite=setForObjectReadWrite,this.readOnly){var defaultValueKey=n$50.staticMembers.defaultValuePrefix+this.key;this.setForObject=function(e,t,n){return e.propertiesAreInitialized?(n$11("Cannot set `"+t+"`: it is read-only.",{key:t,object:e,property:this,value:n}),void 0):(e[defaultValueKey]=n,void 0)}}else this.setForObject=setForObjectReadWrite},clearSetterReturnArray:function(e){for(var t=e.length,n=0;t>n;n++)e[n]=PROPERTY_NOT_WRITTEN},internalGet:function(e,t){return e.get(t)},internalGetPath:function(e,t){return e.getPath(t)},_synthesizeInternalSet:function(){var LOCAL_VALUE_SENTINEL=VALUE_SENTINEL,internalSetString=Property._internalSetString;if(!internalSetString){var internalSetTemplate=function(e,t,n){return t===LOCAL_VALUE_SENTINEL?(e.COMPILED_ACCESSOR_STRING=n,n):e.set(t,n)};internalSetString=internalSetTemplate.toString(),internalSetString="("+internalSetString+")",Property._internalSetString=internalSetString}var ivar=this._ivar,accessorString=n$60(ivar)?"."+ivar:"["+JSON.stringify(ivar)+"]";internalSetString=internalSetString.replace(/\.COMPILED_ACCESSOR_STRING/g,accessorString),this.internalSet=eval(internalSetString)},internalSet:null,internalSetPath:function(e,t,n){return e.setPath(t,n)},__superMap:{_65bfiRHBfd$487$init:"init",_65bfiRHBfd$4Co$init:"init",_65bfiRHBfd$4pA$wasRegistered:"wasRegistered"}}),property=function(){return Property.define.apply(Property,arguments)};n$903=VALUE_SENTINEL,n$3=Property,n$4=property,Property.__QUALIFIED_CLASS_NAME__="CW.Property"}();
    
    
        
!function(){"use strict";var t={staticMembers:{sharedInstance:n$4({get:function(){return this.hasOwnProperty("_sharedInstance")&&this._sharedInstance||(this._sharedInstance=this.create())},set:function(t){this._sharedInstance=t}})},dispose:function(){this.constructor._sharedInstance===this&&delete this.constructor._sharedInstance,this.__s._3PbIcN3P3N8$Ph$dispose.apply(this,arguments)},__superMap:{_3PbIcN3P3N8$Ph$dispose:"dispose"}};n$62=t}();
    
    
        
!function(){"use strict";function t(t,a){return t.replace(/%\{(.*?)\}/g,function(i,n){if(!a)throw"Cannot use named parameters with `fmt` without a data object. String: '"+t+"'";return e(n,a,t)})}function e(t,e,i){t=t.replace(a,"");var n,s,r,o=t.indexOf(":");return o>-1&&(n=t.substr(o+1),t=t.substr(0,o)),s=e[t],r=e[t+"Formatter"],r?s=r(s,n):n&&n$11("fmt() was given a formatting string, but key '"+t+"' has no formatter.",{string:i}),s}var a=/\s/g;n$19=t}();
    
    
        
!function(){"use strict";function e(e){(!e||0>e)&&(e=0);var t,n="",i=g;for(t=0;e>t;++t)n+=i;return n}var t="group",n="debug",i="info",r="warn",s="error",a="none",o="ERROR: ",u="INFO:  ",c="WARN:  ",l="DEBUG: ",d="GROUP: ",g="    ",_={group:d,debug:l,info:u,warn:c,error:o},f={debug:4,info:3,warn:2,error:1,group:1,none:0},h=n$5.extend({staticMembers:{LOG_LEVEL_NONE:a,LOG_LEVEL_GROUP:t,LOG_LEVEL_DEBUG:n,LOG_LEVEL_INFO:i,LOG_LEVEL_WARN:r,LOG_LEVEL_ERROR:s},messagePrefix:null,outputMessagePrefix:null,recordedMessagePrefix:null,logOutputLevel:r,logRecordingLevel:n,recordedLogMessagesMaximumLength:500,_recordedLogMessagesEnd:-1,reporter:global.console,_recordedLogMessages:null,_indentationLevel:0,init:function(e){this.__s._1sxBUgyaqyC$2XK$init.call(this),e&&this.set("reporter",e),this._recordedLogMessages=[]},debug:function(){this._handleMessage(n,arguments)},info:function(){this._handleMessage(i,arguments)},warn:function(){this._handleMessage(r,arguments)},error:function(){this._handleMessage(s,arguments)},group:function(){this._handleMessage(t,arguments),this.get("logRecordingLevel")!==a&&this._indentationLevel++},groupEnd:function(){this._outputMessage("groupEnd","");var e=this.get("logRecordingLevel");this._indentationLevel>0&&e!==a&&this._indentationLevel--},outputRecordedLogMessages:function(){for(var e=this._orderedRecordedLogMessages(),t=0;t<e.length;t++)this._outputMessage("log",e[t])},stringifyRecordedLogMessages:function(){return this._orderedRecordedLogMessages().join("\n")},_orderedRecordedLogMessages:function(){var e=[],t=this._recordedLogMessages||[],n=this.recordedLogMessagesMaximumLength-1,i=this._recordedLogMessagesEnd,r=i;
if(t.length>0)do e.push(t[r]),r=0===r?n:r-1;while(t[r]&&r!==i);return e.reverse()},_handleMessage:function(e,t){var n=this._shouldOutputType(e),i=this._shouldRecordType(e);if(n||i){var r=this.messagePrefix||"",s=r+n$19.apply(this,t);n&&this._outputMessage(e,s),i&&this._recordMessage(e,s)}},_shouldOutputType:function(e){var t=f,n=t[e],i=t[this.logOutputLevel];return i>=n},_shouldRecordType:function(e){var t=f,n=t[e],i=t[this.logRecordingLevel];return i>=n},_outputMessage:function(e,t){var n=this.get("reporter"),i=n?n[e]:null,r=this.outputMessagePrefix||"";i&&Function.prototype.call.call(i,n,r+t)},_recordMessage:function(e,t){var n=this._recordedLogMessages,i=this._createRecordedMessageString(e,t),r=this.recordedLogMessagesMaximumLength-1,s=this._recordedLogMessagesEnd,a=s===r?0:s+1;n[a]=i,this._recordedLogMessagesEnd=a},_createRecordedMessageString:function(t,n){var i=e(this._indentationLevel),r=(new Date).toUTCString()+":  ",s=_[t],a=this.recordedMessagePrefix||"";return i+r+a+s+n},__superMap:{_1sxBUgyaqyC$2XK$init:"init"}}),p=h.create();n$209=h,n$63=p,h.__QUALIFIED_CLASS_NAME__="CW.Logger"}();
    
    
        
!function(){"use strict";function t(){var t=un.pop();return t||(t=new fe(xe)),t[0]=1,t}function e(t){un.push(t)}function n(){wn++}function a(){wn--,0===wn&&L()}function i(t,e,n){var a=0,i=ke;n|=0,a|=n,nn>0?i=en[--nn]:(i=Be++,Be>Re&&(vn(),yn())),Ke[i]=a;var r=i<<1+Pe,s=r+Te;return Le[r]=ke,Le[s]=ke,Ve[r]=0,Ve[s]=0,qe[i]=t,Ye[i]=e,Je[i]=void 0,Ze[i]=void 0,Qe[i]=ke,i}function r(t){return qe[t]}function s(t,e){qe[e]=t}function o(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].didAddParentToNode(Ye[t],t,e,Ve[(t<<1)+Pe])}function u(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].didRemoveParentFromNode(Ye[t],t,e,Ve[(t<<1)+Pe])}function c(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].didAddChildToNode(Ye[t],t,e,Ve[(t<<1)+Te])}function l(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].didRemoveChildFromNode(Ye[t],t,e,Ve[(t<<1)+Te])}function d(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].willRemoveChildFromNode(Ye[t],t,e,Ve[(t<<1)+Te])}function f(t,e){var n=Ke[t],a=n&ve;n&_e&&a!==Me&&qe[t].willRemoveParentFromNode(Ye[t],t,e,Ve[(t<<1)+Pe])}function h(t){var e=Ke[t];e&pe&&qe[t].nodeWillFree(Ye[t],t)}function v(t){I(t,Me),w(t,Pe,!1),w(t,Te,!1),h(t),qe[t]=Je[t]=Ye[t]=Ze[t]=void 0,Qe[t]=ke,gn?(sn>=on&&mn(),rn[sn++]=t):p(t)}function y(){var t=0,e=sn;for(t=0;e>t;t++)p(rn[t]),rn[t]=ke;sn=0}function p(t){nn>=an&&mn(),en[nn++]=t}function m(t){w(t,Te,!0)}function $(t){w(t,Pe,!0)}function _(t,e){var n=Le[e],a=ke;He!==ke?(a=0|He,He=We[He+Oe]):(a=0|Ge,Ge+=Xe,Ge>Ue&&pn()),We[a+ze]=t,We[a+Oe]=n,Le[e]=a,Ve[e]++}function g(t,e){for(var n=Le[e],a=ke,i=ke;n!==ke;){if(a=We[n+ze],a===t){i!==ke?We[i+Oe]=We[n+Oe]:Le[e]=We[n+Oe],We[n+Oe]=He,He=n,Ve[e]--;
break}i=n,n=We[n+Oe]}}function w(t,e,n){gn++;for(var a=(t<<1)+e,i=Le[a],r=i,s=ke,o=e===Pe?Te:Pe;i!==ke;){var c=We[i];e===Pe?(n&&f(t,c),d(c,t)):(n&&d(t,c),f(c,t)),i=We[i+Oe]}for(i=r,Le[a]=ke,Ve[a]=0;i!==ke;){var h=We[i];if((Ke[h]&ve)!==Me&&g(t,(h<<1)+o),e===Pe?(n&&u(t,h),l(h,t)):(n&&l(t,h),u(h,t)),s=We[i+Oe],0>s){We[i+Oe]=He,He=r;break}i=s}gn--,0===gn&&y()}function b(t,e,n){var a=(e<<1)+Te,i=(t<<1)+Pe;_(t,a),_(e,i),c(e,t),o(t,e),n&&S(t,e)}function F(t,e,n){d(e,t),f(t,e),g(t,(e<<1)+Te),g(e,(t<<1)+Pe),l(e,t),u(t,e),n&&S(t,e)}function C(t){return Ye[t]}function A(t,e){Ye[e]=t}function N(t){var e=Ke[t];return e&ve}function I(t,e){var n=Ke[t];Ke[t]=n&ye|e}function M(t,e){var n=Ke[t];return Ke[t]=n|e,Ke[t]}function k(t,e){var n=Ke[t];return Ke[t]=n&~e,Ke[t]}function P(t,e){D(e,t),q(),L()}function T(){0!==arguments.length%2&&n$11("Invalid number of arguments on setValuesForNodes, arguments should be a paired list of nodeIDs and values.",arguments);for(var t=0;t<arguments.length;t+=2)D(arguments[t+1],arguments[t]);q(),L()}function z(t){S(t,ke),q(),L()}function O(t,e){E(e,t,e,Ne,!0)}function D(t,e){E(t,e,t,Ne)}function S(t,e){E(t,void 0,e,Ie)}function E(t,e,n,a,i){ce(t)||n$11("Tried to dirty an undefined node"),x(t);var r=Ke[t]&we,s=N(t),o=r&&s===Ne,u=o?J(t):void 0;I(t,Ae),Z(e,t),te(n,t),r&&(a===Ie?qe[t].wasDirtiedByParent(C(t),t,e,u):a===Ne&&qe[t].wasDirtiedBySelf(C(t),t,e,u)),i||(B(t),K(t)),I(t,a)}function x(t){var e=N(t),n=Ke[t];e!==Ae||n&Fe||n$11("Cycle found in dataflow graph")}function K(t){var e=Ke[t],n=e&me||e&$e,a=e&be;n&&!a&&(cn.length<=cn[0]&&_n(),cn[cn[0]]=t,cn[0]++,M(t,be))
}function B(t,e){var n=Ke[t];if(!e&&n&ge)R(t);else for(var a=(t<<1)+Te,i=Ve[a],r=Le[a],s=i-1;r!==ke;)(!e||e[s])&&S(We[r+ze],t),s--,r=We[r+Oe]}function R(t){var e=Ke[t],n=e&Fe;n||(dn>=fn&&$n(),ln[dn]=t,dn++,M(t,Fe))}function q(){for(var t,e=0;dn>e;e++){t=ln[e];var n=qe[t].getActiveChildrenForNode(t);B(t,n)}for(var a=0;dn>a;a++)t=ln[a],k(t,Fe);dn=0}function L(){if(!(wn>0)){gn++;var n=cn;cn=t();var a,i=0,r=0;for(a=1;a<n[0];a++)i=n[a],k(i,be);for(a=1;a<n[0];a++)i=n[a],i!==ke&&(Ke[i]&ve)!==Me&&(r=Ke[i],r&me&&qe[i].flushNode(Ye[i],i));for(a=1;a<n[0];a++)i=n[a],i!==ke&&(Ke[i]&ve)!==Me&&(r=Ke[i],r&$e&&qe[i].notifyNode(Ye[i],i));e(n),gn--,0===gn&&y()}}function j(t,e){for(var n=(t<<1)+Pe,a=Ve[n],i=Le[n],r=a-1,s=r+1;s<e.length;s++)e[s]=void 0;for(;i!==ke;){var o=We[i+ze];e[r]=U(o),r--,i=We[i+Oe]}return e}function V(t,e,n){for(var a=n||0,i=(t<<1)+Pe,r=Ve[i],s=Le[i],o=r-1+a,u=o+1;u<e.length;u++)e[u]=ke;for(;s!==ke;){var c=We[s+ze];e[o]=c,o--,s=We[s+Oe]}return e}function W(t,e,n){for(var a=n||0,i=(t<<1)+Te,r=Ve[i],s=Le[i],o=r-1+a,u=o+1;u<e.length;u++)e[u]=ke;for(;s!==ke;){var c=We[s+ze];e[o]=c,o--,s=We[s+Oe]}return e}function G(t,e){for(var n=(e<<1)+Te,a=Le[n],i=Ve[n]-1;a!==ke;){if(We[a+ze]===t)return i;a=We[a+Oe],i--}return ke}function X(t,e){for(var n=(t<<1)+Pe,a=Le[n],i=Ve[n]-1;a!==ke;){if(We[a+ze]===e)return i;a=We[a+Oe],i--}return ke}function U(t){ce(t)||n$11("Tried to getValue for an undefined node");var e=N(t),n=qe[t],a=n.isCacheable;if(e===Ce&&a)return H(t);var i=e!==Ne,r=C(t),s=n.calculateValueForNode(r,t,i);return I(t,Ce),Z(void 0,t),a&&Y(s,t),s}function H(t){return Je[t]}function Y(t,e){Je[e]=t
}function J(t){return Ze[t]}function Z(t,e){Ze[e]=t}function Q(t){return Qe[t]}function te(t,e){Qe[e]=t}function ee(t,e){function n(t){for(var n,a=[];t!==ke;)n=We[t+ze],e>0?a.unshift(ee(n,e-1)):a.unshift(n),t=We[t+Oe];return a}void 0===e&&(e=0);var a,i=Ke[t];switch(i&ve){case Ce:a="CLEAN";break;case Ae:a="DIRTYING";break;case Ne:a="DIRTY_SELF";break;case Ie:a="DIRTY_PARENT"}var r=t<<1,s=Le[r+Oe],o=n(s),u=Le[r+ze],c=n(u),l=qe[t],d={id:t,wantsFlush:!!(i&me),wantsNotify:!!(i&$e),wantsFreeTracking:!!(i&pe),wantsRelationshipTracking:!!(i&_e),wantsActiveChildren:!!(i&ge),wantsDirtyTracking:!!(i&we),status:a,children:o,parents:c,manager:l,data:Je[t],context:Ye[t],stateData:Ze[t]};return l&&l.addDebugInfoForNode&&l.addDebugInfoForNode(Ye[t],d,t),d}function ne(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length-1);for(var a=[],i=e;n>=i&&!(i>=t.length);i++)a.push(ee(t[i]));return a}function ae(t,e,n){var a="";return t[e].forEach(function(t){var i=(t&&void 0!==t.id?t.id:t)+(t&&t.status?" ("+t.status+")":"")+": "+t.toString();a+=n+i+"\n",t&&t[e]&&(a+=ae(t,e,n+"  "))}),a}function ie(t,e){void 0===e&&(e=7);var n=ee(t,e);return"Parents of "+t+":\n"+ae(n,"parents","")}function re(t,e){void 0===e&&(e=7);var n=ee(t,e);return"Children of "+t+":\n"+ae(n,"children","")}function se(t,e,n){return ne(t,e,n).map(function(t){return(t&&void 0!==t.id?t.id:t)+":"+t.toString()})}function oe(){var t=[],e={};return{stack:t,nodes:e}}function ue(){he=!0}function ce(t){return void 0!==t&&null!==t&&t!==ke}var le=global.Array,de=global.Int16Array||le,fe=global.Int32Array||le,he=!1,ve=7,ye=~ve,pe=8,me=16,$e=32,_e=64,ge=128,we=256,be=8192,Fe=16384,Ce=0,Ae=1,Ne=2,Ie=3,Me=4,ke=-1,Pe=0,Te=1,ze=0,Oe=1,De=1024,Se=2048,Ee=256,xe=256,Ke=new de(De),Be=1,Re=De,qe=new Array(De),Le=new fe(Se),je=Se,Ve=new fe(Se),We=new fe(Se),Ge=0,Xe=2,Ue=Se,He=ke,Ye=new Array(De),Je=new Array(De),Ze=new Array(De),Qe=new fe(De),tn=Se,en=new fe(Ee),nn=0,an=Ee,rn=new fe(Ee),sn=0,on=Ee,un=[],cn=t(),ln=new fe(xe),dn=0,fn=xe,hn=!global.Int16Array,vn=hn?n$23:function(){Re*=2,tn*=2;
var t=new de(Re);t.set(Ke);var e=new fe(tn);e.set(Qe),Ke=t,Qe=e},yn=hn?n$23:function(){je*=2;var t=new fe(je);t.set(Le),Le=t;var e=new fe(je);e.set(Ve),Ve=e},pn=hn?n$23:function(){Ue*=2;var t=new fe(Ue);t.set(We),We=t},mn=hn?n$23:function(){an*=2,on*=2;var t=new fe(an);t.set(en),en=t;var e=new fe(on);e.set(rn),rn=e},$n=hn?n$23:function(){fn*=2;var t=new fe(fn);t.set(ln),ln=t},_n=hn?n$23:function(){var t=2*cn.length,e=new fe(t);e.set(cn),cn=e},gn=0,wn=0,bn={NULL_INDEX:ke,dumpNode:ee,dumpChildren:re,dumpParents:ie,dumpNodes:ne,dumpNodeNames:se,debugNextCycle:ue,dumpStack:oe,addChildToNode:b,removeChildFromNode:F,setValueForNode:P,setValuesForNodes:T,setNodeToDirtyFromParent:z,passValueToNode:O,getValueForNode:U,getDataForNode:H,setDataForNode:Y,getStateDataForNode:J,setStateDataForNode:Z,getStateIDForNode:Q,setStateIDForNode:te,getContextForNode:C,setContextForNode:A,getManagerForNode:r,setManagerForNode:s,getParentIDs:V,getChildrenIDs:W,getChildIndex:G,getParentIndex:X,FLUSH:me,NOTIFY:$e,RELATIONSHIPS:_e,FREE:pe,ACTIVE_CHILDREN:ge,DIRTY_TRACKING:we,allocNode:i,freeNode:v,disconnectParentsFromNode:$,disconnectChildrenFromNode:m,pullDataFromParents:j,triggerFlush:L,pause:n,resume:a,_sanitizeNodeID:function(t){return(null===t||void 0===t)&&(t=ke),0|t},nodeIsDirty:function(t){var e=N(t);return e&Ne||e&Ie}};n$66=bn}();
    
    
        
!function(){"use strict";var e=n$28.extend({debugType:"Base",isCacheable:!0,calculateValueForNode:null,flushNode:n$23,notifyNode:n$23,didAddParentToNode:n$23,didRemoveParentFromNode:n$23,didAddChildToNode:n$23,didRemoveChildFromNode:n$23,willRemoveChildFromNode:n$23,willRemoveParentFromNode:n$23,addDebugInfoForNode:n$23});n$65=e,e.__QUALIFIED_CLASS_NAME__="CW.NodeManager"}();
    
    
        
!function(){"use strict";var t={},e=n$65.extend({debugType:"Base",property:null,key:null,init:function(t){t&&(this.property=t,this.key=t.key,this.set=t.set,this.internalGet=t.internalGet,this.validateType=t._validateType,this._valueOffsetCount=1,this.setterReturnArray=new Array(t.writeDependencies?t.writeDependencies.length:t.dependencies?t.dependencies.length:0),this.clearReturnArray(this.setterReturnArray)),this.dependencyCollector=[],this.__s._3DKpD3_erz7$pP$init.call(this)},isCacheable:!0,validateType:null,set:null,internalGet:null,_valueOffsetCount:0,setUpNode:n$23,willRemoveChildFromNode:function(t,e){n$66.getValueForNode(e)},calculateValueForNode:function(e,r,n){var i,o=n$66.getDataForNode(r);if(n){var a=n$66.getStateIDForNode(r);if(i=this.pullDataFromParent(r,a),i===t)return o}else i=n$66.getStateDataForNode(r);this.validateType(i)||n$11('Type error: cannot set value `%{value}` to observable property "%{key}" on %{object}. (Note that `set` may have been called on a downstream property.)',{object:e,key:this.key,value:i});var s=this.setterReturnArray,u=this.set.call(e,i,o,s,0,this.property);return this.passValuesToChildren(r,s,u),this.clearReturnArray(s),u},pullDataFromParent:function(e,r){if(n$66.getStateDataForNode(e)===t){var n=n$66.getManagerForNode(r).property,i=n.key,o=n.dependencies!==n.writeDependencies;o?n$11("Infinite loop detected in the %{property} observable property. This is likely because you are attempting to get the write dependency '%{key}' inside your setter.",{key:this.key,property:i}):n$11("Infinite loop detected in the %{property} observable property. Try adding a writeDependencies array that contains only the dependencies you actually write to (not %{key}).",{key:this.key,property:i})
}n$66.setStateDataForNode(t,e),0>r&&n$11("Couldn't tell which parent set the upstream node (%{nodeID})",{node:e}),n$66.getValueForNode(r);var a=n$66.getStateDataForNode(e);return a===t&&(a=n$66.getDataForNode(e)),a},clearReturnArray:function(e){for(var r=e.length,n=0;r>n;n++)e[n]=t},passValuesToChildren:function(e,r,n){var i=this.dependencyCollector;n$66.getChildrenIDs(e,i);for(var o=this._valueOffsetCount,a=r.length,s=0;a>s;s++){var u=i[s+o];r[s]!==t&&u>=0&&n$66.getStateIDForNode(u)===e&&n$66.passValueToNode(r[s],u)}n$66.passValueToNode(n,i[0])},dependencyCollector:null,setterReturnArray:null,addDebugInfoForNode:function(t,e){e.type=this.debugType+" Upstream Node",e.object=t,e.key=this.key,e.toString=function(){return t+"."+this.key+" (Upstream)"},e.name=e.toString()},__superMap:{_3DKpD3_erz7$pP$init:"init"}});n$67=e,e.__QUALIFIED_CLASS_NAME__="CW.ObservableProperties.UpstreamNodeManager"}();
    
    
        
!function(){"use strict";function e(){var e=-1;return e=_>0?g[--_]:h++,r[e]=n,s[e]=n,i[e]=void 0,d[e]=void 0,a[e]=n,u[e]=n,c[e]=n,l[e]=n,e}function t(e){r[e]=n,s[e]=n,a[e]=n,i[e]=void 0,d[e]=void 0,u[e]=n,c[e]=n,l[e]=n,g[_++]=e}var n=n$66.NULL_INDEX,o=n$66._sanitizeNodeID,r=[],i=[],s=[],a=[],d=[],u=[],c=[],l=[],h=0,g=[],_=0,p=n$65.extend({staticMembers:{init:function(){this.__s._3gLduXWBSz7$24A$init.apply(this,arguments),this.managers={}},instanceFor:function(e,t){var n=this.managers[t];return n||(n=this.managers[t]=this.create(e,t)),n},__superMap:{_3gLduXWBSz7$24A$init:"init"}},type:"ChainedLookupNodeManager",lookupID:"",init:function(e,t){this.__s._3gLduXWBSz7$2TG$init.call(this),this.lookupID=this.type+": "+t,this.key=e,this.lookupPath=t},setUpForObject:function(t,n){var i=t.downstreamNodes,s=this.lookupID,a=o(i[s]);if(0>a){i[s]=a=t.allocNode(this,n$66.FLUSH|n$66.FREE);var d=e();r[d]=n,n$66.addChildToNode(a,n,!0),n$66.setDataForNode(d,a)}return a},flushNode:function(e,t){n$66.getValueForNode(t)},calculateValueForNode:function(e,t){var a=n$66.getDataForNode(t),u=d[n$66.getValueForNode(r[a])],c=s[a];if(u!==i[a]){if(c>=0&&n$66.removeChildFromNode(t,c),c=n,u){var l=this.key,h=u.downstreamNodes;h&&(c=o(h[l])),c>=0?n$66.addChildToNode(t,c,!1):n$11("Chained lookup found a missing or non-observable segment in the chain (segment: "+this.key+", chain: "+this.lookupPath+", on object: "+u+").",{key:this.key,lookupPath:this.lookupPath,object:u})}s[a]=c,i[a]=u}return d[a]=c>0?n$66.getValueForNode(c):void 0,a},nodeWillFree:function(e,n){var o=n$66.getDataForNode(n);t(o)},addDebugInfoForNode:function(e,t){t.type=this.type,t.object=e,t.key=this.lookupID,t.toString=function(){return this.object+"."+this.key
},t.name=t.toString()},__superMap:{_3gLduXWBSz7$2TG$init:"init"}}),$=p.extend({staticMembers:{instanceFor:function(e){var t=this.managers[e];return t||(t=this.managers[e]=this.create(e)),t}},type:"ChainedLookupRootNodeManager",init:function(e){this.__s._3gLduXWBSz7$4Z8$init.call(this,e,e)},setUpForObject:function(t){var n,r=t.downstreamNodes,a=this.lookupID,d=o(r[a]);if(0>d){n=o(r[this.key]),0>n&&n$11("Chained binding could not look up key on object (key: "+this.key+", object: "+t+").",{key:this.key,object:t}),r[a]=d=t.allocNode(this,n$66.FLUSH);var u=e();n$66.setDataForNode(u,d),s[u]=n,i[u]=t,n$66.addChildToNode(d,n,!0)}return d},calculateValueForNode:function(e,t){var n=n$66.getDataForNode(t),o=s[n],r=n$66.getValueForNode(o);return d[n]=r,n},__superMap:{_3gLduXWBSz7$4Z8$init:"init"}}),f=[0,0],N=n$65.extend({calculateValueForNode:function(e,t,n){if(n){var o=n$66.getDataForNode(t),r=l[o];n$66.getValueForNode(r),n$66.getParentIDs(t,f);var i,s=f[1];return n$66._sanitizeNodeID(s)>0&&(i=n$66.getValueForNode(s)),i}return n$66.getStateDataForNode(t)},isCacheable:!1,addDebugInfoForNode:function(e,t){t.type="ChainedLookupProxyNode (downstream)",t.object=e,t.key="[downstream proxy]",t.toString=function(){return this.object+"[downstream proxy]"},t.name=t.toString()},didRemoveParentFromNode:function(e,t,n){var o=n$66.getDataForNode(t);s[o]===n&&(s[o]=-1)}}).create(),m=n$67.extend({calculateValueForNode:function(e,t,n){var o=n$66.getDataForNode(t);n$66.getChildrenIDs(t,f);var r,i=f[0];if(n){var s=n$66.getStateIDForNode(t);r=this.pullDataFromParent(t,s)}else r=n$66.getStateDataForNode(t);
return r!==o&&n$66.passValueToNode(r,i),o},addDebugInfoForNode:function(e,t){t.type="ChainedLookupProxyNode (upstream)",t.object=e,t.key="[upstream proxy]",t.toString=function(){return this.object+"[upstream proxy]"},t.name=t.toString()},didRemoveChildFromNode:function(e,t,n){var o=n$66.getDataForNode(t);a[o]===n&&(a[o]=-1)}}).create(),v=p.extend({type:"ChainedLookupTerminalNodeManager",connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){n$66.addChildToNode(e,t,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){n$66.addChildToNode(e,t,!1)},disconnectProxyNodeFromLookupUpNodes:function(e,t){n$66.removeChildFromNode(e,t)},getDownstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,r=o(t[n]),i=n$66.getDataForNode(r);return u[i]},getUpstreamProxyNode:function(e){var t=e.downstreamNodes,n=this.lookupID,r=o(t[n]),i=n$66.getDataForNode(r);return c[i]},setUpForObject:function(t,n,i){var s,a,d,h=t.downstreamNodes,g=this.lookupID,_=o(h[g]);return 0>=_&&(h[g]=_=t.allocNode(this,n$66.FLUSH|n$66.FREE),s=e(),n$66.setDataForNode(s,_),l[s]=_,r[s]=n,a=t.allocNode(N,n$66.RELATIONSHIPS),h["Downstream Proxy for "+g]=a,u[s]=a,n$66.setDataForNode(s,a),n$66.addChildToNode(a,_,!1),d=t.allocNode(m,n$66.RELATIONSHIPS),t.upstreamNodes["Upstream Proxy for "+g]=d,c[s]=d,n$66.setDataForNode(s,d),this._shouldFlushUpstream=!!i,n$66.addChildToNode(_,n,!0)),_},calculateValueForNode:function(e,t){var l=n$66.getDataForNode(t),h=d[n$66.getValueForNode(r[l])],g=i[l];if(h!==g){i[l]=h;var _=this.key,p=c[l],$=u[l],f=s[l],N=a[l];if(g&&(a[l]=n,s[l]=n,this.disconnectFromPreviousProperty(g,_,N,f,p,$)),h){var m,v=h.downstreamNodes;
v&&(m=o(v[_])),v=h.upstreamNodes;var L;v&&(L=o(v[_])),this.hookUpToNewProperty(h,_,L,m,p,$),a[l]=L,s[l]=m}}return this._shouldFlushUpstream=!1,l},disconnectFromPreviousProperty:function(e,t,n,o,r,i){i>=0&&o>=0&&this.disconnectProxyNodeFromLookupUpNodes(i,o),r>=0&&n>=0&&this.disconnectProxyNodeFromLookupUpNodes(n,r)},hookUpToNewProperty:function(e,t,n,o,r,i){o>0?(n>0&&this.connectUpstreamProxyNodeToLookedUpNodes(n,r,this._shouldFlushUpstream),this.connectDownstreamProxyNodeToLookedUpNodes(i,o)):n$11("Chained lookup found a missing or non-observable segment in the chain (segment: "+this.key+", chain: "+this.lookupPath+", on object: "+e+").",{key:this.key,lookupPath:this.lookupPath,object:e})}}),L=v.extend({init:function(e,t){t+="Downstream",this.__s._3gLduXWBSz7$9aO$init.call(this,e,t)},connectUpstreamProxyNodeToLookedUpNodes:function(e,t,n){n$66.addChildToNode(t,e,n)},connectDownstreamProxyNodeToLookedUpNodes:function(e,t){n$66.addChildToNode(t,e,!0)},disconnectProxyNodeFromLookupUpNodes:function(e,t){n$66.removeChildFromNode(t,e)},disconnectFromPreviousProperty:function(e,t){e.unbind(t)},hookUpToNewProperty:function(e,t,n,o){var r=e._properties[t];r._disconnectNodes(o,n),r._configurePropertyAsBound(o,n),this.__s._3gLduXWBSz7$A19$hookUpToNewProperty.apply(this,arguments),n$66.triggerFlush()},nodeWillFree:function(e,t){var n=this.key,o=n$66.getDataForNode(t),r=i[o];r&&(r.isDisposed||(r.unbind(n),this.__s._3gLduXWBSz7$ACG$nodeWillFree.apply(this,arguments)))},__superMap:{_3gLduXWBSz7$9aO$init:"init",_3gLduXWBSz7$A19$hookUpToNewProperty:"hookUpToNewProperty",_3gLduXWBSz7$ACG$nodeWillFree:"nodeWillFree"}});
n$70=p,n$71=$,n$72=v,n$73=L,p.__QUALIFIED_CLASS_NAME__="CW.ChainedLookupNodeManager",$.__QUALIFIED_CLASS_NAME__="CW.ChainedLookupRootNodeManager",v.__QUALIFIED_CLASS_NAME__="CW.ChainedLookupTerminalNodeManager",L.__QUALIFIED_CLASS_NAME__="CW.DownstreamChainedLookupTerminalNodeManager"}();
    
    
        
!function(){"use strict";function e(e,n){var i="",r=4026531840;n=!!n;for(var s=0;7>=s;s++){n&&s>0&&0===s%2&&(i+=" ");var a=(e&r>>>4*s)>>>4*(7-s);i+=t[a]}return i}var t="0123456789ABCDEF";n$68=e}();
    
    
        
!function(){"use strict";function e(e,t){return i.create({name:e,value:t,level:0})}var t=[4278190080,4294901760,4294967040,4294967280,4294967295],n=[24,16,8,4,0],i=n$5.extend({name:null,value:null,level:null,parent:null,group:null,fullValue:null,fullName:null,hasLevel:n$4({readOnly:!0,get:function(){return"number"==typeof this.level}}),init:function(e){this.__s._2i25U_ExixV$133$init.call(this,e);var t=this.name,i=this.value,r=this.parent,s=this.level,a=this.get("hasLevel"),o=a?i<<n[s]:null;r&&!r.get("hasLevel")&&n$11(this+" Cannot init. parent does not have an assigned level"),this.items=[],this._flags={},this.fullValue=r?r.fullValue+o:o,this.fullName=r?r.fullName+"."+t:t,this._nextSubitemValue=0},freeze:function(){Object.freeze(this._flags),Object.freeze(this.items),Object.freeze(this)},flagAs:function(){for(var e=arguments.length,t=this._flags,n=0;e>n;n++)t[arguments[n]]=!0;return this},flagged:function(e){return!!this._flags[e]},equals:function(e){return this.group===e.group&&e.fullValue===this.fullValue},subitemOf:function(e){return this.level>e.level&&this.group===e.group&&(this.fullValue&t[e.level])===e.fullValue},superitemOf:function(e){return this.level<e.level&&this.group===e.group&&(e.fullValue&t[this.level])===this.fullValue},contains:function(e){return this.equals(e)||e.subitemOf(this)},createSubitem:function(e){return i.create({name:e,value:this._getNextSubitemValue(),parent:this,level:this.level+1,group:this.group})},toString:function(){return this._toString(!1)},toJSON:function(){return""+this},toStringFull:function(){return this._toString(!0)},_toString:function(e){var t=this.group,n=t?t.name:"CW.Enum.Item",i=e||!t?" <"+n$68(this.fullValue,!0)+">":"";
return"["+n+": "+this.fullName+i+"]"},_getNextSubitemValue:function(){return this._nextSubitemValue++,this._nextSubitemValue},__superMap:{_2i25U_ExixV$133$init:"init"}});i.prototype.substateOf=i.prototype.subitemOf,i.prototype.superstateOf=i.prototype.superitemOf,n$69=i,n$904=e,i.__QUALIFIED_CLASS_NAME__="CW.Enum.Item"}();
    
    
        
!function(){"use strict";function t(t,n){var i,o=r.create({name:t}),a=o.items;if(n$39(n)){var s=e(o,null);n(s)}else if(n$37(n))for(var u in n)i=n$69.create({name:u,value:n[u],group:o}),a.push(i),o[u]=i;else if(n$36(n))for(var l=0,c=n.length;c>l;l++){var t=n[l];i=n$69.create({name:t,value:l,group:o}),a.push(i),o[t]=i}else n$11("Cannot create enum group. Invalid value");for(var a=o.items,c=a.length,l=0;c>l;l++)a[l].freeze();return o.freeze(),o}function e(t,r){var n=1;return function(i,o){var a=null;r?(a=r.createSubitem(i),r.items.push(a)):a=n$69.create({name:i,value:n,parent:null,level:0,group:t});var s=a.fullName.replace(/\./g,"");if(t.items.push(a),t[s]=a,r&&(r[i]=a),n+=1,o){var u=e(t,a);o(u)}return a}}var r=n$5.extend({items:null,name:null,id:null,init:function(t){this.__s._2pwMXJ_cQd3$Vq$init.call(this,t),this.items=[],this.id=n,n++},toStaticMixin:function(){var t={};return this.get("items").forEach(function(e){e.get("level")||(t[e.get("name")]=e)}),{staticMembers:t}},freeze:function(){Object.freeze(this.items),Object.freeze(this)},getItemForValue:function(t){for(var e=this.items,r=0,n=e.length;n>r;r++){var i=e[r];if(i.get("value")===t)return i}return null},toString:function(){return"[CW.Enum.Group: "+this.name+"]"},__superMap:{_2pwMXJ_cQd3$Vq$init:"init"}}),n=1;n$905=r,n$74=t,r.__QUALIFIED_CLASS_NAME__="CW.Enum.Group"}();
    
    
        
!function(){"use strict";function e(e,o,r,i,a){var s,d=o.components,u=d.length,c=0,l=o.rootObject||e;for(s=d[c];l&&(!l.downstreamNodes||void 0===l.downstreamNodes[s]);)l=l[s],s=d[++c];if(!l||c===u){var h=d.join(".");n$11("No observable properties found along binding path ("+h+").",{object:e,path:h})}return c===u-1?t(l,s,a):n(l,d,c,r,i,a)}function t(e,t,n){var o=e.upstreamNodes[t];o=i(o),o>0&&(n.upstreamNode=o);var r=e.downstreamNodes[t];return r=i(r),r>0&&(n.downstreamNode=r),n}function n(e,t,n,o,r,i){var a,s,d=t.length,u=t[n],c=u;for(a=n$71.instanceFor(u),s=a.setUpForObject(e),n++;d-1>n;n++)u=t[n],c+="."+u,a=n$70.instanceFor(u,c),s=a.setUpForObject(e,s);u=t[n],c+="."+u;var l;return l=r?n$72.instanceFor(u,c):n$73.instanceFor(u,c),l.setUpForObject(e,s,o),i.downstreamNode=l.getDownstreamProxyNode(e),i.upstreamNode=l.getUpstreamProxyNode(e),i}function o(e){return d.create(e)}function r(e){for(var t=[],n=/((?:(?:\\\\)*|(?:\\\.)|[^\\.])+)(?:\.|$)/g,o=e.length;n.lastIndex<o;){var r=n.exec(e);r=r[1],0===r.length&&n$11("Cannot create CW.Binding with an empty component ('%{path}').",{path:e}),r=r.replace(/\\\./g,"."),r=r.replace(/\\\\/g,"\\"),t.push(r)}return t}var i=n$66._sanitizeNodeID,a={upstreamNode:0,downstreamNode:0,clear:function(){this.upstreamNode=0,this.downstreamNode=0}},s=n$74("BindingConnection",function(e){e("CONNECT"),e("DONT_CONNECT"),e("OPTIONAL")}),d=n$28.extend(s.toStaticMixin(),{staticMembers:{createForPaths:function(e){var t,n,o=e?e.length:0,r=new Array(o);if(!e)return r;for(t=0;o>t;t++)n=e[t],n.instanceOf&&n.instanceOf(this)||(n=this.create(n)),r[t]=n;return r},hookUpBinding:function(t,n,o,r,i,s,d){n&&n$57(n)&&(n=this.create(n)),o&&n$57(o)&&(o=this.create(o)),void 0===s&&(s=this.OPTIONAL),void 0===d&&(d=this.CONNECT),a.clear(),e(t,n,r,!0,a);
var u=a.upstreamNode,c=a.downstreamNode;a.clear(),e(t,o,r,!1,a);var l=a.upstreamNode,h=a.downstreamNode;if(d!==this.DONT_CONNECT)if(c>0&&h>0)n$66.addChildToNode(h,c,i);else if(d===this.CONNECT)return!1;if(s!==this.DONT_CONNECT)if(u>0&&l>0)n$66.addChildToNode(u,l,r);else if(s===this.CONNECT)return!1;return!0},hookUpDownstreamNode:function(t,n,o,r){a.clear(),e(t,n,!1,!0,a);var i=a.downstreamNode;return 0>=i?!1:(n$66.addChildToNode(o,i,r),!0)}},rootObject:null,path:"",components:null,init:function(e,t){this.__s._n1_sLHd8Hx$3QV$init.call(this),e||n$11("Cannot create CW.Binding with no path.",{path:e});var n=!1;"."===e[0]&&(n=!0,e=e.substring(1));var o=r(e),i=o[0];n||"global"!==i&&"🌐"!==i||(t=global,o.shift()),(0===o.length||""===o[0])&&n$11("Cannot create CW.Binding with an invalid path ('%{path}').",{path:e,rootObject:t}),this.components=o,this.path=o.join("."),t&&(this.rootObject=t)},__superMap:{_n1_sLHd8Hx$3QV$init:"init"}});n$13=d,n$14=o,n$165=r,d.__QUALIFIED_CLASS_NAME__="CW.Binding"}();
    
    
        
!function(){"use strict";var e=n$66.NULL_INDEX,t={initializeInstance:function(){this._nodes=[];var e=this.upstreamNodes={},t=this.downstreamNodes={};this._connectables=[],this._connectableTargets=[],n$66.pause(),this.initializeObservers(e,t),this.initializeSignals(e,t),this.__s._3nkUhc2lpFq$aH$initializeInstance.call(this),this._connectAllConnectables(),n$66.triggerFlush(),n$66.resume()},initializeObservers:function(t,n){var i=this.getMetadataByType(n$77);for(var r in i){var s=i[r],a=this.allocNode(s.manager,n$66.FLUSH);n[r]=a,this.addConnectable(s,a,e)}},initializeSignals:function(e,t){var n=this.getMetadataByType(n$75);for(var i in n){var r=n[i],s=this.allocNode(r,n$66.FLUSH|n$66.NOTIFY);e[i]=t[i]=s}},upstreamNodes:null,downstreamNodes:null,_connectables:null,_connectableTargets:null,isConnected:!1,addConnectable:function(e,t,n){this.isConnected?e.connect(this,t,n):(this._connectables.push(e),this._connectableTargets.push(t),this._connectableTargets.push(n))},_connectAllConnectables:function(){var t,n=this._connectables,i=this._connectableTargets,r=n.length,s=e,a=e;for(t=0;r>t;t++)s=i[2*t],a=i[2*t+1],n[t].connect(this,s,a);this._connectables=this._connectableTargets=null,this.isConnected=!0},allocNode:function(e,t){var n=n$66.allocNode(e,this,t);return this._nodes.push(n),n},freeNode:function(e){var t=this._nodes,n=t.indexOf(e);n>=0?t.splice(n,1):n$11("CW.Observable `freeNode` called with a node not managed by this Observable!",{nodeID:e,observable:this}),n$66.freeNode(e)},dispose:function(){var t,n=this._nodes,i=n.length,r=e;for(t=0;i>t;t++)r=n[t],n$66.freeNode(r);this._nodes=null,this.downstreamNodes=null,this.upstreamNodes=null,this.__s._3nkUhc2lpFq$2a4$dispose.call(this)
},observe:function(){var e;if(n$37(arguments[0]))e=n$6.create(this,arguments[0]);else{var t=n$27(arguments);t.unshift(this),t.push(!0),e=n$6.create.apply(n$6,t)}return e.connect(),e},listen:function(){var e;if(n$37(arguments[0]))e=n$76.create(this,arguments[0]);else{var t=n$27(arguments);t.unshift(this),t.push(!1),e=n$76.create.apply(n$76,t)}return e.connect(),e},bindingFor:function(e){return n$13.create(e,this)},propertyChanged:function(e){var t=this.downstreamNodes[e];+t!==t&&n$11("propertyChanged must be called with the key of an observable property (key: "+e+", object: "+this+").",{object:this,key:e}),n$66.setNodeToDirtyFromParent(t)},bind:function(e,t){var n=this.getMetadataByType(n$8);if(n){var i=n[e];i||n$11("Bind must be called on an observable property",e),i.bind(this,t)}return this},unbind:function(e){var t=this.getMetadataByType(n$8);if(t){var n=t[e];n||n$11("Unbind must be called on an observable property",e),n.unbind(this)}return this},__superMap:{_3nkUhc2lpFq$aH$initializeInstance:"initializeInstance",_3nkUhc2lpFq$2a4$dispose:"dispose"}},n=n$40(t);n.mixinDependencies=[n$29,n$50],n.staticMembers=n$40(t),n$10=n}();
    
    
        
!function(){"use strict";var t=n$65.extend({debugType:"Base",property:null,key:null,init:function(t){this.property=t,this.key=t.key,this.get=t.get,this.internalGet=t.internalGet,this.validateType=t._validateType,void 0!==t.cacheable&&(this.isCacheable=t.cacheable),this.dependencyCount=t.dependencies?t.dependencies.length:0,this.collectors=[],this.collectorsCount=0,this.__s._1lzPPn7MWZ6$jP$init.call(this)},validateType:null,get:null,internalGet:null,setUpNode:n$23,calculateValueForNode:function(t,e){var r=this.getCollector();n$66.getParentIDs(e,r);var n=n$66.getValueForNode(r[0]);r.shift();var i=this.get.call(t,n,r,0,this.property);return this.validateType(i)||n$11('Type error: cannot return value %{value} from observable property "%{key}" on %{object}. Value passed type check at `set` time, but was transformed inappropriately by an upstream property’s getter or setter.',{object:t,key:this.key,value:i}),this.releaseCollector(r),i},dependencyCount:null,collectors:null,collectorsCount:0,getCollector:function(){var t;return t=this.collectorsCount>0?this.collectors[--this.collectorsCount]:new Array(this.dependencyCount)},releaseCollector:function(t){var e,r=this.dependencyCount;for(e=0;r>e;e++)t[e]=null;this.collectors[this.collectorsCount++]=t},addDebugInfoForNode:function(t,e){e.type=this.debugType+"Downstream Node",e.object=t,e.key=this.key,e.toString=function(){return t+"."+this.key+" (Downstream)"},e.name=e.toString()},__superMap:{_1lzPPn7MWZ6$jP$init:"init"}});n$78=t,t.__QUALIFIED_CLASS_NAME__="CW.ObservableProperties.DownstreamNodeManager"}();
    
    
        
!function(){"use strict";var e=n$67.extend({debugType:"ReadOnly",flushNode:function(e,t){var n=n$66.getStateDataForNode(t),i=n$66.getStateIDForNode(t);n$11("Cannot write to read-only property: "+this.key,{object:e,value:n,parentID:i})}});n$79=e,e.__QUALIFIED_CLASS_NAME__="CW.ObservableProperties.ReadOnlyUpstreamNodeManager"}();
    
    
        
!function(){"use strict";function _internalGet(e,t){return n$66.getValueForNode(t)}var NULL_INDEX=n$66.NULL_INDEX,temporaryArray=[],ObservableProperty=n$3.extend({staticMembers:{_getterString:"",_setterString:"",isInsideSetter:!1,getDependencyValuesAsTempArray:function(e,t,n,r){temporaryArray.length=0;for(var i=0;i<t.length;i++)temporaryArray[i]=r.internalGet(e,t[i+n]);return temporaryArray}},readOnly:null,binding:void 0,downstreamBindings:null,dependencies:null,writeDependencies:null,bindings:null,writeBindings:null,_valueCount:0,didChange:null,isComputedProperty:!1,isDependentComputedProperty:!1,isRootValueProperty:!1,requiresSupport:n$10,downstreamNodeManagerClass:n$78,upstreamNodeManagerClass:n$67,readOnlyUpstreamNodeManagerClass:n$79,downstreamNodeManager:null,upstreamNodeManager:null,readOnlyUpstreamNodeManager:null,init:function(e){n$32(e,n$13)&&(e={binding:e}),this.__s._2RV2ZeU7ata$9lj$init.call(this,e)},getValue:function(e,t){var n=this.binding||this.defaultValue;return void 0===n&&(this.get||this.set)&&n$32(e[n$50.staticMembers.defaultValuePrefix+t],n$13)?null:n},inheritFrom:function(e){this.__s._2RV2ZeU7ata$A0q$inheritFrom.apply(this,arguments),this.didChange||(this.didChange=e.didChange);var t=e.downstreamBindings;if(t){var n=this.downstreamBindings;this.downstreamBindings=n?n$43(global.Object.create(t),n):t}},wasRegistered:function(e,t){this.__s._2RV2ZeU7ata$AKC$wasRegistered.apply(this,arguments),this._didFirstObservablePropertyRegister||(this._validateProvidedInitValues(t),this._validateProvidedAccessors(t),this.setUpManagers(),t=t.replace(/\\/g,"\\\\"),t=t.replace(/\./g,"\\."),this._ownBinding=n$14(t),this._didFirstObservablePropertyRegister=!0),this._setUpDidChangeObserver(e,t)
},_validateProvidedInitValues:function(e){var t=this.binding,n=this.defaultValue;n$41(t)&&n$41(n)&&n$11("You can't define an observable property with both a binding and a defaultValue (%{key}).",{key:e,property:this}),n$32(n,n$13)&&n$11("You can’t pass bindings into a property definition on `defaultValue`; you must pass it in on `binding` (%{key}).",{binding:t,property:this,key:e}),n$57(t)&&(this.binding=n$14(t));var r=this.computedDownstreamBindings=[],i=this.downstreamBindings;for(var o in i){var a=i[o];if(n$57(a)&&(a=n$14(a)),n$32(a,n$13)){if(a.rootObject||"(owner)"===a.components.shift()){r.push({upstreamSide:a,downstreamSide:n$14(e+"."+o)});continue}n$11("Right side of downstream bindings must begin with `'(owner).'`: `'%{path}'`",{path:a.path})}n$11("Right side of downstream bindings must be a string or a binding",{binding:a})}},_validateProvidedAccessors:function(e){var t=this.dependencies,n=this.writeDependencies,r=t&&t.length>0,i=n?n.length>0:r,o=this.isDependentComputedProperty=r||i;r&&this.usesBuiltinGet&&n$11("Computed properties with dependencies must provide a getter (%{key}).",{property:this,dependencies:t,key:e}),i&&this.usesBuiltinSet&&!this.readOnly&&n$11("Computed properties with (explicit or implicit) write-dependencies must either include a setter or be marked readOnly (%{key}).",{property:this,dependencies:t,key:e}),o&&(n&&(this.writeBindings=n$13.createForPaths(this.writeDependencies)),this.bindings=n$13.createForPaths(this.dependencies))},_setUpDidChangeObserver:function(e,t){if(this.didChange){var n="_"+t+"_didChangeObserver";e.registerMetadata(n,n$7(t,this.didChange))
}},setUpManagers:function(){this.downstreamNodeManager=this.downstreamNodeManagerClass.create(this),this.upstreamNodeManager=this.upstreamNodeManagerClass.create(this),this.readOnlyUpstreamNodeManager=this.readOnlyUpstreamNodeManagerClass.create(this)},initForObject:function(e,t){var n=NULL_INDEX,r=NULL_INDEX,i=this.downstreamNodeManager,o=this.readOnly?this.readOnlyUpstreamNodeManager:this.upstreamNodeManager;n=e.allocNode(i,n$66.FLUSH|n$66.NOTIFY),e.downstreamNodes[t]=n,r=e.allocNode(o,n$66.FLUSH|n$66.NOTIFY),e.upstreamNodes[t]=r,e.addConnectable(this,n,r)},setInitialValueForObject:function(e,t,n){var r=e.downstreamNodes[t],i=e.upstreamNodes[t];if(n$66.getManagerForNode(r).setUpNode(e,r),n$66.getManagerForNode(i).setUpNode(e,i),n$32(n,n$13)){var o=n;this.isDependentComputedProperty&&n$11("Dependent computed properties cannot be created with a binding (%{key}).",{property:this,key:t,object:e}),n$66.setDataForNode(o,r)}else this.readOnly?n$66.setDataForNode(n,i):void 0!==n&&n$66.passValueToNode(n,i)},connect:function(e,t,n){var r;this.isRootValueProperty=!this.isDependentComputedProperty,this._configurePropertyAsRootValue(t,n);var i=this._ownBinding;if(this.isDependentComputedProperty){var o,a,s,u=this.bindings,l=this.writeBindings,p=n>=0&&void 0!==n$66.getStateDataForNode(n);if(u&&(o=u.length)>0)for(a=0;o>a;a++)s=u[a],r=n$13.hookUpBinding(e,s,i,p,!0,n$13.DONT_CONNECT,n$13.CONNECT),r||n$11("Unable to connect dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path});if(l&&(o=l.length)>0)for(a=0;o>a;a++)s=l[a],r=n$13.hookUpBinding(e,s,i,p,!0,n$13.CONNECT,n$13.DONT_CONNECT),r||n$11("Unable to connect write dependency for computed property (key: "+this.key+", dependency: "+s.path+").",{object:e,property:this,key:this.key,dependency:s.path})
}else{var c;t>=0&&(c=n$66.getDataForNode(t)),c&&c.instanceOf&&c.instanceOf(n$13)&&(this.isRootValueProperty=!1,this.bind(e,c),n$66.setDataForNode(void 0,t),n&&n$66.setDataForNode(void 0,n))}for(var d=this.computedDownstreamBindings,h=d.length,y=0;h>y;y++){var f=d[y];n$13.hookUpBinding(e,f.upstreamSide,f.downstreamSide,!1,!0)}},_configurePropertyAsRootValue:function(e,t){n$66.addChildToNode(e,t,!0)},bind:function(e,t){var n=this.key;this.isDependentComputedProperty&&n$11("Cannot bind property %{key}. Properties with dependencies cannot be bound.",{property:this,key:this.key,object:e});var r=e.downstreamNodes[n],i=e.upstreamNodes[n];this._disconnectNodes(r,i),this._configurePropertyAsBound(r,i);var o=t;o&&o.instanceOf&&o.instanceOf(n$13)||(o=n$13.create(o));var a=n$13.hookUpBinding(e,o,this._ownBinding,!1,!0);a||n$11("Unable to bind property (key: "+this.key+", binding: "+o.path+").",{object:e,property:this,key:this.key,binding:o,path:o.path}),e.isConnected&&n$66.triggerFlush()},_configurePropertyAsBound:function(){},unbind:function(e){var t=this.key;this.isDependentComputedProperty&&n$11("Cannot unbind property %{key}. Properties with dependencies cannot be unbound.",{property:this,key:this.key,object:e});var n=e.downstreamNodes[t],r=e.upstreamNodes[t];this._disconnectNodes(n,r),this._configurePropertyAsRootValue(n,r),n$66.passValueToNode(void 0,r),e.isConnected&&n$66.triggerFlush()},_disconnectNodes:function(e,t){t>0&&n$66.disconnectChildrenFromNode(t),n$66.disconnectParentsFromNode(e)},_getter:null,_setter:null,_setUpInternalAccessors:function(){var key=this.key,unmangledDF=n$66,defaultValueKey=n$50.staticMembers.defaultValuePrefix+key,defaultValueStringifiedKey=JSON.stringify(defaultValueKey);
defaultValueStringifiedKey="["+defaultValueStringifiedKey+"]";var accessorString=n$60(key)?"."+key:"["+JSON.stringify(key)+"]",getterString=ObservableProperty._getterString;if(!getterString){var getterTemplate=function(){if(!this.propertiesAreInitialized)return this.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY;var e=ObservableProperty.isInsideSetter;ObservableProperty.isInsideSetter=!1;var t=this.downstreamNodes.COMPILED_ACCESSOR_STRING,n=unmangledDF.getValueForNode(t);return ObservableProperty.isInsideSetter=e,n};getterString=getterTemplate.toString(),getterString="("+getterString+")",ObservableProperty._getterString=getterString}if(getterString=getterString.replace(/\.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY/g,defaultValueStringifiedKey),getterString=getterString.replace(/\.COMPILED_ACCESSOR_STRING/g,accessorString),this._getter=eval(getterString),this.readOnly)this._setter=function(e){return this.propertiesAreInitialized?(n$11("Cannot write to read-only property: "+key,{object:this,value:e}),void 0):(this[defaultValueKey]=e,void 0)};else{var setterString=ObservableProperty._setterString;if(!setterString){var setterTemplate=function(e){if(!this.propertiesAreInitialized)return this.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY=e,void 0;var t=ObservableProperty.isInsideSetter;ObservableProperty.isInsideSetter=!0;var n=this.upstreamNodes.COMPILED_ACCESSOR_STRING;t&&unmangledDF.nodeIsDirty(n)?unmangledDF.passValueToNode(e,n):unmangledDF.setValueForNode(e,n),ObservableProperty.isInsideSetter=t};setterString=setterTemplate.toString(),setterString="("+setterString+")",ObservableProperty._setterString=setterString
}setterString=setterString.replace(/\.COMPILED_DEFAULT_VALUE_STRINGIFIED_KEY/g,defaultValueStringifiedKey),setterString=setterString.replace(/\.COMPILED_ACCESSOR_STRING/g,accessorString),this._setter=eval(setterString)}},internalGet:_internalGet,internalGetPath:_internalGet,_synthesizeInternalGet:n$23,setUpNativeAccessors:function(e){var t=this.key;Object.defineProperty(e,t,{get:this._getter,set:this._setter,configurable:!0})},getForObject:function(e){return this._getter.call(e)},setForObject:function(e,t,n){return this._setter.call(e,n)},__superMap:{_2RV2ZeU7ata$9lj$init:"init",_2RV2ZeU7ata$A0q$inheritFrom:"inheritFrom",_2RV2ZeU7ata$AKC$wasRegistered:"wasRegistered"}}),observableProperty=function(){return ObservableProperty.define.apply(ObservableProperty,arguments)};n$8=ObservableProperty,n$9=observableProperty,ObservableProperty.__QUALIFIED_CLASS_NAME__="CW.ObservableProperty"}();
    
    
        
!function(){"use strict";var t=n$80.extend({metadataType:n$8});n$81=t,t.__QUALIFIED_CLASS_NAME__="CW.RequiredObservableProperty"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],x:n$17(n$81),y:n$17(n$81)},t=n$5.extend(n$10,e,{x:n$9(0),y:n$9(0)});n$906=e,n$82=t,t.__QUALIFIED_CLASS_NAME__="CW.Point2D"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],height:n$17(n$81),width:n$17(n$81)},n=n$5.extend(n$10,e,{height:n$9(0),width:n$9(0)});n$83=e,n$556=n,n.__QUALIFIED_CLASS_NAME__="CW.Size"}();
    
    
        
!function(){"use strict";var e=n$80.extend({metadataType:n$3});n$85=e,e.__QUALIFIED_CLASS_NAME__="CW.RequiredProperty"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$83],origin:n$17(n$85),top:n$17(n$85),bottom:n$17(n$85),left:n$17(n$85),right:n$17(n$85),isAbove:function(t){return this.get("bottom")<=t.get("top")},isBelow:function(t){return this.get("top")>=t.get("bottom")},isLeftOf:function(t){return this.get("right")<=t.get("left")},isRightOf:function(t){return this.get("left")>=t.get("right")},intersects:function(t){return!(this.isAbove(t)||this.isBelow(t)||this.isRightOf(t)||this.isLeftOf(t))},containsPoint:function(t){var e=t.get("x"),n=t.get("y");return e>=this.get("left")&&e<this.get("right")&&n>=this.get("top")&&n<this.get("bottom")}},e=n$5.extend(n$10,t,{_origin:null,init:function(e){return n$31(e,t)?(this.x=e.get("x"),this.y=e.get("y"),this.width=e.get("width"),this.height=e.get("height"),this.__s._sk077oGLuJ$1Ik$init.call(this)):(this.__s._sk077oGLuJ$1JC$init.apply(this,arguments),void 0)},origin:n$9({cacheable:!0,dependencies:["x","y"],get:function(t,e,n,i){var a=i.internalGetPath(this,e[1+n]),r=i.internalGetPath(this,e[0+n]),s=this._origin;return s?(s.set("x",r),s.set("y",a)):s=this._origin=n$82.create({x:r,y:a}),s},set:function(t,e,n,i){n$33(t)||(t=n$82.create(t)),n[0+i]=t.get("x"),n[1+i]=t.get("y"),this._origin=t},writeDependencySetPathMap:[!1,!1]}),x:n$9(),y:n$9(),width:n$9(),height:n$9(),top:n$9({binding:n$14("y"),readOnly:!0}),bottom:n$9({readOnly:!0,cacheable:!0,dependencies:["height","y"],get:function(t,e,n,i){return i.internalGetPath(this,e[1+n])+i.internalGetPath(this,e[0+n])}}),left:n$9({binding:n$14("x"),readOnly:!0,cacheable:!0}),right:n$9({readOnly:!0,cacheable:!0,dependencies:["width","x"],get:function(t,e,n,i){return i.internalGetPath(this,e[1+n])+i.internalGetPath(this,e[0+n])
}}),dispose:function(){var t=this._origin;t&&t.dispose(),this.__s._sk077oGLuJ$1r5$dispose.apply(this,arguments)},__superMap:{_sk077oGLuJ$1Ik$init:"init",_sk077oGLuJ$1JC$init:"init",_sk077oGLuJ$1r5$dispose:"dispose"}});n$907=t,n$106=e,e.__QUALIFIED_CLASS_NAME__="CW.Rect"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],createIterator:function(){return this.get("iteratorClass").create(this)},iteratorClass:n$17(n$85),toArray:function(){for(var e=this.createIterator().retain(),t=[],n=0;e.get("isValid");){var i=e.get("value");t[n++]=i,e.moveToNext()}return e.release(),t},reduce:function(e,t,n){for(var i=this.createIterator().retain(),r=e;i.get("isValid");){var s=i.get("value");r=t.call(n,s,r),i.moveToNext()}return i.release(),r},find:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),r;n.moveToNext()}n.release()},every:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(!e.call(t,r,i++,this))return n.release(),!1;n.moveToNext()}return n.release(),!0},some:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");if(e.call(t,r,i++,this))return n.release(),!0;n.moveToNext()}return n.release(),!1},forEach:function(e,t){for(var n=this.createIterator().retain(),i=0;n.get("isValid");){var r=n.get("value");e.call(t,r,i++,this),n.moveToNext()}n.release()},contains:function(e){for(var t=this.createIterator().retain();t.get("isValid");){var n=t.get("value");if(n===e)return t.release(),!0;t.moveToNext()}return t.release(),!1}};e[Symbol.iterator]=e.createIterator,n$86=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$47,n$86],init:function(t){if(n$36(t)){this.__s._2M2l3aaQu5H$Jb$init.call(this);for(var e=0,n=t.length;n>e;e++)this.add(t[e])}else n$32(t,n$86)?(this.__s._2M2l3aaQu5H$Mu$init.call(this),t.forEach(this.add,this)):this.__s._2M2l3aaQu5H$P3$init.apply(this,arguments)},contains:function(t){return t=this.encode(t),this.__s._2M2l3aaQu5H$Ql$contains.call(this,t)},add:n$17(n$48),addEach:function(t){t.forEach(this.add,this)},remove:n$17(n$48),"delete":function(){return this.remove.apply(this,arguments)},length:n$85.create(),filter:function(t,e){for(var n=this.constructor.create(),i=this.createIterator().retain(),a=0;i.get("isValid");){a++;var r=i.get("value"),s=t.call(e,r,a,this);s===!0&&n.add(r),i.moveToNext()}return i.release(),n},serializer:null,encode:function(t){var e=this.get("serializer");return e&&e.encode&&(t=e.encode(t)),t},decode:function(t){var e=this.get("serializer");return e&&e.decode&&(t=e.decode(t)),t},__superMap:{_2M2l3aaQu5H$Jb$init:"init",_2M2l3aaQu5H$Mu$init:"init",_2M2l3aaQu5H$P3$init:"init",_2M2l3aaQu5H$Ql$contains:"contains"}};n$94=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],clone:n$17(n$48)};n$87=e}();
    
    
        
!function(){"use strict";var t={done:!1,value:null},e={mixinDependencies:[n$47,n$87],next:function(){return t.value=this.get("value"),t.done=!this.get("isValid"),this.moveToNext(),t},moveToNext:n$17(n$48),isValid:n$17(n$85),value:n$17(n$85)};n$88=e}();
    
    
        
!function(){"use strict";var e={done:!1,value:null},t={mixinDependencies:[n$88],moveToNext:function(){return this.moveBy(1)},moveToPrevious:function(){return this.moveBy(-1)},previous:function(){return e.value=this.get("value"),e.done=this.get("isValid"),this.moveBy(-1),e},moveBy:n$17(n$48)};n$89=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$89],position:n$4(0),countAfter:n$4({readOnly:!0,get:function(){return this.get("length")-this.get("position")-1}}),countBefore:n$4({readOnly:!0,get:function(){return this.get("position")}}),moveTo:function(e){return this.set("position",e),this},length:n$17(n$85),moveBy:function(e){return this.moveTo(this.get("position")+e)}};n$90=e}();
    
    
        
!function(){"use strict";var e={staticMembers:{_pool:n$84(global.Array),_poolSize:0,init:function(){this.__s._2MFxMyds_7g$6M$init.apply(this,arguments),this._poolSize=0},create:function(){var e;return e=this._poolSize>0?this._pool[--this._poolSize]:this.__s._2MFxMyds_7g$A7$create.call(this),e.initFromPool.apply(e,arguments),e},__superMap:{_2MFxMyds_7g$6M$init:"init",_2MFxMyds_7g$A7$create:"create"}},release:function(){var e=--this._retainCount;if(0>e&&n$11("Cannot release an object that has never been retained.",{object:this}),0===e){var t=this.constructor;t._pool[t._poolSize++]=this,this.didEnterPool()}return this},initFromPool:n$23,didEnterPool:n$23};n$91=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$88],value:n$17(n$85),remove:n$17(n$48),add:n$17(n$48)};n$92=t}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$90,n$92,n$91,{initFromPool:function(e,t){this.__s._1RF5O4KcJmH$Di$initFromPool.call(this),this.set("source",e),this.set("position",t||0)},didEnterPool:function(){this.set("source",null),this.set("position",0/0),this.__s._1RF5O4KcJmH$H2$didEnterPool.call(this)},source:n$4(),value:n$4({get:function(){return this.get("source").objectAt(this.get("position"))},set:function(e){return this.get("source").setIndex(this.get("position"),e),e}}),isValid:n$4({readOnly:!0,get:function(){var e=this.get("position");return e>=0&&e<this.get("length")}}),length:n$4({readOnly:!0,get:function(){return this.getPath("source.length")}}),hashCode:function(){return n$22(this.get("source"))+this.get("position")},clone:function(){return this.constructor.create(this.get("source"),this.get("position"))},remove:function(){return this.get("source").removeAt(this.get("position"))[0]},add:function(e){var t=this.get("source"),n=t.get("length"),o=this.get("position")+1;t.insertAt(o,e);var i=t.get("length")!==n;return i&&this.set("position",Math.min(o,n)),i},__superMap:{_1RF5O4KcJmH$Di$initFromPool:"initFromPool",_1RF5O4KcJmH$H2$didEnterPool:"didEnterPool"}});n$95=e,e.__QUALIFIED_CLASS_NAME__="CW.OrderedListIterator"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$86],createIteratorAtEnd:n$17(n$48)};n$93=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$93,n$94],createIterator:function(){return this.createIteratorAt(0)},createIteratorAtEnd:function(){return this.createIteratorAt(this.get("length")-1)},createIteratorAt:n$17(n$48)};n$96=e}();
    
    
        
!function(){"use strict";function t(t,e,n,i,r){var a=t.objectAt(r);for(t.swap(r,i),r=i;i>n;){var s=t.objectAt(n),o=e(s,a);0>=o?n++:t.swap(n,--i)}return t.swap(r,i),i}function e(n,i,r,a){var s=a-r+1;if(!(1>=s)){var o=Math.floor((r+a)/2);o=t(n,i,r,a,o),e(n,i,r,o-1),e(n,i,o+1,a)}}function n(t,e){return void 0===e?void 0===t?0:-1:void 0===t?1:(t=String(t),e=String(e),e>t?-1:t>e?1:0)}function i(t,e){0>t&&(t=e+t);var n=e-1;return t>n?t=n:0>t&&(t=0),t}function r(t){0>t&&n$11("Invalid length %{length}. Must be a positive integer.",{length:t,object:this});var e=this.get("_internalLength"),n=e-t;return n>0?this.splice(t,n):0>n&&(s.length=-n+2,s[0]=e,s[1]=0,this.splice.apply(this,s)),t}var a={mixinDependencies:[n$47,n$94,n$96],staticMembers:{resizingLengthSetter:r},lastItem:n$4({get:function(){return this.objectAt(this.get("length")-1)},set:function(t){return this.setIndex(this.get("length")-1,t),t}}),push:function(){var t=this.get("length"),e=n$27(arguments,2);return e[0]=t,e[1]=0,this.splice.apply(this,e),t+arguments.length},pop:function(){var t=this.get("length")-1,e=this.objectAt(t);return this.splice(t,1),e},unshift:function(){var t=this.get("length"),e=n$27(arguments,2);return e[0]=0,e[1]=0,this.splice.apply(this,e),t+arguments.length},shift:function(){var t=this.objectAt(0);return this.splice(0,1),t},insertAt:function(t){var e=n$27(arguments,2,1);return e[0]=t,e[1]=0,this.splice.apply(this,e),this},removeAt:function(t,e){return void 0===e&&(e=1),this.splice(t,e)},add:function(t){return this.push(t),!0},remove:function(t){var e=this.indexOf(t);return-1===e?!1:(this.splice(e,1),!0)
},slice:function(t,e){var n=this.get("length");if(0===n)return[];t=void 0===t?0:i(t,n),e=void 0===e||e>n?n:i(e,n);for(var r=e-t,a=new Array(r),s=0;r>s;s++)a[s]=this.objectAt(s+t);return a},indexOf:function(t,e){var n=this.get("length");e=void 0===e?0:i(e,n);for(var r=e;n>r;r++)if(this.objectAt(r)===t)return r;return-1},contains:function(t){return-1!==this.indexOf(t)},lastIndexOf:function(t,e){var n=this.get("length");e=void 0===e?n-1:i(e,n);for(var r=e;r>=0;r--)if(this.objectAt(r)===t)return r;return-1},splice:function(t,e){var n=this._internalLength;0>t?(t=n+t,0>t&&(t=0)):t>n&&(t=n);var i=arguments.length;if((1===i||e+t>n)&&(e=n-t),2===i&&0===e)return[];var r=n$27(arguments);return r[0]=t,r[1]=e,this.rawSplice.apply(this,r)},rawSplice:n$17(n$48),objectAt:n$17(n$48),iteratorClass:n$4({readOnly:!0,defaultValue:n$95}),createIteratorAt:function(t){return this.get("iteratorClass").create(this,t)},join:function(t){void 0===t&&(t=",");for(var e=this.get("length"),n="",i=0;e>i;i++){var r=this.objectAt(i);0!==i&&(n+=t),n$41(r)&&(n+=r.toString())}return n},toString:function(){return this.join(", ")},reverse:function(){for(var t=this.get("length")-1,e=0;t>e;e++,t--)this.swap(e,t);return this},setIndex:function(t,e){return t>this.length&&(this.length=t+1),this.splice(t,1,e),this},swap:function(t,e){var n=this.objectAt(e);return this.setIndex(e,this.objectAt(t)),this.setIndex(t,n),this},sort:function(t){return t||(t=n),e(this,t,0,this.get("length")-1),this},reduce:function(t,e,n){for(var i=this.get("length"),r=t,a=0;i>a;a++)r=e.call(n,this.objectAt(a),r);return r},find:function(t,e){for(var n=this.get("length"),i=0;n>i;i++){var r=this.objectAt(i);
if(t.call(e,r,i,this))return r}},findIndex:function(t,e){for(var n=this.get("length"),i=0;n>i;i++){var r=this.objectAt(i);if(t.call(e,r,i,this))return i}return-1},clear:function(){return this.splice(0,this.get("length")),this},map:function(t,e){for(var n=this.constructor.create(),i=0,r=this.get("length");r>i;i++){var a=t.call(e,this.objectAt(i),i,this);n.setIndex(i,a)}return n},_internalLength:n$85.create()},s=[];n$97=a}();
    
    
        
!function(){"use strict";function e(){return this._array.length}var t=n$5.extend(n$97,{init:function(e){var t,n=!1;n$36(e)?t=n$35(e):n$32(e,n$86)?t=e.toArray():(t=[],n=!0),this._array=t,n?this.__s._2kLyvjYVVWP$Nq$init.apply(this,arguments):this.__s._2kLyvjYVVWP$OY$init.call(this);var i=this.get("serializer");if(i&&i.encode)for(var r=0,s=t.length;s>r;r++)t[r]=i.encode(t[r])},_array:null,rawSplice:function(){var e,t,n=this._array,i=arguments,r=this.get("serializer");if(r&&r.encode)for(i=n$27(arguments,0,0),e=2,t=i.length;t>e;e++)i[e]=r.encode(i[e]);var s=n.splice.apply(n,i);if(r&&r.decode)for(e=0,t=s.length;t>e;e++)s[e]=r.decode(s[e]);return s},objectAt:function(e){return this.decode(this._array[e])},length:n$4({get:e,set:n$97.staticMembers.resizingLengthSetter}),_internalLength:n$4({readOnly:!0,get:e}),shallowCopy:function(){return this.constructor.create(n$40(this._array))},__superMap:{_2kLyvjYVVWP$Nq$init:"init",_2kLyvjYVVWP$OY$init:"init"}});n$99=t,t.__QUALIFIED_CLASS_NAME__="CW.Array"}();
    
    
        
!function(){"use strict";function e(e){return null===e||"object"!=typeof e&&"function"!=typeof e}n$98=e}();
    
    
        
!function(){"use strict";var e=function(e){var t="";try{var n=e&&e.toJSON&&e.toJSON()||e;t=n$98(n)?""+n:JSON.stringify(n)}catch(i){try{t=e+" (could not `JSON.stringify()`)"}catch(r){t="(cannot stringify context)"}}return t};n$100=e}();
    
    
        
!function(){"use strict";var e=n$99.extend(n$62,{toJSON:function(){var e=this.toArray();if(e.length<=1)return e[0];for(var t=[],n=0,o=e.length;o>n;n++)t.push("*** Context "+(n+1)+": ***\n"+n$100(e[n]));return t.join("\n")}});n$101=e,e.__QUALIFIED_CLASS_NAME__="CW.Utils.MultiContext"}();
    
    
        
!function(){"use strict";var e=function(e,n,r){if(t)return e.apply(r,n);if(!n$103.get("isExceptionHandlingEnabled"))return n$102(e,r,n);t=!0;try{return n$102(e,r,n)}catch(i){var o=n$101.get("sharedInstance");o.get("length")&&(o.push(i.context),o.reverse(),i.context=o),n$103.exceptionHandler(i),n$103.exceptionWasHandled=!0,n$101.set("sharedInstance",null)}finally{t=!1}},t=!1;n$104=e}();
    
    
        
!function(){"use strict";var t=function(t){var e=t._exceptionHandling_wrappedFunction;return e?e===!0?t:e:(e=function(){return n$104(t,arguments,this)},e._exceptionHandling_wrappedFunction=!0,t._exceptionHandling_wrappedFunction=e,e)};n$105=t}();
    
    
        
!function(){"use strict";var e=function(e,t,n,i){return e.addEventListener(t,n$105(n),i||!1)};n$107=e}();
    
    
        
!function(){"use strict";var e=n$106.extend({init:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.__s._4d3pTQO11dy$A8$init.apply(this,arguments),n$107(window,"resize",this.updateDimensions.bind(this))},x:0,y:0,width:0,height:0,updateDimensions:function(){this.set("width",window.innerWidth),this.set("height",window.innerHeight)},__superMap:{_4d3pTQO11dy$A8$init:"init"}});n$108=e,e.__QUALIFIED_CLASS_NAME__="CW.Platform.BrowserWindow"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{init:function(e){var t=e&&e.userAgent;t?delete e.userAgent:t=window.navigator.userAgent,t=t.toLowerCase();var n,r,i,o,s,a=/\sedge\//.test(t),u=!a&&/chrome/.test(t),l=!a&&!u&&/safari/.test(t),p=!a&&!u&&!l&&/firefox/.test(t),c=!a&&!u&&!l&&!p&&/trident|msie/.test(t),d=a,h=!d&&/applewebkit/.test(t)&&!/edge/.test(t),f=!d&&!h&&/trident/.test(t),y=!d&&!h&&!f&&/gecko/.test(t);a?(n=t.match(/(?:edge).(\d+)\.(\d+)/),o=t.match(/(?:edge).(\d+)/)):(n=t.match(/(?:chrome|version|firefox|msie|rv).(\d+)\.(\d+)/),o=t.match(/(?:applewebkit|gecko|trident).(\d+)/)),n&&(r=parseInt(n[1],10),i=parseInt(n[2],10)),o&&(s=parseInt(o[1])),this.__s._eFQT1pAjNm$ny$init.call(this,{isChrome:u,isSafari:l,isFirefox:p,isEdge:a,isIE:c,isIE9OrLower:c&&10>r,isIE8OrLower:c&&9>r,majorVersion:r,minorVersion:i,isEdgeHTML:d,isWebKit:h,isGecko:y,isTrident:f,engineMajorVersion:s})},isChrome:void 0,isFirefox:void 0,isEdge:void 0,isIE:void 0,isIE9OrLower:void 0,isIE8OrLower:void 0,isSafari:void 0,majorVersion:void 0,minorVersion:void 0,isEdgeHTML:void 0,isWebKit:void 0,isGecko:void 0,isTrident:void 0,engineMajorVersion:void 0,window:n$84(n$108),__superMap:{_eFQT1pAjNm$ny$init:"init"}});n$109=e,e.__QUALIFIED_CLASS_NAME__="CW.Platform.Browser"}();
    
    
        
!function(){"use strict";var t=[{name:"dppx",multiple:1},{name:"dpi",multiple:window.screen.logicalXDPI||96}],e="",n=0/0,i=!1;!function(){if(window.matchMedia)for(var a,r,s=0;a=t[s];s++)if(r=a.name,-1!==window.matchMedia("(min-resolution: 1"+r+")").media.indexOf("min-resolution"))return i=!0,e=r,n=a.multiple,void 0}();var a=n$5.extend(n$10,n$62,{isMac:void 0,isWindows:void 0,isiOS:void 0,osMajorVersion:void 0,osMinorVersion:void 0,isiPhone:void 0,isiPad:void 0,isiPhoneLikeDevice:void 0,isiPadLikeDevice:void 0,devicePixelRatio:n$9({get:function(){return this._devicePixelRatio||(this._devicePixelRatio=this._getDevicePixelRatio())},readOnly:!0}),_getDevicePixelRatio:function(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1},_devicePixelRatio:0/0,isRetina:void 0,init:function(t){var e=t&&t.userAgent;e?delete t.userAgent:e=window.navigator.userAgent,this.__s._2MiBLiYWvC7$256$init.apply(this,arguments),e=e.toLowerCase();var n=!!/mac/.test(e)&&!/like mac/.test(e),i=!!/windows/.test(e);this.isMac=n,this.isWindows=i;var a,r,s,o=e.match(/\b(iPad|iPhone|iPod)\b.*\bOS (\d+)_(\d+)/i);if(o){var c=o[1];a="iphone"===c||"ipod"===c,r="ipad"===c,s=a||r}else a=r=s=!1;this.isiPhone=a,this.isiPad=r,this.isiOS=s;var u,l,d;n?(u=e.match(/mac os x (\d+)[ _\.](\d+)/),u&&(l=u[1],d=u[2])):i?(u=e.match(/windows[ a-z]+?(\d+)[ _\.](\d+)/),u&&(l=u[1],d=u[2])):s&&(l=o[2],d=o[3]),l&&(this.osMajorVersion=parseInt(l,10)),d&&(this.osMinorVersion=parseInt(d,10)),this.isRetina=window.devicePixelRatio>1,this._updateDevicePixelRatio(),n$107(window,"resize",this._updateDevicePixelRatio.bind(this),!1)
},_updateDevicePixelRatio:function(){if(n$109.getPath("sharedInstance.isFirefox")){var t=this._forceWindowResizeNotificationCanvas;t||(t=this._forceWindowResizeNotificationCanvas=document.createElement("canvas"),t.width=1,t.height=1,this._forceWindowResizeNotificationCanvasContext=t.getContext("2d"),t.classList.add("ff-force-window-resize-notification"),t.style.position="absolute",t.style.left="-1000px",t.style.top="-1000px",document.body.appendChild(t));var e=this._forceWindowResizeNotificationCanvasContext;e.measureText("Blah")}var n=this._getDevicePixelRatio();n!==this._devicePixelRatio&&(this._devicePixelRatio=n,this._detectChangeAwayFromDPR(n),this.propertyChanged("devicePixelRatio"))},_detectChangeAwayFromDPR:function(t){if(window.matchMedia){var a,r=.001,s=Math.round(t/r)*r,o=s+r,c=s-r,u=this._updateDevicePixelRatio.bind(this),l=this._dprQueryListCache||(this._dprQueryListCache={}),d=this._activeMediaQueryListPair,h=l[s];h||(h=l[s]={},a="(-webkit-min-device-pixel-ratio: "+c+")"+", (min--moz-device-pixel-ratio: "+c+")"+(i?", (min-resolution: "+c*n+e+")":""),h.lowerBound=window.matchMedia(a),a="(-webkit-max-device-pixel-ratio: "+o+")"+", (max--moz-device-pixel-ratio: "+o+")"+(i?", (max-resolution: "+o*n+e+")":""),h.upperBound=window.matchMedia(a)),h!==d&&(d&&(d.lowerBound.removeListener(u),d.upperBound.removeListener(u)),h.lowerBound.addListener(u),h.upperBound.addListener(u),this._activeMediaQueryListPair=h)}},_dprQueryListCache:null,_resMultiple:n,__superMap:{_2MiBLiYWvC7$256$init:"init"}});n$110=a,a.__QUALIFIED_CLASS_NAME__="CW.Platform.Device"}();
    
    
        
!function(){"use strict";function e(){return"createTouch"in document&&!n$110.get("sharedInstance").get("isWindows")}var t="pointer",n="touch",o="mouse",i=n$5.extend({init:function(e){this.__s._21KY4TLecau$GQ$init.call(this,e);var i;this.isPointerSupported?i=t:this.isTouchSupported?i=n:this.isMouseSupported&&(i=o),this.pointerEventClass=i||null},pointerEventClass:void 0,isPointerSupported:!1,isTouchSupported:!1,isMouseSupported:!1,isMouseWheelSupported:!1,isInputSupported:!1,__superMap:{_21KY4TLecau$GQ$init:"init"}}),r=i.create({isPointerSupported:window.navigator.msPointerEnabled||window.navigator.pointerEnabled,isTouchSupported:e(),isMouseSupported:"onmousedown"in document,isMouseWheelSupported:"onwheel"in document||"onmousewheel"in document,isInputSupported:!n$109.get("sharedInstance").get("isIE9OrLower")});n$908=i,n$111=r,i.__QUALIFIED_CLASS_NAME__="CW.Platform.Capabilities.Event"}();
    
    
        
!function(){var e=function(e){return"INPUT"===e.nodeName&&("text"===e.type||"password"===e.type)},t=null,n=null,r=null,i={get:function(){return r.get.call(this)},set:function(e){n=e,r.set.call(this,e)}},o=function(e){var t="input",n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)},s=function(e){t=e,n=e.value,r=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(t,"value",i),t.attachEvent("onpropertychange",u)},a=function(){t&&(delete t.value,t.detachEvent("onpropertychange",u),t=null,n=null,r=null)},u=n$105(function(e){if("value"===e.propertyName){var r=e.srcElement.value;r!==n&&(n=r,o(t))}});if(!n$111.isInputSupported){n$107(document,"focusin",function(t){e(t.target)&&(a(),s(t.target))}),n$107(document,"focusout",function(){a()});var l=function(){t&&t.value!==n&&(n=t.value,o(t))};n$107(document,"selectionchange",l),n$107(document,"keyup",l),n$107(document,"keydown",l)}}();
    
    
        
!function(){"use strict";if(n$109.get("sharedInstance").isIE9OrLower){var e=window.setTimeout;window.setTimeout=function(t,n){if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return e(function(){t.apply(this,i)},n)}return e(t,n)};var t=window.setInterval;window.setInterval=function(e,n){if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return t(function(){e.apply(this,i)},n)}return t(e,n)}}}();
    
    
        
!function(){"use strict";if(window.performance||(window.performance={}),!window.performance.now){var e,t=window.performance.timing;e=t&&t.navigationStart?t.navigationStart:Date.now(),window.performance.now=function(){return Date.now()-e}}}();
    
    
        
!function(){!function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function r(){}function i(){return function(){process.nextTick(u)}}function o(){var e=0,t=new R(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=u,function(){e.port2.postMessage(0)}}function a(){return function(){setTimeout(u,1)}}function u(){for(var e=0;P>e;e+=2){var t=U[e],n=U[e+1];t(n),U[e]=void 0,U[e+1]=void 0}P=0}function c(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function d(e){try{return e.then}catch(t){return B.error=t,B}}function h(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function f(e,t,n){j(function(e){var r=!1,i=h(n,t,function(n){r||(r=!0,t!==n?v(e,n):b(e,n))},function(t){r||(r=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,_(e,i))},e)}function y(e,t){t._state===L?b(e,t._result):e._state===G?_(e,t._result):$(t,void 0,function(t){v(e,t)},function(t){_(e,t)})}function g(e,n){if(n.constructor===e.constructor)y(e,n);else{var r=d(n);r===B?_(e,B.error):void 0===r?b(e,n):t(r)?f(e,n,r):b(e,n)}}function v(t,n){t===n?_(t,l()):e(n)?g(t,n):b(t,n)}function m(e){e._onerror&&e._onerror(e._result),w(e)}function b(e,t){e._state===V&&(e._result=t,e._state=L,0===e._subscribers.length||j(w,e))}function _(e,t){e._state===V&&(e._state=G,e._result=t,j(m,e))
}function $(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+L]=n,i[o+G]=r,0===o&&e._state&&j(w,e)}function w(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?A(n,r,i,o):i(o);e._subscribers.length=0}}function S(){this.error=null}function N(e,t){try{return e(t)}catch(n){return z.error=n,z}}function A(e,n,r,i){var o,s,a,u,c=t(r);if(c){if(o=N(r,i),o===z?(u=!0,s=o.error,o=null):a=!0,n===o)return _(n,p()),void 0}else o=i,a=!0;n._state!==V||(c&&a?v(n,o):u?_(n,s):e===L?b(n,o):e===G&&_(n,o))}function C(e,t){try{t(function(t){v(e,t)},function(t){_(e,t)})}catch(n){_(e,n)}}function O(e,t,n,r){this._instanceConstructor=e,this.promise=new e(c,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&b(this.promise,this._result))):_(this.promise,this._validationError())}function E(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(e){this._id=J++,this._state=void 0,this._result=void 0,this._subscribers=[],c!==e&&(t(e)||E(),this instanceof D||I(),C(this,e))}var k;k=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var F=k;Date.now||function(){return(new Date).getTime()
},Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return r.prototype=e,new r};var T,P=0,j=function(e,t){U[P]=e,U[P+1]=t,P+=2,2===P&&T()},M="undefined"!=typeof window?window:{},R=M.MutationObserver||M.WebKitMutationObserver,x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,U=new Array(1e3);T="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?i():R?o():x?s():a();var V=void 0,L=1,G=2,B=new S,z=new S;O.prototype._validateInput=function(e){return F(e)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)};var K=O;O.prototype._enumerate=function(){for(var e=this.length,t=this.promise,n=this._input,r=0;t._state===V&&e>r;r++)this._eachEntry(n[r],r)},O.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;n(e)?e.constructor===r&&e._state!==V?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(L,t,e))},O.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===V&&(this._remaining--,this._abortOnReject&&e===G?_(r,n):this._result[t]=this._makeResult(e,t,n)),0===this._remaining&&b(r,this._result)},O.prototype._makeResult=function(e,t,n){return n},O.prototype._willSettleAt=function(e,t){var n=this;$(e,void 0,function(e){n._settledAt(L,t,e)},function(e){n._settledAt(G,t,e)
})};var Y=function(e,t){return new K(this,e,!0,t).promise},W=function(e,t){function n(e){v(o,e)}function r(e){_(o,e)}var i=this,o=new i(c,t);if(!F(e))return _(o,new TypeError("You must pass an array to race.")),o;for(var s=e.length,a=0;o._state===V&&s>a;a++)$(i.resolve(e[a]),void 0,n,r);return o},X=function(e,t){var n=this;if(e&&"object"==typeof e&&e.constructor===n)return e;var r=new n(c,t);return v(r,e),r},Z=function(e,t){var n=this,r=new n(c,t);return _(r,e),r},J=0,q=D;D.all=Y,D.race=W,D.resolve=X,D.reject=Z,D.prototype={constructor:D,then:function(e,t){var n=this,r=n._state;if(r===L&&!e||r===G&&!t)return this;var i=new this.constructor(c),o=n._result;if(r){var s=arguments[r-1];j(function(){A(r,i,s,o)})}else $(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var H=function(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var n="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var n;return new e.Promise(function(e){n=e}),t(n)}();n||(e.Promise=q)},Q={Promise:q,polyfill:H};"function"==typeof define&&define.amd?define(function(){return Q}):"undefined"!=typeof module&&module.exports?module.exports=Q:"undefined"!=typeof this&&(this.ES6Promise=Q)}.call(global),ES6Promise&&ES6Promise.polyfill()}();
    
    
        
!function(){"use strict";n$20(Number,"isInteger",function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),n$20(Number,"isFinite",function(e){return"number"==typeof e&&isFinite(e)}),n$20(Number,"isNaN",function(e){return"number"==typeof e&&isNaN(e)})}();
    
    
        
!function(){"use strict";!function(){if(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.MozRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.MozCancelAnimationFrame||window.msCancelAnimationFrame,!window.requestAnimationFrame||!window.cancelAnimationFrame){var e=window.performance&&window.performance.now&&window.performance||{now:function(){var e=Date.now();return function(){return Date.now()-e}}()},t=1,n=0,i=e.now(),r=[],s=t;window.requestAnimationFrame=function(s){return r.push(s),n||(n=setTimeout(a,Math.max(0,i+16-e.now()))),t++},window.cancelAnimationFrame=function(e){var t=e-s;r[t]&&(r[t]=void 0)};var a=function(){n=0,i=e.now();for(var t=r.length,a=0;t>a;a++){var l=r[a];l&&l(i)}o(t),s+=t},o=function(e){for(var t=e,n=r.length;n>t;t++)r[t-e]=r[t];r.length-=e}}}()}();
    
    
        
!function(){"use strict"}();
    
    
        
!function(){"use strict";var t=n$66.NULL_INDEX,e=n$65.extend({_debug_dependencyNames:null,_debug_key:null,init:function(t,e){this.__s._SNgW3AEf3K$1rw$init.call(this),n$39(e)||n$11("Cannot create CW.ObserverNodeManager without an observer function to call when there is a change."),this.observer=e,this._inputCollector=new Array(t)},flushNode:function(t,e){n$66.getValueForNode(e)},invokeObserver:function(t){var e=n$8.isInsideSetter;n$8.isInsideSetter=!1;var n=this.observer.apply(t,this._inputCollector);return n$8.isInsideSetter=e,n},calculateValueForNode:function(t,e,n){n||n$11("Observers should not be set directly, they must pull from their parents.",e);var i=this._inputCollector;return n$66.pullDataFromParents(e,i),this.invokeObserver(t)},clearInputCollectors:function(){for(var t=0;t<this._inputCollector.length;t++)this._inputCollector[t]=void 0},addDebugInfoForNode:function(t,e){e.type="Observer",e.object=t,e.key=this._debug_key||"(Anonymous)",e.dependencyNames=this._debug_dependencyNames,e.toString=function(){return this.object+"."+this.key},e.name=e.toString()},__superMap:{_SNgW3AEf3K$1rw$init:"init"}}),n=n$30.extend({init:function(t){var e,n,i=this.notifyOnCreate;if(n$37(t))e=t.inputs,n=t.callback,void 0!==t.notifyOnCreate&&(i=t.notifyOnCreate);else{e=n$27(arguments);var r=e.pop();n$39(r)||(void 0!==r&&(i=r),r=e.pop()),n=r}this.bindings=n$13.createForPaths(e),this.manager=this.managerClass.create(e.length,n),this.manager._debug_inputNames=e,this.notifyOnCreate=i,this.__s._SNgW3AEf3K$3DP$init.call(this)},wasRegistered:function(t,e){this.__s._SNgW3AEf3K$3Fw$wasRegistered.apply(this,arguments),this.manager._debug_key=e
},getValue:function(t,e){var n=this;return function(){var t=this.downstreamNodes[e];return n$66.setNodeToDirtyFromParent(t),n$66.getValueForNode(t),n.manager.invokeObserver(this)}},notifyOnCreate:!0,manager:null,managerClass:e,requiresSupport:n$10,bindings:null,allowAtCreate:!0,connect:function(t,e){for(var n,i,r=this.bindings,a=this.notifyOnCreate,s=0,o=r.length;o>s;s++)n=r[s],i=n$13.hookUpDownstreamNode(t,n,e,a),i||n$11("Observer could not hook up to one of its observed properties.",{object:t,observer:this,binding:n,bindingPath:n.path});t.isConnected&&n$66.triggerFlush()},__superMap:{_SNgW3AEf3K$3DP$init:"init",_SNgW3AEf3K$3Fw$wasRegistered:"wasRegistered"}}),i=n.extend({notifyOnCreate:!1}),r=n.extend({node:t,init:function(t,e){if(t&&t.hasMixin&&t.hasMixin(n$10)||n$11("CW.Observer requires an owning object"),this.owningObject=t,n$37(e))this.__s._SNgW3AEf3K$4KU$init.call(this,e);else{var n=n$27(arguments);n.shift(),this.__s._SNgW3AEf3K$4N8$init.apply(this,n)}this.node=t.allocNode(this.manager,n$66.FLUSH)},connect:function(){return this.__s._SNgW3AEf3K$4SI$connect.call(this,this.owningObject,this.node)},disconnect:function(){n$66.disconnectParentsFromNode(this.node),this.manager.clearInputCollectors()},__superMap:{_SNgW3AEf3K$4KU$init:"init",_SNgW3AEf3K$4N8$init:"init",_SNgW3AEf3K$4SI$connect:"connect"}}),a=r.extend({notifyOnCreate:!1}),s=function(){return n.define.apply(n,arguments)},o=function(){return i.define.apply(i,arguments)};n$909=e,n$77=n,n$6=r,n$76=a,n$7=s,n$170=o,e.__QUALIFIED_CLASS_NAME__="CW.ObserverNodeManager",n.__QUALIFIED_CLASS_NAME__="CW.ObserverMetadata",i.__QUALIFIED_CLASS_NAME__="CW.ListenerMetadata$99",r.__QUALIFIED_CLASS_NAME__="CW.Observer",a.__QUALIFIED_CLASS_NAME__="CW.Listener"
}();
    
    
        
!function(){"use strict";var e=n$30.extend({requiresSupport:n$10,defaultArgument:void 0,isCacheable:!0,init:function(e){return n$37(e)?this.__s._3Sn7ySPz5i1$Su$init.apply(this,arguments):(this.defaultArgument=e,this.__s._3Sn7ySPz5i1$Tv$init.call(this),void 0)},flushNode:function(e,t){n$66.getValueForNode(t)},notifyNode:function(e,t){n$66.setDataForNode(null,t),this.didPropagate.call(e)},calculateValueForNode:function(e,t){var n=n$66.getStateDataForNode(t);return this.willPropagate.call(e,n),n},getValue:function(e,t){var n=this.defaultArgument;return function(e){var i=this.downstreamNodes[t];void 0!==i&&n$66.setValueForNode(void 0===e?n:e,i)}},didPropagate:n$23,willPropagate:n$23,wasRegistered:function(e,t){this.__s._3Sn7ySPz5i1$14W$wasRegistered.apply(this,arguments),this._debug_key=t},addDebugInfoForNode:function(e,t){t.type="Signal",t.object=e,t.key=this._debug_key,t.toString=function(){return this.object+"."+this.key},t.name=t.toString()},__superMap:{_3Sn7ySPz5i1$Su$init:"init",_3Sn7ySPz5i1$Tv$init:"init",_3Sn7ySPz5i1$14W$wasRegistered:"wasRegistered"}}),t=function(){return e.create.apply(e,arguments)};n$75=e,n$12=t,e.__QUALIFIED_CLASS_NAME__="CW.SignalMetadata"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],action:n$48.create()},t=n$74("AppStates",function(e){e("NEW"),e("COMPLETE")}),n=n$5.extend(n$10,n$62,e,{staticMembers:{states:t},dependencies:n$84(Array),run:function(e){this.action(e),this.get("isAsync")||this.complete()},isAsync:!1,state:n$9(t.NEW),complete:function(){this.set("state",t.COMPLETE)}});n$216=e,n$125=n,n.__QUALIFIED_CLASS_NAME__="CW.AppInitializer"}();
    
    
        
!function(){"use strict";var e=n$125.extend({action:function(e){e.get("rootElement")||n$11("Must provide a `rootElement`")}});n$155=e,e.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.RootElementInitializer"}();
    
    
        
!function(){"use strict";function t(){return this._items.length}var e={mixinDependencies:[n$47],didRemoveItem:function(){}},n=n$5.extend(n$97,{_items:[],_index:0,_sizeLimit:null,init:function(t){var e;"object"==typeof t?(e=t.sizeLimit,this.set("delegate",t.delegate)):e=t,("number"!=typeof e||0>=e)&&n$11("sizeLimit must be a positive integer before pushing items."),this._sizeLimit=e,this._items=[];for(var n=1,i=arguments.length;i>n;n++)this.push(arguments[n]);this.__s._l9sMHlPbbI$19O$init.call(this)},delegate:null,rawSplice:function(){this.normalizeIndex();var t=this._items,e=this._sizeLimit,n=t.splice.apply(t,arguments),i=t.length;return i>e&&(this._items=t.splice(0,e),n=this._items),this._index=t.length,n},normalizeIndex:function(){var t=this._items,e=this._sizeLimit,n=this._index,i=[];if(!e||e>n||0===n%e)return t;for(var r=n;0!==r%e;)i.push(t[r%e]),r++;for(var a=0,s=n%e;s>a;a++)i.push(t[a]);return this._items=i,this._index=i.length,i},toArray:function(){return this.normalizeIndex(),this._items},push:function(){for(var t,e,n=this.get("delegate"),i=n?n.get("didRemoveItem"):null,r=0,a=arguments.length;a>r;r++)t=this._index%this._sizeLimit,e=this._items[t],this._items[t]=arguments[r],this._index++,e&&i&&i(e)},objectAt:function(t){var e=this._sizeLimit,n=this._items,i=this._index%e,r=t+i;return"number"!=typeof e||0>t||t>=e?void 0:n.length<e||0===i?n[t]:e>r?n[r]:n[r-e]},length:n$4({get:t}),_internalLength:n$4({get:t}),__superMap:{_l9sMHlPbbI$19O$init:"init"}});n$910=e,n$135=n,n.__QUALIFIED_CLASS_NAME__="CW.RollingArray"}();
    
    
        
!function(){"use strict";var e={BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CTRL:17,OPTION:18,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,CMD:91};n$126=e}();
    
    
        
!function(){"use strict";function e(e){for(var t={},n=e.length,o=0;n>o;o++){var i=e[o];t[i]=!0}return t}n$127=e}();
    
    
        
!function(){"use strict";var e=n$127([n$126.SHIFT,n$126.CTRL,n$126.OPTION,n$126.CMD]),t=n$5.extend({init:function(e){"string"==typeof e?(this.__s._428eAqxgOjE$HZ$init.call(this),this._initFromString(e)):this.__s._428eAqxgOjE$Iz$init.apply(this,arguments)},getKeyCode:function(e){var t=e.trim().toUpperCase();return n$126[t]||t.charCodeAt(0)},addKey:function(t){e[t]?this._addModifier(t):this._addSequencedKey(t)},clear:function(){this.modifiers&&(this.modifiers.length=0),this.keys&&(this.keys.length=0)},toString:function(){var e="";return this.modifiers&&(e+=this.modifiers.sort().join("+")+":"),this.keys&&(e+=this.keys.join(",")),e},_initFromString:function(t){var n,r,i,o;if(/\+/.test(t))for(n=t.split("+"),r=0,i=n.length;i>r;r++){var s=this.getKeyCode(n[r]);e[s]?this._addModifier(s):(o&&n$11("Invalid key sequence: "+t+". Key sequences do not support pressing two (non-modifier) keys at the same time"),o=!0,this._addSequencedKey(s))}else for(n=t.split(/\s/),r=0,i=n.length;i>r;r++)this._addSequencedKey(this.getKeyCode(n[r]))},_addModifier:function(e){var t=this.modifiers||(this.modifiers=[]);t.push(e)},_addSequencedKey:function(e){var t=this.keys||(this.keys=[]);t.push(e)},__superMap:{_428eAqxgOjE$HZ$init:"init",_428eAqxgOjE$Iz$init:"init"}});n$129=t,t.__QUALIFIED_CLASS_NAME__="CW.Responder.KeySequence"}();
    
    
        
!function(){"use strict";var e=function(e){var t=arguments;return t[0]=n$105(e),window.setTimeout.apply(window,t)};n$130=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$92,{_set:null,_map:null,_keys:null,init:function(e,t){this._set=e;var n=this._map=e._map;this._keys=t||global.Object.keys(n),this.__s._4FHdX0yGqCX$A4$init.apply(this,arguments)},moveToNext:function(){return this._keys.pop(),this},isValid:n$4({readOnly:!0,get:function(){return!!this._keys.length}}),_getCurrentItem:function(){var e=this._keys;return this._set.decode(this._map[e[e.length-1]])},value:n$4({get:function(){return this._getCurrentItem()},set:function(e){var t=this._getCurrentItem();return this._set.remove(t),this._set.add(e),this._keys.pop(),this._keys.push(n$22(e)),e}}),clone:function(){return this.constructor.create(this._set,n$40(this._keys))},remove:function(){var e=this.get("value");return this._set.remove(e),this.moveToNext(),e},add:function(e){return this._keys.pop(),this._keys.push(n$22(e)),this._set.add(e)},__superMap:{_4FHdX0yGqCX$A4$init:"init"}});n$128=e,e.__QUALIFIED_CLASS_NAME__="CW.SetIterator"}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$94,{_map:n$84(global.Object),length:n$4({readOnly:!0,defaultValue:0}),add:function(t){t=this.encode(t);var e=n$22(t),n=this._map;return n.hasOwnProperty(e)?!1:(n[e]=t,this._length++,!0)},remove:function(t){t=this.encode(t);var e=n$22(t),n=this._map;return n.hasOwnProperty(e)?(delete n[e],this._length--,!0):!1},contains:function(t){t=this.encode(t);var e=n$22(t);return this._map.hasOwnProperty(e)},iteratorClass:n$4({readOnly:!0,defaultValue:n$128}),clear:function(){for(var t=this._map,e=Object.keys(t),n=e.length,i=0;n>i;i++)delete t[e[i]];this._length=0}});n$131=t,t.__QUALIFIED_CLASS_NAME__="CW.Set"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,n$10,{timeToKeepKeySequence:1e3,activeKeySequence:n$4({readOnly:!0,get:function(){return this._keySequence||(this._keySequence=n$129.create())}}),activeKeys:n$9({readOnly:!0,defaultValue:function(){return n$131.create()}}),_activeKeyLocations:n$84(Object),keyDown:function(e){this._timer&&(clearTimeout(this._timer),delete this._timer);var t=this.get("activeKeySequence"),n=e.which;t.addKey(n);var o=this.get("_activeKeyLocations"),i=this.get("activeKeys").contains(n),r=1<<e.location;o[n]|=r,i||(this.get("activeKeys").add(n),this.propertyChanged("activeKeys"))},keyUp:function(e){var t=this._keySequence;if(t){this._timer&&clearTimeout(this._timer),this._timer=n$130(function(){t.clear()},this.get("timeToKeepKeySequence"));var n=e.which,o=this.get("_activeKeyLocations"),i=1<<e.location,r=~i,s=o[n]&=r;s||(this.get("activeKeys").delete(n),this.propertyChanged("activeKeys"))}}});n$133=e,e.__QUALIFIED_CLASS_NAME__="CW.Responder.KeyManager"}();
    
    
        
!function(){"use strict";var e=n$5.extend({staticMembers:{nativePropertiesToCopy:["ctrlKey","shiftKey","altKey","metaKey","relatedTarget"]},init:function(e){if(e){var n=e.nativeEvent,r=this.constructor.nativePropertiesToCopy;n&&t(this,n,r)}this.__s._OGemYLOGJG$Jx$init.call(this,e),this.cwType||(this.cwType=this.type)},cwType:null,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,relatedTarget:null,nativeEvent:null,preventDefault:function(){this.nativeEvent.preventDefault()},__superMap:{_OGemYLOGJG$Jx$init:"init"}}),t=function(e,t,n){for(var r=0,i=n.length;i>r;r++){var o=n[r];e[o]=t[o]}};n$132=e,e.__QUALIFIED_CLASS_NAME__="CW.Responder.Event"}();
    
    
        
!function(){"use strict";function e(e,t,n){for(t||n$11("CW.Responder.sendEvent: Must receive an event."),n$32(t,window.Event)||(n$37(t)?t=n$132.create(t):n$57(t)&&(t=n$132.create({type:t,context:n})));e;){if(e.handleEvent){var o=e.handleEvent(t);if(o)return!0}e=e.get("nextResponder")}return!1}n$134=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$29],nextResponder:n$4(),handleEvent:function(e){var t=e.cwType,n=!1,i=this[t];if(i&&(n=i.call(this,e)),!n){var r=this._specialEventHandlers;r&&(i=r[t])&&(n=i.call(this,e))}return n},_registeredShortcuts:n$84(Object),registerShortcutKeyCombo:function(e,t,n){var i=n$129.create(e),r=i.toString(),s=this._registeredShortcuts;s[r]&&n$11("Shortcut already registered for `"+e+"` on "+this),t||n$11("Cannot register shortcut for `"+e+"`, because no action was provided");var a=typeof t;"function"!==a&&("string"===a?(t=this[t],"function"!=typeof t&&n$11("Cannot register shortcut for `"+e+"`, because the action is not a function")):n$11("Cannot register shortcut for `"+e+"`, because the action is not a function")),s[r]={action:t,context:n};var o=this._specialEventHandlers||(this._specialEventHandlers={});o.keyDown=this.triggerShortcutIfExists},triggerShortcutIfExists:function(){var e=n$133.get("sharedInstance"),t=this._registeredShortcuts,n=e.get("activeKeySequence"),i=n.toString(),r=t[i];return r?(n.clear(),r.action.call(this,r.context),!0):!1},getPointerCapture:function(e){return t[e]},setPointerCapture:function(e){t[e]=this},releasePointerCapture:function(e){t[e]===this&&delete t[e]},pointerOver:null,pointerDown:null,pointerMove:null,pointerUp:null,pointerOut:null,wheel:null,sendEvent:function(e,t){return n$134(this,e,t)}},t={};n$136=e}();
    
    
        
!function(){"use strict";function t(t){return n$32(t,window.SVGElementInstance)?t.correspondingElement:t}function e(e,n){var i=n.cwType,r="pointerUp"===i||"pointerCancel"===i||"pointerMove"===i,a=e.get("element")===t(n.target);return r||a}function n(e){return i(t(e.target))}function i(t){for(var e;t&&!(e=t.view);)t=t.parentNode;return e}function r(t){return t.preventDefault&&t.preventDefault(),!1}var a=n$5.extend(n$136,{events:null,init:function(t){var e=t&&t.element;if(e){var n=global.document,i=e;e===n&&(i=n.body),this._cursorLockElement=i,delete t.element}this.__s._pB8HW155ep$X_$init.apply(this,arguments),e&&this.addEventListenersToElement(e)},addEventListenersToElement:function(t){var e=global.document;!e||t!==e.body&&t!==e.documentElement||(t=global.document),s(t);var n=this.get("events");if(n)for(var i=0,r=n.length;r>i;i++){var a=n[i],o=a.useCapture,u=a.handlers;for(var c in u)n$107(t,c,u[c].bind(this),o)}},dispatchEvent:function(t){t||n$11("RootResponder#dispatchEvent requires an event.");var i=t.cwType;("keyDown"===i||"keyUp"===i)&&n$133.get("sharedInstance")[i](t);var r,a=this.getPointerCapture(t.pointerId);if(a){if(!e(a,t))return;r=a}else{r=n(t);var s;!r&&(s=n$103.application)&&(r=s.activePane.view)}this.willDispatchEvent(t);var o=n$134(r||this,t);return this.didDispatchEvent(t,o),o},willDispatchEvent:n$23,didDispatchEvent:n$23,lockCursor:function(t){var e;switch(t){case"default":e="cw-global-cursor-default";break;case"pointer":e="cw-global-cursor-pointer";break;case"horizontal-resize":e="cw-global-cursor-horizontal-resize";break;case"vertical-resize":e="cw-global-cursor-vertical-resize"
}var n=this._cursorLockElement;e&&n.classList.add(e),this._cursorLockClassName=e,n.addEventListener("selectstart",r)},releaseCursor:function(){var t=this._cursorLockClassName,e=this._cursorLockElement;t&&e.classList.remove(t),this._cursorLockClassName=null,e.removeEventListener("selectstart",r)},__superMap:{_pB8HW155ep$X_$init:"init"}}),s=function(t){if(n$111.isPointerSupported){var e=global.document;t===e&&(t=e.body);var n=t.style;n?(n.msTouchAction="none",n.touchAction="none"):n$63.warn("Could not attach `touch-action` property to the `RootResponder`’s element. Some touch events will be handled by default browser behavior instead of going to the `RootResponder`.")}};n$156=a,n$509=n,n$911=i,a.__QUALIFIED_CLASS_NAME__="CW.Responder.RootResponder"}();
    
    
        
!function(){"use strict";function e(e){var n={},r={pointerOver:"PointerOver",pointerDown:"PointerDown",pointerMove:"PointerMove",pointerUp:"PointerUp",pointerOut:"PointerOut",pointerCancel:"PointerCancel"};for(var i in r){var o=r[i];o=e?"MS"+o:o.toLowerCase(),n[o]=t(i)}return n}function t(e){return function(t){t.cwType=e,this.dispatchEvent(t)}}var n=e(window.navigator.msPointerEnabled);n$912=e,n$146=n}();
    
    
        
!function(){"use strict";var e=n$132.extend({staticMembers:{nativePropertiesToCopy:n$16(["screenX","screenY","clientX","clientY","button","buttons","detail","target"])},init:function(e){if(this.__s._1mrEleHGKHE$DU$init.call(this,e),e){var t=e.nativeEvent;if(t){var n=t.srcElement;n&&(this.target=n)}}},screenX:0,screenY:0,clientX:0,clientY:0,button:0,detail:0,target:null,__superMap:{_1mrEleHGKHE$DU$init:"init"}});n$138=e,e.__QUALIFIED_CLASS_NAME__="CW.Responder.Events.MouseEvent"}();
    
    
        
!function(){"use strict";var e="mouse",t="pen",n="touch",r=n$138.extend({staticMembers:{nativePropertiesToCopy:n$16(["buttons","detail","target"])},pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",isPrimary:!1,buttons:0});n$142=e,n$913=t,n$140=n,n$139=r,r.__QUALIFIED_CLASS_NAME__="CW.Responder.Events.PointerEvent"}();
    
    
        
!function(){"use strict";var e=function(e,t){var n,i,r=arguments.length;if(n$32(e,n$49))for(n=2;r>n;n++)i=arguments[n],t[i]=e.get(i);else for(n=2;r>n;n++)i=arguments[n],t[i]=e[i];return t};n$141=e}();
    
    
        
!function(){"use strict";function e(e,n,o){for(var i=o.changedTouches,r=i.length,s=0;r>s;s++)t(e,o,n,i[s])}function t(e,t,i,r,s){var a=r.identifier,u=e.getPointerCapture(a);u?s=u:s||(s=n(r),o(e,t,r,s));var d=n$139.create({cwType:i,pointerId:r.identifier,nativeEvent:t,pointerType:n$140,target:s});n$141(r,d,"screenX","screenY","clientX","clientY"),e.dispatchEvent(d)}function n(e){var t=e.clientX,n=e.clientY;return document.elementFromPoint(t,n)}function o(e,n,o,i){var r=o.identifier,s=a[r];s!==i&&(s&&t(e,n,"pointerOut",o,s),i&&(t(e,n,"pointerOver",o,i),a[r]=i))}function i(e){for(var t=e.length,n=0;t>n;n++){var o=e[n];delete a[o.identifier]}}function r(){for(var e in a)delete a[e]}var s={touchstart:function(t){e(this,"pointerDown",t)},touchmove:function(t){e(this,"pointerMove",t)},touchend:function(t){e(this,"pointerUp",t),e(this,"pointerOut",t),i(t.changedTouches)},touchcancel:function(t){e(this,"pointerCancel",t),e(this,"pointerOut",t),i(t.changedTouches)}},a={};n$147=s,n$914=r}();
    
    
        
!function(){"use strict";var e={},t={pointerOver:"mouseover",pointerDown:"mousedown",pointerMove:"mousemove",pointerUp:"mouseup",pointerOut:"mouseout",pointerCancel:"mousecancel"},n=function(e){return function(t){var n=n$139.create({cwType:e,nativeEvent:t,pointerType:n$142,width:1,height:1});this.dispatchEvent(n)}};for(var i in t){var r=t[i];e[r]=n(i)}n$148=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{deltaMultiplierForScrollEvent:function(e){var t=1;e&&"mousewheel"===e.type&&(t=-1/40);var n=n$109.get("sharedInstance");return n.isWebKit&&n.engineMajorVersion>=538?t=1:n.isSafari?t=-1/3:n.isFirefox?(t=.5,e&&1===e.deltaMode&&(t=40)):n.isIE&&(t=-1),t}});n$143=e,e.__QUALIFIED_CLASS_NAME__="CW.Platform.Scrolling"}();
    
    
        
!function(){"use strict";var e=n$138.extend({init:function(e){if(this.__s._1V8M5RjO2an$B0$init.call(this,e),e){var t=e.nativeEvent;if(t){var n=n$143.sharedInstance.deltaMultiplierForScrollEvent(t);"mousewheel"===t.type?(this.deltaX=t.wheelDeltaX,this.deltaY=t.wheelDeltaY||t.wheelDelta):(this.deltaX=t.deltaX,this.deltaY=t.deltaY),this.deltaY=this.deltaY||0,this.deltaX=this.deltaX||0,this.deltaY*=n,this.deltaX*=n}}},deltaX:0,deltaY:0,__superMap:{_1V8M5RjO2an$B0$init:"init"}});n$144=e,e.__QUALIFIED_CLASS_NAME__="CW.Responder.Events.WheelEvent"}();
    
    
        
!function(){"use strict";var e="onwheel"in document?"wheel":"mousewheel",t={};t[e]=function(e){e=n$144.create({nativeEvent:e}),e.cwType="wheel",this.dispatchEvent(e)},n$149=t}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$62,{generate:function(t,e){for(var n in e){var i=e[n];t[i]=this.createEventHandler(n)}return t},createEventHandler:function(t){var e=function(e){e.cwType=t,this.dispatchEvent(e)};return e}});n$145=t,t.__QUALIFIED_CLASS_NAME__="CW.Responder.Handlers.HandlerGenerator"}();
    
    
        
!function(){"use strict";var e={},t={keyDown:"keydown",keyPress:"keypress",keyUp:"keyup",compositionStart:"compositionstart",compositionEnd:"compositionend"},n=n$145.get("sharedInstance");n.generate(e,t),n$150=e}();
    
    
        
!function(){"use strict";var e={},t={didReceiveFocus:"focus",didReceiveBlur:"blur"},n=n$145.get("sharedInstance");n.generate(e,t),n$151=e}();
    
    
        
!function(){"use strict";var e={},t={input:"input",selectionDidChange:"select"},n=n$145.get("sharedInstance");n.generate(e,t),n$152=e}();
    
    
        
!function(){"use strict";var e={},t={dragStart:"dragstart",dragEnter:"dragenter",dragOver:"dragover",dragLeave:"dragleave",drag:"drag",drop:"drop",dragEnd:"dragend"},n=n$145.get("sharedInstance");n.generate(e,t);var r=e.dragover;e.dragover=function(e){r.apply(this,arguments),e.preventDefault()};var i=e.drop;e.drop=function(e){i.apply(this,arguments),e.preventDefault()},n$153=e}();
    
    
        
!function(){"use strict";var e={change:function(e){e.cwType="change",this.dispatchEvent(e)}};n$154=e}();
    
    
        
!function(){"use strict";var t=[{handlers:n$150,useCapture:!1},{handlers:n$151,useCapture:!0},{handlers:n$152,useCapture:!1},{handlers:n$153,useCapture:!1},{handlers:n$154,useCapture:!1}];n$111.isMouseWheelSupported&&t.push({handlers:n$149,useCapture:!1});var e;switch(n$111.pointerEventClass){case"pointer":e=n$146;break;case"touch":e=n$147;break;case"mouse":e=n$148}e&&t.push({useCapture:!1,handlers:e}),n$157=t}();
    
    
        
!function(){"use strict";var e=n$125.extend({dependencies:[n$155],action:function(e){e.set("rootResponder",n$156.create({element:e.get("rootElement"),events:n$157}))}});n$196=e,e.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.RootResponderInitializer"}();
    
    
        
!function(){"use strict";var t=n$125.extend({action:function(t){var e=t.get("rootViewController");e||n$11("Must provide a `rootViewController`"),e.isClass&&(e=e.create(),t.set("rootViewController",e))}});n$197=t,t.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.RootViewControllerInitializer"}();
    
    
        
!function(){"use strict";var e=function(e,t){if(t.remove)return t.remove(e),void 0;Array.isArray(t)||n$11("removeObjectFromArray: argument array must be an Array or implement a remove method");var n=t.indexOf(e);n>=0&&t.splice(n,1)};n$174=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],parent:n$9(),parentKey:n$9()};n$178=e}();
    
    
        
!function(){"use strict";function t(){return"ArrayChange: {index: "+this.index+", object: "+this.object+", operation: "+this.operation+"}"}function e(e,n,i,r){this._sourceArray=e,this.index=n,this._item=i,this.operation=r,this.toString=t}function n(t,n,i,r){if(o.length>0){var a=o.pop();return a._sourceArray=t,a.index=n,a.object=i,a.operation=r,a}return new e(t,n,i,r)}function i(t){t._sourceArray=null,t.object=null,o.length<s&&o.push(t)}var r="REMOVE",a="INSERT",s=100;Object.defineProperty(e.prototype,"object",{get:function(){var t=this._item,e=this._sourceArray;return e&&e.decode&&(t=e.decode(t)),t},set:function(t){return this._item=t}});var o=[],u=n$99.extend({staticMembers:{REMOVE:r,INSERT:a},owner:null,reverseChanges:function(t){for(var e=this.get("length");e--;){var n=this.objectAt(e);n.operation===r?t.splice(n.index,0,n.object):t.splice(n.index,1)}return t},applyChanges:function(t){var e=this.get("length"),n=n$32(t,n$158);n&&t.beginBatchedChanges();for(var i=0;e>i;i++){var a=this.objectAt(i);a.operation===r?t.splice(a.index,1):t.splice(a.index,0,a.object)}return n&&t.endBatchedChanges(),t},recordRemoval:function(t,e){this.push(n(this.owner,t,e,r)),this.set("lengthDelta",this.get("lengthDelta")-1)},recordInsertion:function(t,e){this.push(n(this.owner,t,e,a)),this.set("lengthDelta",this.get("lengthDelta")+1)},lengthDelta:n$4(0),clear:function(){for(var t=this.get("length");t--;){var e=this.objectAt(t);i(e)}this.set("length",0),this.set("lengthDelta",0)},toString:function(){for(var t=this.get("length"),e="ArrayChangeList("+t+")\n",n=0;t>n;n++){var i=this.objectAt(n);n>0&&(e+="\n"),e+=i.toString()
}return e}});n$159=u,u.__QUALIFIED_CLASS_NAME__="CW.ArrayChangeList"}();
    
    
        
!function(){"use strict";function e(e){return e=o(e)+e,n(e)}function t(e,t){if(0!==t&&!t)return"";if(!isNaN(t)){var n=a[e];return void 0===n&&(n=s),t+n}return t}function n(e){var t=f[e];if(t)return t;if(!e)return"";(0===e.indexOf("-ms-")||0===e.indexOf("-webkit-"))&&(e=e.substring(1));var n,i=e,o=i.length;for(n=0;o>n;n++)"-"===i[n]&&o-1>n&&(i=i.substring(0,n)+i[n+1].toUpperCase()+i.substring(n+2),o--);return f[e]=i,i}function i(e,t){var n;n=e._computedStyle,n||(n=e._computedStyle=document.defaultView.getComputedStyle(e,null));var i=n.getPropertyValue(t);return!i&&g[t]&&(i=g[t](n)||i),i}function o(e){var t=$[e];if(void 0!==t)return t;e.match(N)&&n$11('Attempting to set style "'+e+"\". Use the dashed form of the style's name instead.");var i,o,r,s=_.length,a=!1;for(i=0;s>i;i++)if(o=_[i],r=m.style[n(o+e)],"string"==typeof r){a=!0,o&&_.length>2&&(_=["",o]);break}return a?$[e]=o:n$63.warn("Using unsupported style "+e+"."),a?o:""}function r(){for(var e in c)c.hasOwnProperty(e)&&(L[e]=!0);var t=d.create(document.createElement("div"));for(e in L)if(L.hasOwnProperty(e)){var n=t.transform(e,1).getInline("transform");n&&"none"!==n||(L[e]=!1),t.transform()}}var s="px",a={"animation-duration":"s","animation-delay":"s","animation-iteration-count":"","column-count":"",columns:"","font-size-adjust":"","font-weight":"",opacity:"",order:"",orphans:"","tab-size":"","transition-delay":"s","transition-duration":"s",widows:"","z-index":""},u={translate:{subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){2>y&&n$11("When adding a `translate` transform, at least two arguments (for X and Y) are required.")
}},translateDevicePixels:{subkeys:"translateX translateY translateZ".split(" "),defaultUnit:"px",processArgs:function(){2>y&&n$11("When adding a `translate` transform, at least two arguments (for X and Y) are required.");for(var e=n$110.getPath("sharedInstance.devicePixelRatio"),t=0;y>t;t++){var n=v[t];n=Math.ceil(n*e)/e,v[t]=n}}},scale:{subkeys:"scaleX scaleY scaleZ".split(" "),defaultUnit:"",processArgs:function(){1===y&&(y=2,v[1]=v[0])}},rotate:{subkeys:"rotateX rotateY rotateZ".split(" "),defaultUnit:"deg",processArgs:function(){2===y&&n$11("When adding a `rotate` transform, either one or three arguments (for Z-only or X, Y, Z) are required."),1===y&&(y=3,v[2]=v[0],v[0]=v[1]=void 0)}},skew:{subkeys:"skewX skewY".split(" "),defaultUnit:"deg",processArgs:function(){}},matrix:{subkeys:[],_name:"matrix",_requiredArgs:6,processArgs:function(){u.matrix3d.processArgs.call(this)}},matrix3d:{subkeys:[],_name:"matrix3d",_requiredArgs:16,processArgs:function(){var e,t,n=1===y&&v[0];if(n&&Array.isArray(n))for(y=n.length,e=0;y>e;e++)v[e]=n[e];for(y!==this._requiredArgs&&n$11("When adding a `"+this._name+"` transform, exactly "+this._requiredArgs+" arguments are required."),e=0;y>e;e++)t=v[e],isNaN(t)&&n$11("All arguments to `"+this._name+"` must be numbers."),v[e]=(+t).toFixed(15)}}},c=function(){var e,t,n,i,o,r,s,a={};for(e in u)for(t=u[e],n=t.defaultUnit,i=t.subkeys,s=i.length,r=0;s>r;r++)o=i[r],a[o]=n;return a}(),d=n$28.extend(n$49,{element:null,_unflushedStyles:null,_unflushedStyleKeys:null,_unflushedStyleKeysLen:0,_pauseCount:0,init:function(e){this.element=e,this._unflushedStyles={},this._unflushedStyleKeys=[],this.__s._3MJkM7BZj3w$2Gj$init.call(this)
},set:function(n,i){if(1===arguments.length)return this._setWithHash(n);i=t(n,i),n=e(n);var o=this._unflushedStyles;return o[n]||(this._unflushedStyleKeys[this._unflushedStyleKeysLen++]=n),o[n]=i,this._flushStylesToElement(),this},get:function(e){return e=o(e)+e,i(this.element,e)},getInline:function(t){return t=e(t),this.element.style[t]},clear:function(e){return e?this.set(e,void 0):this._clearAll()},transform:function(e){if(!arguments.length)return this._partialTransformString=null,this.set("transform","");var t,n,i,o,r,s,a=u[e],d=this._partialTransformString||"";if(this._partialTransformString=null,a){for(t=a.subkeys,n=a.defaultUnit,r=arguments.length,y=r-1,o=1;r>o;o++)v[o-1]=arguments[o];if(a.processArgs(),t.length>=y)for(o=0;y>o;o++)i=v[o],void 0!==i&&(isNaN(i)||(i+=n),s=t[o],L[s]&&("rotateZ"!==s||L.rotateX||L.rotateY||(s="rotate"),d+=(o?" ":"")+s+"("+i+")"));else for(d+=e+"(",o=0;y>o;o++)i=v[o],d+=i+(y-1>o?", ":")")}else i=arguments[1],void 0!==i&&L[e]&&(isNaN(i)||(i+=c[e]),"rotateZ"!==e||L.rotateX||L.rotateY||(e="rotate"),d+=e+"("+i+")");return this.set("transform",d),h.styleInstance=this,h._partialTransformString=d+" ",h},layerBack:function(){return this.translateZ(0)},forceRedraw:function(){var e=this.element,t=e.parentNode;if(t){var n=e.nextSibling;t.removeChild(e),t.insertBefore(e,n)}return this},layerBackIf:function(e){return this.translateZ(e?0:void 0)},pause:function(){return this._pauseCount++,this},resume:function(){return--this._pauseCount<=0&&(this._pauseCount=0),this._hasUnflushedStyles&&this._flushStylesToElement(),this},_setWithHash:function(e){this.pause(!0);
for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t]);return this.resume(!0),this},_clearAll:function(){return this.element.style.cssText="",this},_flushStylesToElement:function(){if(this._pauseCount)return this._hasUnflushedStyles=!0,void 0;var e,t,n=this.element.style,i=this._unflushedStyles,o=this._unflushedStyleKeys,r=this._unflushedStyleKeysLen;for(e=0;r>e;e++)t=o[e],o[e]=void 0,n[t]=i[t],i[t]=void 0;this._unflushedStyleKeysLen=0},__superMap:{_3MJkM7BZj3w$2Gj$init:"init"}}),l=function(){var e={transform:!0,layerBack:!0,layerBackIf:!0},t=function(t){e[t]=!0};return Object.keys(u).forEach(t),Object.keys(c).forEach(t),e}();!function(){var e=d.prototype,t=[],n=function(e){return function(){for(var n=t.length=arguments.length+1,i=n-1;i>=1;i--)t[i]=arguments[i-1];return t[0]=e,this.transform.apply(this,t)}};for(var i in u)e[i]=n(i);for(var o in c)e[o]=n(o)}();var h=function(){var e={styleInstance:null,_partialTransformString:null},t=d.prototype,n=function(e){return l[e]?function(){var t=this.styleInstance;return t._partialTransformString=this._partialTransformString,t[e].apply(t,arguments)}:function(){var t=this.styleInstance;return t[e].apply(t,arguments)}};for(var i in t)!t.hasOwnProperty(i)||!t[i]instanceof Function||"_"===i[0]||"constructor"===i||e[i]||(e[i]=n(i));return e}(),f={},p=["style","variant","weight","size","family"],g={font:function(e){for(var t="",n=0,i=p.length;i>n;n++){var o=p[n],r=e.getPropertyValue("font-"+o);if(r&&(t&&(t+=" "),t+=r,"size"===o)){var s=e.getPropertyValue("line-height");s&&(t+="/"+s)}}return t}},_=["","-ms-","-moz-","-webkit-","-o-"],$={},m=document.createElement("div"),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,N=/[A-Z]/,L={};
r();var S=L,C=r,F=function(){var e=d.create(),t=e.pause,n=e.resume;return e.pause=function(e){return e?t.call(this):(n$11("Cannot `pause` the shared CW.UI.Style instance."),void 0)},e.resume=function(e){return e?n.call(this):(n$11("Cannot `resume` the shared CW.UI.Style instance."),void 0)},e}(),E=function(e,t,n){if(e){var i=arguments.length;if(i>1){var o=e._cwStyleProxy;if(o||(o=F,F.element=e),3===i)return o.set(t,n);if(2===i)return o.set(t)}return e._cwStyleProxy||(e._cwStyleProxy=d.create(e))}};n$915=L,n$916=r,n$917=S,n$918=C,n$160=E,d.__QUALIFIED_CLASS_NAME__="CW.UI.Style$136"}();
    
    
        
!function(){"use strict";function e(e){e||n$11("An element is required to be able to measure it");var t=e.getBoundingClientRect();return 0!==t.height||0!==t.width||document.body.contains(e)?t:(n$63.error("Tried to measure an element that is not in the document",e),null)}n$161=e}();
    
    
        
!function(){"use strict";function e(e,n,i){if(!e)return d;n||null===n||n===!1||(n=r);var p=n||i?n$22(n)+h+e+h+!!i:e,v=f[p];if(v)return v;if(Array.isArray(n))return f[p]=t(e,n,i);var g,_,m,y,$,b=e.length,S="";for(g=0;b>g;g++)_=e[g-1],m=e[g],y=m.toLowerCase(),$=e[g+1],S+=_&&l(m)&&l(_)?!o(_)&&o(m)||s(_)&&u(m)||$&&o(_)&&o(m)&&a($)?c+y:y:y;return f[p]=S}function t(t,i,r){var s=n(i),a=t.match(s);if(!a||!a.length)return e(t,null,r);for(var o=t.split(s),l=e(o[0]),h=0,d=a.length;d>h;h++){var f=a[h];r||(f=f.toLowerCase());var p=o[h+1];p&&(p=e(p,null,r)),l+=(l&&c)+f,p&&(l+=(u(p[0])?c:"")+p)}return l}function n(e){var t=n$22(e),n=p[t];if(n)return n;var i=e.map(function(e){return"i"===e[0]&&o(e[1])?"I"+e.substring(1):void 0});return e=e.concat(i.filter(function(e){return!!e})),n=p[t]=new RegExp(e.join("|"),"g")}function i(e,t){var n=e.charCodeAt(0),i=t.charCodeAt(0),r={};return function(e){var t=r[e];if(void 0!==t)return t;var s=e.charCodeAt(0);return t=r[e]=s>=n&&i>=s}}var r=["iOS","iPhone","iPad","iPod","WebKit"],s=i("0","9"),a=i("a","z"),o=i("A","Z"),u=function(e){return a(e)||o(e)},l=function(e){return u(e)||s(e)},c="-",h="#",d="",f={},p={};n$162=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],staticMembers:{className:n$4({get:function(e){if(n$41(e)&&this.hasOwnProperty("_className"))return e;if(!this.isNamed)return!1;var t=n$162(this.name.replace(/\$[0-9]+$/,"")).replace(/\./g,"-");return this._className=t}}),_classNamesFromJSClassHierarchyCache:null,_getClassNamesFromJSClassHierarchy:function(){if(this.hasOwnProperty("_classNamesFromJSClassHierarchyCache")&&this._classNamesFromJSClassHierarchyCache)return this._classNamesFromJSClassHierarchyCache;var t=this.superclass.kindOf(e)?this._getClassNamesFromJSClassHierarchy.call(this.superclass):[];return this.className!==!1&&(t=t.concat(this.className)),this._classNamesFromJSClassHierarchyCache=t}},document:document,element:n$9(),style:n$9({readOnly:!0,dependencies:["element"],get:function(e,t,n,r){return n$160(r.internalGetPath(this,t[0+n]))}}),rect:n$4({readOnly:!0,get:function(){var e=this.element;return n$161(e)}}),origin:n$4({readOnly:!0,get:function(){var e=this.rect;return e?{x:e.left,y:e.top}:null}}),additionalClassNames:n$9({set:function(e){return this.isInitialized&&n$11("Can only set `additionalClassNames` at init time",this),e}}),_suppressApplicationOfClassNamesToElement:!0,_applyClassNamesToElement:n$7("element","additionalClassNames",function(e,t){if(e&&!this._suppressApplicationOfClassNamesToElement){var n=this.element.classList;t&&n.add.apply(n,t);var r=this.constructor._getClassNamesFromJSClassHierarchy();n.add.apply(n,r)}}),init:function(){this.__s._3WBKIXNdiuq$1Y8$init.apply(this,arguments),this._suppressApplicationOfClassNamesToElement=!1,this._applyClassNamesToElement()
},__superMap:{_3WBKIXNdiuq$1Y8$init:"init"}};n$163=e}();
    
    
        
!function(){"use strict";function e(e,n){var r=t(e);for(var i in n){var o=n[i];if(n$36(o))for(var a=o.length,u=0;a>u;u++)s(r,i,o[u]);else n$37(o)?s(r,i,o):n$11("Template extension must be a CW.template or an array of CW.templates.")}return r}function t(e){return n$38(e,r)}function n(e,t){return f[t]?i:r}function r(e,t,r){return h[r]?n$38(e,n(e,r)):n$164}function i(e,t,r){return n$38(e,n(e,r))}function s(e,n,r){r=t(r);var i=a(e),s=i[n];s||n$11("unable to find outlet with name "+n+" to extend"),r.tagname!==y&&(s.tagname=r.tagname),s.attributes=n$44(s.attributes,r.attributes),s.styles=n$44(s.styles,r.styles),s.children=o(s.children,r.children),s.classes=o(s.classes,r.classes)}function o(){for(var e,t=arguments.length,n=0;t>n;n++){var r=arguments[n];r&&(e=e?e.concat(r):r)}return e}function a(e){var t=e._namesCache;return t||(e._namesCache=t=u(e,{root:e})),t}function u(e,t){if(e){var n=e.name;if(n){var r=t[n];r&&e!==r?n$11("invalid node name: '"+n+"' is already used"):t[n]=e}var i=e.children;if(i)for(var s=i.length,o=0;s>o;o++){var a=i[o];u(a,t)}return t}}function l(){return g.length>0?g.pop():[]}function c(e){e.length=0,g.push(e)}var p="_renderedValue",d={mixinDependencies:[n$163],staticMembers:{init:function(t){var n=this.template;if(n){n$37(n)||n$11("Template must be a CW.template");var r=0;!this.hasOwnProperty("template")&&n.classes&&(r=n.classes.length);var i=this._templateExtensionsArray;if(i){for(var s=i.length,o=0;s>o;o++)n=e(n,i[o]);this.template=n,delete this._templateExtensionsArray,c(i)}var a=n.classes;if(a)for(var u=r,l=a.length;l>u;u++)if("string"==typeof a[u]){this.className=!1;
break}this.registerOutletAndSubOutlets(n)}this.__s._1RsO4t1BN19$1gJ$init.call(this,t)},_templateExtensionsArray:null,mixinWasApplied:function(){var e=this.templateExtensions;if(e){var t=this._templateExtensionsArray;t||(t=this._templateExtensionsArray=l()),t.push(e),delete this.templateExtensions}},template:{type:"ELEMENT",tagname:"div",children:[]},templateExtensions:null,_nodeHandlers:{},_registerNodeHandlers:{},_renderNodeHandlers:{},registerOutletAndSubOutlets:function(e,t){if(n$57(e))return e;var n=e.type;if(n){var r=n.toLowerCase(),i=this._registerNodeHandlers[r];if(i){var s=this._nodeHandlers[r];e.parent=t,i.call(s,this,e)}}},__superMap:{_1RsO4t1BN19$1gJ$init:"init"}},init:function(){var e=this.element=this.generateElementNode();e.view=this,this.__s._1RsO4t1BN19$2oI$init.apply(this,arguments)},renderNodeAndSubNodes:function(e){if(n$57(e))return e;var t=e.type.toLowerCase(),n=this.constructor,r=n._nodeHandlers[t],i=n._renderNodeHandlers[t];return r||n$11("No handler context for template node type: "+t),i||n$11("No handler for template node type: "+t),i.call(r,this,e)},generateElementNode:function(){var e=this.constructor.get("template");if(e){var t=p+n$22(this.get("document")),n=e[t];return n||(n=e[t]=this.renderNodeAndSubNodes(e)),n.cloneNode(!0)}},__superMap:{_1RsO4t1BN19$2oI$init:"init"}},h=n$127(["type","children","attribute","attributes","name","tagname","styles","classes","data","index","unit","truevalue","falsevalue","property","observerWasRegistered"]),f=n$127(["styles","classes","attributes","children"]),y="ext",g=[];n$166=d}();
    
    
        
!function(){"use strict";var t=n$28.extend({nodeType:"",initializeMember:function(t){var e=this.nodeType.toLowerCase();t._nodeHandlers[e]=this,t._renderNodeHandlers[e]=this.render,t._registerNodeHandlers[e]=this.register},render:n$23,register:n$23});n$167=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.ViewSupport.Template.Handler"}();
    
    
        
!function(){"use strict";function e(e){for(var t=[];e.parent;)t.push(e.index),e=e.parent;return t}function t(e,t){for(var n=t.length,i=n-1;i>=0;i--){var r=t[i];e=e.childNodes.item(r)}return e}function n(e,t,n){var i=n$165(t),r=i[0],s=e.getMetadata(r);s&&s.instanceOf(n)||e.registerMetadata(r,n.create())}function i(n,i){var r=e(i);this.prototype.registerMetadata(n,n$9({readOnly:!0,dependencies:["element"],get:function(e,n,i,s){return t(s.internalGetPath(this,n[0+i]),r)}}))}function r(e){var t=e.name="_outlet_parent_"+n$22(e);return i.call(this,t,e),t}function s(e){if(e.hasOwnProperty("validvalues")){var t=n$127(e.validvalues);return function(e){return t[e]?e:void 0}}if(e.hasOwnProperty("truevalue")){var n=e.truevalue;if(e.hasOwnProperty("falsevalue")){var i=e.falsevalue;return function(e){return e?n:i}}return function(e){return e?n:void 0}}return o}function a(e,t){return e.attributes.signal||t}var o=function(e){return e};n$179=n,n$168=i,n$183=r,n$181=s,n$182=a}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$166,n$163],staticMembers:{handler:n$167.create({nodeType:"ELEMENT",register:function(t,e){var n=e.name;n&&n$168.call(t,n,e);var i,r,a=e.classes;if(a){var s=a.length;for(r=0;s>r;r++)t.registerOutletAndSubOutlets(a[r],e)}var o=e.styles;if(o)for(i in o)t.registerOutletAndSubOutlets(o[i],e);var u=e.attributes;if(u)for(i in u){var c,l=u[i];c=n$37(l)?l.namespace:null,t.registerOutletAndSubOutlets(l,e)}var h=e.children;if(h){var d=h.length;for(r=0;d>r;r++){var f=h[r];f.index=r,t.registerOutletAndSubOutlets(f,e)}}},render:function(t,e){var n,i,r=t.get("document"),a=e.namespace,s=e.tagname,o=a?r.createElementNS(a,s):r.createElement(s),u=e.classes;if(u){var c=o.classList,l=u.length;for(i=0;l>i;i++){var h=t.renderNodeAndSubNodes(u[i]);h&&c.add(h)}}var d=e.styles;if(d)for(n in d)n$160(o,n,t.renderNodeAndSubNodes(d[n]));var f=e.attributes;if(f)for(n in f){var v,p=f[n];v=n$37(p)?p.namespace:null,v?o.setAttributeNS(v,n,t.renderNodeAndSubNodes(p)):o.setAttribute(n,t.renderNodeAndSubNodes(p))}var g=e.children;if(g){var _=g.length;for(i=0;_>i;i++){var $=g[i];$.index=i,o.appendChild(t.renderNodeAndSubNodes($))}}return o}})}};n$184=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$29,n$10],removeChild:function(e,t){this.getMetadataByType(n$169)[e].removeChild(this,e,t)},dispose:function(){var e=this.getMetadataByType(n$169);for(var t in e)this.getMetadata(t).readOnly||this.set(t,null);this.__s._nEHrxen8Wg$Qj$dispose.apply(this,arguments)},__superMap:{_nEHrxen8Wg$Qj$dispose:"dispose"}};n$176=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$88,n$10],isValid:n$17(n$81),shouldObserveChanges:!0};n$171=t}();
    
    
        
!function(){"use strict";var e=n$95.extend(n$171,n$10,{position:n$9(),source:n$9(),isValid:n$9({dependencies:["source.length","position"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[1+n]);return i>=0&&i<r.internalGetPath(this,t[0+n])}}),value:n$9({dependencies:["position","source"],writeDependencies:[],set:function(){var e=this.shouldObserveChanges;this.shouldObserveChanges=!1;var t=this.__s._2J5p3zJ5FXi$JL$set.apply(this,arguments);return this.shouldObserveChanges=e,t},__superMap:{_2J5p3zJ5FXi$JL$set:"set"}}),remove:function(){var e=this.shouldObserveChanges;this.shouldObserveChanges=!1;var t=this.__s._2J5p3zJ5FXi$N7$remove.apply(this,arguments);return this.shouldObserveChanges=e,this.propertyChanged("value"),t},initFromPool:function(){this.__s._2J5p3zJ5FXi$Ph$initFromPool.apply(this,arguments);var e=this.get("source");e._registerIterator(this)},didEnterPool:function(){var e=this.get("source");e._unregisterIterator(this),this.__s._2J5p3zJ5FXi$fC$didEnterPool.apply(this,arguments)},__superMap:{_2J5p3zJ5FXi$N7$remove:"remove",_2J5p3zJ5FXi$Ph$initFromPool:"initFromPool",_2J5p3zJ5FXi$fC$didEnterPool:"didEnterPool"}});n$173=e,e.__QUALIFIED_CLASS_NAME__="CW.ObservableArrayIterator"}();
    
    
        
!function(){"use strict";var e=n$8.extend({isOnlyMetadataForKey:!0,sourceKey:null,filterFunc:null,wasRegistered:function(e,t){this.__s._3UGKf93iJxr$JY$wasRegistered.apply(this,arguments);var n=this.sourceKey,i=this._observerWork,r="__observableArrayFilter_lastSourceArrayContents_"+t,s="__observableArrayFilter_indexMapper_"+t,a=this.filterFunc;e.registerMetadata("__maintenanceObserver__"+t,n$7(n,n+".contentsDidChange",function(e,n){i.call(this,t,r,s,a,e,n)}))},_observerWork:function(e,n,i,r,s,a){var o=this.get(e);if(!s)return o!==s&&this.set(e,s),void 0;var u,l=o;if(l&&a&&this[n]){n$66.pause(),u=this[n];var c=u.length,h=this[i]||(this[i]=new t);h.clear();for(var d=0;c>d;d++)r.call(this,u[d])||h.registerOffsetStartingAtIndex(-1,d);var f=a.get("length");for(d=0;f>d;d++){var p=a.objectAt(d),v=p.object;if(r.call(this,v)){var g=h.mapIndex(p.index);p.operation===n$159.REMOVE?l.splice(g,1):l.splice(g,0,v)}}this[n]=s.slice(),n$66.resume()}else u=this[n]=s.slice(),l=n$158.create(u.filter(r,this));o!==l&&this.set(e,l)},__superMap:{_3UGKf93iJxr$JY$wasRegistered:"wasRegistered"}}),t=function(){this._offsets=[]};t.HASHES=[],t.prototype={_isSorted:!0,clear:function(){for(var e=this._offsets,n=e.length,i=0;n>i;i++)t.HASHES.push(e[i]);return e.length=0,this},registerOffsetStartingAtIndex:function(e,n){if(e){var i=this._offsets,r=t.HASHES.pop()||{};r.offset=e,r.index=n,i.push(r);var s=i[i.length-2];return s&&n<s.index&&(this._isSorted=!1),this}},mapIndex:function(e){this._isSorted||this._sort();for(var t=this._offsets,n=t.length,i=0,r=0;n>r;r++){var s=t[r];if(s.index>e)break;i+=s.offset}return e+i
},_sort:function(){this._offsets.sort(this._comparator)},_comparator:function(e,t){return e.index-t.index}};var n=function(t,n){return e.create({sourceKey:t,filterFunc:n})};n$919=e,n$172=n,e.__QUALIFIED_CLASS_NAME__="Photos.ObservableArrayFilter"}();
    
    
        
!function(){"use strict";var t={staticMembers:{filter:n$172}};n$175=t}();
    
    
        
!function(){"use strict";function e(e){var t=e.get("changes"),i=t.get("length");if(i){var s=!!t.get("lengthDelta"),a=!!e.objectWasInserted,o=!!e.objectWasRemoved;if(a||o){var u,c;for(u=0;i>u;u++)c=t.objectAt(u),c.operation===n&&a?e.objectWasInserted(c.index,c.object):c.operation===r&&o&&e.objectWasRemoved(c.index,c.object)}s&&e.propertyChanged("length"),e.contentsDidChange(e.get("changes"))}}var t=n$99.extend(n$10,{lastItem:n$9({depedencies:["length","contentsDidChange"],get:function(){return this.objectAt(this.length-1)}}),rawSplice:function(e,t){var n,r=arguments.length,i=e+t,s=this.get("changes");for(n=i-1;n>=e;n--)s.recordRemoval(n,this._array[n]);var a=this.__s._2hKxlxqVt7k$1WB$rawSplice.apply(this,arguments),o=r;for(n=2;o>n;n++)s.recordInsertion(n+e-2,arguments[n]);n$66.pause(),this.notifyIfNecessary();var u=this._iterators,c=u.length;if(c>0){var l=r-2,h=l-t;for(n=0;c>n;n++){var d=u[n];if(d.shouldObserveChanges){var f=d.get("position");f>=e&&(i>f?d.set("position",void 0):d.set("position",f+h))}}}return n$66.resume(),a},notifyIfNecessary:function(){0===this._batchCount&&e(this)},length:n$9({cacheable:!1,didChange:function(){}}),sort:function(){this.beginBatchedChanges();var e=this.__s._2hKxlxqVt7k$2AM$sort.apply(this,arguments);return this.endBatchedChanges(),e},addEach:function(){this.beginBatchedChanges();var e=this.__s._2hKxlxqVt7k$2Cl$addEach.apply(this,arguments);return this.endBatchedChanges(),e},changes:n$84(n$159),_batchCount:0,beginBatchedChanges:function(){this._batchCount++},endBatchedChanges:function(){this._batchCount--,this.notifyIfNecessary(),this._batchCount<0&&n$11("Mismatched batched changes in observable array: "+this,{array:this})
},swap:function(){this.beginBatchedChanges();var e=this.__s._2hKxlxqVt7k$2VC$swap.apply(this,arguments);return this.endBatchedChanges(),e},contentsDidChange:n$12({didPropagate:function(){this.get("changes").clear()}}),objectWasInserted:null,objectWasRemoved:null,iteratorClass:n$173,_iterators:n$84(Array),_registerIterator:function(e){this._iterators.push(e)},_unregisterIterator:function(e){n$174(e,this._iterators)},__superMap:{_2hKxlxqVt7k$1WB$rawSplice:"rawSplice",_2hKxlxqVt7k$2AM$sort:"sort",_2hKxlxqVt7k$2Cl$addEach:"addEach",_2hKxlxqVt7k$2VC$swap:"swap"}},n$175),n=n$159.INSERT,r=n$159.REMOVE;n$158=t,t.__QUALIFIED_CLASS_NAME__="CW.ObservableArray"}();
    
    
        
!function(){"use strict";var e=n$30.extend({isOnlyMetadataForKey:!1,requiresSupport:n$176,removeChild:function(){}});n$169=e,e.__QUALIFIED_CLASS_NAME__="CW.ParentMetadata"}();
    
    
        
!function(){"use strict";var t=n$158.extend({owner:null,ownerKey:"",init:function(t,e,n){this.owner=t,this.ownerKey=e,this.__s._CgZYtHOdcK$E6$init.call(this,n);for(var i=this.get("length"),r=0;i>r;r++){var a=this.objectAt(r),s=a.get("parent");s&&s.removeChild(a.get("parentKey"),a),a.set("parent",t),a.set("parentKey",e)}},swap:function(t,e){if(t>e){var n=t;t=e,e=n}var i=this._array,r=i[e],a=i[t];i[e]=a,i[t]=r;var s=this.changes;s.recordRemoval(e,r),s.recordRemoval(t,a),s.recordInsertion(t,a),s.recordInsertion(e,r),this.notifyIfNecessary()},rawSplice:function(t,e){var n,i,r=arguments.length,a=t+e,s=this.owner,o=this.ownerKey;for(this.beginBatchedChanges(),n=a-1;n>=t;n--)i=this.objectAt(n),i.set("parent",null),i.set("parentKey",null);for(a=r,n=2;a>n;n++){i=arguments[n];var u=i.get("parent"),c=i.get("parentKey");if(u===s&&c===o){var l=this.indexOf(i);t>l&&t--}u&&u.removeChild(c,i)}var h=this.__s._CgZYtHOdcK$v3$rawSplice.apply(this,arguments);for(this.endBatchedChanges(),n=2;a>n;n++)i=arguments[n],i.set("parent",s),i.set("parentKey",o);return h},dispose:function(){for(var t=this.get("length"),e=0;t>e;e++){var n=this.objectAt(e);n.set("parent",null),n.set("parentKey",null)}this.__s._CgZYtHOdcK$16E$dispose.apply(this,arguments)},__superMap:{_CgZYtHOdcK$E6$init:"init",_CgZYtHOdcK$v3$rawSplice:"rawSplice",_CgZYtHOdcK$16E$dispose:"dispose"}}),e=n$169.extend({init:function(t){this.value=t,this.__s._CgZYtHOdcK$18Q$init.call(this)},removeChild:function(t,e,n){var i=t.get(e);i.remove(n)},wasRegistered:function(e,n){this.__s._CgZYtHOdcK$1BW$wasRegistered.apply(this,arguments);var i="_"+n;e.registerMetadata(n,n$9({get:function(){var e=this[i];
return e||(this[i]=e=t.create(this,n),e.retain()),e},set:function(e){var r=this[i];r&&r.release(),(Array.isArray(e)||n$32(e,n$99)||n$36(e))&&(e=t.create(this,n,e),e.retain()),null===e||void 0===e||n$32(e,t)?this[i]=e:n$11(this.toString()+"#"+n+" must be an array or observable array")}}))},__superMap:{_CgZYtHOdcK$18Q$init:"init",_CgZYtHOdcK$1BW$wasRegistered:"wasRegistered"}}),n=function(){return e.define.apply(e,arguments)};n$920=e,n$177=n,t.__QUALIFIED_CLASS_NAME__="CW.ParentArray$151",e.__QUALIFIED_CLASS_NAME__="CW.ParentArrayProperty"}();
    
    
        
!function(){"use strict";function e(e){for(var t=e.get("length"),n=0;t>n;n++){var r=e.objectAt(n),i=r.object;i.hasOwnProperty("_changeRefCount")||(i._changeRefCount=0),r.operation===n$159.REMOVE?i._changeRefCount--:i._changeRefCount++}}function t(e,t,n){e.insertBefore(t,n||null)}function n(e,t){e.removeChild(t)}var r={mixinDependencies:[n$10,n$176,n$166],staticMembers:{handler:n$167.create({nodeType:"MULTIVIEWOUTLET",register:function(r,i){var s,a,o=i.name,u=i.classes,c=i.styles,l=i.attributes,h=n$22(i),d="_outlet_"+o+h,f=(u||c||l)&&{name:d,parent:i,index:0};n$168.call(r,d,i);var p=r.prototype,g=p.getMetadata(o);if(g||p.registerMetadata(o,n$177()),u){var v=u.length;for(a=0;v>a;a++)r.registerOutletAndSubOutlets(u[a],f)}if(c)for(s in c)r.registerOutletAndSubOutlets(c[s],f);if(l)for(s in l){var _,$=l[s];_=n$37($)?$.namespace:null,r.registerOutletAndSubOutlets($,f)}if(!i.observerWasRegistered){var m="__templateObserver__"+o+"DidChange"+h,y=function(e){for(var r,i=this.get(d);r=i.firstChild;)n(i,r);if(e)for(var s=e.get("length"),a=0;s>a;a++){var o=e.objectAt(a);r=o.get("element"),t(i,r)}};y.displayName=m,p.registerMetadata(m,n$7(o,y));var b="__templateObserver__"+o+"ContentDidChange"+h,S=function(r){if(r){var i,s,a,u=this.get(d);e(r);for(var c=r.get("length"),l=0;c>l;l++){var h=r.objectAt(l);i=h.object,s=i.get("element"),h.operation===n$159.REMOVE&&i.hasOwnProperty("_changeRefCount")&&i._changeRefCount<0?(n(u,s),delete i._changeRefCount):i.hasOwnProperty("_changeRefCount")&&i._changeRefCount>0&&(a=u.children[h.index],t(u,s,a),delete i._changeRefCount)}var f,p=this.get(o);for(l=p.get("length")-1;l>=0;l--)i=p.objectAt(l),s=i.get("element"),t(u,s,f),f=s
}};S.displayName=b,p.registerMetadata(b,n$7(o+".contentsDidChange",S)),i.observerWasRegistered=!0}},render:function(e,t){var n,r,i=e.get("document"),s=t.classes,a=t.styles,o=t.attributes,u=o&&o.tagName||"div",c=i.createElement(u);if(s){var l=c.classList,h=s.length;for(r=0;h>r;r++){var d=e.renderNodeAndSubNodes(s[r]);d&&l.add(d)}}if(a)for(n in a)n$160(c,n,e.renderNodeAndSubNodes(a[n]));if(o)for(n in o){var f,p=o[n];f=n$37(p)?p.namespace:null,f?c.setAttributeNS(f,n,e.renderNodeAndSubNodes(p)):c.setAttribute(n,e.renderNodeAndSubNodes(p))}return c}})}};n$185=r}();
    
    
        
!function(){"use strict";var e=n$169.extend({init:function(e){this.value=e,this.__s._csmFzmkjng$C4$init.call(this)},removeChild:function(e,t){e.set(t,null)},wasRegistered:function(e,t){this.__s._csmFzmkjng$Ec$wasRegistered.apply(this,arguments),n$32(e.getMetadata(t),n$8)||e.registerMetadata(t,n$9())},__superMap:{_csmFzmkjng$C4$init:"init",_csmFzmkjng$Ec$wasRegistered:"wasRegistered"}}),t=function(){return e.define.apply(e,arguments)};n$180=e,n$589=t,e.__QUALIFIED_CLASS_NAME__="CW.ParentProperty"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$166,n$176],staticMembers:{handler:n$167.create({nodeType:"VIEWOUTLET",register:function(e,t){var n=t.name,r=n$22(t),i="_outlet_"+n+r,s=e.prototype;if(n$168.call(e,i,t),n$179(s,n,n$180),!t.observerWasRegistered){var o="_previous_"+n,a="__templateObserver__"+n+"DidChange"+r,u=function(e){var t=this.get(i),r=t.parentNode;if(e){var s=e.get("element");s!==t&&(r.replaceChild(s,t),this.propertyChanged(i))}else t.__cw__isTemplatePlaceholder__||(r.replaceChild(this.createPlaceholderElement(),t),this.propertyChanged(i));var a=this[o];if(e!==a){if(a&&!a.isDisposed){var u=a.get("parent"),l=a.get("parentKey");u===this&&l===n&&(a.isDisposed||(a.set("parent",null),a.set("parentKey",null)))}if(e){var c=e.get("parent");c&&c.removeChild(e.get("parentKey"),e),e.set("parent",this),e.set("parentKey",n)}this[o]=e}};u.displayName=a,s.registerMetadata(a,n$7(n,u)),t.observerWasRegistered=!0}},render:function(e){return e.createPlaceholderElement()}})},createPlaceholderElement:function(){var e=this.get("document"),t=e.createElement("div");return t.__cw__isTemplatePlaceholder__=!0,t}};n$186=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$10,n$166],staticMembers:{handler:n$167.create({nodeType:"DATAOUTLET",register:function(t,e){var n=e.name,i=n$22(e),r="_outlet_"+n+i,a=t.prototype,s=n$181(e);if(n$168.call(t,r,e),n$179(a,n,n$8),!e.observerWasRegistered){var o="__templateObserver__"+n+"DidChange"+n$22(e);o=n$182(e,o);var u;u="false"===e.attributes.escape?function(t){var e=this.get(r);t=s(t),e.innerHTML=null==t?"":t}:function(t){var e=this.get(r);t=s(t),e.data=null==t?"":t},u.displayName=o,a.registerMetadata(o,n$7(n,u)),e.observerWasRegistered=!0}},render:function(t,e){return"false"===e.attributes.escape?t.get("document").createElement("span"):t.get("document").createTextNode("​")}})}};n$187=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$166],staticMembers:{handler:n$167.create({nodeType:"TEXT",render:function(e,t){return e.get("document").createTextNode(t.data)}})}};n$188=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$166,n$184],staticMembers:{handler:n$167.create({nodeType:"CLASSNAMEOUTLET",register:function(e,t){var n=t.name,i=t.parent,r=i.name,o=e.prototype,s=n$181(t);if(r||(r=n$183.call(e,i)),n$179(o,n,n$8),!t.observerWasRegistered){var a=n$22(t),u="__templateObserver__"+n+"DidChange"+a;u=n$182(t,u);var c="__templateObserver__previous"+n+a,d=function(e){var t=this.get(r).classList,n=this[c];n&&t.remove(n);var i=s(e);i&&t.add(i),this[c]=i};d.displayName=u,o.registerMetadata(u,n$7(n,d)),t.observerWasRegistered=!0}}})}};n$189=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$166,n$184],staticMembers:{handler:n$167.create({nodeType:"STYLEOUTLET",register:function(e,t){var n=t.name,r=t.unit||"",i=t.parent,s=i.name,o=t.property,a=e.prototype,u=n$181(t);if(s||(s=n$183.call(e,i)),n$179(a,n,n$8),!t.observerWasRegistered){var l="__templateObserver__"+n+"DidChange"+n$22(t);l=n$182(t,l);var c=function(e){var t=this.get(s);e=u(e),r&&null!=e&&(e+=r),n$160(t,o,e)};c.displayName=l,a.registerMetadata(l,n$7(n,c)),t.observerWasRegistered=!0}}})}};n$190=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$10,n$166,n$184],staticMembers:{handler:n$167.create({nodeType:"ATTRIBUTEOUTLET",register:function(t,e){var n=e.name,i=e.parent,r=i.name,a=e.attribute,s=t.prototype,o=n$181(e);if(r||(r=n$183.call(t,i)),n$179(s,n,n$8),!e.observerWasRegistered){var u="__templateObserver__"+n+"DidChange"+n$22(e);u=n$182(e,u);var c=function(t){var e=this.get(r);t=o(t),null===t||void 0===t||t.toString===Object.prototype.toString||t.toString===Function.prototype.toString?e.removeAttribute(a):e.setAttribute(a,t)};c.displayName=u,s.registerMetadata(u,n$7(n,c)),e.observerWasRegistered=!0}},render:function(t,e){var n=t[e.name];return n=n$32(n,n$13)?"":n,n||""}})}};n$191=t}();
    
    
        
!function(){"use strict";var e=function(e){return e};n$192=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$178,n$136,n$191,n$189,n$184,n$185,n$190,n$187,n$188,n$186,n$163,{init:function(e){(e&&e.isRootView||this.isRootView)&&(this._isAttached=!1),this.__s._33ngWMTP_J0$zE$init.apply(this,arguments)},nextResponder:n$4({get:function(){var e=this._nextResponder;return e?e:this.parent}}),viewController:n$9({dependencies:["parent.viewController"],get:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])},writeDependencies:[],set:n$192}),isRootView:!1,_didAttach:function(){this._isAttached=!0,this.propertyChanged("isAttached")},_didDetach:function(){this._isAttached=!1,this.propertyChanged("isAttached")},isAttached:n$9({readOnly:!0,dependencies:["parent.isAttached"],get:function(e,t,n,i){return this.isRootView?this._isAttached:i.internalGetPath(this,t[0+n])}}),__superMap:{_33ngWMTP_J0$zE$init:"init"}});n$193=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.View"}();
    
    
        
!function(){"use strict";function e(e){e._isLoadingView&&n$11("View is already loading, cannot start loading again"),e._isLoadingView=!0,e._view&&n$11("Cannot load view: a view is already loaded"),e.isDisposing&&n$11("Cannot load view: the view controller is being disposed"),e.viewWillLoad();var t=e.createView().retain();t.set("viewController",e),t.set("nextResponder",e),e._view=t,e._isViewLoaded=!0,e._isLoadingView=!1,e._loadChildViews(t),e.viewDidLoad(t),e.propertyChanged("view")}function t(e,t){var n=e._view;n||n$11("Cannot unload view: no view is loaded."),e.viewWillUnload(n),e._view=null,e._isViewLoaded=!1,t||e.propertyChanged("view"),e.viewDidUnload(),n.release()}var n=n$5.extend(n$10,n$136,{parent:n$4(null),_isViewLoaded:!1,_isAttached:!1,isViewLoaded:n$4({readOnly:!0,defaultValue:!1,get:function(){return this._isViewLoaded}}),isAttached:n$9({defaultValue:!1,readOnly:!0,get:function(){return this._isAttached}}),isRootViewController:!1,view:n$9({readOnly:!0,cacheable:!1,get:function(){return this._view||e(this),this._view}}),nextResponder:n$4({get:function(e){if(e)return e;var t=this.get("view");return t?t.get("parent"):null}}),viewClass:n$193,init:function(){this._childViewControllers=[],this.__s._1XWOAa6Xl86$yb$init.apply(this,arguments)},dispose:function(){var e=this._childViewControllers,n=0,i=e.length;for(n=0;i>n;n++)e[n].set("parent",null),e[n].release();this.get("isViewLoaded")&&t(this,!0),this.__s._1XWOAa6Xl86$1Cu$dispose.apply(this,arguments)},viewWillLoad:n$23,viewDidLoad:n$23,viewWillUnload:n$23,viewDidUnload:n$23,createView:function(){this._baseCreateViewOptionsCalled=!1;
var e=this.viewClass.create(this.createViewOptions());return this._baseCreateViewOptionsCalled||n$11("Base `createViewOptions` was not invoked."),e},createViewOptions:function(){return this._baseCreateViewOptionsCalled=!0,{isRootView:this.get("isRootViewController")}},loadView:function(){this.get("isViewLoaded")||e(this)},unloadView:function(){this.get("isViewLoaded")&&t(this)},reloadView:function(){this.get("isViewLoaded")&&t(this,!0),e(this)},willMoveToParentViewController:function(e){e&&e.get("isAttached")&&!this._isAttached?this.willAttach():!e&&this._isAttached&&this.willDetach()},didMoveToParentViewController:function(e){e&&e.get("isAttached")&&!this._isAttached?this.didAttach():!e&&this._isAttached&&this.didDetach()},willAttach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;n>e;e++)t[e].willAttach()},didAttach:function(){this.get("isRootViewController")&&this.get("view")._didAttach();var e,t=this._childViewControllers,n=t.length;for(e=0;n>e;e++)t[e].didAttach();this._isAttached=!0,this.propertyChanged("isAttached")},willDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;n>e;e++)t[e].willDetach()},didDetach:function(){var e,t=this._childViewControllers,n=t.length;for(e=0;n>e;e++)t[e].didDetach();this.get("isRootViewController")&&this.get("view")._didDetach(),this._isAttached=!1,this.propertyChanged("isAttached")},addChildViewController:function(e){var t=this._childViewControllers;e.get("parent")&&n$11("Cannot add view controller because it is already a child of a view controller",{parent:this,child:e}),t.push(e),e.set("parent",this),e.retain()
},removeChildViewController:function(e){var t=this._childViewControllers;t.indexOf(e)<0&&n$11("Cannot remove view controller because it is not a child of this view controller",{parent:this,child:e}),e.set("parent",null),e.release(),n$174(e,t)},_loadChildViews:function(e){for(var t=this._childViewControllers,n=0;n<t.length;n++){var i=t[n];e.set(i._destinationViewOutlet,i.get("view"))}},__superMap:{_1XWOAa6Xl86$yb$init:"init",_1XWOAa6Xl86$1Cu$dispose:"dispose"}});n$194=n,n.__QUALIFIED_CLASS_NAME__="CW.UI.ViewController"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"panes"}],classes:["cw-pane-container"]}}}),t=n$194.extend({viewClass:e,_paneStack:n$84(Array),addPane:function(e){e||n$11("Must pass a pane to addPane"),e.retain();var t=this._paneStack;-1!==t.indexOf(e)&&n$11("Cannot add duplicate pane onto stack"),e.willMoveToParentViewController(this),this.addChildViewController(e),this.getPath("view.panes").push(e.get("view")),t.push(e),this.propertyChanged("activePane"),e.didMoveToParentViewController(this),e.release()},removePane:function(e){e||n$11("Must pass a pane to removePane"),e.retain();var t=this._paneStack;0===t.length&&n$11("Cannot remove pane from empty pane stack");var n=t.indexOf(e);-1===n&&n$11("Cannot remove pane; not a current pane"),e.willMoveToParentViewController(null),t.splice(n,1),this.getPath("view.panes").remove(e.get("view")),this.removeChildViewController(e),this.propertyChanged("activePane"),e.didMoveToParentViewController(null),e.release()},bringToFront:function(e){var t=this._paneStack,n=t.indexOf(e);-1===n&&n$11("Cannot bring to front; not a current pane"),t.splice(n,1),t.push(e),this.propertyChanged("activePane")},activePane:n$9({readOnly:!0,get:function(){var e=this._paneStack;return e[e.length-1]}})});n$198=t,e.__QUALIFIED_CLASS_NAME__="CW.UI.PaneManagerView$163",t.__QUALIFIED_CLASS_NAME__="CW.UI.PaneManager"}();
    
    
        
!function(){"use strict";var t=n$125.extend({dependencies:[n$155,n$196,n$197],action:function(t){var e=n$198.create({isRootViewController:!0,application:t});t.set("_paneManager",e),e.willAttach(),t.get("rootElement").appendChild(e.get("view").get("element")),e.get("view").set("nextResponder",t.get("rootResponder")),e.didAttach(),e.addPane(t.get("rootViewController"))}});n$217=t,t.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.PaneManagerInitializer"}();
    
    
        
!function(){"use strict";var e=["is-","are-","has-"],t=n$127(["isConnected","isInitialized","isDisposed","isAbstract","propertiesAreInitialized"]),n={},i=function(e,i,o){o=o||"";var s=n$33(e),a=s?t:n;for(var u in e)if(!a[u]&&"_"!==u[0]&&e.hasOwnProperty(u)){var c=s?e.get(u):e[u];r(u,c,i,o)}},r=function(t,n,i,r){r=r||"";var u=typeof n;if("boolean"===u){for(var c,d,l=n$162(t),h=0;c=e[h];h++)d=c.length,l.substring(0,d)===c&&(l=l.substring(d));l&&i.classList.toggle(l,n)}else{if("object"===u||"function"===u){var f=n&&n.toString;(f===o||f===s||f===a)&&(n=null)}var p=r+n$162(t);n||0===n?i.setAttribute(p,""+n):i.removeAttribute(p)}},o=Object.prototype.toString,s=Function.prototype.toString,a=n$5.prototype.toString;n$199=i,n$215=r}();
    
    
        
!function(){"use strict";function e(e,t){var n="data-";n$199(t||n$110.get("sharedInstance"),e,n),n$199(t||n$109.get("sharedInstance"),e,n)}n$213=e}();
    
    
        
!function(){"use strict";function e(e){try{return window[e]}catch(t){n$63.warn("Could not get storage object for %@: %@",e,t)}}var t="localStorage",n="sessionStorage",i=n$5.extend(n$62,{init:function(e){e||n$11("Storage#init requires a storage type."),this.__s._2O9P_Tg2YKv$7i$init.call(this),this.storageType=e},storageType:null,getItem:function(t,n){var i=e(this.storageType);return i&&i.getItem?(n&&(t=n+"."+t),i.getItem(t)):null},setItem:function(t,n,i){var r=e(this.storageType);if(r&&r.setItem){i&&(t=i+"."+t);try{return r.setItem(t,n),!0}catch(o){}}return!1},getKeys:function(t){var n=e(this.storageType),i=[];if(n){t?t+=".":t="";var r=t?t.length:0;for(var o in n)0===o.indexOf(t)&&i.push(o.substring(r))}return i},removeItem:function(t,n){var i=e(this.storageType);if(i&&i.removeItem){n&&(t=n+"."+t);try{return i.removeItem(t),!0}catch(r){}}return!1},clear:function(t){var n=e(this.storageType);if(n){if(t){for(var i=this.getKeys(t),r=0,o=i.length;o>r;r++)this.removeItem(i[r],t);return!0}try{return n.clear(),!0}catch(s){}}return!1},__superMap:{_2O9P_Tg2YKv$7i$init:"init"}}),r=i.extend({init:function(){this.__s._2O9P_Tg2YKv$1J6$init.call(this,t)},__superMap:{_2O9P_Tg2YKv$1J6$init:"init"}}),o=i.extend({init:function(){this.__s._2O9P_Tg2YKv$1Kw$init.call(this,n)},__superMap:{_2O9P_Tg2YKv$1Kw$init:"init"}});n$921=i,n$896=r,n$200=o,i.__QUALIFIED_CLASS_NAME__="CW.Platform.StorageManager",r.__QUALIFIED_CLASS_NAME__="CW.Platform.LocalStorage",o.__QUALIFIED_CLASS_NAME__="CW.Platform.SessionStorage"}();
    
    
        
!function(){"use strict";var e=n$8.extend({staticMembers:{booleanProperty:function(e){return t.create(e)},numberProperty:function(e){return n.create(e)},stringProperty:function(e){return r.create(e)},enumProperty:function(e,t){return i.create(e,t)}},downstreamNodeManagerClass:n$78.extend({calculateValueForNode:function(e,t,n){if(n){var r=n$66.getStateIDForNode(t);r>0&&n$66.getValueForNode(r)}var i=e._config_debugValues[this.key];return void 0===i&&(i=this.get.call(e)),i},debugType:"Config"}),upstreamNodeManagerClass:n$67.extend({calculateValueForNode:function(e,t,n){var r,i=this.key;if(n){var s=n$66.getStateIDForNode(t);n$66.setStateDataForNode(void 0,t),n$66.getValueForNode(s)}r=n$66.getStateDataForNode(t),void 0===r?delete e._config_debugValues[i]:e._config_debugValues[i]=r},debugType:"Config"}),wasRegistered:function(){this.__s._4egcC4TIPXn$yE$wasRegistered.apply(this,arguments),this.readOnly=!1},setInitialValueForObject:function(e,t,n){e._config_defaultValues[t]=this.usesBuiltinGet?n:void 0},didChange:function(){this.writeToSessionStorage&&this.writeToSessionStorage()},__superMap:{_4egcC4TIPXn$yE$wasRegistered:"wasRegistered"}}),t=e.extend({type:"boolean",configType:"boolean",parse:function(e){return"boolean"==typeof e?e:"true"===e?!0:!1}}),n=e.extend({type:"number",configType:"number",parse:function(e){return e=parseFloat(e),isNaN(e)?void 0:e}}),r=e.extend({type:"string",configType:"string",parse:function(e){return e+""}}),i=e.extend({configType:"enum",allowedValues:null,parse:function(e){if(""===e)return void 0;var t=this.allowedValues;return t.indexOf(e)>-1?e:(n$11("Not a recognized value in enum: "+e,{value:e,allowedValues:t}),void 0)
},init:function(e,t){this.allowedValues=e,this.__s._4egcC4TIPXn$1b4$init.call(this,t)},__superMap:{_4egcC4TIPXn$1b4$init:"init"}});n$201=e,e.__QUALIFIED_CLASS_NAME__="CW.ConfigProperty",t.__QUALIFIED_CLASS_NAME__="CW.BooleanConfigProperty$168",n.__QUALIFIED_CLASS_NAME__="CW.NumberConfigProperty$168",r.__QUALIFIED_CLASS_NAME__="CW.StringConfigProperty$168",i.__QUALIFIED_CLASS_NAME__="CW.EnumConfigProperty$168"}();
    
    
        
!function(){"use strict";function t(){var t=e(window.location.hash);for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],r=this.getMetadata(n);r&&(i=r.parse(i),void 0!==i?this._config_urlValues[n]=i:delete this._config_urlValues[n],this.propertyChanged(n))}}function e(t){var e={},n="#cw_config:";if(t.substr(0,n.length)!==n)return e;t=t.substr(n.length);var i,r,a,s,o=t.split("&"),u=o.length;for(r=0;u>r;r++){i=o[r];var c=i.indexOf("=");0>c?(a=i,s="true"):(a=i.substr(0,c),s=i.substr(c+1)),a=decodeURIComponent(a),s=decodeURIComponent(s),e[a]=s}return e}function n(){var t=r.getItem(this._computedStorageKey),e=this._config_defaultValues,n=!1;if(t)try{t=JSON.parse(t);for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(this.set(i,t[i]),n=!0)}catch(a){}return n}var i=n$5.extend(n$10,n$62,{staticMembers:{booleanProperty:n$201.booleanProperty,numberProperty:n$201.numberProperty,stringProperty:n$201.stringProperty,enumProperty:n$201.enumProperty},_config_debugValues:null,_config_urlValues:null,_config_defaultValues:null,_shouldWriteChangesToSessionStorage:!1,init:function(){this._config_defaultValues={},this._config_urlValues=Object.create(this._config_defaultValues),this._config_debugValues=Object.create(this._config_urlValues),this.__s._4PcL7aspB75$wU$init.call(this),this.constructor===i?n$11("CW.Config cannot be instantiated directly, must subclass."):this.constructor.storageKey||n$11("Must define a `storageKey` static member for CW.Config subclasses."),this._computedStorageKey="Apple:Config:"+this.constructor.storageKey,t.call(this),n.call(this)&&this.didLoadConfigFromSessionStorage(),this._shouldWriteChangesToSessionStorage=!0,n$107(window,"hashchange",t.bind(this))
},didLoadConfigFromSessionStorage:function(){},setFromString:function(t,e){this.set(t,this.getMetadata(t).parse(e))},typeOf:function(t){return this.getMetadata(t).configType},dump:function(t){t||(t="");var e=this._config_debugValues,n=this._config_urlValues,i="",r="",a="",s=[],o=this.getMetadataByType(n$201);for(i in o)o.hasOwnProperty(i)&&(r=t+i+": ",a="",e.hasOwnProperty(i)&&(a+=this.getDebugValue(i)+" (Debug); "),n.hasOwnProperty(i)&&(a+=this.getURLValue(i)+" (URL); "),a+=this.getDefaultValue(i)+" (Default)",s.push(r+a));return s.join("\n")},getDefaultValue:function(t){return void 0!==this._config_defaultValues[t]?this._config_defaultValues[t]:this.getMetadata(t).getForObject(this,t)},setDefaultValue:function(t,e){this._config_defaultValues[t]=e,this.propertyChanged(t)},getURLValue:function(t){return this._config_urlValues.hasOwnProperty(t)?this._config_urlValues[t]:void 0},getDebugValue:function(t){return this._config_debugValues.hasOwnProperty(t)?this._config_debugValues[t]:void 0},clearDebugValues:function(){var t=this.getMetadataByType(n$201);for(var e in t)t.hasOwnProperty(e)&&this.set(e,void 0)},writeToSessionStorage:function(){this._shouldWriteChangesToSessionStorage&&this._computedStorageKey&&r.setItem(this._computedStorageKey,JSON.stringify(this._config_debugValues))},__superMap:{_4PcL7aspB75$wU$init:"init"}}),r=n$200.get("sharedInstance");n$206=i,i.__QUALIFIED_CLASS_NAME__="CW.Config"}();
    
    
        
!function(){"use strict";window.URL=window.URL||window.webkitURL;var e="done";n$207=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],encode:n$48.create(),decode:n$48.create()};n$202=e}();
    
    
        
!function(){"use strict";function e(e){if(e&&a.test(e)){e=e.split(",");for(var t=e.length-1;t>=0;t--)e[t]=n(e[t]);return e}return n(e)}function t(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--)e[t]=r(e[t]);return e.join(",")}return r(e)}function n(e){try{return JSON.parse(e)}catch(t){return e}}function r(e){return n$98(e)||n$11("Attempting to encode non-primitive value using Photos.Serializers.QueryString. Only objects containing primitives and non-nested arrays of primitives can be encoded this way.",e),""+e}var i=n$5.extend(n$10,n$62,{mixinDependencies:[n$202],owner:n$9(),shouldUseFormEncoding:n$9(!1),includesLeadingQuestionMark:n$9(!1),decode:function(t,n){var r=n||{};if(!n$57(t))return r;for(var i=t.length,s="?"===t[0]?0:-1;;){var a=s;if(s=t.indexOf("&",a+1),-1===s&&(s=i),a+2>=s)break;var u=t.indexOf("=",a+1),l=-1===u||u>=s,c=t.substring(a+1,l?s:u),p=l?void 0:t.substring(u+1,s);r[c]=p&&e(o(p,this.shouldUseFormEncoding))}return r},encode:function(e){var n="";for(var r in e)if(e.hasOwnProperty(r)){n&&(n+="&"),n+=s(r,this.shouldUseFormEncoding);var i=e[r];null!==i&&void 0!==i&&(n+="="+s(t(i),this.shouldUseFormEncoding))}return n&&this.includesLeadingQuestionMark?"?"+n:n}}),s=function(e,t){var n=encodeURIComponent(""+e);return t?n.replace(u,"+"):n},o=function(e,t){if(!e)return e;var n=decodeURIComponent(""+e);return t?n.replace(l," "):n},a=/\,/,u=/%20/g,l=/\+/g;n$208=i,i.__QUALIFIED_CLASS_NAME__="Photos.Serializers.QueryString"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{cloudOSApplication:n$9(),cloudOSService:n$9({dependencies:["cloudOSApplication"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.get("cloudOSService"):null}}),environment:n$9(n$14("cloudOSService.environment")),authBag:n$9(n$14("cloudOSService.environment.authBag")),currentUser:n$9(n$14("cloudOSService.environment.authBag.user"))}).create();n$203=e}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$10,{uploadServer:n$9({readOnly:!0,defaultValue:function(){return this}}),shardCount:n$9(1),url:n$9()});n$204=t,t.__QUALIFIED_CLASS_NAME__="Photos.Network.Server"}();
    
    
        
!function(){"use strict";var e=n$204.extend({url:n$9({readOnly:!0,dependencies:[n$203.bindingFor("authBag"),n$203.bindingFor("authBag.servicesInfo")],get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);var r=i.internalGetPath(this,t[0+n]),o=n$203.get("cloudOSService");if(!o)return null;var s=r.getServiceInfoFor("photos");return s?s.get("uploadUrl"):null}})});n$205=e,e.__QUALIFIED_CLASS_NAME__="Photos.Network.ProductionUploadServer"}();
    
    
        
!function(){"use strict";var e=n$204.extend({shardCount:n$9(4),url:n$9({readOnly:!0,dependencies:[n$203.bindingFor("authBag"),n$203.bindingFor("authBag.servicesInfo")],get:function(e,t,n,r){r.internalGetPath(this,t[1+n]);var i=r.internalGetPath(this,t[0+n]);if(!i)return null;var s=n$203.get("cloudOSService");if(!s)return null;var o=i.getServiceInfoFor("photos");return o?i.getServiceUrlFor("photos"):null}}),uploadServer:n$9({defaultValue:function(){return n$205.create()}})});n$210=e,e.__QUALIFIED_CLASS_NAME__="Photos.Network.ProductionServer"}();
    
    
        
!function(){"use strict";var e="Photos",t="years",n="years/collections",r="years/collections/moments",o={prod:{serverClass:n$210},localhost:{serverClass:n$204,url:"http://localhost:9001"},stoneMac:{serverClass:n$204,url:"https://photows.icloud.com:443"}},i=window.parent!==window,s=n$206.extend({staticMembers:{storageKey:e},defaultServer:n$206.enumProperty(Object.keys(o),i?"prod":"localhost"),clearConsoleOnLoad:n$206.booleanProperty(!1),server:n$9({readOnly:!0,dependencies:["defaultServer"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]),s=n$208.sharedInstance.decode(window.location.search),a=o[s.server||i];return a.serverClass.create(a)}}),logLevel:n$206.enumProperty([n$209.LOG_LEVEL_DEBUG,n$209.LOG_LEVEL_INFO,n$209.LOG_LEVEL_WARN],n$209.LOG_LEVEL_WARN),enableExceptionHandlerInDevelopment:n$206.booleanProperty(!1),storageSupportPage:n$206.stringProperty("http://support.apple.com/kb/ht4847"),enableExpunge:n$206.booleanProperty(!0),forgetVariousScrollPositionsAfterDelay:n$206.numberProperty(48e4),enableUploads:n$206.booleanProperty(!0),allowedUploadFileTypes:n$206.stringProperty("image/jpeg"),idleChangesetFetchDelay:n$206.numberProperty(3e4),maxUploadFileSize:n$206.numberProperty(104857600),minUploadFileSize:n$206.numberProperty(1024),idleChangesetFetchCount:n$206.numberProperty(10),maxConsecutiveChangesetErrors:n$206.numberProperty(10),changesetFailureRestartDelay:n$206.numberProperty(3e4),enableUnreleasedFeatures:n$206.booleanProperty(!1),enableRecentlyDeleted:n$206.booleanProperty(!0),maxConcurrentRequestsPerShard:n$206.numberProperty(6),maxConcurrentRequestsTotal:n$206.numberProperty(function(){var e=n$109.get("sharedInstance");
return e.isChrome?10:17}),maxConcurrentRequestsTotalWhenHidden:n$206.numberProperty(1),maxConcurrentUploadRequests:n$206.numberProperty(1),spritingBucketViabilityThreshold:n$206.numberProperty(.75),preloadingWindowSize:n$206.numberProperty(50),preloadingWindowThreshold:n$206.numberProperty(20),oneUpPreloadCount:n$206.numberProperty(10),gridDerivativePreloadingWindowRowCount:n$206.numberProperty(6),maxStoredMegapixels:n$206.numberProperty(100),maxStoredMegapixelsInBackground:n$206.numberProperty(20),maxStoredMegapixelsHalfLife:n$206.numberProperty(5e3),maxStoredMegapixelsLinearBleed:n$206.numberProperty(1),maxEmailAttachmentSizeInMB:n$206.numberProperty(20),enableRetainReleaseTracking:n$206.booleanProperty(!1),includeStacksWithRetainReleaseTracking:n$206.booleanProperty(!1),maxTimeBetweenCrashesToTreatAsCrashLoop:n$206.numberProperty(12e4),numRepeatedCrashesToTreatAsCrashLoop:n$206.numberProperty(2),enableConnectionAllocLogging:n$206.booleanProperty(!1),derivativeLoadingTimeout:n$206.numberProperty(18e4),useCVWSForDerivatives:n$206.booleanProperty(!0),derivativeURLExpirationOverride:n$206.numberProperty(0),enableDerivativeCache:n$206.booleanProperty(!0),requestRetryLimit:n$206.numberProperty(2),userId:n$206.enumProperty(["0","1","10","100","500","1000","5000","10000","50000","100000","bkirsch","cshull","cedwall","aiskander","bzhang","mrivera","wcurtiss","not-enabled","exited-hyperion","first-run","server-error","not-allowed","first-run-changeset-timeout","changeset-500","changeset-500-startup-500"],"5000")}).create(),a=n$206.extend({staticMembers:{storageKey:e+"-Env"},hasBase64:n$206.booleanProperty(!!window.atob),hasTypedArrays:n$206.booleanProperty(!!window.ArrayBuffer),hasBlobURLs:n$206.booleanProperty(!(!window.Blob||!window.URL)),hasXHRUploadSupport:n$206.booleanProperty(!n$109.get("sharedInstance").isIE9OrLower),hasDataTransferItemSupport:n$206.booleanProperty(n$109.sharedInstance.isChrome&&n$109.sharedInstance.majorVersion>=21),enableCanvasSplitting:n$206.booleanProperty(!n$109.get("sharedInstance").isChrome),maxScrollingCanvasSize:n$206.numberProperty(1/0),enableDerivativeSynthesis:n$206.booleanProperty(!n$109.sharedInstance.isIE),maximumConcurrentDownloadIFrames:n$206.numberProperty(n$109.get("sharedInstance").isIE?1:3),downloadCookieDetectTimeout:n$206.numberProperty(3e4),isRunningInsideCloudOS:n$206.booleanProperty(i),isICloud2Or3Or4:n$9({readOnly:!0,dependencies:[n$203.bindingFor("environment.iCloudEnvironment")],get:function(e,t,n,r){var o=r.internalGetPath(this,t[0+n]);
return-1!==["ICLOUD2","ICLOUD3","ICLOUD4"].indexOf(o)}})}).create(),u=n$206.extend({staticMembers:{storageKey:e+"-View"},showFullUpdatedTimestamp:n$206.booleanProperty(!1),enableDebugPanel:n$206.booleanProperty(!1),turnRecentlyDeletedTimeRemainingRedBelowDays:n$206.numberProperty(3),uploadToolbarViewHeight:n$206.numberProperty(32),uploadToolbarViewBottom:n$206.numberProperty(-33),uploadProgressBarRightBase:n$206.numberProperty(113),uploadToolbarViewSlideDuration:n$206.numberProperty(350),uploadToolbarViewHideDelay:n$206.numberProperty(1e3),uploadProgressProcessingFudge:n$206.numberProperty(.05),toolbarHeight:n$206.numberProperty(45),defaultBookmark:n$206.enumProperty([t,n,r],{defaultValue:function(){return s.get("enableUnreleasedFeatures")?r:"moments"}}),directionalTransition_duration:n$206.numberProperty(300),littlePopInTransition_scale:n$206.numberProperty(n$109.get("sharedInstance").isIE9OrLower?1:.98),actionModeToolbar_transitionDuration:n$206.numberProperty(200),enableSelectAll:n$206.booleanProperty(!1),shouldIncludeEmptyAlbumsFromFolderPreviews:n$206.booleanProperty(!1),moments_defaultColumnCount:n$206.numberProperty(6),albums_defaultColumnCount:n$206.numberProperty(6),folders_defaultColumnCount:n$206.numberProperty(6),minimumColumnCountOverride:n$206.numberProperty(0/0),maximumColumnCountOverride:n$206.numberProperty(0/0),minFGVCColumnWidth:n$206.numberProperty(90),idl_disableDerivativeUse:n$206.booleanProperty(!1),fgiv_shouldAllowUpscaling:n$206.booleanProperty(!1),fgiv_disableRendering:n$206.booleanProperty(!1),fgiv_drawAssetClientIds:n$206.booleanProperty(!1),fgiv_drawValueAtPropertyPath:n$206.stringProperty(""),fgiv_prettyPaintDelayFromIdle:n$206.numberProperty(n$110.sharedInstance.isWindows?1500:200),fgiv_prettyPaintDuration:n$206.numberProperty(n$110.sharedInstance.isWindows?1e3:300),enableDrawImageSmooth:n$206.booleanProperty(!0),minFirstRunTime:n$206.numberProperty(5e3),firstRunProgressBarTransitionDelay:n$206.numberProperty(2500),defaultFontFamily:n$206.stringProperty("SFNSText"),doubleStrings:n$206.booleanProperty(!1)}).create();
n$298=s,n$310=a,n$211=u}();
    
    
        
!function(){"use strict";var t={getValue:function(){var t=this.__s._3txElyb7g4S$3v$getValue.apply(this,arguments);return n$211.get("doubleStrings")&&(t+=t),t},__superMap:{_3txElyb7g4S$3v$getValue:"getValue"}};n$212=t}();
    
    
        
!function(){"use strict";var e="en-us",t=n$5.extend(n$10,n$62,{DEFAULT_LOCALE:e,_locales:{},getRegistryFor:function(e){var t=this._locales[e]&&this._locales[e];return t||(t=this._locales[e]={}),t},addValuesFor:function(e,t){for(var n=this.getRegistryFor(e),i=Object.keys(t),r=0,s=i.length;s>r;r++){var a=i[r];n[a]=t[a]}},locale:n$9(e),getValue:function(e,t){var n=this.get("locale"),i=this.getRegistryFor(n),r=i[e];if(!r)for(var s=n.split(/-|_/),a=0,o=s.length;o+1>a;a++){s.pop();var l=s.join("-");if(i=this.getRegistryFor(l),r=i[e])break}if(!r){var c=this.getRegistryFor(this.DEFAULT_LOCALE),u=this.DEFAULT_LOCALE.split(/-|_/)[0],h=this.getRegistryFor(u),d=c[e]||h[e];if(!d)return e;r=d}return t?n$19(r,t):r}},n$212),n=t.get("sharedInstance"),i=function(e,t){return n.addValuesFor(e,t)},r=function(e,t){return n.getValue(e,t)},s=function(e){n.set("locale",e)},a=function(){return n.get("locale")};if(window.__CW_BUILD_INFO){var o=window.__CW_BUILD_INFO.locale;s(o);var l=n$18;if(l){var c,u=l.length;for(c=0;u>c;c++)i(o,l[c])}}n$214=t,n$588=i,n$290=r,n$922=s,n$260=a,t.__QUALIFIED_CLASS_NAME__="CW.Locale"}();
    
    
        
!function(){"use strict";var e=n$125.extend({action:function(){n$213(document.documentElement),n$214.get("sharedInstance").observe("locale",function(e){n$215("lang",e,document.documentElement)})}});n$218=e,e.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.DocumentElementInititalizer"}();
    
    
        
!function(){"use strict";var e=n$125.extend({isAsync:!0,_loadedCount:n$9(0),_imageCount:n$9(),_isRunning:n$9(),_stateDidChange:n$7("_loadedCount","_imageCount","_isRunning",function(e,t,n){n&&e===t&&this.complete()}),action:function(){var e=null,t=window.__CW_BUILD_INFO;t&&(e=n$110.get("sharedInstance").get("isRetina")?t.images2x:t.images1x),e||(e=[]),this.set("_imageCount",e.length);for(var n=0;n<e.length;n++){var r=e[n],i=document.createElement("img");n$107(i,"load",this._imageDidLoad.bind(this)),i.src=r}this.set("_isRunning",!0)},_imageDidLoad:function(){this.set("_loadedCount",this.get("_loadedCount")+1)}});n$219=e,e.__QUALIFIED_CLASS_NAME__="CW.AppInitializers.SpritePreloader"}();
    
    
        
!function(){"use strict";var e=n$74("AppStates",function(e){e("NEW"),e("INITIALIZING"),e("READY")}),t=function(){var e=n&&n.get("application");if(e)return e.handleException.apply(e,arguments)},n=n$5.extend(n$10,{staticMembers:{isOldPhotosCW:!0,application:n$9(),states:e,isExceptionHandlingEnabled:n$4({get:function(e){if(n$41(e))return e;if(!n||!n.get("application")){var i=this.exceptionHandler;if(!i||i===t)return!1}return!0}}),exceptionHandler:t,exceptionWasHandled:!1},handleException:n$23,init:function(){n.get("application")&&n$11("Only one application may be instantiated per JS context."),this.__s._aGImTwtNdy$_G$init.apply(this,arguments),n.set("application",this)},state:e.NEW,_runAllInitializers:function(e){var t=this,n=this.get("Initializers"),i=[],r=n.length;if(0===r)return e(),void 0;n.forEach(function(n){var a=n.get("sharedInstance"),s=a.get("dependencies"),o=t.observe(a.bindingFor("state"),function(t){t===n$125.states.COMPLETE&&(r--,o.disconnect(),0===r&&e())});if(0===s.length)i.push(a);else{var l=s.map(function(e){return e.get("sharedInstance").bindingFor("state")});l.push(function(){for(var e=0,n=arguments.length;n>e;e++)if(arguments[e]!==n$125.states.COMPLETE)return;a.run(t)}),a.observe.apply(a,l)}});for(var a=0,s=i.length;s>a;a++)i[a].run(t)},Initializers:[n$217,n$155,n$196,n$197,n$218,n$219],rootElement:document.body,rootViewController:null,_paneManager:n$9(),rootResponder:null,registerInitializer:function(e){e||n$11("Initializer cannot be null"),e&&!e.hasMixin(n$216)&&n$11("Initializer must match the Initializer protocol"),this.Initializers.push(e)},run:n$105(function(){this.set("state",e.INITIALIZING),this._runAllInitializers(function(){this.set("state",e.READY)
}.bind(this))}),addPane:function(e){this.get("_paneManager").addPane(e)},removePane:function(e){this.get("_paneManager").removePane(e)},bringToFront:function(e){this.get("_paneManager").removePane(e)},activePane:n$9({binding:n$14("_paneManager.activePane"),readOnly:!0}),__superMap:{_aGImTwtNdy$_G$init:"init"}});n$103=n,n.__QUALIFIED_CLASS_NAME__="CW.Application"}();
    
    
        
!function(){"use strict";var t={trace:!1,logTrace:function(t){(this.trace||window.TRACE_ALL)&&n$63.debug(this+" "+t)}};n$223=t}();
    
    
        
!function(){"use strict";function t(t,n){var i="",r=4026531840;n=!!n;for(var a=0;7>=a;a++){n&&a>0&&0===a%2&&(i+=" ");var s=(t&r>>>4*a)>>>4*(7-a);i+=e[s]}return i}var e="0123456789ABCDEF";n$220=t}();
    
    
        
!function(){"use strict";function e(){var e=0;return function(){return e+=1}}function t(e,t){return new i(e,t,null,0)}var n=[4278190080,4294901760,4294967040,4294967280,4294967295],r=[24,16,8,4,0],i=function(t,n,i,s,o){this.name=t,this.value=n,this.level=s,this.parent=i||null,this.group=o||null;var a=n<<r[s];this.fullValue=i?i.fullValue+a:a,this.fullName=i?i.fullName+"."+t:t,this._nextSubstateValue=e(),o||Object.freeze(this)},s=i.prototype;s.equals=function(e){return e.fullValue===this.fullValue},s.substateOf=function(e){return this.level<=e.level?!1:(this.fullValue&n[e.level])===e.fullValue},s.superstateOf=function(e){return this.level>=e.level?!1:(e.fullValue&n[this.level])===this.fullValue},s.contains=function(e){return this.equals(e)||e.substateOf(this)},s.createSubstate=function(e){return new i(e,this._nextSubstateValue(),this,this.level+1,this.group)},s.toString=function(){var e=this.group,t=e?e.name+" State":"StateEnum",n=e?"":" <"+n$220(this.fullValue,!0)+">";return"["+t+": "+this.fullName+n+"]"},n$221=i,n$923=t}();
    
    
        
!function(){"use strict";function t(t,n){var r=new i(t),a=e(r,null);n(a);for(var s=r.items,o=s.length,u=0;o>u;u++)Object.freeze(s[u]);return Object.freeze(r),r}function e(t,n){var i=1;return function(r,a){var s=null;s=n?n.createSubstate(r):new n$221(r,i,null,0,t);var o=s.fullName.replace(".","");if(t.items.push(s),t[o]=s,n&&(n[r]=s),i+=1,a){var u=e(t,s);a(u)}}}var n=1,i=function(t){this.items=[],this.name=t,this.id=n,n++};n$222=i,n$224=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$223],registerStateEnumGroup:function(e,t,n){var r=this._segs_registeredGroups;r||(r=this._segs_registeredGroups={}),r[e.id]||(r[e.id]={stateEnumGroup:e,currentState:t,fatalErrorState:n})},fatalErrorIfNotInState:function(e){var t=this._segs_registeredGroups[e.group.id];t||n$11("No state enum group registered for "+e);var n,r=t.currentState,o=t.fatalErrorState||null,i=arguments.length;for(n=0;i>n;n++)if(arguments[n].contains(r))return;o&&this.setState(o);var s=1==i?" ":" either ",a=[];for(n=0;i>n;n++)a.push(arguments[n].fullName);var u=" Cannot perform operation. Expected state to"+s+"be: "+a.join(", ");n$11(u,{source:this})},setState:function(e){var t=this._segs_registeredGroups[e.group.id];t||n$11("No state enum group registered for "+e);var n=t.currentState;t.currentState=e,this.logTrace("changed state from <"+n.fullName+"> to <"+e.fullName+">")},getCurrentStateForStateEnumGroup:function(e){var t=this._segs_registeredGroups[e.id];return t||n$11("No state enum group registered for "+e.name),t.currentState},transitionFromStateToState:function(e,t){this.fatalErrorIfNotInState(e),this.setState(t)}};n$225=e}();
    
    
        
!function(){"use strict";var e=n$224("Application Driver",function(e){e("Inactive"),e("Activating",function(e){e("Init"),e("WaitAppPrepared"),e("Finalize")}),e("Active",function(e){e("Ready")}),e("Deactivating"),e("FatalError")}),t=e.Inactive,n=e.Activating,r=e.Active,i=e.Deactivating,s=e.FatalError,o=n$5.extend(n$223,n$225,{application:n$4({readOnly:!0}),state:n$4({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(e)}}),init:function(n){if(this.__s._2E62SSEbq4Z$Ko$init.call(this,n),!n.application)throw n$11("Cannot create driver. Requires application");this.registerStateEnumGroup(e,t,s)},activate:function(){this.transitionFromStateToState(t,n.Init),this.didStartInitialActivation()},applicationDidPrepareForLoad:function(){this.transitionFromStateToState(n.WaitAppPrepared,n.Finalize),this.didStartFinalizingActivation()},didStartInitialActivation:function(){},didFinishInitialActivation:function(){this.transitionFromStateToState(n.Init,n.WaitAppPrepared),this.get("application").prepareForLoad()},didStartFinalizingActivation:function(){},didFinishFinalizingActivation:function(){this.transitionFromStateToState(n.Finalize,r.Ready),this.get("application").didBecomeLoaded()},didStartDeactivation:function(){this.setState(i)},didFinishDeactivation:function(){this.setState(t)},__superMap:{_2E62SSEbq4Z$Ko$init:"init"}});n$251=e,n$252=o,o.__QUALIFIED_CLASS_NAME__="COSK.System.BaseApplicationDriver"}();
    
    
        
!function(){"use strict";var t=n$224("Channel",function(t){t("Closing"),t("Closed"),t("Opening"),t("Opened"),t("FatalError")}),e=t.Closing,n=t.Closed,i=t.Opening,r=t.Opened,a=t.FatalError,s=n$5.extend(n$223,n$225,{window:n$4({readOnly:!0,get:function(){return this._window}}),state:n$4({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(t)}}),init:function(e){e.window||this.fatalError("Cannot open channel. Requires window");var i=e.window;delete e.window,this.__s._2SGWzpR09jF$XV$init.call(this,e),this._window=i,this.registerStateEnumGroup(t,n,a)},open:function(){this.transitionFromStateToState(n,i),this.willOpen()},close:function(){this.transitionFromStateToState(r,e),this.willClose()},willOpen:function(){},didOpen:function(){this.transitionFromStateToState(i,r)},willClose:function(){},didClose:function(){this.transitionFromStateToState(e,n)},__superMap:{_2SGWzpR09jF$XV$init:"init"}});n$924=t,n$226=s,s.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.BaseChannel"}();
    
    
        
!function(){"use strict";var e=function(e,t){if(t.remove)return t.remove(e),void 0;Array.isArray(t)||n$11("removeItemFromArray: argument array must be an Array or implement a remove method");var n=t.indexOf(e);n>=0&&t.splice(n,1)};n$227=e}();
    
    
        
!function(){"use strict";var e=n$226.extend({init:function(e){this.__s._3rRxQjQS8yf$5z$init.call(this,e),this._allRegistedReceivers=[],this._registeredReceivers={}},addTargetActionForOrigin:function(e,t,n){var r=this._registeredReceivers[n];r||(r=this._registeredReceivers[n]=[]);var o={target:e,action:t};r.push(o),this._allRegistedReceivers.push(o)},removeTargetActionForOrigin:function(e,t,n){var r=this._registeredReceivers[n];this._removeTargetActionFromArray(e,t,r),this._removeTargetActionFromArray(e,t,this._allRegistedReceivers)},getTargetActionsForOrigin:function(e){return"*"===e?this._allRegistedReceivers:this._registeredReceivers[e]||null},dispatchMessage:function(e){var t=e.origin,n=this.getTargetActionsForOrigin(t),r=n?n.length:0,o=!1;this.logTrace("dispatching message from origin "+t);for(var i=0;r>i;i++){var s=n[i],a=s.target,u=s.action;n$57(u)&&(u=a[u],n$39(u)||n$11("Cannot dispath message. No method '"+u+"' for target",{channel:this,action:u,message:e})),this.logTrace("dispatching message to target "+a),u.call(a,e),o=!0}o||this.logTrace("No target-action pair for message")},_removeTargetActionFromArray:function(e,t,n){for(var r=n.length,o=null,i=0;r>i;i++){var s=n[i];if(s.target===e&&s.action===t){o=s;break}}o&&n$227(o,n)},__superMap:{_3rRxQjQS8yf$5z$init:"init"}});n$228=e,e.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.BaseInputChannel"}();
    
    
        
!function(){"use strict";var t=n$5.extend({data:null,origin:null,source:null,originalEvent:null});n$229=t,t.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.MessageEvent"}();
    
    
        
!function(){"use strict";function e(e){var t=e.data,n=e.origin,i=e.source;if(t&&n&&i){n$57(t)&&(t=JSON.parse(t));var r=n$229.create({data:t,origin:n,originalEvent:e});r.set("source",i),this.dispatchMessage.call(this,r)}}var t=n$228.extend({init:function(t){this.__s._4LZvoMp897D$5l$init.call(this,t),this._receivedMessageHandler=e.bind(this)},willOpen:function(){this.get("window").addEventListener("message",this._receivedMessageHandler),this.didOpen()},willClose:function(){this.get("window").removeEventListener("message",this._receivedMessageHandler),this.didClose()},__superMap:{_4LZvoMp897D$5l$init:"init"}});n$253=t,t.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.InputChannel"}();
    
    
        
!function(){"use strict";var e=n$226.extend({origin:n$4({readOnly:!0}),init:function(e){this.__s._2ipPMT2_jC8$4l$init.call(this,e),e.origin||n$11("Cannot create output channel. Requires origin")},sendMessage:function(){},__superMap:{_2ipPMT2_jC8$4l$init:"init"}});n$230=e,e.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.BaseOutputChannel"}();
    
    
        
!function(){"use strict";var t=n$230.extend({willOpen:function(){this.didOpen()},willClose:function(){this.didClose()},sendMessage:function(t){var e=this.get("window"),n=this.get("origin");n$109.get("sharedInstance").get("isIE9OrLower")&&(t=JSON.stringify(t)),e.postMessage(t,n)}});n$232=t,t.__QUALIFIED_CLASS_NAME__="COSK.CrossWindowCommunication.OutputChannel"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{staticMembers:{EMPTY_USER:null,statusCodes:{INACTIVE:0,FREE_QUALIFIED:2,FREE_NOT_QUALIFIED:3,LITE:4}},firstName:n$9(""),lastName:n$9(""),dsid:null,statusCode:n$9(),loadDSInfo:function(e){n$66.pause();for(var t=Object.keys(e),n=0,i=t.length;i>n;n++){var r=t[n];this.set(r,e[r])}n$66.resume()},isServiceActive:function(e){return!!n$203.get("authBag").getServiceInfoFor(e)}});e.EMPTY_USER=e.create({firstName:"No",lastName:"User"}),n$234=e,e.__QUALIFIED_CLASS_NAME__="COSK.User"}();
    
    
        
!function(){"use strict";var e=n$5.create({getWindowArgsForApp:function(e){var t=n$110.get("sharedInstance"),n=n$109.get("sharedInstance"),i={w:screen.availWidth,h:screen.availHeight},r={w:1434,h:1055},a=0;if(t.get("isWindows")&&(a=80,n.get("isFirefox")&&(a=110)),i.w<=1366)switch(e){case"pages":r={w:1122,h:655};break;case"numbers":r={w:1122,h:655};break;case"keynote":r={w:1200,h:655}}else if(i.w<=1440)switch(e){case"pages":r={w:1122,h:950};break;case"numbers":r={w:1122,h:950};break;case"keynote":r={w:1320,h:950}}else switch(e){case"pages":r={w:1122,h:1090};break;case"numbers":r={w:1122,h:950};break;case"keynote":r={w:1550,h:950}}var s="resizable=yes,menubar=no";s+=n.get("isSafari")?",toolbar=no,location=no":n.get("isFirefox")?",toolbar=yes":n.get("isIE")?"":",location=yes";var o=Math.round(Math.max(i.h/2-r.h/2-a/2,0)),l=Math.round(Math.max(i.w/2-r.w/2,0)),c="width="+r.w+",height="+r.h+",top="+o+",left="+l,u=s+","+c;return u}});n$254=e}();
    
    
        
!function(){"use strict";function e(e){return n$38.call(this,e,n$38)}n$231=e}();
    
    
        
!function(){"use strict";var t=function(t){n$63.debug("WindowApplication: "+t)},e={windowCount:0,windowApplications:{},openWindowApplication:function(t,e,n){var i=this._getNextWindowId(),t=this._addInstanceIdToURL(t,i),r=window.open(t,e,n);return this.windowApplications[i]={window:r},i},_addInstanceIdToURL:function(t,e){var n="&";return-1===t.indexOf("#")&&(n="#"),t+n+"instanceId="+e},_getNextWindowId:function(){return t("generating a new id"),"window_"+this.windowCount++},windowApplicationIsRegistered:function(t){return!!this.windowApplications[t]},passWindowApplicationMessage:function(t,e){var n=this.windowApplications[t];if(!n)return n$63.warn("Could not find a COSK.Utils.windowApplications with instanceId "+t),void 0;var i=n$27(arguments);if(i=i.slice(2,i.length),!n.didInitialize)return this._registerWindowApplicationMessage(t,e,i),void 0;var r={isCloudOSMessage:!0,methodName:e,args:i,isWindowApplicationMessage:!0};try{var a=n.window.CK.currentApplication;if(a)a._windowMessageWasReceived(n$231(r));else{var s=n$232.create({window:n.window,origin:n$203.getPath("cloudOSApplication.driver").getIOChannelOrigin()});s.sendMessage(r)}}catch(o){n$63.warn("postMessage: CK.WindowApplication "+t+" not properly loaded?")}},windowApplicationDidInitialize:function(t){var e=this.windowApplications[t];e?e.didInitialize=!0:n$63.warn("There is no windowApplication for "+t)},passPendingWindowApplicationMessages:function(t){var e,n,i,r,a=this.windowApplications[t];if(a&&(e=a.messages))for(n=0,i=e.length;i>n;n++){r=e[n];var s=[t,r.method];this.passWindowApplicationMessage.apply(this,s.concat(r.args))
}},_registerWindowApplicationMessage:function(t,e,n){var i,r=this.windowApplications[t];r&&(i=r.messages,i||(i=[],r.messages=i),i.push({method:e,args:n}))},resolveInstanceIfNeeded:function(t){var e=this.windowApplications;if(!e[t])for(var n in e)if(e[n].window===t)return n;return t}};n$233=e}();
    
    
        
!function(){"use strict";var e={windowApplicationDidInitialize:function(e){var t=n$233.resolveInstanceIfNeeded(e);n$233.windowApplicationDidInitialize(t)},passPendingWindowApplicationMessages:function(e){var t=n$233.resolveInstanceIfNeeded(e);n$233.passPendingWindowApplicationMessages(t)}};n$255=e}();
    
    
        
!function(){"use strict";var e={windowApplicationHasInitialized:function(e,t,n){e=n$233.resolveInstanceIfNeeded(e);var r=n$203.getPath("cloudOSApplication.driver");n$233.windowApplicationDidInitialize(e),n||n$233.passWindowApplicationMessage(e,"_applicationShouldInvokeMain",r.get("cloudOSMethodNames"),r.get("cloudOSState")),n$233.passPendingWindowApplicationMessages(e)},windowApplicationIsKnown:function(e){return e=n$233.resolveInstanceIfNeeded(e),n$233.windowApplicationIsRegistered(e)}};n$256=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{name:n$4(),url:n$9(),status:n$9()});n$235=e,e.__QUALIFIED_CLASS_NAME__="COSK.ServiceInfo"}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$10,{user:n$9(n$84(n$234)),clientInfo:n$4(),processAuthBag:function(t){var e=t.hasMinimumDeviceForPhotosWeb;void 0===e&&(e=!0),this.set("hasMinimumDeviceForPhotosWeb",e),this.get("user").loadDSInfo(t.dsInfo),this.set("iCloudEnvironment",t.environment),this.set("isAppleInternal",!(!t.requestInfo||!t.requestInfo.isAppleInternal)),this.loadServicesInfo(t.webservices),this.set("clientInfo",t.requestInfo)},iCloudEnvironment:null,isAppleInternal:n$9(null),loadServicesInfo:function(t){t||n$11("User.loadServicesInfo: `webservices` must be supplied");var e,n,i;e={};for(n in t)i=n$231(t[n]),i.name=n,e[n]=n$235.create(i);this.set("servicesInfo",e)},getServiceInfoFor:function(t){t||n$63.warn("User.getServiceInfoFor(): `serviceName` must be specified");var e=this.get("servicesInfo");return e?e[t]:null},getServiceUrlFor:function(t,e){var n,i=this.getServiceInfoFor(t),r=null;return i?(r=i.get("url")||null,r||(n=n$19("User.getServiceUrlFor(): Could not find the URL for “%{name}”",{name:t}))):n=n$19("User.getServiceUrlFor(): Could not find service information for “%{name}”",{name:t}),n&&(e?n$11(n):n$63.error(n)),r},servicesInfo:n$9(),hasMinimumDeviceForPhotosWeb:n$9(!1)});n$237=t,t.__QUALIFIED_CLASS_NAME__="COSK.AuthBag"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{timeStamp:n$9((new Date).getTime()),storageUsageByMedia:n$9(),totalStorageInBytes:n$9(),commerceStorageInBytes:n$9(),usedStorageInBytes:n$9(),compStorageInBytes:n$9(),overQuota:n$9(),paidQuota:n$9()});n$238=e,e.__QUALIFIED_CLASS_NAME__="COSK.QuotaInfo"}();
    
    
        
!function(){"use strict";function e(e,t,n){var r=e.get(t);return n!==r&&e.set(t,n),e}n$239=e}();
    
    
        
!function(){"use strict";var e=[],t=function(t,i){var r,a,s,o,l=0|i,c="";if(n$36(t)){for(r=t.length,a=0;r>a;a++)a&&(c+=","),c+=n(t[a],l);return"["+c+"]"}if(n$32(t,n$99)){for(r=t.get("length"),a=0;r>a;a++)a&&(c+=","),c+=n(t.objectAt(a),l);return"["+c+"]"}if(!n$98(t)){o=e.length;for(s in t)t.hasOwnProperty(s)&&e.push(s);for(e.sort(),r=e.length,a=o;r>a;a++)s=e[a],a!==o&&(c+=","),c+='"'+s+'":'+n(t[s],l);return e.length=o,"{"+c+"}"}n$11("Object expected in call to `guidForContents`.",t)},n=function(e,n){return n>0&&!n$98(e)?t(e,n-1):'"'+n$22(e)+'"'};n$236=t}();
    
    
        
!function(){"use strict";var e=global.IntlPolyfill,t=n$5.extend({_region:null,_cachedNumberInstances:{},_cachedDateTimeInstances:{},_pendingRegionsToRegister:{},_defaultCurrencyForRegions:{},_is12HourTimeForRegions:{},SHORT_DATE:{month:"numeric",day:"numeric",year:"numeric"},MEDIUM_DATE:{month:"short",day:"numeric",year:"numeric"},LONG_DATE:{month:"long",day:"numeric",year:"numeric"},FULL_DATE:{weekday:"long",month:"long",day:"numeric",year:"numeric"},SHORT_TIME:{hour:"numeric",minute:"numeric"},MEDIUM_TIME:{hour:"numeric",minute:"numeric",second:"numeric"},LONG_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},FULL_TIME:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},registerRegionFormat:function(t){if(!t||!e)return n$63.info("No Intl polyfill or region rules. Skipping RegionFormatter initialization."),void 0;var n=t.locale.toLowerCase();this._region=n,this._pendingRegionsToRegister[n]=t},getNumberFormatter:function(t){e||n$11("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var n=this._getCacheKeyForOptions(t),r=this._cachedNumberInstances[n];return r||(r=new e.NumberFormat(this._region,t),this._cachedNumberInstances[n]=r),r},getDateTimeFormatter:function(t){e||n$11("Cannot use Intl without polyfill."),this._registerPendingRegionFormats();var n=this._getCacheKeyForOptions(t),r=this._cachedDateTimeInstances[n];return r||(r=new e.DateTimeFormat(this._region,t),this._cachedDateTimeInstances[n]=r),r},getDefaultCurrencyForRegion:function(e){this._registerPendingRegionFormats();var t=e?e.toLowerCase():this._region;
return this._defaultCurrencyForRegions[t]},is12HourTime:function(e){this._registerPendingRegionFormats();var t=e?e.toLowerCase():this._region;return this._is12HourTimeForRegions[t]},_registerPendingRegionFormats:function(){for(var t=this._pendingRegionsToRegister,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.__addLocaleData(o);var s=o.locale.toLowerCase();this._defaultCurrencyForRegions[s]=o.number.currencyCode,this._is12HourTimeForRegions[s]=o.date.hour12,delete this._pendingRegionsToRegister[s]}},_getCacheKeyForOptions:function(e){var t;return t=e?this._region+":"+n$236(e):this._region+":default"}}),n=t.create();n$240=n,t.__QUALIFIED_CLASS_NAME__="COSK.Region$207"}();
    
    
        
!function(){"use strict";var t=n$8.extend({cloudOSEnvironmentKey:null,processCloudOSValue:function(t){return t},clearUserState:function(t){return t}}),e=n$74("AuthenticationState",{NOT_AUTHENTICATED:0,PARTIALLY_AUTHENTICATED:1,AUTHENTICATED:2}),n=n$5.extend(n$10,{accountMenu:t.create(),activeXFileVersion:t.create(),authBag:t.create({defaultValue:function(){return n$237.create()},processCloudOSValue:function(t,e){return e.processAuthBag(t),e},clearUserState:function(){return n$237.create()}}),clientId:t.create(),versions:t.create(),currentlyActiveApplication:t.create(),route:t.create(),displayName:t.create(),accountPreferences:t.create(),appPreferences:t.create(),iCloudEnvironment:t.create({cloudOSEnvironmentKey:"environment"}),hostname:t.create(),isBeta:t.create(),isDeveloper:t.create(),isFuture:t.create(),requestedStartupUrl:t.create(),requestedStartupInfo:t.create(),userAuthenticationState:t.create(),isUserNotAuthenticated:n$9({readOnly:!0,dependencies:["userAuthenticationState"],get:function(t,n,i,r){var a=r.internalGetPath(this,n[0+i]);return a===e.NOT_AUTHENTICATED.value}}),isUserPartiallyAuthenticated:n$9({readOnly:!0,dependencies:["userAuthenticationState"],get:function(t,n,i,r){var a=r.internalGetPath(this,n[0+i]);return a===e.PARTIALLY_AUTHENTICATED.value}}),isUserAuthenticated:n$9({readOnly:!0,dependencies:["userAuthenticationState"],get:function(t,n,i,r){var a=r.internalGetPath(this,n[0+i]);return a===e.AUTHENTICATED.value}}),userIsAuthenticated:n$9({readOnly:!0,dependencies:["isUserAuthenticated"],get:function(t,e,n,i){return i.internalGetPath(this,e[0+n])}}),quotaData:t.create({defaultValue:function(){return n$238.create()
},processCloudOSValue:function(t){return n$238.create(t)},clearUserState:function(){return n$238.create()}}),isUserOverQuota:n$9({readOnly:!0,dependencies:["quotaData"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r?r.get("overQuota"):null}}),_environmentProperties:null,initializeClass:function(){this.__s._4MziIPFUhzN$1Ml$initializeClass.apply(this,arguments);var e=this.getMetadataByType(t),n=this._environmentProperties={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];i=r.cloudOSEnvironmentKey||i,r.cloudOSEnvironmentKey=i,n[i]=r}},processCloudOSEnvironment:function(t){if(t){var e=t.regionFormattingRules;e&&n$240.registerRegionFormat(e);for(var n in t)t.hasOwnProperty(n)&&this._processCloudOSEnvironmentProperty(n,t[n])}},_processCloudOSEnvironmentProperty:function(t,e){var n=this._environmentProperties[t];if(n&&n.processCloudOSValue){t=n.key;var i=this.get(t),r=n.processCloudOSValue.call(this,e,i);n$239(this,t,r)}},clearUserState:function(){var e=this.getMetadataByType(t);for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];this.set(n,i.clearUserState(this.get(n)))}},__superMap:{_4MziIPFUhzN$1Ml$initializeClass:"initializeClass"}});n$241=n,t.__QUALIFIED_CLASS_NAME__="COSK.EnvironmentProperty$208",n.__QUALIFIED_CLASS_NAME__="COSK.Environment"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],environment:n$9(n$84(n$241)),showAppSwitcher:function(){},showSpringBoard:function(){},showAccountSettings:function(){},performLogout:function(){},reload:function(){},showHelp:function(){},recordStat:function(){},beginStat:function(){},endStat:function(){},showLocalNotification:function(){},invokeMethodOnCloudOS:function(){},handleApplicationCrash:function(){},exit:function(){},setAppBanner:function(){},openIWorkFile:function(){},openIWorkDocument:function(){},getValidateToken:function(){},isReadyToTerminateDidChange:function(){},setStartupUrl:function(){},setStartupInfo:function(){},requestReceived:function(){},refreshQuotaData:n$23,requestMeCard:n$23,setRoute:function(){},setAppPreferences:function(){},setAccountPreference:function(){},getConformingTypes:function(){},fetchIcon:function(){},fetchBlankFolderIcon:function(){},fetchBlankFileIcon:function(){},sendLocalNotification:function(){},didReceiveSpecialResponse:function(){}};n$257=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{_cookieString:null,_cookiesObj:null,getCookies:function(){var e=document.cookie;if(this._cookieString===e)return this._cookiesObj;var t={};if(this._cookieString=e,e)for(var n=e.split(";"),i=0,r=n.length;r>i;i++){var a=n[i].split("="),s=a.shift().trim(),o=a.join("=");o||n$11("Invalid cookie - no value"),o=o.trim(),t[s]=o}return this._cookiesObj=t},getCookie:function(e){var t=this.getCookies();return t[e]},removeCookie:function(e,t,n){var i=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT";t&&(i=i+"; domain="+t),n&&(i=i+"; path="+n),document.cookie=i},removeCookies:function(e,t,n){var i,r;if(e instanceof Array)for(i=0,r=e.length;r>i;i++)this.removeCookie(e[i],t,n);else{var a=document.cookie.split(";");for(i=0,r=a.length;r>i;i++){var s=a[i],o=s.indexOf("="),l=o>-1?s.substr(0,o):s;e.test(l)&&this.removeCookie(l,t,n)}}},setCookie:function(e,t){var n=e+"="+t+";";document.cookie=n}});n$258=e,e.__QUALIFIED_CLASS_NAME__="CW.Utils.CookieManager"}();
    
    
        
!function(){"use strict";function e(e,t,n){null===n||void 0===n?delete e[t]:e[t]=n}n$242=e}();
    
    
        
!function(){"use strict";function e(e){return o[e]||""}function t(e,t,n){if(!e)return"";if("string"!=typeof e)try{e=e.toString()}catch(i){return""}return e.replace(t,n)}function n(n){return t(n,a,e)}function i(n){return t(n,s,e)}function r(e){return t(e,l,"\\$&")}var a=/[&<>]/g,s=/[&<>'"]|((((j|vb|live).*)?)+\w+script:)/gi,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=/[-\/\\^$*+?.()|[\]{}]/g;n$750=n,n$925=i,n$243=r}();
    
    
        
!function(){"use strict";function e(e){try{return JSON.parse(e)}catch(t){return e}}function t(e){return""+e}var n=n$5.extend(n$10,{staticMembers:{shouldUseFormEncoding:!1,components:n$84(Array,["protocol","auth","hostname","port","pathname","query","hash"]),componentFormatters:{protocol:function(e){return e+(l[e]?"":"//")},auth:function(e){return e+"@"},port:function(e){return":"+e}},componentCleaners:{protocol:function(e){return e.replace("//","")},auth:function(e){return e.replace("@","")}},parse:function(e){var t,n,i,o,s,a=e.match(r),u={},l=this.components;for(i=0,o=l.length;o>i;i++)(t=a[i+1])&&(n=l[i],s=this.componentCleaners[n],u[n]=s?s(t):t);return u},parseQuery:function(e,t){var n={};if(!n$57(e))return n;if(e=e.replace(i,""),""===e)return n;t=void 0===t?this.shouldUseFormEncoding:t;for(var r=e.split("&"),o=0,s=r.length;s>o;o++){var a,l=r[o].split("="),c=l[0],d=l[1];u.test(c)&&(c=c.replace(u,""),a=!0),d=this.parseValue(p(d,t));var h=n[c];h?(Array.isArray(h)?h.push(d):h=[h,d],d=h):a&&(d=[d]),n[c]=d}return n},parseValue:function(t){if(t&&o.test(t)){t=t.split(",");for(var n=t.length-1;n>=0;n--)t[n]=e(t[n]);return t}return e(t)},formatQuery:function(e,t){if(!n$37(e))return e;t=void 0===t?this.shouldUseFormEncoding:t;var n,r,i,o,s=Object.keys(e),a="";for(i=0,o=s.length;o>i;i++)n=s[i],r=e[n],i>0&&(a+="&"),a+=c(n,t),null!==r&&void 0!==r&&(r=c(this.formatValue(r),t),a+="="+r);return i>0?"?"+a:""},formatValue:function(e){if(Array.isArray(e)){for(var n=e.length-1;n>=0;n--)e[n]=t(e[n]);return e.join(",")}return t(e)},init:function(){this.prototype.registerMetadata("href",n$9({dependencies:this.components})),this.__s._3AWttu3ET17$34t$init.apply(this,arguments)
},__superMap:{_3AWttu3ET17$34t$init:"init"}},protocol:n$9(null),auth:n$9(null),hostname:n$9(null),port:n$9({defaultValue:null,set:function(e){return parseInt(e,10)}}),pathname:n$9(null),query:n$9(null),hash:n$9(null),href:n$9({readOnly:!0,get:function(e,t,n,r){var i,o,s,a,u,l="",c=this.constructor.components,r=arguments[3],t=arguments[1],n=arguments[2];for(o=0,s=c.length;s>o;o++)a=c[o],(i=r.internalGet(this,t[o+n]))&&(u=this.constructor.componentFormatters[a],l+=u?u(i):i);return l}}),host:n$9({readOnly:!0,dependencies:["port","hostname"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]),o=r.internalGetPath(this,t[1+n]);return i&&(o=(o||"")+":"+i),o}}),origin:n$9({readOnly:!0,dependencies:["host","protocol"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]),o=r.internalGetPath(this,t[1+n]);if(o){var s=this.constructor.componentFormatters;i=s.protocol(o)+(i||"")}return i}}),path:n$9({readOnly:!0,dependencies:["query","pathname"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]),o=r.internalGetPath(this,t[1+n]);return i&&(o=(o||"")+i),o}}),queryObject:n$9({dependencies:["query"],get:function(e,t,n,r){return this.constructor.parseQuery(r.internalGetPath(this,t[0+n]))},set:function(e,t,n,r){n[0+r]=this.constructor.formatQuery(e)},writeDependencySetPathMap:[!1]}),isInDomain:function(e){var t=this.hostname;if(!t||""===e)return!1;var n=new RegExp("(^|\\.)"+e+"$","i"),r=t.match(n);return r?!0:!1},setQueryParameter:function(e,t){var n=this.query;return n?(this.removeQueryParameter(e),this.appendQueryParameter(e,t)):this.appendQueryParameter(e,t)},appendQueryParameter:function(e,t){var n=this.query||"?";
return"?"!==n&&(n+="&"),n+=c(e)+(null!==t&&void 0!==t?"="+c(this.constructor.formatValue(t),this.constructor.shouldUseFormEncoding):""),this.query=n,this},removeQueryParameter:function(e){var t=this.query;if(!t)return this;var n=this._regexpForQueryParameterKey(e),r=t.replace(n,""),i=r[0];return r?"?"!==i&&("&"===i&&(r=r.substr(1)),r="?"+r):r=null,this.query=r,this},getQueryParameter:function(e){var t=this.query;if(!t)return void 0;var n=this._regexpForQueryParameterKey(e),r=n.exec(t);if(!r)return void 0;var i=r[3];return void 0===i?null:p(i)},_regexpForQueryParameterKey:function(e){var t=n$243(e)+"|"+n$243(c(e));return new RegExp("(^|\\?|&)("+t+")(?:=([^&]*))?(?=&|$)","g")},setMultipleQueryParameters:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setQueryParameter(t,e[t]);return this},init:function(e){if(n$57(e))e=this.constructor.parse(e);else if(e&&e.constructor===window.Location){for(var t,n,r={},i=this.constructor.components,o=0,s=i.length;s>o;o++)n=t=i[o],"query"===n&&(t="search"),r[n]=e[t];e=r}else e&&!n$37(e)&&n$11("A URL object cannot be created with the data provided",e);this.__s._3AWttu3ET17$6AN$init.call(this,e)},toString:function(){return this.href},toJSON:function(){return""+this},__superMap:{_3AWttu3ET17$6AN$init:"init"}}),r=/^(.*?\:\/\/)?([^\:\/\?]*:?[^\:\/\?]*@+)?([^\:\/\?]*)\:?(\d*)?([^\?\#]*)?(\??[^\#]*)(\#?.*)?$/,i=/^\?/,o=/\,/,s=/%20/g,a=/\+/g,u=/\[\]$/,l={"mailto:":!0},c=function(e,t){var n=encodeURIComponent(""+e);return t?n.replace(s,"+"):n},p=function(e,t){if(!e)return e;var n=decodeURIComponent(""+e);return t?n.replace(a," "):n};n$259=n,n.__QUALIFIED_CLASS_NAME__="CW.Network.URL"
}();
    
    
        
!function(){"use strict";function e(e){return e=e||new n(16),t(e),e[6]=64|15&e[6],e[8]=128|63&e[8],e}var t,n=global.Uint8Array||global.Array;t=global.crypto&&global.crypto.getRandomValues?function(e){global.crypto.getRandomValues(e)}:function(e){for(var t,n,r,o=0;16>o;)for(n=Math.random(),t=0;4>t;o++,t++)n*=256,r=0|n,e[o]=r,n-=r},n$244=e}();
    
    
        
!function(){"use strict";function e(e){var n,r,o="";for(n=0;16>n;n++)r=e[n],o+=t[r>>4],o+=t[15&r],(3===n||5===n||7===n||9===n)&&(o+="-");return o}var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];n$245=e}();
    
    
        
!function(){"use strict";function e(){return t=n$244(t),n$245(t)}var t;n$261=e}();
    
    
        
!function(){"use strict";function e(e){return e&&"function"==typeof e.then}n$246=e}();
    
    
        
!function(){"use strict";function e(t){var n=t._nestedPromises;if(n)for(var r=0,i=n.length;i>r;r++){var o=n[r];if(o._hasRejectionHandler||e(o))return!0}return!1}function t(e,t,n){var r;return r=function(){var i;try{i=t.apply(this,arguments),i&&n$32(i,n$247)&&e._linkNestedPromise(i)}catch(o){var s=e._hasRejectionHandlerInChain(r);if(!n$103.exceptionWasHandled){if(s)throw o;e._exceptionWasThrown=!0,n$104(function(){throw o})}}return e.promiseState=n?n$247.RESOLVED.REJECTED:n$247.RESOLVED.FULFILLED,i}}var n={then:function(e,n){var r=this.internalPromise,i=n$247.createEmpty();return this.isExceptionHandlingEnabled&&(e&&(e=t(i,e),i._resolveHandler=e),n&&(n=t(i,n,!0),i._rejectHandler=n,this._hasRejectionHandler=n),this._linkNestedPromise(i)),i.internalPromise=r.then.call(r,e,n),i},"catch":function(e){return this.then.call(this,null,e)},"finally":function(e){var n,r,i=this.internalPromise,o=n$247.createEmpty();return e&&this.isExceptionHandlingEnabled&&(o._rejectHandler=n=t(o,e,!0),o._resolveHandler=r=t(o,e)),o.internalPromise=i.then.call(i,r,n),this._linkNestedPromise(o)},promiseState:null,isExceptionHandlingEnabled:!0,resolve:function(e){if(this.promiseState===n$247.PENDING)if(e===this&&n$11("Promise cannot resolve with itself "+this,this),e instanceof global.Promise||n$32(e,n$247))e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this));else if(n$246(e))try{e.then(this._resolveHandler.bind(this),this._rejectHandler.bind(this))}catch(t){this._rejectHandler(t)}else this._resolveHandler.call(this,e)},reject:function(e){this.promiseState===n$247.PENDING&&(this._rejectHandlerWasCalledDirectly=!0,this._rejectHandler.call(this,e))
},rejectWithExceptionHandling:function(e){if(this.promiseState===n$247.PENDING){var t=this._hasRejectionHandlerInChain();t?this._rejectHandler.call(this,e):(this._exceptionWasThrown=!0,n$104(function(){throw e}))}},init:function(){this.__s._2jYZjabPs7z$2Cv$init.apply(this,arguments),this.promiseState=n$247.PENDING,void 0===this.internalPromise&&(this.internalPromise=this._createPromise())},_createPromise:function(){var e=this;return new global.Promise(function(n,r){e.isExceptionHandlingEnabled?(e._resolveHandler=t(e,n),e._rejectHandler=t(e,r,!0)):(e._resolveHandler=function(t){e.promiseState=n$247.RESOLVED.FULFILLED,n(t)},e._rejectHandler=function(t){e.promiseState=n$247.RESOLVED.REJECTED,r(t)})})},internalPromise:void 0,_resolveHandler:null,_rejectHandler:null,_hasRejectionHandler:!1,_rejectHandlerWasCalledDirectly:!1,_exceptionWasThrown:!1,_nestedPromises:null,_parentPromise:null,_linkNestedPromise:function(e){return this._nestedPromises=this._nestedPromises||(this._nestedPromises=[]),this._nestedPromises.push(e),e._parentPromise=this,e},_hasRejectionHandlerInChain:function(t){for(var n=this;n;){if(n._hasRejectionHandler&&n._hasRejectionHandler!==t&&n.promiseState===n$247.PENDING)return!0;n=n._parentPromise}return e(this)},__superMap:{_2jYZjabPs7z$2Cv$init:"init"}};n$248=n}();
    
    
        
!function(){"use strict";var e=n$74("PROMISE_STATES",function(e){e("PENDING"),e("RESOLVED",function(e){e("FULFILLED"),e("REJECTED")})}),t=n$28.extend(e.toStaticMixin(),n$248,{staticMembers:{wrap:function(e){return e instanceof global.Promise?this.wrapPromise(e):n$246(e)?this.resolve(e):n$39(e)?this.wrapFunction(e):(n$11("CW.Promise.wrap can only be used with functions or thenables",e),void 0)},wrapPromise:function(e){return this.create({internalPromise:e})},wrapFunction:function(e){n$39(e)||n$11("CW.Promise.wrapFunction can only be used with a function.",e);var t=this;return function(){var n=t.create(),r=arguments;return n$130(function(){try{var t=e.apply(this,r);n.resolve(t)}catch(i){n.rejectWithExceptionHandling(i)}}.bind(this),0),n}},invokeFunction:function(e,t){var n=this.wrapFunction(e);return n.call(n,t)},createEmpty:function(){return this.create({internalPromise:null})},all:function(){return this.resolve(global.Promise.all.apply(global.Promise,arguments))},race:function(){return this.resolve(global.Promise.race.apply(global.Promise,arguments))},resolve:function(){var e=this.create();return e.resolve.apply(e,arguments),e},reject:function(){var e=this.create();return e.reject.apply(e,arguments),e}}});n$247=t,t.__QUALIFIED_CLASS_NAME__="CW.Promise"}();
    
    
        
!function(){"use strict";var e=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};n$249=e}();
    
    
        
!function(){"use strict";var t="derivative",e="upload",n=[200,402,405,409,428],i=n$5.extend(n$62,{requestWasReceived:function(i){if(i&&(i.forceHubbleReporting||-1===n.indexOf(i.statusCode))){var r,a=i.urlPath,s=i.hostname,o=i.httpMethod?i.httpMethod.split(" ")[0]:null;if(s.match(/.*\.icloud-content.com/))r=t;else if(s.match(/.*uploadphotosws.icloud.com/))r=e;else{var u=a.match(/\/ph\/([a-z]*)/);u&&u[1]&&(r=u[1])}o&&r?this._recordStatForHubble(o,r,i):n$63.error("Unable to record Hubble stat for "+JSON.stringify(i))}},_recordStatForHubble:function(t,e,n){var i=n$231(n),r=this._getStatKeyForHubble(t,e);i.forceHubbleReporting&&delete i.forceHubbleReporting,i.errorType=r,n$203.get("cloudOSService").recordStat(r,i)},_getStatKeyForHubble:function(t,e){return n$249(t.toLowerCase())+n$249(e)+"ResponseFailure"}});n$250=i,i.__QUALIFIED_CLASS_NAME__="Photos.HubbleReporting"}();
    
    
        
!function(){"use strict";var e=n$250.get("sharedInstance"),t={recordStat:function(e,t){if(t&&t.errorType)try{n$63.error("recordStat: "+e+": "+JSON.stringify(t))}catch(n){n$63.error("recordStat: "+e+": (unserializable)")}return this.__s._qcH_CSmksL$BI$recordStat.apply(this,arguments)},requestReceived:function(t){return e.requestWasReceived(t),this.__s._qcH_CSmksL$JZ$requestReceived.apply(this,arguments)},__superMap:{_qcH_CSmksL$BI$recordStat:"recordStat",_qcH_CSmksL$JZ$requestReceived:"requestReceived"}};n$262=t}();
    
    
        
!function(){"use strict";var e={"https://www.icloud.com":!0,"https://beta.icloud.com":!0,"https://future.icloud.com":!0,"https://carry.icloud.com":!0},t=15e3,n=window,r="cosk.system.applicationDriver.loadInputChannelDelegate",i="cosk.system.applicationDriver.loadOutputChannelDelegate",o="cosk.system.applicationDriver.ioChannelOrigin",s="cosk.system.applicationDriver.inputChannelWindow",a=n$251.Activating.Init.createSubstate("WaitingForCloudOSRunMessage"),u="_applicationShouldInvokeMain",l="_cloudOSStateChange",c="_clearUserState",d="applicationWillBecomeActive",p="applicationDidBecomeActive",h="applicationWillSuspend",f="applicationDidSuspend",g="applicationShouldRefresh",v="didFetchStartup",_="quotaDataDidChange",y="accountPreferencesDidChange",m="receiveMeCard",$="didReceiveNotification",b="showAppSwitcher",C="showSpringBoard",S="showAccountSettings",w="performLogout",O="recordStat",A="beginStat",N="endStat",I="requestSent",E="requestReceived",M="appWillUnload",F="handleApplicationCrash",P="isReadyToTerminateDidChange",T="exit",D="reload",k="setAppBanner",R="setStartupUrl",L="setStartupInfo",x="refreshQuotaData",U="fetchIcon",j="getConformingTypes",V="requestMeCard",W="setRoute",B="setAppPreferences",K="setAccountPreference",H="sendLocalNotification",Q="didReceiveSpecialResponse",G=0,z=1,q=2,J=3,X=n$252.extend(n$257,{_rpcCallbacks:n$84(Object),inputChannel:n$4({readOnly:!0}),outputChannel:n$4({readOnly:!0}),cloudOSMethodNames:null,cloudOSState:null,originForIO:null,environment:n$84(n$241),init:function(e){this.__s._1wUIMtJONTW$1ab$init.call(this,e),window.CloudOS=n$256,window.CK=n$255,this._cosMessageHandlers={};
var t=this.get("application");this.setCloudMessageHandler(u,this,this._cosMessagePrepareApplicationForLoad),this.setCloudMessageHandler(l,this,this._cosMessageCloudOSStateChange),this.setCloudMessageHandler(c,this,this._cosMessageClearUserState),this.setCloudMessageHandler(d,t,t.willBecomeActive),this.setCloudMessageHandler(p,t,t.didBecomeActive),this.setCloudMessageHandler(h,t,t.willBecomeSuspended),this.setCloudMessageHandler(f,t,t.didBecomeSuspended),this.setCloudMessageHandler(g,t,t.shouldRefresh),this.setCloudMessageHandler(v,t,t.didFetchStartup),this.setCloudMessageHandler(m,t,t.receiveMeCard),this.setCloudMessageHandler(_,t,t.quotaDataDidChange),this.setCloudMessageHandler(y,t,t.accountPreferencesDidChange),this.setCloudMessageHandler($,t,t.didReceiveNotification)},loadInputChannelForWindow:function(e){var t=window[r];return t?(this.logTrace("using delegate to load input channel"),t(this,e)):n$253.create({window:e})},loadOutputChannelForWindowWithOrigin:function(e){var t=window[i];return t?(this.logTrace("using delegate to load output channel"),t(this,e,this.originForIO)):n$232.create({window:e,origin:this.originForIO})},setCloudMessageHandler:function(e,t,n){this._cosMessageHandlers[e]={target:t,action:n}},didStartInitialActivation:function(){this.__s._1wUIMtJONTW$2HO$didStartInitialActivation.call(this);var t,n=this._getInputChannelWindow();for(t in e){var r=e[t]=this.loadInputChannelForWindow(n);r.addTargetActionForOrigin(this,"_handleIncomingCloudOSMessage",t),r.open()}this.logTrace("waiting for initial CloudOS message"),this.setState(a)},didStartFinalizingActivation:function(){this.__s._1wUIMtJONTW$2QK$didStartFinalizingActivation.call(this),this._sendCloudOSMessage("applicationIsReady"),this.didFinishFinalizingActivation()
},isReadyToTerminateDidChange:function(e){this._sendCloudOSMessage(P,e)},sendCloudOSMessage:function(e){e||(e={}),e.isCloudOSMessage||(e.isCloudOSMessage=!0),e.appName||(e.appName=this.getPath("application.name"));var n=n$261();e.id=n;var r=this.get("_rpcCallbacks"),i=n$247.create();r[n]=i,n$130(function(e){var t=new Error("Timed out.");e.reject(t)},t,i);var o=this.get("outputChannel");return o?o.sendMessage(e):n$63.warn("Could not send message.",e),i},_handleIncomingCloudOSMessage:function(t){var n=t.data;if(!this.originForIO){var r;for(r in e)if(r!==t.origin){var i=e[r];i.close(),e[r]=!1}else this._inputChannel=e[r];this.originForIO=t.origin}if(!n.isCloudOSMessage)return n$63.error("Received invalid message from "+t.origin),void 0;if(!this._outputChannel){var o=this.getIOChannelOrigin(),s=this._outputChannel=this.loadOutputChannelForWindowWithOrigin(t.source,o);this.logTrace("loaded output channel"),s.open()}var a=n.methodName,u=n.args;this.logTrace("Received CloudOS message '"+a+"'"),this._dispatchCloudOSMessageForMethodName(a,u)},_dispatchCloudOSMessageForMethodName:function(e,t){var n=t[0],r=this.get("_rpcCallbacks"),i=r[n];if(i){delete r[n],this.set("_rpcCallbacks",r),t.shift();var o=t.shift();return i.resolve(o),void 0}var s=this._cosMessageHandlers[e];if(!s)return n$63.info(this+" No handler for CloudOS message '"+e+"'"),void 0;var a=s.action,u=s.target,l=n$57(a)?u[a]:a;l.apply(u,t)},_sendCloudOSMessage:function(e){this.logTrace("sending CloudOS message '"+e+"'");var t=n$35(arguments,1),n=this._createMessageForCloudOS(e,t),r=this.get("outputChannel");r?r.sendMessage(n):n$63.warn("Could not send message.",n)
},_sendCloudOSMessageWithPromise:function(e){this.logTrace("sending CloudOS message with promise '"+e+"'");var t=n$35(arguments,1),n=this._createMessageForCloudOS(e,t);return this.sendCloudOSMessage(n)},_createMessageForCloudOS:function(e,t){var n={isCloudOSMessage:!0,methodName:e,appName:this.getPath("application.name"),args:t,buildNumber:window.__CW_BUILD_INFO.buildNumber};return n},getIOChannelOrigin:function(){return window[o]||this.originForIO},_getInputChannelWindow:function(){return window[s]||n},_cosMessagePrepareApplicationForLoad:function(e,t){this.fatalErrorIfNotInState(a),this.cloudOSMethodNames=e,this.cloudOSState=t;var n=this.get("environment");n.processCloudOSEnvironment(t);var r=this;window.addEventListener("unload",function(){r.appWillUnload()}),this.didFinishInitialActivation()},_cosMessageCloudOSStateChange:function(e){var t=this.get("environment");this._checkIfAppPreferencesChanged(e),t.processCloudOSEnvironment(e)},_cosMessageClearUserState:function(){var e=this.get("environment");e.clearUserState()},_checkIfAppPreferencesChanged:function(e){var t,n=e.appPreferences,r=this.get("application");if(n)for(t in n)t===r.get("name")&&r.appPreferencesDidChange()},showAppSwitcher:function(e){e||(e=Y),this._sendCloudOSMessage(b,{top:e.get("top"),left:e.get("left"),width:e.get("width"),height:e.get("height")})},showSpringBoard:function(){this._sendCloudOSMessage(C)},showAccountSettings:function(){this._sendCloudOSMessage(S)},performLogout:function(){this._sendCloudOSMessage(w),this.get("application").willBecomeUnloaded()},reload:function(){this._sendCloudOSMessage(D),this.get("application").willBecomeUnloaded()
},appWillUnload:function(){var e=n$63.stringifyRecordedLogMessages();this._sendCloudOSMessage(M,e)},recordStat:function(e,t){this._sendCloudOSMessage(O,e,t)},requestSent:function(){this._sendCloudOSMessage(I)},requestReceived:function(e,t,n){this._sendCloudOSMessage(E,e,t,n)},beginStat:function(e,t){this._sendCloudOSMessage(A,e,t)},endStat:function(e,t){this._sendCloudOSMessage(N,e,t)},invokeMethodOnCloudOS:function(){this._sendCloudOSMessage.apply(this,arguments)},handleApplicationCrash:function(e,t){this._sendCloudOSMessage(F,e,t)},exit:function(e,t){this.get("state")!==n$251.Deactivating&&(this._sendCloudOSMessage(T,e,t),this.get("application").willBecomeUnloaded())},showHelp:function(e){var t=n$203.getPath("currentUser.statusCode")===n$234.statusCodes.LITE,n=n$260(),r="en"===n?"":"?lang="+n,i="http://help.apple.com/"+(t?"icloudwebonly":"icloud")+"/"+r,o=n$109.get("sharedInstance").get("isChrome")?705:675;e&&(i+="#"+e),window.open(i,"help","height="+o+",width=875,location=0,status=0,scrollbars=0")},setAppBanner:function(e){this._sendCloudOSMessage(k,e,this.get("application").get("name"))},openIWorkFile:function(e){var t=e.appName;t=t.replace(/-tef$/,"");var n,r=e.sharingToken,i=e.zone,o=e.documentId,s=n$203.getPath("currentUser.dsid");r?n=n$19("//www.icloud.com/%{appName}/%{sharingToken}",{appName:t,sharingToken:r}):o&&(n=n$19("//www.icloud.com/%{appName}/docws:%{dsid}:%{zone}:%{docId}",{appName:t,dsid:s,zone:i,docId:o})),window.open(n,"_blank")},getValidateToken:function(){var e=n$258.create();return e.getCookie("X-APPLE-WEBAUTH-VALIDATE")},setStartupUrl:function(e){this._sendCloudOSMessage(R,e);
var t=this.get("environment");t.set("requestedStartupUrl",e)},setStartupInfo:function(e){this._sendCloudOSMessage(L,e);var t=this.get("environment");t.set("requestedStartupInfo",e)},refreshQuotaData:function(){this._sendCloudOSMessage(x)},fetchIcon:function(e,t,n,r){return n||(n=n$110.get("sharedInstance").get("devicePixelRatio")),this._sendCloudOSMessageWithPromise(U,e,t,n,r)},getConformingTypes:function(e){return this._sendCloudOSMessageWithPromise(j,e)},fetchBlankFolderIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.folder",e,t,n)},fetchBlankFileIcon:function(e,t,n){return n||(n="web"),this.fetchIcon("public.item",e,t,n)},requestMeCard:function(){this._sendCloudOSMessage(V)},setRoute:function(e){this._sendCloudOSMessage(W,e)},openIWorkDocument:function(e,t,n){var r={isCloudOSMessage:!0,methodName:"openFromSource",isWindowApplicationMessage:!0,args:{fileName:e,url:t,source:this.getPath("application.name")}},i="/iw/#open_from_source/"+n,o=n$254.getWindowArgsForApp(n),s=n$233.openWindowApplication(i,"_blank",o);n$233.passWindowApplicationMessage(s,"openFromSource",r.args)},setAppPreferences:function(e){this._sendCloudOSMessage(B,e)},setAccountPreference:function(e,t){this._sendCloudOSMessage(K,e,t)},didReceiveSpecialResponse:function(e,t,n){this._sendCloudOSMessage(Q,e,t,n)},sendLocalNotification:function(e,t,n,r){this._sendCloudOSMessage(H,e,t,n,r)},__superMap:{_1wUIMtJONTW$1ab$init:"init",_1wUIMtJONTW$2HO$didStartInitialActivation:"didStartInitialActivation",_1wUIMtJONTW$2QK$didStartFinalizingActivation:"didStartFinalizingActivation"}},n$262),Y={top:0,left:0,width:0,height:0,get:function(e){return this[e]
}};n$926=G,n$927=z,n$472=q,n$386=J,n$294=X,X.__QUALIFIED_CLASS_NAME__="COSK.System.ApplicationDriver"}();
    
    
        
!function(){"use strict";var t="willSend",e="didSend",n="didSucceed",i="didProgress",r="didFail",a="didComplete",s="didAbort",o="didFinalize",u="unsent",c="sending",l="timedout",d="GET",h="POST",f="PUT",p="DELETE";n$267=t,n$268=e,n$274=n,n$288=i,n$269=r,n$270=a,n$287=s,n$289=o,n$263=u,n$285=c,n$271=l,n$286=d,n$378=h,n$928=f,n$929=p}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{mixinDependencies:[n$202],contentType:"application/json",encode:function(e){if(!n$57(e))try{e=global.JSON.stringify(e)}catch(t){n$11("Could not encode object to JSON.",{object:e,error:t})}return e},decode:function(e){if(n$57(e))try{e=global.JSON.parse(e)}catch(t){n$63.warn("Could not decode string as JSON",e),e=null}return e}});n$264=e,e.__QUALIFIED_CLASS_NAME__="CW.Serializers.JSON"}();
    
    
        
!function(){"use strict";var e=0,t=n$5.extend(n$10,{id:n$4({get:function(){return this._id||(this._id=++e)}}),body:null,bodySerializer:n$4(function(){return n$264.get("sharedInstance")}),timeout:null,state:n$9(n$263)});n$280=t,t.__QUALIFIED_CLASS_NAME__="CW.Network.Message"}();
    
    
        
!function(){"use strict";var t={serializer:n$4(function(){return n$264.get("sharedInstance")}),serializedProperties:null,serialize:function(){var t=this.get("serializedProperties"),e=this.get("serializer"),n={};if(t)for(var i=0,r=t.length;r>i;i++){var a=t[i];n[a]=this.get(a)}return e.encode(n)},deserialize:function(t){if(!t)return null;var e=this.get("serializer");return e.decode(t)}};n$265=t}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$265,{status:0,headers:"",body:n$4({get:function(){return this._cachedBody||(this._cachedBody=this.deserialize(this.get("encodedBody")))}}),encodedBody:null,toJSON:function(){return this.getPropertiesAsObject("status","headers","encodedBody")}});n$272=t,t.__QUALIFIED_CLASS_NAME__="CW.Network.Response"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47,n$62],prepare:n$48.create(),send:n$48.create(),abort:n$48.create(),createResponse:n$48.create(),computeStatuses:n$48.create(),finalize:n$23};n$266=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$266,{staticMembers:{_TransportClass:null},send:function(e,t){e||n$11("No request to send",this);var n;t?n=e.__transport:(e._retryCount=0,n=e.__transport=new this.constructor._TransportClass,n._request=e,e.triggerStatusEvent(n$267)),this.prepare(e,t);var i=this.getBodyText(e);n.send(i),t||e._synchronous||e.triggerStatusEvent(n$268)},getBodyText:function(e){var t=e.get("bodySerializer"),n=e.get("body");return t&&(n=t.encode(n)),n},abort:function(e){e||n$11("No request to abort",this);var t=e.__transport;t?t.abort():n$63.warn("Cannot abort request because it is not in transit",e)},handleResponse:function(e,t){var n=this.createResponse(t),i=this._shouldFinalizeWithResponse(e,n);if(i){e.set("response",n),e.set("state",n$270);var r=this.computeStatuses(t);e._synchronous&&e.triggerStatusEvent(n$268),r&&e.triggerStatusEvents.apply(e,r),e.finalize()}},_shouldFinalizeWithResponse:function(e,t){var n=!0;if(e.shouldFinalizeWithResponse){var i=e._pendingRetryCallback=function(){i===e._pendingRetryCallback&&(delete e._pendingRetryCallback,e._retryCount++,this.send(e,!0))}.bind(this);n=e.shouldFinalizeWithResponse(t,i,e._retryCount)}return n},handleTimeout:function(e){this.abort(e);var t=this.createResponse(null),n=this._shouldFinalizeWithResponse(e,t);n&&(e.set("response",t),e.set("state",n$271),e.triggerStatusEvent(n$269),e.triggerStatusEvent(n$270),e.finalize())},finalize:function(e){e&&(e.__transport&&(delete e.__transport._request,delete e.__transport),delete e._pendingRetryCallback,e._retryCount=0)}});n$273=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.Transports.Base"
}();
    
    
        
!function(){"use strict";function e(){n$11("Your browser does not support sending requests")}function t(e,t){if(!t||!n$37(t))return e;var n,i,r,a=Object.keys(t);for(i=0,r=a.length;r>i;i++)n=a[i],e.setRequestHeader(n,t[n]);return e}function n(e,t,n){var i=e[t];if(i){var r=80,a=!i.__lastWriteTime;i.__lastWriteTime=i.__lastWriteTime||Date.now();var s=i.__lastWriteTime,o=Date.now()-s;(a||o>r)&&(i.setMultipleValues({bytesTransferred:n.loaded,bytesTotal:n.total,isDeterminate:n.lengthComputable}),i.__lastWriteTime=Date.now())}}var i,r=void 0!==window.XMLHttpRequest,a=n$273.extend(n$10,{staticMembers:{_TransportClass:r?window.XMLHttpRequest:e,supportsCORS:n$4({readOnly:!0,get:function(e){if("boolean"==typeof e)return e;try{var t=new this._TransportClass;e=!!("withCredentials"in t)}catch(n){e=!1}return this._supportsCORS=e}})},mimeType:null,prepare:function(e,i){var r=e.__transport,a=e.get("url").get("href"),o=!e._synchronous;r.open(e.get("method"),a,o),r.withCredentials=e.get("useCredentialsIfCrossOrigin"),r.addEventListener("readystatechange",s);var u=this.get("mimeType");return r.overrideMimeType&&u&&r.overrideMimeType(u),r.upload&&e.uploadProgress&&!i&&n$107(r.upload,"progress",n.bind(this,e,"uploadProgress")),e.progress&&!i&&n$107(r,"progress",n.bind(this,e,"progress")),t(r,e.get("headers")),this.configureTimeout(e),r},abort:function(e){var t;e&&(t=e.__transport)||n$11("Attempted to abort an XHR request that was never sent",e),t.removeEventListener&&t.removeEventListener("readystatechange",s),this.__s._2XuEHhMnXEu$1RM$abort.apply(this,arguments)},handleResponse:function(e){this.clearTimeout(e),this.__s._2XuEHhMnXEu$1U9$handleResponse.apply(this,arguments)
},configureTimeout:function(e){var t=e.get("timeout");t&&(e._timer=n$130(this.handleTimeout.bind(this,e),t))},clearTimeout:function(e){e&&e._timer&&(clearTimeout(e._timer),delete e._timer)},computeStatuses:function(e){var t=e.status,n=Math.floor(t/100),r=Math.floor(t%100/10),a=t%10;return i||(i={}),i[t]?i[t]:i[t]=0===t?[t,n$269,n$270]:[t,""+n+"**",""+n+r+"*","*"+r+"*","*"+r+a,"**"+a,2===n?n$274:n$269,n$270]},createResponse:function(e){return n$272.create(e?{status:e.status,encodedBody:e.responseText,headers:e.getAllResponseHeaders()}:null)},finalize:function(e){var t;e&&(t=e.__transport)||n$11("Error while finalizing an XHR request - no internal transport",e),t.removeEventListener&&t.removeEventListener("readystatechange",s),this.clearTimeout(e),this.__s._2XuEHhMnXEu$2CR$finalize.apply(this,arguments)},__superMap:{_2XuEHhMnXEu$1RM$abort:"abort",_2XuEHhMnXEu$1U9$handleResponse:"handleResponse",_2XuEHhMnXEu$2CR$finalize:"finalize"}}),s=n$105(function(){var e=this._request,t=e.get("transport"),n=this.readyState;4===n&&t.handleResponse.call(t,e,this)});n$279=a,a.__QUALIFIED_CLASS_NAME__="CW.Network.Transports.XHR"}();
    
    
        
!function(){"use strict";function e(){var e=t.pop();return e||(e=n.create()),e._isReady=!0,e}var t=[],n=n$28.extend({staticMembers:{begin:e},begin:function(){n$11("BatchSetter Begin must be called on the class, reusing BatchSetter objects is not allowed.")},set:function(e,t,n){this._isReady||n$11("BatchSetter Begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Key: %{key})",{key:t,object:e,value:n}),e&&t||n$11("BatchSetter Set requires a key and an object. (Key: %{key}, Object: %{object})",{key:t,object:e,value:n});var r=e.upstreamNodes,i=r&&r[t];return i?(this._toSetObservableArray.push(n),this._toSetObservableArray.push(i)):(this._toSetNonObservableArray.push(t),this._toSetNonObservableArray.push(n),this._toSetNonObservableArray.push(e)),this},setIfChanged:function(e,t,n){this._isReady||n$11("BatchSetter Begin must be called on the class before calling set, reusing BatchSetter objects is not allowed. (Key: %{key}, Object: %{object})",{key:t,object:e,value:n});var r=e[t];return n!==r&&this.set(e,t,n),this},end:function(){this._setNonObservables(),n$66.setValuesForNodes.apply(this,this._toSetObservableArray),this._clearSetArray(),this._isReady=!1,t.push(this)},_setNonObservables:function(){for(var e=0,t=this._toSetNonObservableArray.length;t>e;e+=3){var n=this._toSetNonObservableArray[e],r=this._toSetNonObservableArray[e+1],i=this._toSetNonObservableArray[e+2];i[n]=r}},init:function(){this.__s._1oyR0o0Wurk$12_$init.apply(this,arguments),this._toSetObservableArray=[],this._toSetNonObservableArray=[]},_isReady:!1,_toSetObservableArray:null,_toSetNonObservableArray:null,_clearSetArray:function(){this._toSetObservableArray.length=0,this._toSetNonObservableArray.length=0
},__superMap:{_1oyR0o0Wurk$12_$init:"init"}});n$275=n,n.__QUALIFIED_CLASS_NAME__="CW.BatchSetter"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{staticMembers:{setAsMirror:function(e,t){e.didChange=function(){t.setMultipleValues({bytesTotal:e.get("bytesTotal"),bytesTransferred:e.get("bytesTransferred"),isDeterminate:e.get("isDeterminate")})}}},init:function(){this.__s._1UwyJD2ahRE$QE$init.apply(this,arguments),this._children=[],this._childListeners={},this.set("childPropertiesToObserve",["bytesTransferred","bytesTotal","isDeterminate"])},isComposite:n$9({defaultValue:!1}),addChild:function(t){t.instanceOf(e)||n$11("Must provide a Progress instance.");for(var n=this,i=n$22(t),r=n._childListeners,s=this.childPropertiesToObserve,a=function(){n.childDidChange()},o=0,l=s.length;l>o;o++){var c=s[o],u=r[i]||[],h=t.observe(c,a);u.push(h),r[i]=u}this._children.push(t),this.set("isComposite",!0),this.childDidChange()},removeChild:function(t){var n=this._children;t.instanceOf(e)||n$11("Must provide a Progress instance.");var i=this._childListeners[n$22(t)];i&&i.forEach(function(e){e.disconnect()});var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&(this.set("isComposite",!1),this.setMultipleValues({bytesTotal:0,bytesTransferred:0,isDeterminate:!1})),this.childDidChange()},removeChildren:function(){for(var e;e=this._children.pop();)this.removeChild(e)},childDidChange:n$12(),childPropertiesToObserve:null,bytesTransferred:n$9({defaultValue:0}),bytesTotal:n$9({defaultValue:0}),isDeterminate:n$9({defaultValue:!1}),setMultipleValues:function(e){var t=this,n=n$275.begin();for(var i in e)e.hasOwnProperty(i)&&n.set(t,i,e[i]);n.end()},bitRateString:n$9({readOnly:!0,dependencies:["bytesPerSecond"],get:function(){return(t(this.bytesPerSecond)+"ps").replace("bytes","B")
}}),bytesPerSecond:n$9({readOnly:!0,dependencies:["bytesTransferred","percentComplete"],get:function(e,t,n,i){var r=this.get("_startTime"),s=Date.now();"undefined"==typeof r&&(this.set("_startTime",s),r=s);var a=s-r,o=a/1e3;return 0===o?0:i.internalGetPath(this,t[0+n])/o}}),percentComplete:n$9({readOnly:!0,dependencies:["bytesTotal","bytesTransferred","isDeterminate"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&0!==s?r/s:0}}),toString:function(){var e="[Progress Instance #"+n$22(this)+"]",t=this.get("percentComplete"),n=this.get("bytesTransferred"),i=this.get("bytesTotal"),r=this.get("isDeterminate")?"":"???";return(e+" "+100*t+"% ("+n+" of "+i+") "+r).trim()},didChange:n$12(),_startTime:null,_valuesDidChange:n$7("bytesTransferred","bytesTotal","isDeterminate",function(){this.didChange(arguments)}),_children:null,_childListeners:null,_calculateCompositeChildValues:n$7("childDidChange",function(){if(this.get("isComposite")){for(var e=this.get("childPropertiesToObserve"),t=this._children,n={},i=0,r=e.length;r>i;i++){var s=e[i];n[s]||(n[s]=0);for(var a=0,o=t.length;o>a;a++){var l=t[a];n[s]+=l.get(s)}}this.setMultipleValues(n),t.length||this.set("isComposite",!1)}}),__superMap:{_1UwyJD2ahRE$QE$init:"init"}}),t=function(e,t){if(("number"!=typeof e||"undefined"!=typeof t&&"number"!=typeof t)&&n$11("Must only provide numbers as params."),0===e)return"0 bytes";var n=t||2,i=1024,r=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(i));return(e/Math.pow(i,s)).toFixed(n)+" "+r[s]};n$282=e,n$930=t,e.__QUALIFIED_CLASS_NAME__="CW.Network.Progress"
}();
    
    
        
!function(){"use strict";function e(){n$11("Your browser does not support sending cross-domain requests")}var t=void 0!==window.XDomainRequest,n=n$273.extend({staticMembers:{_TransportClass:t?window.XDomainRequest:e},createResponse:function(e){return n$272.create(e?{status:"load"===e._responseEventType?200:0,encodedBody:e.responseText}:null)},computeStatuses:function(e){return"load"===e._responseEventType?r:i},prepare:function(e){e._synchronous&&n$11("Your browser does not support synchronous cross-domain requests");var t=e.get("method"),n=e.get("timeout");"GET"!==t&&"POST"!==t&&n$11("Your browser does not support cross-domain requests using methods besides GET/POST",e),e.get("useCredentialsIfCrossOrigin")&&n$11("Your browser does not support sending credentials with cross-domain requests",e),e.get("headers")&&n$11("Your browser does not support cross-domain requests with custom headers",e);var r=e.__transport,i=e.get("url").get("href");return r.open(t,i),r.onload=o("load"),r.onerror=o("error"),n&&(r.timeout=n,r.ontimeout=this.handleTimeout.bind(this,e)),r},finalize:function(e){e.__transport.ontimeout=null,this.__s._1FSJHayc0_o$1Hl$finalize.apply(this,arguments)},__superMap:{_1FSJHayc0_o$1Hl$finalize:"finalize"}}),r=[n$274,n$270],i=[n$269,n$270],o=function(e){return n$105(function(){var t=this._request,n=t.get("transport");this._responseEventType=e,n.handleResponse.call(n,t,this)})};n$283=n,n.__QUALIFIED_CLASS_NAME__="CW.Network.Transports.XDomainRequest"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],connect:n$48.create(),disconnect:n$48.create(),_sendMessage:n$48.create(),_processIncomingData:null};n$276=e}();
    
    
        
!function(){"use strict";function e(e,t){var n=e._queue||(e._queue=[]);n.push(t)}function t(e,t){for(var n;n=t.splice(0,1)[0];)e.send(n)}var n,i="ready",r="disconnected",a="connecting",s=n$5.extend(n$10,{mixinDependencies:[n$276],staticMembers:{MAX_RETRIES:3,TIMEOUT:3e4,open:function(e){var t,i=e?e.id:!1;return n=n||(n={}),i&&(t=n[i])||(e||(e={}),e.id=i||(i=n$22(this)),t=n[i]=this.create(e)),t}},id:n$4(),state:n$9(r),newMessage:n$12(),autoconnect:!0,init:function(){this.__s._330SSrIDBkJ$qk$init.apply(this,arguments),this.get("autoconnect")&&this.connect.call(this)},send:function(t){this.get("state")===i?this._sendMessage(t):e(this,t)},receive:function(e){var t=this._processIncomingData;t&&(e=t.call(this,e)),this.newMessage(e)},_stateDidChange:n$7("state",function(e){var n=this._queue;if(n)if(e===i)t(this,this._queue);else if(e===n$271)for(var r;r=n.splice(0,1)[0];)r.set("state",n$271)}),__superMap:{_330SSrIDBkJ$qk$init:"init"}});n$278=i,n$931=r,n$932=a,n$277=s,s.__QUALIFIED_CLASS_NAME__="CW.Network.Channels.Base"}();
    
    
        
!function(){"use strict";function e(e){var t,n;try{n=JSON.parse(e.data),t=a[n.messageId||n.requestId]}catch(r){}finally{t&&t.get("channel").receive(n)}}function t(e){s=s||(s={});var t=e.get("id"),a=e._iFrame||(e._iFrame=s[t]);if(a||(a=s[t]=e._iFrame=n(t),a.channel=e),!a._isLoaded){var u=e.constructor.TIMEOUT;return a._frameLoadTimer=n$130(function(){i(e)},u),r(a,t,function(){a._isLoaded=!0,o(e),a._frameLoadTimer&&clearTimeout(a._frameLoadTimer)})}}function n(){var e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e}function r(e,t,n){!e._isInitialized&&n&&(n=n$105(n),e.attachEvent?e.attachEvent("onload",n):e.onload=n,e._isInitialized=!0),e._isLoaded=!1,e.src=t}function i(e){var n=e.constructor,r=e._numRetries||(e._numRetries=0),i=e.get("autoretry")&&r<n.MAX_RETRIES;i?(e._numRetries++,t(e)):e.set("state",n$271)}function o(e){e.set("window",e._iFrame.contentWindow),e.set("state",n$278)}var s,a,u=n$277.extend({staticMembers:{open:function(t){var n=t?t.url||t.id:!1;return n||n$11("IFrame Channels require a valid source URL",this),this._messageListener||(n$107(window,"message",e),this._messageListener=e),this.__s._20QPm7XCsOZ$S1$open.call(this,{id:n})},__superMap:{_20QPm7XCsOZ$S1$open:"open"}},connect:function(){t(this)},disconnect:function(){},autoretry:!1,_sendMessage:function(e){e||n$11("Sending requires a message object",this);var t=e.get("body");e.set("channel",this),a=a||{},a[e.get("id")]=e,this.get("window").postMessage(JSON.stringify(t),"*")},abort:function(){var e=this._iFrame;e._isLoaded||(e.src="/default.aspx",clearTimeout(e._frameLoadTimer))
}});n$281=u,u.__QUALIFIED_CLASS_NAME__="CW.Network.Channels.IFrame"}();
    
    
        
!function(){"use strict";function e(){this.open=function(e){this._channel=n$281.open({url:e})},this.send=function(e){var t=this._request,n=n$280.create({body:{type:t.get("method"),url:t.get("url").get("href"),headers:t.get("headers"),body:e,isAsynchronous:t._wasSentSynchronously,sendOnlyAtClose:!1}}),i=n.get("id");n.get("body").requestId=i,this._listenForTimeout(n),this._channel.observe("newMessage",n$105(function(e){var n=t.get("transport");e&&e.requestId===i&&n.handleResponse.call(n,t,e)})),this._channel.send(n)},this._listenForTimeout=function(e){var t=this._request;e.observe("state",function(e){if(e===n$271){var n=t.get("transport");n.handleTimeout.call(n,t)}})},this.abort=function(){this._channel.abort()}}var t=n$279.extend({staticMembers:{_TransportClass:e},useProxyURL:!0,prepare:function(e){e._synchronous&&n$11("Your browser does not support synchronous cross-domain requests");var t=e.__transport,i=e.get("url");return i=this.get("useProxyURL")?n(i):i.get("href"),t.open(i),this.configureTimeout(e),t},handleTimeout:function(e){this.clearTimeout(e),this.__s._2zzDmbZs5Mf$jF$handleTimeout.apply(this,arguments)},createResponse:function(e){return n$272.create(e?{status:e.status,encodedBody:e.responseText,headers:e.headers}:null)},__superMap:{_2zzDmbZs5Mf$jF$handleTimeout:"handleTimeout"}}),n=function(e){return e.get("origin")+"/ajax_sender.html"};n$284=t,t.__QUALIFIED_CLASS_NAME__="CW.Network.Transports.IFrameProxy"}();
    
    
        
!function(){"use strict";function e(e,t){(e.get("state")!==n$263||e._isFinalized)&&n$11("Cannot send a request more than once",e);var n=e.get("url");n?n.get("auth")&&!e.get("allowsCredentialsInURL")&&n$11("This request is not allowed to use authentication",e):n$11("Cannot send a request without a URL",e);var r=e.get("transport");e.set("state",n$285),e._synchronous=t,r.send(e)}function t(e,t,n){var r=e._statusEventListeners||(e._statusEventListeners={}),i=r[t]||(r[t]=[]);i.push(n)}var n=n$280.extend({staticMembers:{nextRequestSequenceNumber:1,requestLoggingLevel:null},URLClass:n$259,url:n$9({get:function(){return this._urlObject},set:function(e){var t;if(e){var n=this.URLClass;t=n$32(e,n)?e:n.create(e)}this._urlObject=t}}),method:n$286,useCredentialsIfCrossOrigin:!1,response:n$9(),responseSerializer:n$4({get:function(){var e=this._responseSerializer;return e?e:this.get("serializer")}}),isCrossDomain:n$4({readOnly:!0,get:function(){var e=this.get("url");if(!e)return!1;var t=e.get("protocol"),n=e.get("host");if(!n)return!1;var r=window.location;return r.protocol!==t||r.host!==n}}),transport:n$4({get:function(e){if(e)return e;var t=n$279;if(this.get("isCrossDomain")&&!n$279.get("supportsCORS")){var n=this.get("useCredentialsIfCrossOrigin")||this.get("headers")||this._statusEventListeners;t=n?n$284:n$283}return t.get("sharedInstance")}}),allowsCredentialsInURL:!1,shouldTrackUploadProgress:n$9({defaultValue:!1,didChange:function(){this.state!==n$263&&n$11("Cannot change `shouldTrackUploadProgress` once a request is sent.")}}),shouldTrackProgress:n$9({defaultValue:!1,didChange:function(){this.state!==n$263&&n$11("Cannot change `shouldTrackProgress` once a request is sent.")
}}),uploadProgress:n$9({readOnly:!0,dependencies:["shouldTrackUploadProgress"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]);return i?n$282.create():null}}),progress:n$9({readOnly:!0,dependencies:["shouldTrackProgress"],get:function(e,t,n,r){var i=r.internalGetPath(this,t[0+n]);return i?n$282.create():null}}),_fireDidProgress:n$170("progress.didChange","uploadProgress.didChange",function(){this.triggerStatusEvent(n$288)}),headers:n$4(),setHeader:function(e,t){var n=this.get("headers");if(!n){if(null==t)return;n={}}n$242(n,e,t),this.set("headers",n)},setMultipleHeaders:function(e){var t=this.get("headers")||{};for(var n in e)n$242(t,n,e[n]);this.set("headers",t)},removeHeader:function(e){this.setHeader(e,null)},on:function(e,n){t(this,e,n)},onStatus:function(e,n){/^[\d\*]{3}$/.test(e)?t(this,e,n):n$11(e+" is an invalid status code listener for request",this)},delegate:null,sequenceNumber:n$4({readOnly:!0,defaultValue:function(){return this.constructor.nextRequestSequenceNumber++}}),sentAt:null,willSend:null,didSend:null,didProgress:null,didSucceed:null,didAbort:null,didFail:null,didComplete:null,shouldFinalizeWithResponse:null,_logRequestIfAppropriate:function(){this.sentAt=Date.now();var e,t=this.constructor.requestLoggingLevel;t&&(e=this.get("bodyShouldBeLogged")?this.get("encodedBody")||"(empty)":"(omitted)",n$63[t]("--> Request "+this.get("sequenceNumber")+": "+this.get("method")+" to "+this.getPath("url.href")+", headers: "+(this.get("headers")||"(empty)")+", body: "+e))},bodyShouldBeLogged:!1,_logResponseIfAppropriate:function(){var e=this.constructor.requestLoggingLevel,t=this.get("sequenceNumber");
if(e){if(this.get("state")===n$271)return n$63[e]("<-- Response "+t+": (timed out)"),void 0;var n,r=this.get("response"),i=Date.now()-this.sentAt;n=this.get("bodyShouldBeLogged")?r.get("encodedBody")||"(empty)":"(omitted)",n$63[e]("<-- Response "+t+": "+r.get("status")+" ("+i+"ms), headers: "+(r.get("headers")||"(empty)")+", body: "+n)}},send:function(){e(this)},sendSynchronously:function(){this.get("timeout")&&n$11("Cannot send a synchronous request with a timeout",this),e(this,!0)},abort:function(){if(this.get("state")===n$285){var e=this.get("transport");this.get("method")!==n$286&&n$63.warn("A non-GET network request was aborted. Data may have already been changed on the server.",this),e.abort(this),this.set("state",n$287),this.triggerStatusEvent(n$287),this.finalize()}},triggerStatusEvent:function(e){var t,n,r,i,o=this.get("delegate")||this,s=this._statusEventListeners;if(e===n$268&&this._logRequestIfAppropriate(),e===n$270&&this._logResponseIfAppropriate(),(n=o[e])&&n.call&&n.call(o,this),s&&(t=s[e]))for(r=0,i=t.length;i>r;r++)(n=t[r])&&n(this)},triggerStatusEvents:function(){for(var e=0,t=arguments.length;t>e;e++)this.triggerStatusEvent(arguments[e])},finalize:function(){this._isFinalized=!0;var e=this.get("transport");e.finalize(this),this.triggerStatusEvent(n$289),delete this._statusEventListeners},toJSON:function(){return this.getPropertiesAsObject("url","method","body","headers","response")}});n$291=n,n.__QUALIFIED_CLASS_NAME__="CW.Network.Request"}();
    
    
        
!function(){"use strict";Error.stackTraceLimit=1/0;var e=n$5.extend({init:function(){this.__s._23pD94HhKAb$8R$init.apply(this,arguments)},error:null,handleException:function(){var e=this.get("_errorReportRequestBody");this.createModifiedErrorBodyBeforeSend&&(e=this.createModifiedErrorBodyBeforeSend(e)),n$203.get("cloudOSService").handleApplicationCrash(e,n$63.stringifyRecordedLogMessages())},createModifiedErrorBodyBeforeSend:null,_errorReportRequestBody:n$4({get:function(){var e=this.get("error"),t=n$203.get("authBag"),n=n$203.get("currentUser"),r={};return r.applicationName=n$203.getPath("cloudOSApplication.name"),r.type="exception",r.error=e.message||""+e,r.errorContext=n$100(e.context),r.stack=this._truncateStack(e.stack),r.applicationBuildNumber=__CW_BUILD_INFO.buildNumber,r.environment=t.get("iCloudEnvironment"),r.isFatal=!0,r.time=new Date+"        ("+Date.now()+")",r.host=window.location.host,r.userAgent=navigator.userAgent+"",r.line=this._getErrorLineNumber(e),n&&(r.dsid=n.get("dsid")),r}}),_truncateStack:function(e){var t=400,n=100;if(!e)return e;e=e.trim();var r=e.split("\n"),i=r.length;if(t+n+1>=i)return e;var o=i-t-n;return r.splice(t,o,"... "+o+" lines truncated ..."),r.join("\n")},_getErrorLineNumber:function(e){var t="Unknown",n=e.lineNumber||e.line;if(!n)try{var r=e.stack.split("\n"),i=r[1],o=i.split(":"),s=o[o.length-2];n=s}catch(a){n=t}return n},__superMap:{_23pD94HhKAb$8R$init:"init"}});n$295=e,e.__QUALIFIED_CLASS_NAME__="COSK.Utils.FatalExceptionHandler"}();
    
    
        
!function(){"use strict";var e=n$224("CloudOS Application",function(e){e("NotLoaded"),e("Loading",function(e){e("Init"),e("Prepare"),e("Finalize")}),e("Loaded",function(e){e("Prepared"),e("Activating"),e("Active"),e("Suspending"),e("Suspended")}),e("Unloading"),e("FatalError")}),t=e.NotLoaded,n=e.Loading,i=e.Loaded,r=e.Unloading,a=e.FatalError,s="cosk.application.loadDriverDelegate",o="cosk.application.loadCloudOSServiceDelegate",u=n$103.extend(n$223,n$225,{name:n$9({readOnly:!0}),cloudOSState:n$9({readOnly:!0,get:function(){return this.getCurrentStateForStateEnumGroup(e)}}),driver:n$4({readOnly:!0,get:function(){var e=this._driver;return e||(e=this._driver=this.loadDriver(),e||n$11("Error loading cloud OS application driver.")),e}}),cloudOSService:n$4({readOnly:!0,get:function(){var e=this._cloudOSService;return e||(e=this._cloudOSService=this.loadCloudOSService(),e||n$11("Error loading cloud OS service")),e}}),init:function(n){this.redirectToCloudOSIfNeeded(),n.name||n$11("Cannot create application. Requires a name"),this.registerStateEnumGroup(e,t,a),this.__s._42HxLm56nyH$oL$init.call(this,n),n$63.set("outputMessagePrefix",this.get("capitalizedName")+":  "),n$203.set("cloudOSApplication",this)},capitalizedName:n$9({dependencies:["name"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&(r="i"!==r.charAt(0)?n$249(r):"i"+n$249(r.substring(1))),r}}),loadDriver:function(){var e=window[s];return e?(this.logTrace("using delegate to load driver"),e(this)):n$294.create({application:this})},loadCloudOSService:function(){var e=window[o];return e?(this.logTrace("using delegate to load CloudOS service"),e(this)):this.get("driver")
},load:function(){this.transitionFromStateToState(t,n.Init),this.get("driver").activate()},prepareForLoad:function(){this.transitionFromStateToState(n.Init,n.Prepare)},didPrepareForLoad:function(){this.transitionFromStateToState(n.Prepare,n.Finalize),this.get("driver").applicationDidPrepareForLoad()},didBecomeLoaded:function(){this.transitionFromStateToState(n.Finalize,i.Prepared)},willBecomeActive:function(){this.fatalErrorIfNotInState(i.Prepared,i.Suspended),this.setState(i.Activating)},didBecomeActive:function(){this.transitionFromStateToState(i.Activating,i.Active)},willBecomeSuspended:function(){this.transitionFromStateToState(i.Active,i.Suspending)},didBecomeSuspended:function(){this.transitionFromStateToState(i.Suspending,i.Suspended)},willBecomeUnloaded:function(){this.setState(r),this.get("driver").didStartDeactivation()},didBecomeUnloaded:function(){this.transitionFromStateToState(r,t),this.get("driver").didFinishDeactivation()},didFetchStartup:function(){},quotaDataDidChange:n$23,receiveMeCard:n$23,didReceiveNotification:n$23,isReadyToTerminate:n$9(!0),shouldRefresh:function(){},toString:function(){var e=n$24(this),t=this._name;return"["+e+": "+t+"]"},fatalExceptionHandlerClass:n$295,handleException:function(e){this.__s._42HxLm56nyH$24F$handleException.apply(this,arguments);var t=this.fatalExceptionHandlerClass.create({error:e});t.handleException()},_isReadyToTerminateDidChange:n$170("isReadyToTerminate",function(e){this._isReadyToTerminate=e;var t=this.get("cloudOSService");t&&t.isReadyToTerminateDidChange(e)}),transitionFromStateToState:function(){this.__s._42HxLm56nyH$2Ey$transitionFromStateToState.apply(this,arguments),this.propertyChanged("cloudOSState")
},setState:function(){this.__s._42HxLm56nyH$2GV$setState.apply(this,arguments),this.propertyChanged("cloudOSState")},redirectToCloudOSIfNeeded:function(){var e=window.location.pathname;if(window===window.top&&"/"!==e){var t=e.match(/\/applications\/(.*?)\//);t&&t[1]&&(window.location="https://"+window.location.hostname+"/#"+t[1])}},appPreferencesDidChange:n$23,accountPreferencesDidChange:n$23,__superMap:{_42HxLm56nyH$oL$init:"init",_42HxLm56nyH$24F$handleException:"handleException",_42HxLm56nyH$2Ey$transitionFromStateToState:"transitionFromStateToState",_42HxLm56nyH$2GV$setState:"setState"}});n$427=e,n$515=u,u.__QUALIFIED_CLASS_NAME__="COSK.Application"}();
    
    
        
!function(){"use strict";var COMPILATION_THRESHOLD=250,ArraySet=n$5.extend({_useCount:0,_isCompiled:!1,mappedKey:void 0,mappedItems:null,init:function(e){this.__s._29dD2WX7C2W$Ys$init.call(this),this.items=[],this.length=0,this._indexKey="_indexInSet"+n$22(this),void 0!==e&&(this.mappedKey=e),this.mappedKey&&(this.mappedItems={},this._mappedValueKey="_mappedValueInSet"+n$22(this))},add:function(e){if(this._compileIfNeeded(),!e)return-1;var t=e[this._indexKey];if(t>-1)return t;if(t=this.length++,e[this._indexKey]=t,this.items[t]=e,this.mappedItems){var n=e[this._mappedValueKey]=n$33(e)?e.get(this.mappedKey):e[this.mappedKey];this.mappedItems[n]=e}return t},remove:function(e){if(!e)return!1;var t=e[this._indexKey];if(void 0===t||-1===t)return!1;var n,i=this.items,r=this.length;return t!==r&&(n=i[r-1],i[t]=n,n[this._indexKey]=t),e[this._indexKey]=-1,i[r-1]=null,--this.length,this.mappedItems&&delete this.mappedItems[e[this._mappedValueKey]],!0},clear:function(){var e,t=this.items,n=this.length;if(this.mappedItems){var i=this.mappedItems;for(e=0;n>e;e++)delete i[t[e][this._mappedValueKey]],t[e][this._indexKey]=-1,t[e]=null}else for(e=0;n>e;e++)t[e][this._indexKey]=-1,t[e]=null;this.length=0},indexOf:function(e){return e?(0|e[this._indexKey]+1)-1:-1},contains:function(e){return-1!==this.indexOf(e)},sort:function(e){this.items.length=this.length,this.items.sort(e)},subtract:function(e){for(var t=e.items,n=e.length,i=0;n>i;i++)this.remove(t[i])},toArray:function(){return this.items.length=this.length,this.items.slice()},_compileIfNeeded:function(){!this._isCompiled&&++this._useCount>COMPILATION_THRESHOLD&&this._compile()
},_compile:function(){if(!this._isCompiled){this._isCompiled=!0;for(var keyIdx=compilableMethods.length,evalStr="",indexKeyLookupReplacement="."+this._indexKey,mappedValueKeyLookupReplacement="."+this._mappedValueKey,key,funcString;keyIdx--;)key=compilableMethods[keyIdx],funcString=this[key].toString().replace(indexKeyLookupMatchRegex,indexKeyLookupReplacement).replace(mappedValueKeyLookupMatchRegex,mappedValueKeyLookupReplacement).replace(compileMatchString,""),evalStr+="this."+key+" = "+funcString+";";eval(evalStr)}},__superMap:{_29dD2WX7C2W$Ys$init:"init"}}),compilableMethods="add remove clear indexOf".split(" "),compileMatchString="this._compileIfNeeded();",indexKeyLookupMatchRegex=/\[this\._indexKey\]/g,mappedValueKeyLookupMatchRegex=/\[this\._mappedValueKey\]/g,PrecompiledArraySet=ArraySet.extend({init:function(){this.__s._29dD2WX7C2W$2St$init.apply(this,arguments),this._compile()},__superMap:{_29dD2WX7C2W$2St$init:"init"}}),StrongArraySet=ArraySet.extend({add:function(e){return this.contains(e)||e.retain(this),this.__s._29dD2WX7C2W$2XB$add.apply(this,arguments)},remove:function(e){var t=this.__s._29dD2WX7C2W$2YF$remove.apply(this,arguments);return t&&e.release(this),t},clear:function(){for(var e=this.items,t=this.length,n=0;t>n;n++)e[n].release(this);this.__s._29dD2WX7C2W$2d2$clear.apply(this,arguments)},_compileIfNeeded:function(){},__superMap:{_29dD2WX7C2W$2XB$add:"add",_29dD2WX7C2W$2YF$remove:"remove",_29dD2WX7C2W$2d2$clear:"clear"}});n$439=ArraySet,n$297=PrecompiledArraySet,n$724=StrongArraySet,ArraySet.__QUALIFIED_CLASS_NAME__="Photos.ArraySet",PrecompiledArraySet.__QUALIFIED_CLASS_NAME__="Photos.PrecompiledArraySet",StrongArraySet.__QUALIFIED_CLASS_NAME__="Photos.StrongArraySet"
}();
    
    
        
!function(){"use strict";var t,e=function(){return t=i,o.apply(this,arguments)},n=function(){return t=r,o.apply(this,arguments)},i=function(t){return u.define(t)},r=function(t){return n$9(t)},a=function(t){return i(function(){return t.bind(this)})},s=function(t){return i(function(){var e=t.bind(this);return function(){return n$104(e,arguments)}})},o=function(e,n,i,r){var a=Array.prototype.slice.call(arguments,1);if(e.isClass)return t(function(){return e.create.apply(e,a)});switch(a.length){case 0:return t(function(){return new e});case 1:return t(function(){return new e(n)});case 2:return t(function(){return new e(n,i)});case 3:return t(function(){return new e(n,i,r)});default:n$11("Can't use more than three constructor argument with a `newInstanceOf` property.")}},u=n$30.extend({init:function(t){this.__s._2tA2ovp8zh2$2I8$init.call(this),this.provider=t},isOnlyMetadataForKey:!1,initializeMemberForInstance:function(t){return this.provider.call(t)},__superMap:{_2tA2ovp8zh2$2I8$init:"init"}});n$305=e,n$424=n,n$514=i,n$836=r,n$299=a,n$528=s,u.__QUALIFIED_CLASS_NAME__="Photos.InstantiatorMetadata$243"}();
    
    
        
!function(){"use strict";var e=n$5.extend({init:function(){this.__s._4dicwqkaI6U$6n$init.call(this),this.firstItem=this.lastItem=null,this.length=0;var e=n$22(this);this.nextKey="_nextInQueue"+e,this.prevKey="_previousInQueue"+e,this.existenceKey="_existentInQueue"+e},enqueue:function(e,t){var n=this.nextKey,r=this.prevKey,i=this.existenceKey;if(e[i]){if(!t)return;this.remove(e)}var s=e[n]=this.firstItem;e[r]=null,s&&(s[r]=e),this.firstItem=e,e[i]=!0,this.length++,1===this.length&&(this.lastItem=e)},dequeue:function(){var e=this.nextKey,t=this.prevKey,n=this.existenceKey;if(0===this.length)return null;var r=this.lastItem,i=this.lastItem=r[t]||null;return i?i[e]=null:this.firstItem=null,this.length--,r[n]=!1,r},remove:function(e){var t=this.nextKey,n=this.prevKey,r=this.existenceKey;if(!e[r])return!1;var i=e[n],s=e[t];return i&&(i[t]=s),s&&(s[n]=i),this.lastItem===e&&(this.lastItem=i||null),this.firstItem===e&&(this.firstItem=s||null),this.length--,e[r]=!1,e[t]=e[n]=null,!0},clear:function(){var e,t=this.nextKey,n=this.prevKey,r=this.existenceKey,i=this.firstItem;for(this.firstItem=this.lastItem=null,this.length=0;i;)e=i[t],i[r]=!1,i[t]=i[n]=null,i=e},contains:function(e){return!(!e||!e[this.existenceKey])},toArray:function(){var e=this._arrayRepresentation||(this._arrayRepresentation=[]);e.length=0;var t=this.firstItem,n=this.nextKey;if(!t)return e;do e.push(t);while(t=t[n]);return e},__superMap:{_4dicwqkaI6U$6n$init:"init"}});n$300=e,e.__QUALIFIED_CLASS_NAME__="Photos.DoublyLinkedListQueueSet"}();
    
    
        
!function(){"use strict";var e=function(){var e=(new Error).stack;if(!e)try{throw new n$292}catch(t){e=t.stack}return e+="",e=e.substring(2+e.indexOf("\n",1+e.indexOf("\n",e.indexOf("getStack"))))};n$301=e}();
    
    
        
!function(){"use strict";var e,t;n$298.observe("enableRetainReleaseTracking",function(t){e=t}),n$298.observe("includeStacksWithRetainReleaseTracking",function(e){t=e});var n={isCacheableInPool:!1,_poolRetainCount:0,isInitializedFromPool:!1,_baseInitFromPoolCalled:!1,_enableRetainReleaseTracking:!1,_includeStacksWithRetainReleaseTracking:!1,initFromPool:function(){this._baseInitFromPoolCalled&&n$11("Reinitializing an object of type "+n$24(this)+" from the pool that was not cleared for reuse.",this),this._baseInitFromPoolCalled=!0,this._setUpRetainReleaseTracking()},_setUpRetainReleaseTracking:function(n,r){this._enableRetainReleaseTracking=n||e,this._includeStacksWithRetainReleaseTracking=r||t},retain:function(e){if(++this._poolRetainCount,this.constructor._activeSet.contains(this)||n$11("Retain called on an object of type "+n$24(this)+" that is not active.",this),this._baseInitFromPoolCalled||n$11("Retain called on an object of type "+n$24(this)+" that was not initialized from the pool.",this),this._enableRetainReleaseTracking){e&&!n$57(e)&&(e=n$24(e));var t=this._poolingDebug=this._poolingDebug||{},n=t[e]=t[e]||{};n.retainCount=(n.retainCount||0)+1,n.highestRetainCount=Math.max(n.retainCount,n.highestRetainCount||-1),n.history=n.history||[],n.history.push(c()),this._includeStacksWithRetainReleaseTracking&&(n.stacks=n.stacks||[],n.stacks.push(n$301()))}return this},release:function(e){if(--this._poolRetainCount,this._enableRetainReleaseTracking){e&&!n$57(e)&&(e=n$24(e));var t=this._poolingDebug&&this._poolingDebug[e],n=t&&--t.retainCount;(0>n||isNaN(n))&&(n$63.warn("Overreleasing object of type "+n$24(this)+' for reason "'+e+'". Reason arguments for retain/release may be mismatched.'),t&&(t.hadOverrelease=!0)),t&&(t.history.push(-c()),t.stacks&&t.stacks.push(n$301()))
}return 0===this._poolRetainCount?(this._disposeWillFail&&n$11("Thenable callback will result in overrelease of "+n$24(this)+".",this),this.constructor._releaseItemToPool(this)):this._poolRetainCount<0&&n$11("Overreleasing object of type "+n$24(this)+".",this),this},autorelease:function(e){return r[o]=this,i[o]=e,o++,u(),this},reactivate:function(){this._baseInitFromPoolCalled||n$11("Called `reactivate` on an object of type "+n$24(this)+" that was not initialized from the pool.",this),this.constructor._activeSet.contains(this)||(this.constructor._cacheQueue.remove(this),this.constructor._activeSet.add(this),this.didExitPoolCache())},didEnterPoolCache:n$23,didExitPoolCache:n$23,dispose:function(){this._baseInitFromPoolCalled||n$11("Dispose called on an object of type "+n$24(this)+" that was not initialized from the pool.",this),this._baseInitFromPoolCalled=!1},staticMembers:{maxCacheLength:2e3,livingInstanceSet:null,init:function(){this.__s._2KID2ltiOUZ$3Vd$init.apply(this,arguments),this.livingInstanceSet=n$297.create(),this._activeSet=n$297.create(),this._pooledInstances=[],this._cacheQueue=n$300.create(),this._cacheHash={},this._supportsPoolCaching=!!this.prototype.isCacheableInPool},create:function(){f._recordEvent(this,"create (any path)");var e,t;return this._supportsPoolCaching&&(e=this.computePoolingCacheKey.apply(this,arguments),t=this._cacheHash[e])?(t.reactivate(),f._recordEvent(this,"create (get from cache)"),t):(!t&&this._pooledInstances.length&&(t=this._pooledInstances.pop(),f._recordEvent(this,"create (get from pool)")),t||(t=this.__s._2KID2ltiOUZ$497$create.call(this),f._recordEvent(this,"create (create new instance)")),this._activeSet.add(t),this.livingInstanceSet.add(t),t.initFromPool.apply(t,arguments),t._baseInitFromPoolCalled||n$11("Base initFromPool was never invoked. Overridden initFromPool methods must always call `super`.",""+this),t.isInitializedFromPool=!0,this._supportsPoolCaching&&(this._cacheKey||(this._cacheKey="_poolCacheKeyFor"+n$22(this)),t[this._cacheKey]=e,this._cacheHash[e]=t),t)
},_releaseItemToPool:function(e){this._activeSet.remove(e),e.isCacheableInPool===!0||e.isCacheableInPool instanceof Function&&e.isCacheableInPool()?(this._cacheQueue.enqueue(e),e.didEnterPoolCache(),this.prunePoolCache(),f._recordEvent(this,"put in cache")):this._trulyReleaseItemToPool(e)},reinitializePool:function(){this.clearPoolCache(),this._activeSet.clear(),this._pooledInstances.length=0},computePoolingCacheKey:function(){var e,t=arguments,n=t.length,r=n$22(t[0]);for(e=1;n>e;e++)r+=":"+n$22(t[e]);return r},_poolingStats:function(){var e;return this._statsHash||(this._statsHash={}),e=this._statsHash,e.active=this._activeSet.length,e.pooled=this._pooledInstances.length,this._supportsPoolCaching&&(e.cached=this._cacheQueue.length),e},_trulyReleaseItemToPool:function(e){this.livingInstanceSet.remove(e),e.isCacheableInPool&&(delete this._cacheHash[e[this._cacheKey]],e[this._cacheKey]=void 0),e._poolRetainCount&&n$11("Object of type "+n$24(e)+" released to pool with retain count > 0.",e),e.dispose(),e._baseInitFromPoolCalled&&n$11("Base dispose was never invoked for object of type "+n$24(e)+". Overridden dispose methods must always call `super`.",e),e.isInitializedFromPool=!1,this._pooledInstances.push(e),e._enableRetainReleaseTracking&&(e._previousPoolingDebugs=e._previousPoolingDebugs||[],e._previousPoolingDebugs.push(e._poolingDebug),e._poolingDebug=null),f._recordEvent(this,"put in pool")},isCacheLengthAcceptable:function(e){return e<=this.maxCacheLength},prunePoolCache:function(){if(!this._isPruningPoolCache){this._isPruningPoolCache=!0;for(var e=this._cacheQueue;e.length&&!this.isCacheLengthAcceptable(e.length);)this._trulyReleaseItemToPool(e.dequeue());
this._isPruningPoolCache=!1}},_isPruningPoolCache:!1,clearPoolCache:function(){for(var e=this._cacheQueue;e.length;)this._trulyReleaseItemToPool(e.dequeue())},__superMap:{_2KID2ltiOUZ$3Vd$init:"init",_2KID2ltiOUZ$497$create:"create"}},logPoolingDebug:function(e){h(this,e)}},r=[],i=[],o=0,s=0,a=function(){s=0;for(var e=o;e--;)r[e].release(i[e]),r[e]=i[e]=null;o=0},u=function(){s||(s=n$130(a,0))},c=function(){var e=Date.now();return function(){return(Date.now()-e)/1e3}}(),l=function(e){Function.prototype.call.call(console.group||console.info,console,e)},d=function(){console.groupEnd&&console.groupEnd()},h=function(e,t){var n=t>=1,r=t>=2;l("Pooling info for "+e),console.log("isInitializedFromPool: "+e.isInitializedFromPool+"\n"+"_poolRetainCount:      "+e._poolRetainCount+"\n"+"In pool cache:         "+e.constructor._cacheQueue.contains(e)+"\n"+"Dormant in pool:       "+(-1!==e.constructor._pooledInstances.indexOf(e))),e._poolingDebug&&(l("Current Lifecycle"),p(e._poolingDebug,n,r),d());var i=e._previousPoolingDebugs;if(i)for(var o=i.length-1;o>=0;o--)l("Lifecycle #"+(o+1)),p(i[o],n,r),d();d()},p=function(e,t,n){var r="";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(t){l("Retains from "+("undefined"===i?"unspecified owners":i));var s="";s+="\nCurrent count: "+o.retainCount,s+="\nHighest count: "+o.highestRetainCount,o.hadOverrelease&&(s+="\n*** Warning: this owner overreleased! ***"),s+="\nFull history:";for(var a=o.history,u=o.stacks,c=u&&n,h=!1,p=-1,g=0;g<a.length;g++)h=h||a[g]<0,p=Math.max(p,((0|Math.abs(a[g]))+"").length+4);for(g=0;g<a.length;g++){var f=Math.abs(a[g])+"";
for(f+=-1===f.indexOf(".")?".":"";f.indexOf(".")>=f.length-3;)f+="0";for(;f.length<p;)f=" "+f;if(s+="\n  "+(a[g]>0?"retain"+(h&&!c?" ":""):"release")+" at "+f+"s",u){var _=u[g];s+=n?"\n"+_.replace(/^\s*/gm,"    "):" at "+_.substring(0,_.indexOf("\n"))}}console.log(s.substring(1)),d()}else r+="\n"+o.retainCount+" current ("+o.highestRetainCount+" max)"+" retain"+(1===o.retainCount&&1===o.highestRetainCount?"":"s")+" from "+("undefined"===i?"unspecified owners":i)+(o.hadOverrelease?" ***Overreleased!***":"")}r&&console.log(r.substring(1))},g=1,f={_stats:{},_recordEvent:function(e,t){e.hasOwnProperty("_globalStatKey")||(e._globalStatKey=e.__QUALIFIED_CLASS_NAME__,e.hasOwnProperty("__QUALIFIED_CLASS_NAME__")||(e._globalStatKey="anonymous subclass of "+e._globalStatKey+" $"+g++)),this._stats[e._globalStatKey]||(this._stats[e._globalStatKey]={_class:e}),this._stats[e._globalStatKey][t]=1+(0|this._stats[e._globalStatKey][t])},reset:function(){this._stats={}},log:function(){Object.keys(this._stats).forEach(function(e){l(e);var t=this._stats[e];Object.keys(t).forEach(function(e){"_"!==e[0]&&(-1===e.indexOf("cache")||t._class._supportsPoolCaching)&&console.log(e+": "+t[e])},this);var n=t._class._poolingStats();Object.keys(n).forEach(function(e){console.log("currently "+e+": "+n[e])},this),d()},this)}};n$302=n,n$933=f}();
    
    
        
!function(){"use strict";function e(e,t){var n=this._previousValueKey,i=e[n];return i!==t&&(e[n]=t,t&&t.retain(this._retainReasonName),i&&i.release(this._retainReasonName)),t}function t(){return i.define.apply(i,arguments)}var n={mixinDependencies:[n$10],unsetAllStrongRefs:function(e,t){var n=this.getMetadataByType(i),r=e?!this.instanceOf(n$302):!1;for(var s in n){var a=n[s],o=this[a._previousValueKey];o&&(r?t&&2!==t||o.release(a._retainReasonName):a.readOnly||t&&1!==t||this.set(s,null))}},dispose:function(){this.unsetAllStrongRefs(!0,1),this.__s._3otaDVT0laN$qX$dispose.apply(this,arguments),this.unsetAllStrongRefs(!0,2)},__superMap:{_3otaDVT0laN$qX$dispose:"dispose"}},i=n$8.extend({requiresSupport:n,wasRegistered:function(t,n){this._previousValueKey="_previousValue_"+n,this._retainReasonName="StrongRef `"+n+"` on "+n$24(t);var i=this,r=this.didChange;r||(r=n$23),r._strongRef_isWrappedWithAutorelease||(this.didChange=function(t){e.call(i,this,t),r.call(this,t)},this.didChange._strongRef_isWrappedWithAutorelease=!0),this.__s._3otaDVT0laN$1I0$wasRegistered.apply(this,arguments)},__superMap:{_3otaDVT0laN$1I0$wasRegistered:"wasRegistered"}});n$364=n,n$934=i,n$355=t,i.__QUALIFIED_CLASS_NAME__="Photos.StrongRef"}();
    
    
        
!function(){"use strict";var t=function(t,e){return t-e};t.reverse=function(t,e){return e-t};var e=function(t,e,n){if(t.length!==e.length)n$11("Trying to sort arrays of different length together.");else if(!t.length)return;var i,r,a;"object"==typeof t[0]?(i=t,r=e,a=n?function(t,e){return n.call(this,t,e,t._sortTogetherPair,e._sortTogetherPair)}:void 0):(i=e,r=t,a=n?function(t,e){return n.call(this,t._sortTogetherPair,e._sortTogetherPair,t,e)}:void 0);for(var s=i.length,o=s;o--;)i[o]._sortTogetherPair=r[o];for(i.sort(a),o=s;o--;)r[o]=i[o]._sortTogetherPair,delete i[o]._sortTogetherPair};n$303=t,n$304=e}();
    
    
        
!function(){"use strict";var e=[0],t=n$5.extend({NativeType:Array,length:0,init:function(e,n){this.__s._18MYqnbDeNW$Am$init.call(this);var i;e&&e.instanceOf&&e.instanceOf(t)&&(i=e,e=i.NativeType,n=i.length),e&&(this.NativeType=e),n&&(this.length=n),this._isTyped=this.NativeType!==Array,this._initLength=this._isTyped?this.length||512:this.length,this._items=new this.NativeType(this._initLength),i&&this.set(i)},deepCopy:function(){return this.constructor.create(this)},itemAt:function(e){return e<this.length?this._items[e]:0},setItemAt:function(e,t){e<this.length?this._items[e]=t:this.insertAt(e,t)},insertAt:function(e,t){for(var n=Math.max(e+1,this.length+1),i=this._grow(n),r=this.length;n>r;r++)i[r]=0;for(r=n-1;r>=e;r--)i[r+1]=i[r]||0;i[e]=t,this.length=n},push:function(e){var t=this._grow(this.length+1);t[this.length++]=e},pop:function(){if(!this.length)return void 0;var e=--this.length,t=this._items[e];return this._isTyped||(this._items[e]=void 0),t},unshift:function(e){this.insertAt(0,e)},shift:function(){if(!this.length)return void 0;var t=this._items[0];return this.removeItemsAtIndexes(e),t},clear:function(){var e,t,n=this.length;if(n&&(this.length=0,!this._isTyped))for(e=this._items,t=0;n>t;t++)e[t]=void 0},set:function(e){var n,i,r=this._items;if(e.instanceOf(t)?(i=e.length,e=e._items):i=e.length,this.length=i,this._isTyped)i>r.length&&(this.clear(),r=this._grow(i)),r.set(e),this.length=i;else for(n=0;i>n;n++)r[n]=e[n]},slice:function(e,t,n){var i,r,s=n||[],a=this._items;for(void 0===e?e=0:0>e?e+=this.length:e>this.length&&(e=this.length),void 0===t||t>this.length?t=this.length:0>t&&(t+=this.length),r=t-e,s.length!==r&&(s.length=r),i=e;t>i;i++)s[i-e]=a[i];
return s},_grow:function(e){if(!this._isTyped)return this._items;if(e){if(e<=this._items.length)return this._items;this._growthFactor=Math.pow(2,Math.ceil(Math.log(e/this._initLength)/Math.log(2))-1)}this._growthFactor=2*(this._growthFactor||1);var t=this._items,n=new this.NativeType(this._initLength*this._growthFactor);return this.length&&n.set(t),this._items=n,n},removeItemsAtIndexes:function(e,t){if(e.length){t||(e=e.slice().sort(n$303));for(var n=this._items,i=0,r=e[i],s=this.length;s>r;r++)r!==e[i]?n[r-i]=n[r]:i++;this.length-=i}},insertItemsAtIndexes:function(e,t,n){if(e.length){n||(e=e.slice(),t=t.slice(),n$304(e,t,n$303));for(var i=0,r=0,s=this.length,a=[];e[i]<s;){var o=t[i].length;r+=o,a[i]=e[i]+o-1,s+=o,i++}var l,u,c,h,d;if(r){var f=this._grow(s);for(l=s,u=i-1;l--;)if(l===a[u]){for(d=t[u],h=d.length,r-=h;h--;)f[l]=d[h],h&&l--;u--}else f[l]=f[l-r]}if(this.length=s,i!==e.length)for(u=i,c=e.length;c>u;u++){d=t[u];var p=e[u];for(h=d.length;h--;)this.setItemAt(p+h,d[h])}}},toString:function(){for(var e=this.__s._18MYqnbDeNW$2ab$toString.call(this),t=this._items,n=this.length>0?""+t[0]:"",i=1;100>i&&i<this.length;i++)n+=","+t[i];return this.length>100&&(n+=",…"),e=e.slice(0,-1)+":"+n+"]"},equals:function(e){if(this===e)return!0;if(this.length!==e.length)return!1;for(var t=this.length;t--;)if(this.itemAt(t)!==e.itemAt(t))return!1;return!0},__superMap:{_18MYqnbDeNW$Am$init:"init",_18MYqnbDeNW$2ab$toString:"toString"}});n$317=t,t.__QUALIFIED_CLASS_NAME__="Photos.BigArray"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],getFirstItem:n$48.create(),getLastItem:n$48.create(),getItemRelativeToItem:n$48.create(),getNumberOfItemsBefore:n$48.create(),getNumberOfItemsAfter:n$48.create(),dataForItem:function(e){return e},idForItem:function(e){return n$22(this.dataForItem(e))},retainItem:function(){},releaseItem:function(){},itemHasBeenRemoved:function(){}};n$306=e}();
    
    
        
!function(){"use strict";var e=n$5.extend({_desiredClass:null,_pool:n$305(Array),_activeInstanceCount:0,init:function(e){this.__s._35032aVC7Yj$Mm$init.call(this),this._desiredClass=e},getInstance:function(){var e=this._pool.pop()||this.createInstance();return e._photosPoolDisposed=!1,this._activeInstanceCount++,e},getAutodisposingInstance:function(){var e=this.getInstance();return this.autodispose(e),e},autodispose:function(e){e._photosAutodisposePoolOwner||(e._photosAutodisposePoolOwner=this,t.push(e),n||(n=n$130(r,0)))},createInstance:function(){var e=this._desiredClass;return e.isClass?e.create():new e},disposeInstance:function(e){e._photosAutodisposePoolOwner&&n$11("Manually disposing auto-disposing instance to pool: "+this),e._photosPoolDisposed&&n$11("Over-disposing to pool: "+this),e._photosPoolDisposed=!0,this._activeInstanceCount--,this._pool.push(e)},__superMap:{_35032aVC7Yj$Mm$init:"init"}}),t=[],n=null,r=function(){for(var e=t.length;e--;){var r=t[e],i=r._photosAutodisposePoolOwner;delete r._photosAutodisposePoolOwner,i.disposeInstance(r)}t.length=0,n=null},i=e.extend({createInstance:function(){return[]},getInstance:function(){var e=this.__s._35032aVC7Yj$1Ia$getInstance.apply(this,arguments);return e.length&&n$11("ArrayPool#getInstance is returning an array of length > 0. This indicates usage of a disposed instance."),e},getWrapperInstance:function(e){var t=this.getInstance();return t[0]=e,t},getWrapperAutodisposingInstance:function(e){var t=this.getAutodisposingInstance();return t[0]=e,t},getInstanceFromSlice:function(e,t,n){var r=e.length;t=void 0===t?0:t,n=void 0===n?r:n,0>t&&(t=Math.max(r+t,0)),0>n&&(n=Math.max(r+n,0));
for(var i=this.getInstance(),s=t;n>s&&r>s;s++)i.push(e[s]);return i},disposeInstance:function(e){this.__s._35032aVC7Yj$1ZX$disposeInstance.apply(this,arguments),e.length=0},__superMap:{_35032aVC7Yj$1Ia$getInstance:"getInstance",_35032aVC7Yj$1ZX$disposeInstance:"disposeInstance"}}),s=e.extend({createInstance:function(){return{}},disposeInstance:function(e){this.__s._35032aVC7Yj$1hw$disposeInstance.apply(this,arguments);for(var t in e)e.hasOwnProperty(t)&&delete e[t]},__superMap:{_35032aVC7Yj$1hw$disposeInstance:"disposeInstance"}}),o=e.extend({createInstance:function(){return new Image},disposeInstance:function(e){this.__s._35032aVC7Yj$1o6$disposeInstance.apply(this,arguments),e.removeAttribute("src")},__superMap:{_35032aVC7Yj$1o6$disposeInstance:"disposeInstance"}}),a=e.extend({createInstance:function(){return document.createElement("canvas")},disposeInstance:function(e){this.__s._35032aVC7Yj$1_d$disposeInstance.apply(this,arguments),e.width=e.height=0},__superMap:{_35032aVC7Yj$1_d$disposeInstance:"disposeInstance"}}),u=i.create(),l=s.create(),c=o.create(),d=a.create();n$437=e,n$935=i,n$936=s,n$937=o,n$938=a,n$319=u,n$307=l,n$499=c,n$500=d,e.__QUALIFIED_CLASS_NAME__="Photos.Pool",i.__QUALIFIED_CLASS_NAME__="Photos.ArrayPool",s.__QUALIFIED_CLASS_NAME__="Photos.ObjectPool",o.__QUALIFIED_CLASS_NAME__="Photos.ImagePool",a.__QUALIFIED_CLASS_NAME__="Photos.CanvasPool"}();
    
    
        
!function(){"use strict";function e(e,t){return e-t*Math.floor(e/t)}n$308=e}();
    
    
        
!function(){"use strict";var e={NONE:null,DELETE:"delete",EXPUNGE:"expunge",REMOVE:"remove"},t=n$298.get("preloadingWindowSize"),n=n$298.get("preloadingWindowThreshold"),i={mixinDependencies:[n$306],hasUniqueIds:!1,INSERT:"insert",REMOVE:"remove",UPDATE:"update",itemClass:n$4({get:function(){return this._itemClass||n$309}}),itemCount:n$81.create(),contentsWillChange:n$12(!0),contentsDidChange:n$12({defaultArgument:!0,willPropagate:function(){this._clearUniqueIdIndexing(),this._lastPreloadedStartIndex=this._lastPreloadedEndIndex=0/0,this.set("contentStateToken",1e6*(Date.now()%1e6)+(0|1e6*Math.random()))}}),contentStateToken:n$4(0/0),itemAtIndex:n$48.create(),removeItemsAtIndexes:function(){n$11("removeItemsAtIndexes invoked on an IndexedModelProvider without an overriding implementation.",this)},removeItemsAtIndexesAndWriteToServer:function(){n$11("removeItemsAtIndexesAndWriteToServer invoked on an IndexedModelProvider without an overriding implementation.",this)},preloadRange:n$48.create(),preloadModelsNearRange:function(e,t){this._preloadModelsNearRange(e,t,!1)},preloadModelsNearRangeWrapped:function(e,t){this._preloadModelsNearRange(e,t,!0)},_preloadModelsNearRange:function(e,i,r){void 0===i&&(i=e+1);var a=this.get("itemCount");e=Math.min(Math.max(e,0),a),i=Math.min(Math.max(i,0),a);var s=Math.ceil((e-n-t)/t)*t,o=Math.floor((i+n+t)/t)*t;if(r&&o-s>=a)return this.preloadRange(0,a),void 0;var u=!1;r?(o--,0>s&&(u=!0,s=n$308(s,a)),o>=a&&(u=!0,o=n$308(o,a)),o++):(s=Math.max(s,0),o=Math.min(o,a)),u?s>o?(this.preloadRange(0,o),this.preloadRange(s,a)):n$11("invalid preload index range"):this.preloadRange(s,o)
},init:function(){this.__s._16eRVbxcs8s$362$init.apply(this,arguments);var e=this.hasUniqueIds=this.uniqueIdForIndex instanceof Function&&this.uniqueIdForItem instanceof Function;e&&(this._baseUniqueIdForIndex=this.uniqueIdForIndex,this.uniqueIdForIndex=this._cachedUniqueIdForIndex),this._unshieldedPreloadRange=this.preloadRange,this.preloadRange=this._shieldedPreloadRange},_shieldedPreloadRange:function(e,t){this._lastPreloadedStartIndex<=e&&this._lastPreloadedEndIndex>=t||(this._lastPreloadedStartIndex=e,this._lastPreloadedEndIndex=t,this._unshieldedPreloadRange(e,t))},_lastPreloadedStartIndex:0/0,_lastPreloadedEndIndex:0/0,uniqueIdForIndex:null,uniqueIdForItem:null,indexForUniqueId:function(e){this._hasUniqueIdIndexing||this._buildUniqueIdToIndexMap();var t=this._uniqueIdToIndex[e];return void 0===t?-1:t},itemForUniqueId:function(e){var t=this.indexForUniqueId(e);return-1===t?void 0:this.itemAtIndex(t)},indexOfItem:function(e){if(this.hasUniqueIds)return this.indexForUniqueId(this.uniqueIdForItem(e));for(var t=this.get("itemCount");t--;)if(this.itemAtIndex(t).retain(this).release(this)===e)return t;return-1},_buildUniqueIdToIndexMap:function(){if(this.hasUniqueIds){this._clearUniqueIdIndexing();for(var e,t=this._uniqueIdToIndex||(this._uniqueIdToIndex={}),n=this._indexToUniqueId||(this._indexToUniqueId=[]),i=this.get("itemCount"),r=0;i>r;r++)e=this._baseUniqueIdForIndex(r),t[e]=r,n[r]=e;this._hasUniqueIdIndexing=!0}},_clearUniqueIdIndexing:function(){var e=this._uniqueIdToIndex,t=this._indexToUniqueId;if(e&&t){for(var n=t.length,i=0;n>i;i++)e[t[i]]=void 0;this._hasUniqueIdIndexing=!1
}},_cachedUniqueIdForIndex:function(e){return this._hasUniqueIdIndexing?this._indexToUniqueId[e]:this._baseUniqueIdForIndex(e)},getFirstItem:function(){return this.itemAtIndex(0)},getLastItem:function(){return this.itemAtIndex(this.get("itemCount")-1)},getItemRelativeToItem:function(e,t){var n=this.indexOfItem(e)+t;return 0>n||n>=this.get("itemCount")?null:this.itemAtIndex(n)},getNumberOfItemsBefore:function(e){return this.indexOfItem(e)},getNumberOfItemsAfter:function(e){return this.get("itemCount")-this.indexOfItem(e)-1},dataForItem:function(e){return this.indexOfItem(e)},idForItem:function(e){return this.hasUniqueIds?this.uniqueIdForItem(e):n$22(e)},retainItem:function(e){e&&e.retain(this)},releaseItem:function(e){e&&e.release(this)},itemHasBeenRemoved:function(e){return-1===this.indexOfItem(e)},__superMap:{_16eRVbxcs8s$362$init:"init"}},r={mixinDependencies:[i],childrenModelProvider:n$85.create(),childRangeStartForGroupAtIndex:n$48.create(),childRangeEndForGroupAtIndex:n$48.create(),childCountForGroupAtIndex:n$48.create()},a={mixinDependencies:[i],aspectRatioEstimateForItemAtIndex:n$48.create(),isAddAllowed:n$9(!1),isRemoveAllowed:n$9(!1),isGone:n$9(!1),removeType:n$9(e.NONE),areItemsModifiable:n$9(!1)};n$366=e,n$318=i,n$452=r,n$325=a}();
    
    
        
!function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={_jsConvertToBytes:function(t){var n,r,i,s,o=[],a=0;if(!t)return o;for(;a<t.length;)n=e.indexOf(t.charAt(a++)),r=e.indexOf(t.charAt(a++)),i=e.indexOf(t.charAt(a++)),s=e.indexOf(t.charAt(a++)),o.push(n<<2|r>>4),64!==i&&o.push((15&r)<<4|i>>2),64!==s&&o.push((3&i)<<6|s);return o},_jsConvertFromBytes:function(t){for(var n=[],r=0,i=t.length;i>r;r+=3)for(var s=t[r]<<16|t[r+1]<<8|t[r+2],o=0;4>o;o++)8*r+6*o<=8*t.length?n.push(e.charAt(63&s>>>6*(3-o))):n.push("=");return n.join("")},convertToBytes:function(e){var t,n,r;if(!n$310.get("hasBase64")||!n$310.get("hasTypedArrays"))return this._jsConvertToBytes(e);t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n));for(var i=0;n>i;i++)r[i]=t.charCodeAt(i);return r},convertFromBytes:function(e){if(!n$310.get("hasBase64"))return this._jsConvertFromBytes(e);for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return window.btoa(t.join(""))}};n$314=t}();
    
    
        
!function(){"use strict";var e=n$5.extend({length:0,_startOffset:0,_byteArray:null,init:function(e){e&&(this._byteArray=e instanceof Uint8Array?e:new Uint8Array(e),this.length=8*this._byteArray.length),this.__s._4UhpxIy2fNJ$WK$init.call(this)},toBytes:function(){return this._byteArray?(this._startOffset%8&&this._zeroStartOffset(),this._byteArray.subarray(this._startOffset>>3,Math.ceil(this.length/8))):new Uint8Array(0)},read:function(e){e>this.length&&n$11("Cannot #read() past the end of a Bitstream.");for(var n=this._byteArray,r=this._startOffset,i=e,o=0;i;){var s=r%8,a=8-s,u=i>a?a:i;i-=u,o+=(n[r>>3]%t[a]>>a-u)*t[i],r+=u}return this._startOffset=r,this.length-=e,o},write:function(e,n){n>t[e]-1&&n$11("Cannot #write() "+n+" in binary using "+Math.min(53,e)+" bits.",{numberOfBits:e,bits:n});var r=this._startOffset,i=this.length+r,o=this._byteArray;if(o){if(e+i>8*o.length){var s=o;o=this._byteArray=new Uint8Array(2*o.length),o.set(s)}}else o=this._byteArray=new Uint8Array(128);for(;e;){var a=i%8,u=i>>3,c=a?o[u]:0,l=8-a,h=e>l?l:e,d=0|n/t[e-h],p=d*t[l-h];o[u]=c+p,i+=h,e-=h,n%=t[e]}this.length=i-r},_zeroStartOffset:function(){var t=this._startOffset;if(t){if(0===t%8)this._byteArray=this._byteArray.subarray(t>>3,this._byteArray.length);else{for(var n=e.create().retain(this),r=this.length;this.length;){var i=Math.min(this.length,53);n.write(i,this.read(i))}this.length=r,this._byteArray=n._byteArray,n.release(this)}this._startOffset=0}},__superMap:{_4UhpxIy2fNJ$WK$init:"init"}}),t=function(){for(var e=[],t=0;53>=t;t++)e[t]=Math.pow(2,t);return e}();n$315=e,e.__QUALIFIED_CLASS_NAME__="Photos.Bitstream"
}();
    
    
        
!function(){"use strict";var e=n$5.extend({staticMembers:{_handlerCache:{},getPayloadHandlerForEncoding:function(e){var t=this._handlerCache;return t[e]||(t[e]=this.create(e))},registerPayloadHandlerForType:function(e,t){this._handlerCache[t]=e}},datumCountPerPayload:1,_payloadSize:0/0,init:function(e){void 0!==e&&(this._payloadSize=e),this.__s._uGbJfQrSJz$p0$init.call(this)},read:function(e,t,n,i){var r=e.read(this._payloadSize);t.call(n,i,r)},write:function(e,t){e.write(this._payloadSize,t)},__superMap:{_uGbJfQrSJz$p0$init:"init"}});n$316=e,e.__QUALIFIED_CLASS_NAME__="Photos.PayloadHandler"}();
    
    
        
!function(){"use strict";var e=n$5.extend({staticMembers:{_getDebugLink:function(e){var t=n$32(e,this)?e.toBase64String():e;return"http://photos.apple.com/binaryfeed/#"+t}},payloadEncoding:0/0,_payloadHandler:null,_datumCountPerPayload:0/0,_cachedByteArray:null,_writeData:null,_writeDataUsage:null,_writeDataStartIndex:0/0,_writeDataEndIndex:0/0,_cachedLastIndex:0/0,_isPreparedForRead:!0,_isPreparedForWrite:!0,init:function(e){var t;e===+e?(this._isPreparedForRead=!1,t=e,this._cachedLastIndex=-1):(this._isPreparedForWrite=!1,this._cachedByteArray="string"==typeof e?n$314.convertToBytes(e):e,t=this._cachedByteArray&&this._cachedByteArray[0]),+t!==t&&n$11('Cannot create a BinaryFeed with payloadEncoding or initial feed of "'+(e+"").substring(0,50)+'".'),this.payloadEncoding=t,this._payloadHandler=n$316.getPayloadHandlerForEncoding(t),this._datumCountPerPayload=this._payloadHandler.datumCountPerPayload,this.__s._2QfJt5P86b6$1Bg$init.call(this)},toBytes:function(){return this._prepareForRead(),this._cachedByteArray},toBase64String:function(){return n$314.convertFromBytes(this.toBytes())},_toDebugLink:function(){return this.constructor._getDebugLink(this)},_openDebugLink:function(){var e=window.open(this._toDebugLink(),n$22(this));e||n$63.info("Popup blocker blocked BinaryFeed debug window.")},setItemAt:function(e){this._prepareForWrite(),this._isPreparedForRead=!1,this._ensureCoverageOfIndex(e);for(var t=this._writeData,n=this._datumCountPerPayload,i=e-this._writeDataStartIndex,r=n*i,a=0;n>a;a++)t[r+a]=arguments[a+1];return this._writeDataUsage[i]=1,!isNaN(this._cachedLastIndex)&&e>this._cachedLastIndex&&(this._cachedLastIndex=e),this
},pushItem:function(){isNaN(this._cachedLastIndex)&&(this._cachedLastIndex=-1,this.eachIndex(function(e){this._cachedLastIndex=e},this));var e=n$27(arguments);return e.unshift(this._cachedLastIndex+1),this.setItemAt.apply(this,e),this},removeItemAt:function(e){return this._prepareForWrite(),!this._writeDataUsage||e<this._writeDataStartIndex||e>=this._writeDataEndIndex?void 0:(this._isPreparedForRead=!1,this._writeDataUsage[e]=0,e===this._cachedLastIndex&&(this._cachedLastIndex=0/0),this)},_getItemAt:function(e,t){if(this._prepareForWrite(),!this._writeDataUsage||!this._writeDataUsage[e-this._writeDataStartIndex])return null;t=t||[],t.length=this._datumCountPerPayload;for(var n=0;n<this._datumCountPerPayload;n++)t[n]=this._writeData[this._datumCountPerPayload*(e-this._writeDataStartIndex)+n];return t},eachIndex:function(e,t){return this.iterate({eachIndex:e,thisArg:t}),this},eachRange:function(e,t){return this.iterate({eachRange:e,thisArg:t}),this},iterate:function(e){var t=e.thisArg,n=e.eachIndex||n$23,i=e.eachRange||n$23,r=n$315.create(this.toBytes()),a=this._payloadHandler;this.payloadEncoding!==r.read(8)&&n$11("Payload encoding of bitstream doesn't match payload encoding of binary feed.");for(var s,o;r.length>=48;){var u=r.read(24),c=r.read(24),d=u+c;void 0!==o&&o>u&&n$11("Binary feed contains invalid range.",{range:[u,d],previousRange:[s,o],binaryFeed:this.toBase64String()});for(var l=void 0,h=u;d>h;h++)l=a.read(r,n,t,h,l);i.call(t,u,c),s=u,o=d}return this},_prepareForWrite:function(){this._isPreparedForWrite||(this._isPreparedForWrite=!0,this.eachIndex(this.setItemAt,this))
},_prepareForRead:function(){this._isPreparedForRead||(this._isPreparedForRead=!0,this._cachedByteArray=this._getBytesArray())},_getBytesArray:function(){var e=this._bitstream=n$315.create();if(e.write(8,this.payloadEncoding),!this._writeData)return e.toBytes();t.length=1,t[0]=e;for(var n=this._writeDataStartIndex,i=this._writeDataEndIndex,r=this._writeData,a=this._writeDataUsage,s=this._payloadHandler,o=this._datumCountPerPayload,u=this._writeDataStartIndex;;){for(;!a[n-u]&&i>n;)n++;if(n>=i)break;for(var c=n;a[c-u];)c++;var d=void 0;for(e.write(24,n),e.write(24,c-n);c>n;n++){for(var l=(n-u)*o,h=0;o>h;h++)t[h+1]=r[l+h];t[o+1]=d,d=s.write.apply(s,t)}}return e.toBytes()},_ensureCoverageOfIndex:function(e){if(!(this._writeDataStartIndex<=e&&this._writeDataEndIndex>e)){if(!this._writeData)return this._writeData=new Float64Array(this._datumCountPerPayload),this._writeDataUsage=new Uint8Array(1),this._writeDataStartIndex=e,this._writeDataEndIndex=e+1,void 0;var t,n,i=this._writeDataStartIndex,r=this._writeDataEndIndex,a=this._datumCountPerPayload;if(r>e){var s=r-1-Math.pow(2,Math.ceil(Math.log(r-e)/Math.log(2)));(0>=s||(r-s)/s>2)&&(s=0),t=new Float64Array((r-s)*a),t.set(this._writeData,(i-s)*a),n=new Uint8Array(r-s),n.set(this._writeDataUsage,i-s),this._writeDataStartIndex=s,this._writeData=t,this._writeDataUsage=n}else{var o=i+Math.pow(2,Math.ceil(Math.log(e-i)/Math.log(2)))+1;t=new Float64Array((o-i)*a),t.set(this._writeData),n=new Uint8Array(o-i),n.set(this._writeDataUsage),this._writeDataEndIndex=o,this._writeData=t,this._writeDataUsage=n}}},__superMap:{_2QfJt5P86b6$1Bg$init:"init"}}),t=[];
n$320=e,e.__QUALIFIED_CLASS_NAME__="Photos.BinaryFeed"}();
    
    
        
!function(){"use strict";var e={};e.spliceWithoutReturn=function(e,t,n){var r=e.length;if(t=t||0,0>t?(t=r+t,0>t&&(t=0)):t>r&&(t=r),2===arguments.length)return e.length=t,void 0;n=n||0,n=Math.max(0,Math.min(n,r-t));var i,o=arguments.length,s=o>3?o-3:0,a=s-n;if(a>0)for(i=r+a;i-->t+s;)e[i]=e[i-a];else for(i=t+s;r>i;i++)e[i]=e[i-a];for(i=t;t+s>i;i++)e[i]=arguments[i-t+3];0>a&&(e.length=r+a)},n$321=e}();
    
    
        
!function(){"use strict";for(var e=function(e,t){t||(t=0);var n=e.length;if(0>t)throw new TypeError("Start offset is negative");if(n+t>this.length)throw new RangeError("Source is too large");for(var i=0;n>i;i++)this[i+t]=e[i]},t=function(e,t){var n=this.length;void 0===t&&(t=n),0>t&&(t=n+t),t>n&&(t=n),0>e&&(e=n+e),0>e&&(e=0);for(var i=[],r=e;t>r;r++)i[r-e]=this[r];return i},n=function(n){if(arguments.length>1)throw new TypeError("Polyfilled typed arrays do not support the viewing of `ArrayBuffer`s.");var i=Array.isArray(n)?n:null,r=i?i.length:isNaN(n)?0:n,a=new Array(r);a.buffer=null,a.byteOffset=0/0,a.BYTES_PER_ELEMENT=0/0,a.set=e,a.subarray=t;var s=0;if(i)for(;r>s;s++)a[s]=i[s];else for(;r>s;s++)a[s]=0;return a},i="Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=i.length-1;r>=0;r--)window[i[r]]||(window[i[r]]=n)}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$47,n$10,n$302,n$318,{data:null,dataType:window.Uint32Array,itemLength:1,_indexesToClientIds:n$84(Array),_clientIdsToIndexes:n$84(Object),_needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds:!1,init:function(){this.__s._3T96AOQPr9U$Vx$init.apply(this,arguments),this.data=n$317.create(this.dataType),this._nextClientId=0},dispose:function(){this.data.clear(),this.resetClientIdsAndIndexCache(),this.__s._3T96AOQPr9U$aT$dispose.apply(this,arguments)},resetClientIdsAndIndexCache:function(){this._nextClientId=0,this._indexesToClientIds.length=0;for(var e in this._clientIdsToIndexes)this._clientIdsToIndexes.hasOwnProperty(e)&&delete this._clientIdsToIndexes[e];this._needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds=!1},clientIdForIndex:function(e){var t=this._indexesToClientIds[e];return void 0===t&&(t=this.createClientIdForIndex(e),this.registerClientIdAndIndex(t,e)),t},clientIdsForIndexes:function(e){Array.isArray(e)||(e=[e]);for(var t=[],n=0,i=e.length;i>n;n++){var r=this.clientIdForIndex(e[n]);t.push(r)}return t},createClientIdForIndex:function(){var e=n$24(this)+"_"+this._nextClientId;return this._nextClientId++,e},registerClientIdAndIndex:function(e,n){(0===e||void 0===e)&&n$11('Attempting to register clientId "'+e+'" in '+n$24(this)+".",{statId:20179739});var i=this.indexForClientId(e);if(-1!==i){var r=e+":"+i+":"+n,s="Have the same clientId twice in "+n$24(this)+".",a={clientId:e,existingIndex:i,duplicateIndex:n};(t[r]||0)<2?(t[r]=(t[r]||0)+1,n$323.inevitablyRestartSoon(),n$203.cloudOSService.recordStat(s,a),n$63.warn("Restarting due to non-fatal error: "+s+" clientId: "+e+" existingIndex: "+i+" duplicateIndex: "+n+".")):n$11(s,a)
}this._indexesToClientIds[n]=e,this._clientIdsToIndexes[e]=n},indexForClientId:function(e){this._needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds&&this._rebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds();var t=this._clientIdsToIndexes[e];return void 0===t&&(t=-1),t},indexesForClientIds:function(e,t,n){Array.isArray(e)||(e=[e]);var i,r=[],s=e.length;if(!n||this.get("itemCount")>s*(s+Math.log(s))/2){for(i=0;s>i;i++){var a=this.indexForClientId(e[i]);-1!==a?r.push(a):t&&t.push(e[i])}n&&r.sort(n$303)}else{var o=n$127(e);for(s=this.get("itemCount"),i=0;s>i;i++)o[this.clientIdForIndex(i)]&&r.push(i);if(t)for(s=e.length,i=0;s>i;i++)-1===this.indexForClientId(e[i])&&t.push(e[i])}return r},allClientIds:n$9({readOnly:!0,dependencies:["itemCount","contentsDidChange"],get:function(e,t,n,i){for(var r=i.internalGetPath(this,t[0+n]),s=new Array(r),a=0;r>a;a++){var o=this.clientIdForIndex(a);s[a]=o,void 0===o&&n$11("#allClientIds contained `undefined` clientId",{dataStore:this+"",itemCount:r,index:a,statId:20179739})}return s}}),_rebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds:function(){this._clientIdsToIndexes={};for(var e=this._indexesToClientIds.length;e--;){var t=this._indexesToClientIds[e];void 0!==t&&(this._clientIdsToIndexes[t]=e)}this._needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds=!1},populate:function(){return this},suspendChangeNotifications:function(){this._changeSuspendCount&&n$11("Cannot suspend change notifications when they are already suspended."),this._changeSuspendCount=1+(this._changeSuspendCount||0)},resumeChangeNotifications:function(){this._changeSuspendCount=-1+(this._changeSuspendCount||0),this._changeSuspendCount<0&&n$11("Cannot resume change notifications when they are not suspended."),this._hasHadContentsWillChange=!1,this._hasMissedContentsDidChange&&(this.contentsDidChange(),this._hasMissedContentsDidChange=!1)
},contentsWillChange:function(){if(this._changeSuspendCount){if(this._hasHadContentsWillChange)return;this._hasHadContentsWillChange=!0}return this.__s._3T96AOQPr9U$3ds$contentsWillChange.call(this)},contentsDidChange:function(){return this._changeSuspendCount?(this._hasMissedContentsDidChange=!0,void 0):this.__s._3T96AOQPr9U$3iW$contentsDidChange.call(this)},clear:function(){this.data.clear()},itemCount:n$9({readOnly:!0,defaultValue:0,cacheable:!1,dependencies:["contentsDidChange"],get:function(){return this.data.length/this.itemLength}}),itemAtIndex:function(e){return e>=this.get("itemCount")?void 0:this.get("itemClass").createWithIndex(e)},preloadRange:function(e,t){e=Math.max(e,0),t=Math.min(t,this.get("itemCount"));for(var n=n$319.getInstance(),i=e;t>i;i++)n.push(this.clientIdForIndex(i));this.get("itemClass").load(n),n$319.disposeInstance(n)},indexOfItem:function(e){return this.indexForClientId(e.get("clientId"))},uniqueIdForItem:function(e){return e.get("clientId")},uniqueIdForIndex:function(e){return this.clientIdForIndex(e)},itemDataAtIndex:function(e,t){t=t||[];var n=this.itemLength,i=e*n,r=(e+1)*n;return this.data.slice(i,r,t)},itemDatumAtIndexWithOffset:function(e,t){return t=t||0,this.data.itemAt(e*this.itemLength+t)},ingestChange:function(e){this.contentsWillChange();var t=e.operation,n=n$320.create(e.binaryFeed),i=n$319.getAutodisposingInstance(),r=n$319.getAutodisposingInstance(),s=n$319.getAutodisposingInstance(),a=function(e){var t=n$319.getInstanceFromSlice(arguments,1);n$319.autodispose(t),i.push(e),r.push(t)};t===this.REMOVE?(n.iterate({thisArg:this,eachIndex:function(e){i.push(e)
}}),this.baseRemoveItemsAtIndexes(i)):t===this.INSERT?(n.iterate({thisArg:this,eachIndex:a}),this.baseInsertItemDataAtIndexes(i,r)):t===this.UPDATE?(n.iterate({thisArg:this,eachIndex:function(e){a.apply(this,arguments),s.push(this.clientIdForIndex(e))}}),this.baseUpdateItemDataAtIndexes(i,r),this.get("itemClass").reloadOrResetDataForClientIdsAsNeeded(s)):n$11('IndexedDatastore cannot handle "'+t+'" changes.',{datastore:this,change:e}),this.contentsDidChange()},removeItemsAtIndexes:function(e,t){t||(e=e.slice().sort(n$303),t=!0),this.baseRemoveItemsAtIndexes(e,!0)},removeItemsWithClientIds:function(e){return this.removeItemsAtIndexes(this.indexesForClientIds(e,void 0,!0),!0)},baseRemoveItemsAtIndexes:function(e,t){t&&this.contentsWillChange();for(var n=n$319.getInstance(),i=this.itemLength,r=0,s=e.length;s>r;r++)for(var a=0;i>a;a++)n.push(e[r]*i+a);r=e.length;for(var o,l=n$319.getInstance();r--;){var c=e[r];c!==o+1&&l.length&&(n$321.spliceWithoutReturn.apply(n$321,l),l.length=0),l.length||l.push(this._indexesToClientIds,c,0),l[2]++,o=c}l.length&&n$321.spliceWithoutReturn.apply(n$321,l),n$319.dispose(l),this._needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds=!0,this.data.removeItemsAtIndexes(n,!0),n$319.dispose(n),t&&this.contentsDidChange()},insertItemDataAtIndexes:function(e,t,n){n||(e=e.slice(),t=t.slice(),n$304(e,t,n$303),n=!0),this.baseInsertItemDataAtIndexes(e,t,!0)},baseInsertItemDataAtIndexes:function(e,t,n){if(e.length){n&&this.contentsWillChange();for(var i=n$319.getInstance(),r=this.itemLength,s=0,a=e.length;a>s;s++)i.push(e[s]*r);this.data.insertItemsAtIndexes(i,t,!0),n$319.dispose(i);
var o,l=n$319.getInstance();for(s=0,a=e.length;a>s;s++){var c=e[s];c!==o+1&&l.length&&(n$321.spliceWithoutReturn.apply(n$321,l),l.length=0);var u=this.createClientIdForIndex(e[s]);void 0===u&&n$11("No clientId for inserted item."),l.length||l.push(this._indexesToClientIds,c,0),l.push(u)}l.length&&n$321.spliceWithoutReturn.apply(n$321,l),n$319.dispose(l),this._needToRebuildClientIdsToIndexesCacheFromCachedIndexesToClientIds=!0,n&&this.contentsDidChange()}},baseUpdateItemDataAtIndexes:function(e,t,n){n&&this.contentsWillChange();for(var i=this.itemLength,r=0,s=e.length;s>r;r++)for(var a=e[r]*i,o=t[r],l=0,c=this.itemLength;c>l;l++)this.data.setItemAt(a+l,o[l]);n&&this.contentsDidChange()},toBinaryFeed:function(e){for(var t=this.get("itemCount"),n=n$320.create(e||this.binaryFeedPayloadEncoding||0),i=[],r=0;t>r;r++)n.pushItem.apply(n,this.itemDataAtIndex(r,i)),i.length=0;return n},__superMap:{_3T96AOQPr9U$Vx$init:"init",_3T96AOQPr9U$aT$dispose:"dispose",_3T96AOQPr9U$3ds$contentsWillChange:"contentsWillChange",_3T96AOQPr9U$3iW$contentsDidChange:"contentsDidChange"}}),t={};n$324=e,e.__QUALIFIED_CLASS_NAME__="Photos.IndexedDatastore"}();
    
    
        
!function(){"use strict";var e=n$324.extend(n$325,{createClientIdForIndex:function(e){var t=this.data.length/this.itemLength;e>=t&&n$11("Attempting to createClientIdForIndex for index >= itemCount in "+n$24(this)+".",{index:e,itemCount:t});var n=this.itemDatumAtIndexWithOffset(e,1);return void 0===n&&n$11('Attempting to register clientId "'+n+'" in '+n$24(this)+".",{statId:20179739}),n},itemAtIndex:function(e){return n$309.create(this.clientIdForIndex(e))},dataType:window.Float64Array,itemLength:2,aspectRatioEstimateForItemAtIndex:function(e){return this.itemDatumAtIndexWithOffset(e,0)},populate:function(e){return this.contentsWillChange(),this.data.clear(),this.resetClientIdsAndIndexCache(),n$320.create(e).iterate({thisArg:this,eachIndex:function(e,t,n){this.data.push(t),this.data.push(n),this.registerClientIdAndIndex(n,e)}}),this.contentsDidChange(),this.__s._IOxGgivfkl$p1$populate.apply(this,arguments)},ingestChange:function(e){return"assets"===e.type?(this.__s._IOxGgivfkl$rT$ingestChange.apply(this,arguments),void 0):(n$320.create(e.binaryFeed).eachIndex(function(e,t){if(t){var n=this.itemAtIndex(e).retain(this);n.resetDerivatives(),n.release(this)}},this),void 0)},binaryFeedPayloadEncoding:255,__superMap:{_IOxGgivfkl$p1$populate:"populate",_IOxGgivfkl$rT$ingestChange:"ingestChange"}});n$371=e,e.__QUALIFIED_CLASS_NAME__="Photos.BaseAssetsDatastore"}();
    
    
        
!function(){"use strict";var e=n$74("TRANSACTION_STATES",function(e){e("NEW"),e("PENDING"),e("ACTIVE"),e("COMPLETED"),e("FAILED"),e("CANCELLED")}),t=n$5.extend(n$10,n$248,{staticMembers:{NEW:e.NEW,PENDING:e.PENDING,ACTIVE:e.ACTIVE,COMPLETED:e.COMPLETED,FAILED:e.FAILED,CANCELLED:e.CANCELLED},status:n$9(e.NEW),primaryKeys:null,storeIds:null,requests:null,instances:n$4({get:function(){var e=this.allStoreIds,t=[];if(e&&e.length>0)for(var n=this.get("source")||n$326(),r=0,i=e.length;i>r;r++)t[r]=n.materializeModel(e[r]);return 1===t.length?t[0]:t}}),cancel:function(t){var n=this.requests;if(n)for(var r=0,i=n.length;i>r;r++)n[r].abort();this.set("status",e.CANCELLED);var o=this.manager;o&&o.transactionDidCancel(this,t),this.reject(e.CANCELLED)},complete:function(){this.set("status",e.COMPLETED);var t=this.manager;t&&t.transactionDidComplete(this),this.resolve(e.COMPLETED)},fail:function(){this.set("status",e.FAILED);var t=this.manager;t&&t.transactionDidFail(this),this.reject(e.FAILED)},toJSON:function(){return this.getPropertiesAsObject("requests","status","value")}});n$328=t,t.__QUALIFIED_CLASS_NAME__="CW.Data.Transaction"}();
    
    
        
!function(){"use strict";var t=n$158.extend({url:n$4(),loadRange:function(){var t;return t},loadObjectAt:function(){var t;return t},loadObjectsAt:function(){var t;return t},load:function(){var t;return t},loadAll:function(){var t;return t},loadingStatus:n$9(),clone:function(){return this.constructor.create(this._array,this._ModelClass)},init:function(t,e){this.__s._4SdZb_hsorZ$Oo$init.call(this,t),this._ModelClass=e},splice:function(){return this.__s._4SdZb_hsorZ$SW$splice.apply(this,arguments)},objectAt:function(t){var e=this._materializedObjects||(this._materializedObjects=[]),n=e[t];if(n)return n;var i=this.__s._4SdZb_hsorZ$X2$objectAt.apply(this,arguments);return e[t]=this._materializeObject(i)},indexOf:function(){return this.__s._4SdZb_hsorZ$Zs$indexOf.apply(this,arguments)},hasLoadedObjectAt:function(t){var e=this._materializedObjects;return e&&e[t]},_materializedObjects:null,_materializeObject:function(t){if(void 0===t||null===t)return t;var e,n;return n$37(t)?(n=t.id,e=t.type):(n=t,e=this._ModelClass),"self"===e&&(e=this._relationshipObject.constructor),e.findOrCreatePlaceholder(n)},filter:function(){var t=this.__s._4SdZb_hsorZ$sn$filter.apply(this,arguments);return this._copyProperties(this,t),t},map:function(){var t=this.__s._4SdZb_hsorZ$wh$map.apply(this,arguments);return this._copyProperties(this,t),t},_copyProperties:function(t,e){n$141(t,e,"_ModelClass","_relationshipObject","_relationshipKey")},_ModelClass:null,_relationshipObject:null,_relationshipKey:null,__superMap:{_4SdZb_hsorZ$Oo$init:"init",_4SdZb_hsorZ$SW$splice:"splice",_4SdZb_hsorZ$X2$objectAt:"objectAt",_4SdZb_hsorZ$Zs$indexOf:"indexOf",_4SdZb_hsorZ$sn$filter:"filter",_4SdZb_hsorZ$wh$map:"map"}});
n$336=t,t.__QUALIFIED_CLASS_NAME__="CW.Data.ModelArray"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{generateMerge:function(e,t){return e.resetData.bind(e,t.get("storeId"))}});n$327=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.MergeStrategies.HardReset"}();
    
    
        
!function(){"use strict";var e=n$74("LOAD_STATES",function(e){e("NOT_LOADED"),e("LOADING"),e("LOADED"),e("ERRORED"),e("CANCELLED")}),t=[],n={};n$329=e,n$346=t,n$347=n}();
    
    
        
!function(){"use strict";var e=["updated","added","removed"],t={MergeStrategy:n$327,parentStore:null,branches:n$84(Array),branch:function(e){e=e||{},e.parentStore=this,e._dataHashes=Object.create(this._dataHashes),e._revisions=Object.create(this._revisions);var t=n$330.create(e);return this.get("branches").push(t),t},commit:function(e){e||(e=n$328.create());var t=this._changes;if(!t)return e.complete(),e;e.changes=t;var n=this.get("parentStore");return n&&n.update(t,this),this._changes=null,e},update:function(e,t){for(var n,r=this.getPath("MergeStrategy.sharedInstance"),i=e.createIterator().retain();n=i.get("value");){var s=r.generateMerge(this,n);s&&s.call(),n$66.pause(),this.setLoadingStatusForStoreId&&!n.isPartial&&this.setLoadingStatusForStoreId(n.storeId,n$329.LOADED),this._notifyModel(n),n$66.resume(),i.moveToNext()}i.release();var o=this.get("parentStore");if(t&&t!==o)o&&n$11("Branching not fully supported yet");else for(var a=this.get("branches"),u=0,c=a.length;c>u;u++)a[u].update(e)},_notifyModel:function(t){var r,i=this._materializedModels;if(i&&(r=i[t.get("storeId")])){var s=t.get("newData");if(!s)return;var o=t.get("diff");if(!o)return;var a=n;a.length=0;for(var u=0,c=e.length;c>u;u++)for(var l=o[e[u]],d=0,h=l.length;h>d;d++){var p=l[d],f=r.getKeyForDataKey(p);if(s.hasOwnProperty(p)){var g=r.get(f);if(n$32(g,n$99)){var _=t.newData[p];if(_){var v=n$231(_);v.unshift(g.get("length")),v.unshift(0),g.splice.apply(g,v)}else{var m=r.getMetadata(f);m&&m.clearCachedValueForObject(r,f)}}var y=r.getMetadata(f);n$32(y,n$331)&&a.push(f)}}for(n$66.pause(),u=0;u<a.length;u++)r.propertyChanged(a[u]);
n$66.resume(),a.length=0}}},n=[];n$337=t}();
    
    
        
!function(){"use strict";function e(n,r,i,o){if(n===r)return!0;var s,a,u,c;if(t[typeof n]||t[typeof r])return!1;if(null===n||null===r)return!1;if(i||(i=n.constructor),o||(o=r.constructor),i!==o)return!1;if(i===Date)return n.getTime()===r.getTime();if(i===RegExp)return n.toString()===r.toString();if(i===Object){var l=0;for(s in n)if(++l,a=n[s],u=r[s],a!==u){if(c=typeof a,t[c])return!1;if(!e(a,u))return!1}for(s in r)--l;return 0===l}if(i===Array){var h=n.length,d=r.length;if(h!==d)return!1;for(var f=h-1;f>=0;--f)if(a=n[f],u=r[f],a!==u){if(c=typeof a,t[c])return!1;if(!e(a,u))return!1}return!0}n$11("Unsupported type for `deepEqual`: "+i)}var t={string:!0,number:!0,"boolean":!0,undefined:!0};n$332=e}();
    
    
        
!function(){"use strict";function e(e,t,n){var i,r,s;if(e===t||!e&&!t)return!1;if(e&&!t)r=Object.keys(e);else if(!e&&t)s=Object.keys(t);else{var a,o;n&&(a=n$127(n));var l,c,u={};r=[],i=[];for(o in e)u[o]=!0,a&&a[o]||(l=e[o],c=t[o],void 0===c?r.push(o):n$332(l,c)||i.push(o));s=[];for(o in t)u[o]||s.push(o)}return s&&0!==s.length||r&&0!==r.length||i&&0!==i.length?{updated:i||[],removed:r||[],added:s||[]}:!1}n$333=e}();
    
    
        
!function(){"use strict";var e=n$74("DATA_OPERATIONS",function(e){e("CREATE"),e("UPDATE"),e("DESTROY")}),t=n$5.extend({storeId:null,originalData:null,newData:null,isPartial:!1,init:function(e,t,n,r,i){this.__s._3GtKgfET9iE$EA$init.call(this),this.set("storeId",e),this.set("originalData",t),this.set("newData",n),r&&(this.isPartial=r),i&&(this._operation=i)},operation:n$4({readOnly:!0,get:function(){var t=this._operation;return t?t:(t=e.UPDATE,this.originalData?this.newData||(t=e.DESTROY):t=e.CREATE,this._operation=t)}}),primaryKey:n$4({get:function(){return this._primaryKey||n$326().getPrimaryKeyForStoreId(this.storeId)}}),diff:n$4({readOnly:!0,get:function(){return n$333(this.get("originalData"),this.get("newData"))}}),merge:function(e){var t,n=this.get("newData"),r=e.get("newData"),i={};for(t in n)i[t]=n[t];for(t in r)i[t]=r[t];return this.constructor.create(this.get("storeId"),this.get("originalData"),i)},reverse:function(){var e=this.get("storeId");return this.constructor.create(e,this.get("oldData"),this.get("newData"),this.isPartial)},staticMembers:{CREATE:e.CREATE,UPDATE:e.UPDATE,DESTROY:e.DESTROY},__superMap:{_3GtKgfET9iE$EA$init:"init"}});n$334=t,t.__QUALIFIED_CLASS_NAME__="CW.Data.DataChange"}();
    
    
        
!function(){"use strict";var e=function(e){for(var t=[],n=0,i=e.length;i>n;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t};n$335=e}();
    
    
        
!function(){"use strict";var e=n$99.extend({merge:function(e){for(var t,n=e.createIterator().retain();t=n.get("value");)this.recordChange(t),n.moveToNext();return n.release(),this},recordChange:function(e){var t=e.storeId,n=this._changesByStoreId||(this._changesByStoreId={}),i=n[t];if(i>=0){var r=this.objectAt(i);this.setIndex(i,r.merge(e))}else this.push(e),n[t]=this.get("length")-1;return e},getDependencies:n$4({readOnly:!0,get:function(){}})});n$338=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.ChangeSet"}();
    
    
        
!function(){"use strict";function e(e){var t=r[e]||0,n=r[e]=t+1;return n}var t=n$5.extend(n$10,n$337,{staticMembers:{dataManager:n$9(),_modelClasses:{},_primaryKeysToStoreIds:{}},autocommit:!1,buffer:!1,forkOnRead:!1,writeData:function(e,t){return this._forkIfNeeded(e),this._dataHashes[e]=t,this.recordChangeToData(e)},writeDataProperty:function(e,t,n){this._forkIfNeeded(e);var r=this._dataHashes[e];return r[t]=n,this.recordChangeToData(e),n},readData:function(e){return this.get("forkOnRead")&&this._forkIfNeeded(e),this._dataHashes[e]},readOriginalData:function(e){var t=this._originalDataHashes;if(t)return t[e]},hasDataFor:function(e){return!!this._dataHashes[e]},isDataForked:function(e){return this._dataHashes.hasOwnProperty(e)},deleteData:function(e){this.writeData(e,null)},resetData:function(e){delete this._dataHashes[e],delete this._revisions[e],this._resetOriginalCopy(e)},resetAll:function(){for(var e,t=this._dataHashes,n=this._revisions,r=Object.keys(this._dataHashes),i=0,o=r.length;o>i;i++)e=r[i],delete t[e],delete n[e];this._resetAllOriginalCopies()},_resetOriginalCopy:function(e){this._originalDataHashes&&delete this._originalDataHashes[e],this._originalRevisions&&delete this._originalRevisions[e]},_resetAllOriginalCopies:function(){delete this._originalDataHashes,delete this._originalRevisions},dataDidChange:n$12(),recordChangeToData:function(e,t){var n=this.readOriginalData(e),r=this.readData(e),i=n$334.create(e,n,r,!1,t),o=this._changes||(this._changes=n$338.create());return o.recordChange(i),i},_autocommitOnChange:n$7("dataDidChange",function(){this.get("autocommit")&&this._changes&&this._changes.get("length")>0&&this.commit()
}),writeTransaction:function(e){for(var t,n=e.storeIds,r=0,i=n.length;i>r;r++)t=this.writeData(n[r],e.context.body),t&&(t.transaction=e);t||e.complete(),this.dataDidChange()},writeAndSendTransaction:function(e){for(var t=e.storeIds,n=0,r=t.length;r>n;n++){var i=t[n];this._forkIfNeeded(i),this._dataHashes[i]=e.context.body}this.sendTransaction(e)},getModel:function(e,t){var n=this.getStoreIdForPrimaryKey(e,t);return this.materializeModel(n)},getModels:function(e,t){for(var n=[],r=0,i=t.length;i>r;r++)n.push(this.getModel(e,t[r]));return n},getAllModels:function(e){var t=this._getPrimaryKeyMapForModel(e),n=[];for(var r in t)n.push(r);return n$336.create(n,e)},deleteModels:function(e,t){for(var n=this.getStoreIdsForPrimaryKeys(e,t),r=0,i=n.length;i>r;r++){var o=n[r];this.writeData(o,null);var s=this.recordChangeToData(o,n$334.DESTROY);s.set("primaryKey",t[r])}this.dataDidChange()},materializeModel:function(e){if(!e)return null;var n=this._materializedModels,r=n?n[e]:!1;if(r)return r;if(!this._dataHashes[e])return null;var i=t._modelClasses[e];i||n$11("No Model class defined for store id: `"+e+"`",{store:this,storeId:e});var o=this.getPrimaryKeyForStoreId(e),s=i.createPlaceholderInStore(o,this,e);return n=this._materializedModels||(this._materializedModels=[]),n[e]=s,s},registerModelInstance:function(e){var t=this._materializedModels||(this._materializedModels=[]),n=e.constructor,r=e.get(n.primaryKey),i=this.getStoreIdForPrimaryKey(n,r);return t[i]&&n$11("Attempting to register model that already exists at storeId: '"+i+"'"),t[i]=e,this.hasDataFor(i)||(this._forkIfNeeded(i),this._dataHashes[i]=e.getDataHash()),i
},deregisterModelInstance:function(e){var t=this._materializedModels;t&&t[e]?delete t[e]:n$63.warn("Attempted to deregister a model that does not exist in the store: "+e)},deregisterModelInstances:function(e){for(var t=0,n=e.length;n>t;t++)this.deregisterModelInstance(e[t])},destroyModelInstance:function(e){this.deregisterModelInstance(e),this._unmapPrimaryKey(e);var t=n$326();t.setLoadingStatusForStoreId(e,n$329.NOT_LOADED)},destroyModelInstances:function(e){for(var t=0,n=e.length;n>t;t++)this.destroyModelInstance(e[t])},getModelClassForStoreId:function(e){return t._modelClasses[e]},getStoreIdForPrimaryKey:function(e,t){var n=this._getPrimaryKeyMapForModel(e),r=n[t];return r||(r=n[t]=this._getNextStoreId(),this._mapPrimaryKeyToStoreId(e,t,r)),r},getStoreIdsForPrimaryKeys:function(e,t){if(!Array.isArray(t))return this.getStoreIdForPrimaryKey(t);for(var n=[],r=0,i=t.length;i>r;r++)n.push(this.getStoreIdForPrimaryKey(e,t[r]));return n},getPrimaryKeyForStoreId:function(e){var n=t._modelClasses[e],r=this._dataHashes[e];return r?r[n.primaryKey]:null},_getPrimaryKeyMapForModel:function(e){var n=n$24(e),r=t._primaryKeysToStoreIds,i=r[n]||(r[n]={});return i},_mapPrimaryKeyToStoreId:function(e,n,r){var i=this._getPrimaryKeyMapForModel(e);i[n]=r,t._modelClasses[r]=e},_unmapPrimaryKey:function(e){var n=this.getModelClassForStoreId(e),r=this.getPrimaryKeyForStoreId(e),i=this._getPrimaryKeyMapForModel(n);delete i[r],delete t._modelClasses[e]},_getNextStoreId:function(){return++n},_dataHashes:null,_revisions:null,init:function(){this.__s._1pIyDmrN8fG$4IP$init.apply(this,arguments),this._dataHashes=this._dataHashes||{},this._revisions=this._revisions||{}
},_originalDataHashes:null,_originalRevisions:null,_forkIfNeeded:function(t){var n=this._originalDataHashes||(this._originalDataHashes={}),r=n&&n.hasOwnProperty(t);if(!r){var i=this._dataHashes[t];this._originalDataHashes[t]=n$231(i);var o=this._originalRevisions||(this._originalRevisions={});o[t]=this._revisions[t]||0,this._dataHashes[t]=i?n$231(i):{},this._revisions[t]=e(t)}},_uncommittedTransactions:null,_activeTransactions:null,_materializedModels:null,__superMap:{_1pIyDmrN8fG$4IP$init:"init"}}),n=0,r={};n$330=t,t.__QUALIFIED_CLASS_NAME__="CW.Data.Store"}();
    
    
        
!function(){"use strict";var e=function(e,t,n,i){var r=n$101.get("sharedInstance");r.push(e);var a=t.apply(i,n);return r.pop(),a};n$340=e}();
    
    
        
!function(){"use strict";function e(e,t){if(Array.isArray(e))for(var n=0,r=e.length;r>n;n++)t(e[n]);else t(e)}function t(e,t){var n=e.storeIds;if(n)if(Array.isArray(n))for(var r=0,i=n.length;i>r;r++)t(n[r],e);else t(n,e)}function n(e,t){var n=o[e];if(n){var r=n.indexOf(t);r>=0&&n.splice(r,1),0===n.length&&delete o[e]}}function r(e,t,n){e.resetData(n);var r=t.changes;if(r)for(var i=0,s=r.get("length");s>i;i++){var o=r.objectAt(i);if(o.get("storeId")===n)return e._notifyModel(o.reverse()),void 0}}var i={shouldCoalesce:!1,coalescingDelay:0,sendTransaction:function(e){var t=this.shouldCoalesce;e.manager=this,this._markStoreIdsAsLoading(e);var n=this.getDependenciesForTransaction(e);if(n){e.set("status",n$328.PENDING);for(var r=e._remainingDependencies=n.length,i=0;r>i;i++)n[i].observe("status",this._dependencyStatusDidChange.bind(this,e))}else this.isStopped||t?(this._pendingTransactions.push(e),e.set("status",n$328.PENDING),t&&!this._timer&&(this._timer=n$130(this._sendPendingTransactions.bind(this),this.coalescingDelay))):(e.set("status",n$328.ACTIVE),this._sendRequest(e.context))},revertTransaction:function(e){var t=e.storeIds;if(t)if(Array.isArray(t))for(var n=0,i=t.length;i>n;n++)r(this,e,t[n]);else r(this,e,t)},_sendPendingTransactions:function(){this._timer&&(clearTimeout(this._timer),delete this._timer);var e;if(this.shouldCoalesce){e=this.coalesceTransactions(this._pendingTransactions);for(var t=e.get("length"),n=[];t--;){var r=e.objectAt(t).transactions;Array.isArray(r)||(n[0]=r,r=n);for(var i=r.length;i--;){var s=r[i],o=this._pendingTransactions.indexOf(s);-1!==o&&(this._pendingTransactions.splice(o,1),s.set("status",n$328.ACTIVE),this._activeTransactions.push(s))
}}}else{e=this._pendingTransactions.map(function(e){return e.context});for(var a;a=this._pendingTransactions.pop();)a.set("status",n$328.ACTIVE),this._activeTransactions.push(a)}this._pendingTransactions.get("length")&&(this._timer=n$130(this._sendPendingTransactions.bind(this),this.coalescingDelay)),this._sendRequests(e)},coalesceTransactions:function(e){return e.map(function(e){return e.context})},cancelAllTransactions:function(){for(var e;e=this._pendingTransactions.shift();)e.cancel();for(;e=this._activeTransactions.shift();)e.cancel()},transactionDidComplete:function(e){this._activeTransactions.remove(e)},transactionDidFail:function(e){this._activeTransactions.remove(e)},transactionDidCancel:function(e){this._activeTransactions.remove(e),this._pendingTransactions.remove(e),this._cleanup(e,n$329.CANCELLED)},stop:function(){this.isStopped=!0},start:function(){this.isStopped=!1,this.shouldCoalesce?this._timer=this._timer||n$130(this._sendPendingTransactions.bind(this),this.coalescingDelay):this._sendPendingTransactions()},_sendRequests:function(e){for(var t,n=e.createIterator().retain();t=n.get("value");)this._sendRequest(t),n.moveToNext();n.release()},_sendRequest:function(t){var n=t.server;n||(n=this.findServerForPath(t.path));var r=t.resource||n,i=r.generateRequest(t),s=t.transactions;e(s,function(e,t){t.requests=e}.bind(this,[i])),n.sendRequest(i).then(this._requestSucceededWrapper.bind(this,s),this._requestFailed.bind(this,s))},_requestSucceededWrapper:function(e,t){n$340(t,this._requestSucceeded,arguments,this)},_requestSucceeded:function(t,n){var r=n.processedData,i=this._persistenceStore,s=n$338.create();
if(e(t,function(e){var t=e.get("changes");t&&s.merge(t)}),r)if(Array.isArray(r))for(var o=0,a=r.length;a>o;o++)s.merge(this.generateChangeSet(r[o]));else r&&s.merge(this.generateChangeSet(r));s&&i.update(s),this._cleanup(t,n$329.LOADED),e(t,function(e){e.get("isResolved")||e.get("isRejected")||e.complete()})},_requestFailed:function(t){this._cleanup(t,n$329.ERRORED),e(t,function(e){e.get("isResolved")||e.get("isRejected")||e.fail()})},_cleanup:function(t,n){e(t,function(e){e.set("loadingStatus",n)}),e(t,this._clearStoreIdsForTransaction.bind(this)),e(t,this._notifyStoredIdsIfDone.bind(this)),this._pendingTransactions.get("length")>0&&(this.shouldCoalesce?this._timer=this._timer||n$130(this._sendPendingTransactions.bind(this),this.coalescingDelay):this._sendPendingTransactions())},_cycle:null,_pendingTransactions:n$84(n$99),_activeTransactions:n$84(n$99),generateChangeSet:function(e){var t,n=e.modelClass,r=e.modelData,i=e.operation&&"destroy"===e.operation,s=e.isPartial,o=n$338.create();if(Array.isArray(r))for(var a=0,u=r.length;u>a;a++)t=this._generateChange(n,r[a],s,i),o.recordChange(t);else t=this._generateChange(n,r,s,i),o.recordChange(t);return o},_generateChange:function(e,t,n,r){var i=e.getPrimaryKeyFromData(t),s=this.getStoreIdForPrimaryKey(e,i),o=this._persistenceStore.readData(s);return n$334.create(s,o,r?null:t,n)},_markStoreIdsAsLoading:function(e){t(e,function(e,t){this.setLoadingStatusForStoreId(e,n$329.LOADING);var n=o[e]||(o[e]=[]);n.push(t)}.bind(this))},_clearStoreIdsForTransaction:function(e){t(e,n)},_notifyStoredIdsIfDone:function(e){t(e,this._updateStoreIdStatus.bind(this))
},_updateStoreIdStatus:function(e,t){if(!this.getTransactionsForStoreId(e)){var n=t.get("loadingStatus");this.setLoadingStatusForStoreId(e,n)}},getTransactionsForStoreId:function(e){return o?o[e]:null},completeOrWaitForDepenencies:function(e){e.context=s;var t=this.getDependenciesForTransaction(e);if(t){e.set("status",n$328.PENDING);for(var n=e._remainingDependencies=t.length,r=0;n>r;r++)t[r].observe("status",this._dependencyStatusDidChange.bind(this,e))}else this._cleanup(e,n$329.LOADED),e.complete()},getDependenciesForTransaction:function(e){var n;return t(e,function(t){var r=this.getTransactionsForStoreId(t);r&&(r=r.filter(function(t){return t!==e})),n?n.push.apply(n,r):n=r}.bind(this)),n&&n.length>0?n:null},_dependencyStatusDidChange:function(e,t){if(t===n$328.COMPLETED){if(0===--e._remainingDependencies){e.set("status",n$328.ACTIVE);var n=e.context;n===s?(this._cleanup(e,n$329.LOADED),e.complete()):this._sendRequest(e.context)}}else e.get("status")===n$328.CANCELLED||t!==n$328.FAILED&&t!==n$328.CANCELLED||(this._cleanup(e,n$329.CANCELLED),e.cancel())}},s={},o={},a={};a[n$328.COMPLETED]=n$329.LOADED,a[n$328.FAILED]=n$329.ERRORED,a[n$328.CANCELLED]=n$329.CANCELLED,n$342=i}();
    
    
        
!function(){"use strict";var e={loadDataFrom:function(e,t){t=t||{},t.path=e;var n=this.findServerForPath(e),i=n.generateRequestDescription(t),r=n$328.create({context:i});return i.transactions=r,this.sendTransaction(r),r},findServerForPath:function(e){for(var t,n,i=this.get("servers"),r=i.createIterator().retain();t=r.get("value");)t.handlerForPath(e)&&(n&&n$11(e+" is requesting to be handled by multiple servers. "+"Requested URLs can only be loaded by one server."),n=t),r.moveToNext();return r.release(),n||n$11("No server responds to this url: "+e),n}};n$343=e}();
    
    
        
!function(){"use strict";var e={getResourceForStoreId:function(e){var t=this.getModelClassForStoreId(e);return t.resource},callResourceAction:function(e,t,n,r){var i=e.resource.generateTransactionForAction(e,t,n,r);return this.sendTransaction(i),i},forcePush:function(e,t,n){return this.callResourceAction(e,"update",t,n)},reload:function(e,t){return this.callResourceAction(e,"read",t)}};n$344=e}();
    
    
        
!function(){"use strict";var e=n$5.extend({});n$341=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.Adapter"}();
    
    
        
!function(){"use strict";var e=n$341.extend({});n$345=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.Adapters.LocalStorage"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{generateMerge:function(e,t){var n,i=t.get("storeId"),r=t.get("newData");return n=t.get("isPartial")?function(){for(var t in r)e.writeDataProperty(i,t,r[t])}:e.writeData.bind(e,i,r)}});n$348=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.MergeStrategies.Overwrite"}();
    
    
        
!function(){"use strict";function e(e,i){var o=t[e];if(o)return o;if(!e)return"";for(var s,a,u=0,l="";s=e[u];)i&&s===i||!i&&n[s]?a=!0:r.test(s)&&(l+=a?s.toUpperCase():s,a=!1),u++;return t[e+(i||"")]=l,l}var t={},n={"-":!0,_:!0,".":!0," ":!0,"	":!0},r=/[a-zA-Z0-9]/;n$349=e}();
    
    
        
!function(){"use strict";var e,t=n$330.create({MergeStrategy:n$348}),n=!1,i=function(){return e},r={mixinDependencies:[n$10,n$342,n$344,n$343],staticMembers:{init:function(){if(this.__s._2AeRoSwhAdh$mA$init.apply(this,arguments),!n)for(var e=n$346,t=n$347,i=0,r=e.length;r>i;i++){var s=e[i],a=n$24(s);t[a]=s}},__superMap:{_2AeRoSwhAdh$mA$init:"init"}},coalesce:null,useLocalStorage:n$9(!1),localStorageAdapters:n$4(function(){return[n$345.create()]}),servers:n$4({defaultValue:function(){return n$99.create()},set:function(e){return n$99.create(e)}}),addServer:function(e){var t=this.get("servers");t.contains(e)||t.push(e)},removeServer:function(e){var t=this.get("servers");t.contains(e)||n$11("Data manager does not have server registered: "+e),t.remove(e)},removeAllServers:function(){this._servers=n$99.create()},loadData:function(e,t){var n=[];if(Array.isArray(t))for(var i=0,r=t.length;r>i;i++)n.push(this._loadDataItem(e,t[i]));else n.push(this._loadDataItem(e,t));return n},_loadDataItem:function(e,n){var i=e.getPrimaryKeyFromData(n),r=t.getStoreIdForPrimaryKey(e,i);return t.writeData(r,n),this.setLoadingStatusForStoreId(r,n$329.LOADED),i},_loadingStatusForStoreId:n$84(Array),getLoadingStatusForStoreId:function(e){return this._loadingStatusForStoreId[e]||n$329.NOT_LOADED},setLoadingStatusForStoreId:function(e,t){return this._loadingStatusForStoreId[e]!==t&&(this._loadingStatusForStoreId[e]=t,this._notifyLoadingStatusChanged(e)),t},setLoadingStatusForStoreIds:function(e,t){for(var n=0,i=e.length;i>n;n++)this.setLoadingStatusForStoreId(e[n],t)},_notifyLoadingStatusChanged:function(e){var t,n=this._materializedModels;
n&&(t=n[e])&&t.propertyChanged("loadingStatus")},init:function(){e&&n$11("DataManager already exists: "+e+". Cannot have two data managers.",{existingDataManager:e,erroringDataManager:this}),e=this,this.__s._2AeRoSwhAdh$1mX$init.apply(this,arguments),n$330.set("dataManager",this),this._dataHashes=Object.create(t._dataHashes),this._revisions=Object.create(t._revisions),t.get("branches").push(this)},commit:function(e){if(e=this.__s._2AeRoSwhAdh$23E$commit.apply(this,arguments)){var t=e.changes;if(!t)return e.isResolved||e.complete(),e;var n=t.get("dependencies");if(n)n$11("Dependency support is not implemented yet");else{for(var i,r,s,a=t.createIterator().retain(),o=[e],l=[],c=[],u=[];i=a.get("value");){var h=i.get("storeId"),d=i.get("operation").name.toLowerCase(),f=this.getResourceForStoreId(h);(r&&r!==d||s&&s!==f)&&n$11("Cannot batch changes of different types"),r=d,s=f,l.push(this._persistenceStore.getPrimaryKeyForStoreId(h)),c.push(i.get("newData")),u.push(h),i.transaction&&o.push(i.transaction),a.moveToNext()}a.release();var g=s.generateRequestDescription(r,l,c);e.context=g,g.transactions=o,e.storeIds=u}return this.sendTransaction(e),e}},_persistenceStore:t,dispose:function(){this.__s._2AeRoSwhAdh$2hK$dispose.apply(this,arguments),e=null},__superMap:{_2AeRoSwhAdh$1mX$init:"init",_2AeRoSwhAdh$23E$commit:"commit",_2AeRoSwhAdh$2hK$dispose:"dispose"}};n$326=i,n$339=r}();
    
    
        
!function(){"use strict";function t(t,e,n,i){var r=t[e];return r?n&&n!==r&&n$11("Model already exists with another `"+e+"`",{model:t,key:e,value:n}):t[e]=n||i(),t[e]}var e={_linkToStore:function(e){e=t(this,"_cwStore",e,function(){return n$326()});var n=this._cwStoreId=e.registerModelInstance(this);return this.__cw_originalGetDataHash=this.getDataHash,this.getDataHash=function(){return e.readData(n)},this.__cw_originalWriteModelProperty=this._writeModelProperty,this._writeModelProperty=function(t,i){return e.writeDataProperty(n,t,i),e.recordChangeToData(n),i},this.__cw_dataChangeListener=this.listen("dataDidChange",function(){e.dataDidChange()}),delete this.__cwDataHash,[e,n]},writeDataToStore:function(t){var e=this._cwStore,n=this._cwStoreId;e.writeData(n,t)},save:function(){return this._cwStore.commit()},unlinkFromStore:function(){var t=this._cwStore,n=this.getDataHash();if(t){t.deregisterModelInstance(this._cwStoreId,this),this.__cw_dataChangeListener.disconnect();for(var i in e)delete this[i];this.__cwDataHash=n$231(n),this.getDataHash=this.__cw_originalGetDataHash,this._writeModelProperty=this.__cw_originalWriteModelProperty,this.propertyChanged("loadingStatus")}},_isStoreModel:!0,_cwStore:null,_cwStoreId:null};n$350=e}();
    
    
        
!function(){"use strict";var e={attachToParent:function(e,t){this._cwParent=e,this._cwParentKey=t,this.__cw_originalGetDataHash=this.getDataHash,this.getDataHash=function(){return e.getRawValue(t)},this.__cw_originalWriteModelProperty=this._writeModelProperty,this._writeModelProperty=function(n,r){return e.propertyChanged(t),r},this.__cw_dataChangeListener=this.listen("dataDidChange",function(){e.dataDidChange()}),delete this.__cwDataHash,this.propertyChanged("isEmbedded")},_isEmbedded:!0,_cwParent:null,_cwParentKey:null};n$351=e}();
    
    
        
!function(){"use strict";function t(t,e){var n,i=t.prototype.__cwDefinedProperties;for(var r in e)i[r]||(n||(n={}),n[r]=n$352({synthesized:!0}));return n}var e=n$5.extend(n$10,{staticMembers:{synthesizeUnknownProperties:!1,serverActionsRequiringModelDeregisterFromStore:["destroy"],shouldNormalize:!1,NOT_LOADED:n$329.NOT_LOADED,LOADING:n$329.LOADING,LOADED:n$329.LOADED,ERRORED:n$329.ERRORED,CANCELLED:n$329.CANCELLED,init:function(){this.__s._1kOrh7261mi$1ZF$init.apply(this,arguments);var t=this.prototype,e=t.__cwDefinedProperties={};for(var n in t)e[n]=!0;for(n in t.getMetadataByType(n$3))e[n]=!0;n$346.push(this)},getPrimaryKeyFromData:function(t){return t[this.primaryKey]},getPrimaryKeysFromData:function(t){var e=this.primaryKey;return Array.isArray(t)||(t=[t]),t.map(function(t){return t[e]})},create:function(e){var n;return this.get("synthesizeUnknownProperties")&&(n=t(this,e)),n?this.extend(n).create(e):this.__s._1kOrh7261mi$1yf$create.call(this,e)},createInStore:function(t,e,n){var i=this.create(t);return i.saveToStore(e,n),i},createPlaceholderInStore:function(t,e,n){t||n$11("Primary key required for placeholder creation");var i={};i[this.primaryKey]=t;var r=this.create(i);return r.linkToStore(e,n),r},normalize:function(t){if(!this.get("shouldNormalize"))return t;var e,n,i=this.prototype.getMetadataByType(n$331),r={};for(e in i)n=i[e],r[n.dataKey||e]=e;for(e in t)if(n=i[r[e]]){var a=n.type;a&&a.normalize&&(t[e]=a.normalize(t[e]))}else delete t[e];return t},find:function(t,e){return e=e||n$326(),e.getModel(this,t)},findAll:function(t){return t=t||n$326(),t.getAllModels(this)
},findOrCreatePlaceholder:function(t,e){var n=this.find(t,e);return n||(n=this.createPlaceholderInStore(t,e)),n},load:function(t){function e(t,e){var s=n.getStoreIdForPrimaryKey(t,e);a.push(s);var o=n.getLoadingStatusForStoreId(s);o!==n$329.LOADED&&o!==n$329.LOADING&&(r.push(s),i.push(e))}t||n$11("Cannot load a model without providing a primary key",this);var n=n$326(),i=[],r=[],a=[];if(Array.isArray(t))for(var s=0,o=t.length;o>s;s++)e(this,t[s]);else e(this,t);var u;return i.length>0?(u=this.resource.generateTransactionForAction(this,"read",i),u.storeIds=r,u.allStoreIds=a,n.sendTransaction(u)):(u=n$328.create({storeIds:a,allStoreIds:a}),n.completeOrWaitForDepenencies(u)),u},loadAll:function(){var t=n$326();return t.callResourceAction(this,"list")},destroy:function(t,e){return this.performCustomServerAction("destroy",t,e)},performCustomServerAction:function(t,e,n){var i,r,a,s=n$326();n=n||s;for(var o=n.getStoreIdsForPrimaryKeys(this,e),u=0,c=o.length;c>u;u++)n.hasDataFor(o[u])?(i=i||[],i.push(e[u])):(r=r||[],r.push(e[u]));return i&&(a=this.resource.generateTransactionForAction(this,t,i),-1!==this.serverActionsRequiringModelDeregisterFromStore.indexOf(t)?(n.writeAndSendTransaction(a),n.destroyModelInstances(o)):s.sendTransaction(a),s.setLoadingStatusForStoreIds(o,n$329.NOT_LOADED)),r&&(a=this.resource.generateTransactionForAction(this,t,r),s.sendTransaction(a)),a},__superMap:{_1kOrh7261mi$1ZF$init:"init",_1kOrh7261mi$1yf$create:"create"}},throwFatalErrorForNoPrimaryKey:function(t){var e=n$24(this);n$11("Falsy primaryKey "+t+" on model of type "+e+".")},isStoreModel:n$9({readOnly:!0,cacheable:!1,get:function(){return this._isStoreModel
}}),isEmbedded:n$9({readOnly:!0,cacheable:!1,get:function(){return this._isEmbedded}}),saveToStore:function(t,e){this._mixinStoreSupport();var n=this.get("_cwDataHash");return this._linkToStore(t,e),this.writeDataToStore(n),this.save()},linkToStore:function(t,e){if(!this.get("isStoreModel")){var n=this.get("_cwDataHash");this._mixinStoreSupport(),this._linkToStore(t,e);var i=this.get("_cwDataHash"),r=n$333(n,i);if(r){n$66.pause();for(var a in r)for(var s=r[a],o=0,u=s.length;u>o;o++){var c=s[o],d=this.getKeyForDataKey(c),l=this.getMetadata(d);n$32(l,n$331)&&this.propertyChanged(d)}n$66.resume()}this.propertyChanged("loadingStatus")}},clearAllModelProperties:function(){this.get("isStoreModel")&&n$11("Cannot clear unlinked data hash on a Model that is still linked to its store.");var t=this.getMetadataByType(n$331),e=this.__cwDataHash;n$66.pause();for(var n in t)if(!Object.prototype.hasOwnProperty(n)){var i=t[n];e&&delete e[i.dataKey||n],i.clearCachedValueForObject(this,n),this.propertyChanged(n)}n$66.resume()},setRawValue:function(t,e){var n=this.getMetadata(t)||null;if(n){var i=n.setRawValueForObject,r=i?i:n.finalSetForObject;r.call(n,this,t,e)}else this[t]=e;return e},getRawValue:function(t){var e,n=this.getMetadata(t)||null;if(n){var i=n.getRawValueForObject,r=i?i:n.getForObject;e=r.call(n,this,t)}else e=this[t];return e},load:function(){var t=this.getPrimaryKey();t||0===t||this.throwFatalErrorForNoPrimaryKey(t),this.linkToStore();var e=this.constructor.load(t);return e},forcePush:function(){return n$326().forcePush(this.constructor,[this.getPrimaryKey()])},reload:function(){return this.get("loadingStatus")!==n$329.LOADED?this.load():n$326().reload(this.constructor,[this.getPrimaryKey()])
},loadingStatus:n$9({get:function(){if(this._loadingStatus)return this._loadingStatus;var t=n$326(),e=this.get("_cwStoreId");return t&&e?t.getLoadingStatusForStoreId(e):n$329.NOT_LOADED},set:function(t){this._loadingStatus=t}}),status:n$9(),dataDidChange:n$12(),toJSON:function(){return n$231(this.get("_cwDataHash"))},destroy:function(){var t=this.getPrimaryKey();t||0===t||this.throwFatalErrorForNoPrimaryKey(t);var e=this.constructor.destroy([t],this.get("_cwStore"));return e},errors:n$9(),addError:function(t,e){var n=this.get("errors");void 0===n&&(n={}),void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this.set("errors",n)},validate:function(t){var e,n,i,r,a,s=this.getMetadataByType(n$3),o=Object.keys(s),u=0;t&&(o=Array.isArray(t)?t:[t]),this.set("errors",{});for(e in s)if(s.hasOwnProperty(e)&&-1!==o.indexOf(e)){if(n=s[e],i=n.validators,!i)continue;for(a=0;a<i.length;a++)r=i[a],r.validate(n.getForObject(this))||(this.addError(e,r.get("message")),u++)}return!u},_cwDataHash:n$4({readOnly:!0,get:function(){return this.getDataHash()},set:function(){}}),getDataHash:function(){return this.__cwDataHash||(this.__cwDataHash={})},_embed:function(t,e){e.get("isStoreModel")&&n$11("Cannot embed a store-backed model. Did you mean to set up a relationship?",e),e.get("isEmbedded")&&n$11("This model is already embedded in another parent",{parent:this,key:t,embeddedModel:e}),n$43(e,n$351),e.attachToParent(this,t);var n=this._materializedModels||(this._materializedModels={});n[t]=e},_mixinStoreSupport:function(){this.get("isEmbedded")&&n$11("Cannot put an embedded model directly into a store. Did you mean to set up a relationship?",this),this.get("isStoreModel")||(n$43(this,n$350),this.propertyChanged("isStoreModel"))
},_writeModelProperty:function(t,e){var n=this.get("_cwDataHash");return n&&(n[t]=e),e},initializeClass:function(){var t,e=this.getMetadataByType(n$3);for(var n in e){var i=e[n],r=i.isPrimaryKey;r&&(t&&n$11("Models cannot define multiple primary keys ("+this.displayName+": '"+t+"', '"+n+"')",this),t=n)}this.constructor.primaryKey=t,this.__s._1kOrh7261mi$6hw$initializeClass.apply(this,arguments)},getPrimaryKey:function(){return this.get(this.constructor.primaryKey)},getKeyForDataKey:function(t){var e=this.__cwDataKeyMap;return e?e[t]||t:t},propertyChanged:function(t){this.__s._1kOrh7261mi$6oC$propertyChanged.call(this,this.getKeyForDataKey(t))},__superMap:{_1kOrh7261mi$6hw$initializeClass:"initializeClass",_1kOrh7261mi$6oC$propertyChanged:"propertyChanged"}});n$353=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.Model"}();
    
    
        
!function(){"use strict";function e(e){switch(e){case Date:return n.Date;case Boolean:return n.Boolean;case String:return n.String;default:return n[e]}}var t=n$8.extend({requiresSupport:n$353,type:null,isPrimaryKey:!1,dataKey:null,setInitialValueForObject:function(e,t,n){var r=this.dataKey;return r&&!n&&(n=e[r],delete e[r],n$39(n)&&(n=n.call(this))),n&&(n=this._encodeValue(e,t,n)),void 0!==n&&this.setRawValueForObject(e,t,n),delete e[t],this.__s._g1BPWeqSVW$S8$setInitialValueForObject.call(this,e,t,n)},downstreamNodeManagerClass:n$78.extend({calculateValueForNode:function(e,t,n){if(n){var r=n$66.getStateIDForNode(t);n$66._sanitizeNodeID(r)>0&&n$66.getValueForNode(r)}var i=this.key,o=this.property.getRawValueForObject(e,i);return this.property._materializeValue(e,i,o)},isCacheable:!1}),upstreamNodeManagerClass:n$67.extend({calculateValueForNode:function(e,t,n){var r;if(n){var i=n$66.getStateIDForNode(t);r=this.pullDataFromParent(t,i)}else r=n$66.getStateDataForNode(t);var o=this.key;r=this.property._encodeValue(e,o,r),this.property.clearCachedValueForObject(e,o),this.property.setRawValueForObject(e,o,r),e.dataDidChange(o,r)}}),didChange:n$23,setRawValueForObject:function(e,t,n){var r=this.dataKey||t;return e._writeModelProperty(r,n),n},getRawValueForObject:function(e,t){var n,r=this.dataKey||t,i=e.get("_cwDataHash");return i&&(n=i[r]),void 0===n?null:n},_encodeValue:function(e,t,n){var r;return e.__cwMaterializedValues&&(r=e.__cwMaterializedValues[t])&&(r.release&&r.release(),delete e.__cwMaterializedValues[t]),n$32(n,n$353)&&e._embed(t,n),n&&n.toJSON?n.toJSON():n},_materializeValue:function(t,n,r){if(t.__cwMaterializedValues&&t.__cwMaterializedValues[n])return t.__cwMaterializedValues[n];
var i=this.type,o=!1;if(Array.isArray(r))r=n$158.create(r),r.listen("contentsDidChange",function(){t.dataDidChange(n,r)}),o=!0;else if(i){var s=e(i);if(s)r=s(r);else{var a=this.type;r=a.create(r),r.retain(),t._embed(n,r)}o=!0}return o&&(t.__cwMaterializedValues||(t.__cwMaterializedValues={}),t.__cwMaterializedValues[n]=r,r&&r.retain&&r.retain()),r},clearCachedValueForObject:function(e,t){var n;e.__cwMaterializedValues&&(n=e.__cwMaterializedValues[t])&&(n.release&&n.release(),delete e.__cwMaterializedValues[t])},initForObject:function(e,t){this.__s._g1BPWeqSVW$1q1$initForObject.apply(this,arguments);var n=this.dataKey;if(n){var r=e.__cwDataKeyMap||(e.__cwDataKeyMap={});r[n]=t}},__superMap:{_g1BPWeqSVW$S8$setInitialValueForObject:"setInitialValueForObject",_g1BPWeqSVW$1q1$initForObject:"initForObject"}}),n={Boolean:function(e){return!!e},Date:function(e){return null===e||void 0===e?e:n$56(e)?new Date(e):new Date(Date.parse(e))},String:function(e){return e.toString()}},r=function(e){return"object"!=typeof e&&(e={defaultValue:e}),t.create(e)};n$331=t,n$352=r,t.__QUALIFIED_CLASS_NAME__="CW.Data.ModelProperty"}();
    
    
        
!function(){"use strict";var e=n$353.extend(n$302,{isCacheableInPool:!0,staticMembers:{pluralPrimaryKey:"serverIds",synthesizeUnknownProperties:!1,_allModelClasses:[],init:function(){this.__s._Lo2eSs4iQ0$AW$init.apply(this,arguments),this._allModelClasses.push(this)},resetAllForChangeset:function(){var t;if(this!==e){t=this.livingInstanceSet.length;for(var n=this.livingInstanceSet.items;t--;)n[t].resetForChangeset()}else for(t=this._allModelClasses.length;t--;){var i=this._allModelClasses[t];i!==e&&i.resetAllForChangeset()}},createAllInstancesInStore:function(){var e=n$326()._getPrimaryKeyMapForModel(this);return Object.keys(e).map(function(e){return this.create(e)},this)},reloadOrResetDataForClientIdsAsNeeded:function(e){e=n$127(e);for(var t,n=n$326(),i=this.livingInstanceSet.length,r=this.livingInstanceSet.items;i--;){var s=r[i];t=s.clientId,e[t]&&(s.reload(),delete e[t])}for(t in e)if(e.hasOwnProperty(t)){var a=n.getStoreIdForPrimaryKey(this,t);a&&n._persistenceStore.resetData(a)}},__superMap:{_Lo2eSs4iQ0$AW$init:"init"}},clientId:n$9(n$14("serverId")),serverId:n$352({isPrimaryKey:!0}),initFromPool:function(e){this.__s._Lo2eSs4iQ0$ri$initFromPool.apply(this,arguments),this.set("clientId",e)},resetForChangeset:function(){this.get("isStoreModel")&&this.unlinkFromStore()},dispose:function(){this.get("isStoreModel")&&this.unlinkFromStore(),this.clearAllModelProperties(),this.__s._Lo2eSs4iQ0$ye$dispose.apply(this,arguments)},toString:function(){var e=n$24(this);return"["+e+":"+n$22(this)+":"+this.get("clientId")+"]"},__superMap:{_Lo2eSs4iQ0$ri$initFromPool:"initFromPool",_Lo2eSs4iQ0$ye$dispose:"dispose"}});
n$363=e,e.__QUALIFIED_CLASS_NAME__="Photos.Model"}();
    
    
        
!function(){"use strict";function e(e,n){var i=n$27(arguments,0,1),r="_cw_boundFunction_"+n$236(arguments);(null===n||void 0===n)&&t(n);var s=n[r];return s||(s=n[r]=e.bind.apply(e,i),n[r]||t(n)),s}function t(e){n$11("CW.Utils.bindFunction cannot bind a function to a primitive or frozen object ("+e+" in this case). Use `Function#bind` instead.")}n$356=e}();
    
    
        
!function(){"use strict";!function(){if(!(window.setImmediate instanceof Function&&window.clearImmediate instanceof Function)){var e=!1,t=1,n=1,r=[],i=[],o=window.location.origin,s=[],a=function(e){e.length=0,s.push(e)};window.setImmediate=function(a){var u=t++,l=u-n;r[l]=a;var c=arguments.length;if(c>1){for(var h=s.pop()||[],d=1;c>d;d++)h[d-1]=arguments[d];i[l]=h}return e||(e=!0,window.postMessage(void 0,o)),u},window.clearImmediate=function(e){var t=e-n;r[t]=void 0;var o=i[t];o&&(i[t]=void 0,a(o))},window.addEventListener("message",function(){e=!1;var t=r.length;if(t){for(var o=0;t>o;o++){var s=r[o];if(s){var u=i[o];u?(s.apply(this,u),a(u)):s()}}var l=t;for(t=r.length,o=l;t>o;o++){var c=o-l;r[c]=r[o],i[c]=i[o],r[o]=void 0,i[o]=void 0}r.length=i.length=t-l,n+=l}},!0)}}()}();
    
    
        
!function(){"use strict";var e=function(e){var t=arguments;return t[0]=n$105(e),window.setImmediate.apply(window,t)};n$357=e}();
    
    
        
!function(){"use strict";var e=0,t=1,n=2,r={dispose:function(){this._throttledFunctionKeys.forEach(this._cleanUpThrottledFunctionForDispose,this),this.__s._34JLSHwEUAt$8f$dispose.apply(this,arguments)},_throttledFunctionDataForKey:function(e){var t="_"+e+"_throttledFunctionData",n=this.hasOwnProperty(t)&&this[t];return n||(n=this[t]=new a(this[t])),n},_cleanUpThrottledFunctionForDispose:function(e){this._fireThrottledFunctionIfNeeded(e);var t=this._throttledFunctionDataForKey(e);clearTimeout(t.timeoutId)},_fireThrottledFunctionIfNeeded:function(r){var o=this._throttledFunctionDataForKey(r);clearTimeout(o.timeoutId);var s=o.status;if(s!==e)if(s===t)o.status=e;else if(s===n){o.status=t;var a=o.args;if(o.func.apply(this,a),o.status===t)for(var u=a.length,l=0;u>l;l++)a[l]=null;o.timeoutId=n$130(i,o.time,this,r)}},__superMap:{_34JLSHwEUAt$8f$dispose:"dispose"}},i=function(e,t){e||n$11("ThrottledFunction lost its object.",arguments),e._fireThrottledFunctionIfNeeded(t)},o=n$28.extend({requiresSupport:r,func:null,throttleTime:100,shouldAlwaysDefer:!1,init:function(e,t,n){this.func=e,void 0!==t&&(this.throttleTime=t),void 0!==n&&(this.shouldAlwaysDefer=n),this.__s._34JLSHwEUAt$10n$init.call(this)},initializeMember:function(r,o){r._throttledFunctionKeys=r._throttledFunctionKeys||[],r.hasOwnProperty("_throttledFunctionKeys")||(r._throttledFunctionKeys=r._throttledFunctionKeys.slice()),r._throttledFunctionKeys.push(o);var s=r._throttledFunctionDataForKey(o);s.time=this.throttleTime,s.shouldAlwaysDefer=this.shouldAlwaysDefer;var a=function(){var r=this._throttledFunctionDataForKey(o);(r.status!==e||(r.shouldAlwaysDefer||(r.status=t,r.func.apply(this,arguments)),r.timeoutId=n$130(i,r.time,this,o),r.shouldAlwaysDefer))&&(n$26(r.args,arguments,0,0),r.status=n)
},u=this.func;return s.func=function(){var e=u.apply(this,arguments);e&&a.apply(this,arguments)},a},__superMap:{_34JLSHwEUAt$10n$init:"init"}}),s=function(){return o.create.apply(o,arguments)},a=function(e){this.args=[],e&&n$43(this,e)};a.prototype={status:e,args:null,timeoutId:0,time:-1,shouldAlwaysDefer:!1,func:null},n$359=r,n$358=s,o.__QUALIFIED_CLASS_NAME__="Photos.ThrottledFunction$290"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$359],previewAsset:n$9({readOnly:!0,dependencies:["_previewAsset"],get:function(t,e,n,i){return this._wantsPreviewAsset||n$357(n$356(this.setIfChanged,this,"_wantsPreviewAsset",!0)),i.internalGetPath(this,e[0+n])}}),_wantsPreviewAsset:n$9({didChange:function(t){t&&this.loadingStatus===n$329.NOT_LOADED&&this.load()}}),_previewAsset:n$355({readOnly:!0,dependencies:["_wantsPreviewAsset","loadingStatus","isAlbum","keyAsset","contentsDidChange"],get:function(t,e,n,i){if(!i.internalGetPath(this,e[0+n]))return null;if(i.internalGetPath(this,e[1+n])!==n$329.LOADED)return null;if(i.internalGetPath(this,e[2+n]))return i.internalGetPath(this,e[3+n]);var r=this._searchChildFoldersForPreviewAsset(this.constructor.ALBUM);return void 0!==r?r:(r=this._searchChildFoldersForPreviewAsset(this.constructor.FOLDER),void 0!==r?r:null)},didChange:function(){if(this._wantsPreviewAsset){var t=this.parentFolder;t&&t._checkForNewPreviewAsset()}}}),_checkForNewPreviewAsset:n$358(function(){this.propertyChanged("_previewAsset")},50),_searchChildFoldersForPreviewAsset:function(t){for(var e=this.itemCount,n=0;e>n;n++){var i=this.itemAtIndex(n).retain("previewAsset search").autorelease("previewAsset search"),r=i.type;if(!r||r===t){var a=i.previewAsset;if(a||!i.isDeeplyLoaded)return a}}return void 0}};n$360=t}();
    
    
        
!function(){"use strict";function e(){return n.define.apply(n,arguments)}function t(e,t,n){for(var i=0;i<e.length;i++)n[i]=t(e[i],i);return n}var n=n$8.extend({readOnly:!0,source:null,inputDidChange:function(e,t,n){this.propertyChanged(n.key)},retainsInputs:!0,retainsOutputs:!0,outputForInput:function(e){return e},inputDidEnter:function(){},inputDidExit:function(){},outputDidEnter:function(){},outputDidExit:function(){},init:function(e){(e.dependencies||!e.source)&&n$11("Must include exactly one dependency binding at `source` on MappedArrayProperty."),e.dependencies=[e.source],delete e.source,this.__s._1AiqCYqyscM$1TS$init.apply(this,arguments)},wasRegistered:function(e,t){var n=n$24(e);this._inputRetainReasonName="input to MappedArrayProperty `"+t+"` on "+n,this._outputRetainReasonName="output from MappedArrayProperty `"+t+"` on "+n;var i="_"+t+"_";this._key_outputsByInputGuid=i+"outputsByInputGuid",this._key_inputsByInputGuid=i+"inputsByInputGuid",this._key_lastReadInputGuids=i+"lastReadInputGuids",this._key_lastReturnedValue=i+"lastReturnedValue",this._key_notifyChangeFunc=i+"notifyChangeFunc",this.__s._1AiqCYqyscM$1s2$wasRegistered.apply(this,arguments)},get:function(e,n,i,r){var s=r,a=s.internalGet(this,n[0+i]),o=this[s._key_lastReadInputGuids];o&&(this[s._key_lastReadInputGuids]=null),this[s._key_lastReturnedValue]&&(n$319.disposeInstance(this[s._key_lastReturnedValue]),this[s._key_lastReturnedValue]=null);var u=!1;a||(u=!0,a=n$319.getInstance());for(var c,l=t(a,n$22,n$319.getInstance()),d=n$319.getInstance(),h=this[s._key_outputsByInputGuid]||(this[s._key_outputsByInputGuid]={}),p=this[s._key_inputsByInputGuid]||(this[s._key_inputsByInputGuid]={}),f=n$307.getInstance(),g=0;g<a.length;g++){c=l[g];
var _;if(h.hasOwnProperty(c))_=h[c];else{var v=p[c]=a[g];s._inputDidEnter.call(this,s,v),_=h[c]=s.outputForInput.call(this,v),s._outputDidEnter.call(this,s,_)}d[g]=_,f[c]=!0}if(o){for(g=0;g<o.length;g++)c=o[g],f[c]||(s._outputDidExit.call(this,s,h[c]),delete h[c],s._inputDidExit.call(this,s,p[c]),delete p[c]);n$319.disposeInstance(o)}return n$307.disposeInstance(f),u&&(n$319.disposeInstance(l),n$319.disposeInstance(d),l=d=null,n$319.disposeInstance(a)),this[s._key_lastReadInputGuids]=l,this[s._key_lastReturnedValue]=d,d},_inputDidChange:function(e,t){var n=n$22(t),i=this[e._key_outputsByInputGuid],r=i[n],s=e.outputForInput.call(this,t);s!==r&&(i[n]=s,e._outputDidExit.call(this,e,r),e._outputDidEnter.call(this,e,s),e.inputDidChange.call(this,t,s,e))},_inputDidEnter:function(e,t){var n=this[e._key_notifyChangeFunc]||(this[e._key_notifyChangeFunc]=e._inputDidChange.bind(this,e));e.retainsInputs&&n$33(t)&&t.retain(e._inputRetainReasonName),e.inputDidEnter.call(this,t,n)},_inputDidExit:function(e,t){e.inputDidExit.call(this,t),e.retainsInputs&&n$33(t)&&t.release(e._inputRetainReasonName)},_outputDidEnter:function(e,t){e.retainsOutputs&&n$33(t)&&t.retain(e._outputRetainReasonName),e.outputDidEnter.call(this,t)},_outputDidExit:function(e,t){e.outputDidExit.call(this,t),e.retainsOutputs&&n$33(t)&&t.release(e._outputRetainReasonName)},__superMap:{_1AiqCYqyscM$1TS$init:"init",_1AiqCYqyscM$1s2$wasRegistered:"wasRegistered"}});n$939=n,n$361=e,n.__QUALIFIED_CLASS_NAME__="Photos.MappedArrayProperty"}();
    
    
        
!function(){"use strict";function e(e){e&&(e.forEach(t),n$319.disposeInstance(e))}function t(e){e&&e.release("childFoldersForPreviewAssets")}function n(e){e&&e.retain("childFoldersForPreviewAssets")}var i={mixinDependencies:[n$360,n$359],previewAssets:n$9({readOnly:!0,dependencies:["_previewAssets","isAlbum"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?null:(this._wantsPreviewAssets||n$357(n$356(this.setIfChanged,this,"_wantsPreviewAssets",!0)),i.internalGetPath(this,t[0+n]))}}),_wantsPreviewAssets:n$9(!1),_desiredPreviewAssetCount:n$9(9),childFoldersForPreviewAssets:n$9({readOnly:!0,dependencies:["isAlbum","_wantsPreviewAssets","_desiredPreviewAssetCount",n$211.bindingFor("shouldIncludeEmptyAlbumsFromFolderPreviews"),"contentsDidChange"],get:function(t,i,r,s){var a=this._cfpa_lastRet;if(this._cfpa_lastRet=null,s.internalGetPath(this,i[0+r])!==!1||!s.internalGetPath(this,i[1+r]))return e(a),null;for(var o=n$319.getInstance(),l=this.itemCount,u=0;l>u&&o.length<s.internalGetPath(this,i[2+r]);u++){var c=this.itemAtIndex(u).retain(this).autorelease(this),h=c.loadingStatus;(s.internalGetPath(this,i[3+r])||h===n$329.NOT_LOADED||h===n$329.LOADED&&(!c.isAlbum||c.itemCount))&&o.push(c)}return o.forEach(n),e(a),this._cfpa_lastRet=o,o}}),_watchLoadingStatusForParent:!n$211.shouldIncludeEmptyAlbumsFromFolderPreviews&&n$170("loadingStatus","itemCount",function(e,t){var n=e===n$329.ERRORED;if((n||e===n$329.LOADED)&&this._wlsfp_lastItemCount!==t){this._wlsfp_lastItemCount=t;var i=this.parentFolder;i&&i._checkForNewChildFoldersForPreviewAssets()}}),_checkForNewChildFoldersForPreviewAssets:n$358(function(){this.propertyChanged("childFoldersForPreviewAssets")
},50),_previewAssets:n$361({source:"childFoldersForPreviewAssets",inputDidEnter:function(e,t){e._previewAssets_notifyChangeFunc=t},inputDidExit:function(e){e._previewAssets_notifyChangeFunc=null},outputForInput:function(e){return e.previewAsset}}),_previewAssets_notifyMappingChange:n$170("_previewAsset",function(e){e=e||null;var t=this._pa_notifyMappingChange_lastValue;if(this._pa_notifyMappingChange_lastValue=e,t!==e){var n=this._previewAssets_notifyChangeFunc;n&&n(this)}})};n$365=i}();
    
    
        
!function(){"use strict";function t(t){for(var e=""+t[0],n=t.length,i=1;n>i;i++)e+=" "+t[i];return e}var e={_sl_selfLog:null,activeSelfLogger:null,activeLoggingName:n$4({get:function(t){return t||this.toString()}}),selfLogOnlyStrings:!0,cumulativeSelfLog:n$4({readOnly:!0,get:function(){var e=function(e){return Array.isArray(e)?t(e):e};return function(){return this._sl_selfLog.map(e).join("\n")}}()}),selfLog:function(){if(!arguments.length)return this._showSelfLog();var e=new Date,n="."+(+e%1e3+"00").substring(0,3),i=e.toTimeString();i=i.substring(0,i.indexOf(" "))+n;var r=[i+":"];r.push.apply(r,arguments),this._sl_selfLog=this._sl_selfLog||[],this._sl_selfLog.push(this.selfLogOnlyStrings?t(r):r);var a=this.activeSelfLogger;a&&(r.unshift(this.activeLoggingName,"at"),this._logEntry(r,a))},_showSelfLog:function(){this._sl_selfLog.forEach(this._logEntryToConsole,this)},_logEntryToConsole:function(t){this._logEntry(t,console.log)},_logEntry:function(e,n){if(Array.isArray(e))try{n.apply(console,e)}catch(i){n.call(console,t(e))}else n.call(console,e)}};n$362=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$362],init:function(){this.__s._2_TFqo7TnPk$8n$init.apply(this,arguments),this.selfLog("after init(), serverId="+this.serverId)},initFromPool:function(e){this.__s._2_TFqo7TnPk$Aq$initFromPool.apply(this,arguments),this.selfLog("after initFromPool("+e+"), serverId="+this.serverId)},load:function(){return this.selfLog("entering load() while","serverId="+this.serverId,"loadingStatus="+this.loadingStatus+";","isInitializedFromPool="+this.isInitializedFromPool+";"),this.__s._2_TFqo7TnPk$Gw$load.apply(this,arguments)},getPrimaryKey:function(){var e=this.__s._2_TFqo7TnPk$H_$getPrimaryKey.apply(this,arguments);return this.selfLog("getPrimaryKey() =>",e),e},_watchServerId:n$7("serverId",function(e){e!==this._lastKnownServerId&&(this.selfLog("serverId changed from",this._lastKnownServerId,"to",e,"while","loadingStatus="+this.loadingStatus+";","isInitializedFromPool="+this.isInitializedFromPool+",",this.isInitializedFromPool&&this._lastKnownServerId&&!e?"disappeared while alive!":""),this._lastKnownServerId=e)}),_lastKnownServerId:null,throwFatalErrorForNoPrimaryKey:function(e){var t=n$24(this.constructor);n$11("Invalid primaryKey "+e+" on model of type "+t+".",{isInitializedFromPool:this.isInitializedFromPool,cwDataHash:JSON.stringify(this._cwDataHash),primaryKeysInStore:JSON.stringify(Object.keys(n$326()._getPrimaryKeyMapForModel(this.constructor))),selfLog:this.cumulativeSelfLog})},__superMap:{_2_TFqo7TnPk$8n$init:"init",_2_TFqo7TnPk$Aq$initFromPool:"initFromPool",_2_TFqo7TnPk$Gw$load:"load",_2_TFqo7TnPk$H_$getPrimaryKey:"getPrimaryKey"}};
n$369=e}();
    
    
        
!function(){"use strict";var e="_folder_itemCountObserver",t={"recently-added":{key:"RECENTLY_ADDED_ID",title:n$290("Folder.Recently.Added")},"deleted-photos":{key:"RECENTLY_DELETED_ID",title:n$290("Folder.Recently.Deleted")},"all-photos":{key:"ALL_PHOTOS_ID",title:n$290("Folder.AllPhotos")},favorites:{key:"FAVORITES_ID",title:n$290("Folder.Favorites")},panoramas:{key:"PANORAMAS_ID",title:n$290("Folder.Panoramas")},videos:{key:"VIDEOS_ID",title:n$290("Folder.Videos")},"slo-mo":{key:"SLO_MO_ID",title:n$290("Folder.SloMo")},"time-lapse":{key:"TIME_LAPSE_ID",title:n$290("Folder.TimeLapse")},bursts:{key:"BURSTS_ID",title:n$290("Folder.Bursts")},selfies:{key:"SELFIES_ID",title:n$290("Folder.Selfies")},screenshots:{key:"SCREENSHOTS_ID",title:n$290("Folder.Screenshots")},hidden:{key:"HIDDEN_ID",title:n$290("Folder.Hidden")}},n=n$363.extend(n$325,n$364,n$365,{staticMembers:function(){var e={};return Object.keys(t).forEach(function(n){e[t[n].key]=n}),e.TOP_LEVEL_GENERATED_ID="top-level-generated",e.TOP_LEVEL_USER_ID="top-level-user",e}()},{staticMembers:{FOLDER:"folder",ALBUM:"album",maxCacheLength:1/0,isValidTitle:function(e){return e&&e.length},ingestChange:function(e){var t=this.create(e.serverId).retain(this);if("folder"===e.type&&(e.operation===t.INSERT||e.operation===t.UPDATE))return t.reload(),t.setIfChanged("isGone",!1),t.release(this),void 0;t.linkToStore();var n=t.get("loadingStatus");t._childAssetsDatastore&&n$340({folder:t,childAssetsDatastoreBefore:t._childAssetsDatastore&&t._childAssetsDatastore.toBinaryFeed().toBase64String(),loadingStatus:n},t._ingestChange,[e],t),t.release(this)
},assetClientIdsInChange:function(e){var t;if("folder-assets"===e.type){var n=this.create(e.serverId).retain(this);n.linkToStore(),n.loadingStatus===this.LOADED&&(t=n._assetClientIdsInChange(e)),n.release(this)}return t||n$319.getAutodisposingInstance()},_baseAspectRatioEstimateForClientId:function(e){switch(e){case n.PANORAMAS_ID:case n.VIDEOS_ID:case n.SLO_MO_ID:case n.TIME_LAPSE_ID:return 1.6;case n.SCREENSHOTS_ID:return.625;default:return 1}}},type:n$352(),isAlbum:n$9({readOnly:!0,cacheable:!1,dependencies:["type"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.ALBUM?!0:r===this.constructor.FOLDER?!1:void 0}}),isServerCreated:n$9({readOnly:!0,dependencies:["_parentServerId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.TOP_LEVEL_GENERATED_ID}}),isUserCreatedSmartAlbum:n$9({readOnly:!0,dependencies:["isServerGenerated","isServerCreated"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&!r}}),saveToStore:function(){var e=this.__s._2zhF1CvEHhU$25T$saveToStore.apply(this,arguments);return this.retain("saveToStore"),e.catch(n$356(this.setIfChanged,this,"isGone",!0)),e.finally(n$356(this.release,this,"saveToStore")),e},_childAssetsDatastore:n$355(),_childAssetsBinaryFeed:n$352({dataKey:"childAssetsBinaryFeed"}),_childAssetsBinaryFeedDidChange:n$7("_childAssetsBinaryFeed","isAlbum",function(e,t){if(t){var n=this.get("_childAssetsDatastore");n||(n=n$367.create(),this.set("_childAssetsDatastore",n),n$309.alternateDatastores.add(n)),e!==this._previouslyPopulatedChildAssetsBinaryFeed&&(n$340({folderId:this.serverId,childAssetsBinaryFeed:e},n.populate,[e],n),this._previouslyPopulatedChildAssetsBinaryFeed=e)
}}),_previouslyPopulatedChildAssetsBinaryFeed:null,_childAssetsBinaryFeedContentsWillChange:n$7("_childAssetsDatastore.contentsWillChange",function(e){e&&this.isInitialized&&this.get("isAlbum")&&this.contentsWillChange()}),_childAssetsBinaryFeedContentsDidChange:n$7("_childAssetsDatastore.contentsDidChange",function(e){e&&this.isInitialized&&this.get("isAlbum")&&this.contentsDidChange()}),_ingestChange:function(e){var t=e.type,n=e.operation;"folder-assets"===t||"folder-asset-derivatives"===t?(e.type=t.replace("folder-",""),this.get("_childAssetsDatastore").ingestChange(e)):"folder"===t?n===this.REMOVE&&this.set("isGone",!0):n$11('Folder cannot handle "'+t+'" changes.',{folder:this,change:e})},childAssetIds:n$4({readOnly:!0,get:function(){if(!this.get("isAlbum"))return null;var e=this.get("_childAssetsDatastore");if(!e)return null;for(var t=e.get("itemCount"),n=new Array(t),i=t;i--;)n[i]=e.clientIdForIndex(i);return n}}),_unfilteredChildFolderIds:n$352({dataKey:"childFolderIds"}),_childFolderIds:n$158.filter("_unfilteredChildFolderIds",function(t){var n=this.constructor.create(t).retain(this).autorelease(this);if(n.get("isGone"))return!1;if(this.get("clientId")!==this.constructor.TOP_LEVEL_GENERATED_ID)return!0;n.retain(this),n.get("loadingStatus")!==this.constructor.LOADED&&n.load(),n[e]||(n[e]=n.listen("itemCount",function(e){n.isGone=!e,this.propertyChanged("_unfilteredChildFolderIds")}.bind(this)));var i=n.get("itemCount")>0;return n.setIfChanged("isGone",!i),i}),_childFolderIdsDidChange:n$7("_childFolderIds","_childFolderIds.contentsDidChange",function(){this.get("isAlbum")||(this.contentsWillChange(),this.contentsDidChange())
}),_parentServerId:n$352({dataKey:"parentServerId"}),parentFolder:n$355({dependencies:["_parentServerId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.constructor.create(r):null},writeDependencies:["_parentServerId"],set:function(e,t,n,i){return n[0+i]=e.serverId},writeDependencySetPathMap:[!1]}),indexInParent:n$9({dependencies:["parentFolder._childFolderIds"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.indexOf(this.get("serverId")):null}}),isAddAllowed:n$9({readOnly:!0,dependencies:["isServerGenerated",n$103.bindingFor("application.isCreateAllowed")],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])}}),isUploadAllowed:n$9({readOnly:!0,dependencies:["isAddAllowed","isAlbum"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])&&i.internalGetPath(this,t[0+n])}}),isUploadAllowedInUI:n$9({readOnly:!0,dependencies:["isUploadAllowed","clientId"],get:function(e,t,i,r){var s=r.internalGetPath(this,t[1+i]);return s===n.ALL_PHOTOS_ID||s===n.RECENTLY_ADDED_ID||r.internalGetPath(this,t[0+i])}}),isRemoveAllowed:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isDeleteAllowed"),n$298.bindingFor("enableExpunge"),"clientId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a&&(r!==this.constructor.RECENTLY_DELETED_ID||s)}}),removeType:n$9({readOnly:!0,dependencies:["isServerGenerated","clientId","isAlbum"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);
return r?s===this.constructor.RECENTLY_DELETED_ID?n$366.EXPUNGE:a?n$366.DELETE:n$366.REMOVE:n$366.DELETE}}),areItemsModifiable:n$9({readOnly:!0,dependencies:["clientId",n$103.bindingFor("application.isUpdateAllowed")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!(!r||s===this.constructor.RECENTLY_DELETED_ID)}}),isServerGenerated:n$352(),dateRange:n$352(),keyAssetClientId:n$352(),isRecentlyDeleted:n$9({readOnly:!0,dependencies:["clientId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.RECENTLY_DELETED_ID}}),isHiddenAlbum:n$9({readOnly:!0,dependencies:["clientId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.HIDDEN_ID}}),_validateKeyAssetClientId:n$7(n$330.bindingFor("dataManager.didIngestChangeset"),function(e){if(e&&this.get("isAlbum")){var t=this.get("_childAssetsDatastore");if(t){var n=this.get("keyAssetClientId"),i=t.get("itemCount");(i&&-1===t.indexForClientId(n)||!i&&n)&&this.reload()}}}),keyAsset:n$355({dependencies:["keyAssetClientId","isRecentlyDeleted","isHiddenAlbum"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n])||i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[0+n]);return s&&!r?n$309.create(s):null},writeDependencies:["keyAssetClientId"],set:function(e,t,n,i){var r=e?e.clientId:null;n[0+i]=r},writeDependencySetPathMap:[!1]}),isDeeplyLoaded:n$9({readOnly:!0,dependencies:["loadingStatus","isAlbum","itemCount"],get:function(e,t,n,i){if(i.internalGetPath(this,t[0+n])!==n$329.LOADED)return!1;if(i.internalGetPath(this,t[1+n]))return!0;
for(var r=i.internalGetPath(this,t[2+n]),s=0;r>s;s++){var a=this.itemAtIndex(s).retain("isDeeplyLoaded walk");if(!a.isDeeplyLoaded)return!1;a.release("isDeeplyLoaded walk")}return!0},didChange:function(e){var t=this._isDeeplyLoaded_lastValue;if(t!==e){this._isDeeplyLoaded_lastValue=t;var n=this.parentFolder;n&&n.propertyChanged("isDeeplyLoaded")}}}),itemClass:n$4({readOnly:!0,get:function(){return this.get("isAlbum")?n$309:this.constructor}}),itemCount:n$9({readOnly:!0,dependencies:["contentsDidChange"],get:function(){if(this.get("isAlbum")){var e=this.get("_childAssetsDatastore");return e?e.get("itemCount"):0}var t=this.get("_childFolderIds");return t?t.get("length"):0}}),getDedupedTitle:function(e,t){for(var n={},i=0;i<this.itemCount;i++){var r=this.itemAtIndex(i).retain(this);r.linkToStore(),r.title&&r.type===t&&(n[r.title]=!0),r.release(this)}var s=/^(.*)\s\((\d+)\)$/g,a=e,o=e,l=0,h=s.exec(e);for(h&&(a=h[1],l=parseInt(h[2],10),0===l&&(o=a));n[o];)o=a+" ("+ ++l+")";return o},itemAtIndex:function(e){if(!this.get("isAlbum")){var t=this.get("_childFolderIds");return!t||e>=t.get("length")?void 0:this.constructor.create(this.get("_childFolderIds").objectAt(e))}return this.get("_childAssetsDatastore").itemAtIndex(e)},removeItemsAtIndexes:function(e,t,n){if(this.get("isAlbum"))return this.get("_childAssetsDatastore").removeItemsAtIndexes(e,t);var i=function(e){var t=this.constructor.create(e).retain(this).autorelease(this);t.set("isGone",!1),this.propertyChanged("_unfilteredChildFolderIds")},r=this.get("_childFolderIds"),s=e.map(function(e){var t=r.objectAt(e),s=this.constructor.create(t).retain(this).autorelease(this);
return s.set("isGone",!0),n&&s.destroy().catch(i.bind(this,t)),t},this);return this.propertyChanged("_unfilteredChildFolderIds"),s.forEach.bind(this,i.bind(this))},removeAssetsWithClientIds:function(e){return this.get("isAlbum")||n$11("removeAssetsWithClientIds is not supported for non-albums."),this.get("_childAssetsDatastore").removeItemsWithClientIds(e)},removeItemsAtIndexesAndWriteToServer:function(e){if(!this.get("isAlbum"))return this.removeItemsAtIndexes(e,!1,!0),void 0;var t=this.get("removeType");t===n$366.REMOVE?(this.removeItemsAtIndexes(e),this._pushChildAssetsDatastoreToServer({operation:n$368.REMOVE,itemCount:e.length})):t===n$366.EXPUNGE?n$309.expungeAssetsWithClientIds(this.clientIdsForIndexes(e)):n$309.deleteAssetsWithClientIds(this.clientIdsForIndexes(e))},appendAssetsWithClientIds:function(e){this.isAlbum||n$11("Cannot append assets to a folder.",this),this.isUserCreatedSmartAlbum&&n$11("Cannot append assets to a smart album.",this);for(var t=[],n=[],i={},r=this.itemCount,s=0;s<e.length;s++){var a=e[s];if(!i[a]&&-1===this._childAssetsDatastore.indexForClientId(a)){i[a]=!0;var o=n$309.create(a).retain("appendAssetsWithClientIds");t.push(r++),n.push(o.toDatastoreData()),o.release("appendAssetsWithClientIds")}}if(t.length){var l=!this.isStoreModel;this._childAssetsDatastore.insertItemDataAtIndexes(t,n,!0,l),l||this._pushChildAssetsDatastoreToServer({operation:n$368.ADD,itemCount:t.length})}},clientIdsForIndexes:function(e){return this.get("isAlbum")||n$11("Folder#clientIdsForIndexes for non-Album folders is not implemented."),this.get("_childAssetsDatastore").clientIdsForIndexes(e)
},allClientIds:n$9({readOnly:!0,dependencies:["_childAssetsDatastore.allClientIds"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.get("isAlbum")||n$11("Folder#allClientIds for non-Album folders is not implemented."),r}}),_pushChildAssetsDatastoreToServer:function(e){this.retain(this),this.isServerCreated&&n$11("Trying to update a server created album.",this);var t=this._pushChildAssetsDatastoreToServerAlertInfo;t[e.operation]=t[e.operation]||0,t[e.operation]+=e.itemCount;var n=function(){this.release(this)}.bind(this);this.forcePush().then(function(){t[e.operation]-=e.itemCount}.bind(this),function(){this._childAssetsDatastore.resetToBackingDatastore();for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n&&(n$368.sharedInstance.showErrorAlert({operation:e,failure:n$368.GENERIC,itemCount:n}),t[e]=0)}}.bind(this)).finally(n)},_pushChildAssetsDatastoreToServerAlertInfo:n$84(Object),preloadRange:function(e,t){if(!this.get("isAlbum"))return n$326().fetchFolders(),void 0;e=Math.max(e,0),t=Math.min(t,this.get("itemCount"));for(var n=n$319.getInstance(),i=e;t>i;i++)n.push(this.get("_childAssetsDatastore").clientIdForIndex(i));n$309.load(n),n$319.disposeInstance(n)},aspectRatioEstimateForItemAtIndex:function(e){return this.clientId===this.constructor.TOP_LEVEL_GENERATED_ID?this.itemAtIndex(e).retain(this).release(this).aspectRatioEstimate:this.isAlbum?this._childAssetsDatastore.aspectRatioEstimateForItemAtIndex(e):1},aspectRatioEstimate:n$9({readOnly:!0,dependencies:["isAlbum","keyAsset","keyAsset.aspectRatio","clientId"],get:function(e,t,n,i){var r=this.constructor._baseAspectRatioEstimateForClientId(i.internalGetPath(this,t[3+n]));
if(1===r||!i.internalGetPath(this,t[0+n]))return r;var s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]);return s&&a?a:(s&&n$357(n$356(s.load,s)),r)}}),_title:n$352({dataKey:"title"}),title:n$9({dependencies:["_title","clientId"],get:function(e,n,i,r){var s=r.internalGetPath(this,n[0+i]),a=r.internalGetPath(this,n[1+i]);return t[a]?t[a].title:s||""},writeDependencies:["_title"],set:function(e,t,n,i){return n[0+i]=e},writeDependencySetPathMap:[!1]}),uniqueIdForItem:function(e){return e.get("clientId")},uniqueIdForIndex:function(e){return this._clientIdForIndex(e)},_clientIdForIndex:function(e){return this.get("isAlbum")?this.get("_childAssetsDatastore").clientIdForIndex(e):this.get("_childFolderIds").objectAt(e)},_loadedAllFolders:!1,loadAfterAllFolders:function(){if(this._loadedAllFolders)return this.load();var e=n$247.create(),t=function(){e.resolve(this.load()),this._loadedAllFolders=!0}.bind(this);return n$326().fetchFolders().then(t,t),e},dispose:function(){var t=this[e];t&&(t.disconnect(),this[e]=null);var n=this.get("_childAssetsDatastore");n&&n$309.alternateDatastores.remove(n),this._previouslyPopulatedChildAssetsBinaryFeed=null,this.set("isGone",!1),this.__s._2zhF1CvEHhU$Bvu$dispose.apply(this,arguments)},_assetClientIdsInChange:function(e){var t=this._childAssetsDatastore;t||n$11("Using `assetClientIdsInChange` on a Folder that lacks a childAssetsDatastore.");var n=n$319.getAutodisposingInstance();return n$320.create(e.binaryFeed).eachIndex(e.operation===this.INSERT?function(e,t,i){n.push(i)}:function(e){n.push(t.backingClientIdForIndex(e))}),n},__superMap:{_2zhF1CvEHhU$25T$saveToStore:"saveToStore",_2zhF1CvEHhU$Bvu$dispose:"dispose"}},n$369);
n$370=n,n.__QUALIFIED_CLASS_NAME__="Photos.Folder"}();
    
    
        
!function(){"use strict";var e={modelProviderForBookmarkId:function(e){var n=t[e];return n||n$370.create(e)},bookmarkIdForModelProvider:function(e){var t=n[n$22(e)];return t||e.get("clientId")},registerModelProviderForBookmarkId:function(e,r){t[e]=r,n[n$22(r)]=e}},t={},n={};n$372=e}();
    
    
        
!function(){"use strict";var e=n$371.extend(n$364,{_backingDatastore:n$355(),initFromPool:function(){this.__s._1kcWTKyYJjn$Fi$initFromPool.apply(this,arguments),this.set("_backingDatastore",n$371.create())},populate:function(){var e=this.get("_backingDatastore");return e.populate.apply(e,arguments)},ingestChange:function(){var e=this.get("_backingDatastore");return e.ingestChange.apply(e,arguments)},backingClientIdForIndex:function(e){return this._backingDatastore.clientIdForIndex(e)},backingIndexForClientId:function(e){return this.get("_backingDatastore").indexForClientId(e)},backingIndexesForClientIds:function(e,t){return this.get("_backingDatastore").indexesForClientIds(e,t)},isAddAllowed:n$9(n$103.bindingFor("application.isCreateAllowed")),isRemoveAllowed:n$9(n$103.bindingFor("application.isDeleteAllowed")),removeType:n$9(n$366.DELETE),areItemsModifiable:n$9(n$103.bindingFor("application.isUpdateAllowed")),suspendChangeNotifications:function(){this.get("_backingDatastore").suspendChangeNotifications(),this.__s._1kcWTKyYJjn$pQ$suspendChangeNotifications.call(this)},resumeChangeNotifications:function(){this.get("_backingDatastore").resumeChangeNotifications(),this.__s._1kcWTKyYJjn$ut$resumeChangeNotifications.call(this)},resetToBackingDatastore:function(){var e=this.get("_backingDatastore");this.data&&!this.data.equals(e.data)&&n$340({type:n$24(this),backingDatastore:e.toBinaryFeed().toBase64String(),datastoreBefore:this.toBinaryFeed().toBase64String()},function(){this.contentsWillChange(),this.data.set(e.data),this._registerBackingMappings(),this.contentsDidChange()},null,this)
},insertItemDataAtIndexes:function(e,t,n,r){if(r){var i=this._backingDatastore;return i.insertItemDataAtIndexes.apply(i,arguments)}return this.__s._1kcWTKyYJjn$1Eh$insertItemDataAtIndexes.apply(this,arguments)},_registerBackingMappings:function(){this.resetClientIdsAndIndexCache();for(var e=this.get("_backingDatastore"),t=e.get("itemCount");t--;){var n=e.clientIdForIndex(t);this.registerClientIdAndIndex(n,t)}},_indexToBackingIndex:function(e){return this.get("_backingDatastore").indexForClientId(this.clientIdForIndex(e))},didIngestChangeset:n$12(!0),_backingDatastoreContentsDidChange:n$7("_backingDatastore.contentsDidChange",n$330.bindingFor("dataManager.didIngestChangeset"),function(e,t){this.isInitializedFromPool&&(e||t)&&(this.resetToBackingDatastore(),this.didIngestChangeset())}),__superMap:{_1kcWTKyYJjn$Fi$initFromPool:"initFromPool",_1kcWTKyYJjn$pQ$suspendChangeNotifications:"suspendChangeNotifications",_1kcWTKyYJjn$ut$resumeChangeNotifications:"resumeChangeNotifications",_1kcWTKyYJjn$1Eh$insertItemDataAtIndexes:"insertItemDataAtIndexes"}}),t=e.extend({_groupDatastores:n$84(Array),registerGroupDatastore:function(e){this._groupDatastores.push(e)},removeItemsAtIndexes:function(e,t){e.length&&(t||(e=e.slice().sort(n$303),t=!0),this._groupDatastores.forEach(function(n){return n.childIndexesRemovedFromGroups(e,t)}),this.__s._1kcWTKyYJjn$21K$removeItemsAtIndexes.call(this,e,t))},removeItemsAtIndexesAndWriteToServer:function(e){n$309.deleteAssetsWithClientIds(this.clientIdsForIndexes(e))},__superMap:{_1kcWTKyYJjn$21K$removeItemsAtIndexes:"removeItemsAtIndexes"}}),n=t.create().retain();
n$372.registerModelProviderForBookmarkId("assets-datastore",n),n$367=e,n$940=t,n$447=n,e.__QUALIFIED_CLASS_NAME__="Photos.AssetsDatastore",t.__QUALIFIED_CLASS_NAME__="Photos.PrimaryAssetsDatastore"}();
    
    
        
!function(){"use strict";function t(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function e(t,e,n){return t>=e&&n>=t}n$375=t,n$376=e}();
    
    
        
!function(){"use strict";var e=function(e){var t=arguments;return t[0]=n$105(e),window.setInterval.apply(window,t)};n$374=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{staticMembers:{bindingFiringEverySecond:function(){return this.bindingFiringEvery(1e3)},bindingFiringEvery:function(n){1e3>n&&n$11("Permanent interval of "+n+"ms is prohibitively rapid.");var i=t[n]=t[n]||e.create(n);return i.bindingFor("signal")}},signal:n$12(!0),init:function(e){this.__s._Wt9KTQsyGB$LD$init.call(this),n$374(this.signal.bind(this),e)},__superMap:{_Wt9KTQsyGB$LD$init:"init"}}),t={};n$377=e,e.__QUALIFIED_CLASS_NAME__="Photos.Heartbeat"}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$10,n$62,{_previousDate:null,_previousTimezoneOffset:null,init:function(){this._previousDate=this._getDate(),this._previousTimezoneOffset=this._previousDate.getTimezoneOffset(),this._previousDate.setHours(0,0,0,0),this.__s._HtBcCwJR8W$9m$init.apply(this,arguments)},_secondDidChange:n$7(n$377.bindingFiringEverySecond(),function(){var t=this._getDate();t.setHours(0,0,0,0);var e=t.getTimezoneOffset(),n=!1;+t!==+this._previousDate?(this.propertyChanged("today"),n=!0):this._previousTimezoneOffset!==e&&(n=!0),n&&this.dateOrTimezoneDidChange(),this._previousDate=t,this._previousTimezoneOffset=e}),dateOrTimezoneDidChange:n$12(),_getDate:function(){return new Date},today:n$9({readOnly:!0,get:function(){return this._getDate()}}),yesterday:n$9({readOnly:!0,dependencies:["today"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=new Date(r);return a.setDate(a.getDate()-1),a.setHours(0,0,0,0),a}}),tomorrow:n$9({readOnly:!0,dependencies:["today"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=new Date(r);return a.setDate(a.getDate()+1),a.setHours(0,0,0,0),a}}),endOfTomorrow:n$9({readOnly:!0,dependencies:["tomorrow"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=new Date(r);return a.setHours(23,56,56,999),a}}),lastWeek:n$9({readOnly:!0,dependencies:["today"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=new Date(r),s=parseInt(n$290("Date.Range.Days.Prior.For.Days.Of.The.Week"));return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}}),isToday:function(t){return n$375(t,this.get("today"))},isTomorrow:function(t){return n$375(t,this.get("tomorrow"))
},isYesterday:function(t){return n$375(t,this.get("yesterday"))},isColloquial:function(t){return n$376(t,Math.min(this.get("lastWeek"),this.get("yesterday")),this.get("endOfTomorrow"))},colloquialLocKey:function(t){return this.isToday(t)?"Today":this.isTomorrow(t)?"Tomorrow":this.isYesterday(t)?"Yesterday":"Day.Of.Week"},__superMap:{_HtBcCwJR8W$9m$init:"init"}});n$516=t,t.__QUALIFIED_CLASS_NAME__="Photos.RelativeDates"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{isFormData:function(e){return e instanceof window.FormData&&"undefined"!=typeof e},isBlob:function(e){return e instanceof window.Blob},isFile:function(e){return e instanceof window.File},isFileList:function(e){return e instanceof window.FileList},blobSlice:function(e,t,n,i){var r=Blob.prototype,o=r.slice||r.webKitSlice||r.mozSlice;return o.call(e,t,n,i)}});n$379=e,e.__QUALIFIED_CLASS_NAME__="CW.Platform.FileAPI"}();
    
    
        
!function(){"use strict";var e=n$291.extend(n$10,{init:function(){this.__s._49LFp93BntU$KS$init.apply(this,arguments),this.get("transport")!==n$279.get("sharedInstance")&&n$11("Attempting a file upload from an unsupported browser.",this);var e=this.uploadProgress;e.bytesTotal=this._totalSize||0,this.on(n$274,function(){e.bytesTransferred=e.bytesTotal})},method:n$378,body:n$9({set:function(e){return e=this.generateFormDataFromBody(e)},didChange:n$23}),files:n$84(Array),bodySerializer:null,shouldTrackUploadProgress:!0,formKey:"files",generateFormDataFromBody:function(e){var t=n$379.get("sharedInstance");if(t.isFormData(e)||!e)return e;var n=t.isFileList(e),i=t.isFile(e),r=t.isBlob(e);i||n||r||n$11("Must provide either a File or FileList.");var s=new FormData;return this._totalSize=0,n?Array.prototype.forEach.call(e,function(e){this.appendFileToFormData(e,s)},this):this.appendFileToFormData(e,s),s},appendFileToFormData:function(e,t){var n=this.get("formKey"),i=n$109.get("sharedInstance");!e.size&&i.get("isIE")&&i.get("majorVersion")<=10?t.append(n,""):t.append(n,e),this._totalSize+=e.size||0,this.files.push(e)},__superMap:{_49LFp93BntU$KS$init:"init"}});n$380=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.UploadRequest"}();
    
    
        
!function(){"use strict";var e=n$380.extend({file:null,rangeStart:null,rangeEnd:null,send:function(){var e=this.get("file"),t=e.name,n=e.size,i=this.get("rangeStart"),r=this.get("rangeEnd"),o=n$19("bytes %{rangeStart}-%{rangeEnd}/%{fileSize}",{rangeStart:i,rangeEnd:r,fileSize:n});this.setMultipleHeaders({"X-File-Name":t,"X-File-Size":n,"Content-Range":o}),this.get("transport").set("mimeType","application/octet-stream"),this.__s._4QA0naep2ZL$QP$send.apply(this,arguments)},__superMap:{_4QA0naep2ZL$QP$send:"send"}});n$381=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.FileChunkUpload"}();
    
    
        
!function(){"use strict";function t(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e];return t}n$382=t}();
    
    
        
!function(){"use strict";var e=10,t=n$74("UploadState",function(e){e("SENDING"),e("NOT_SENDING")}),n=n$5.extend(n$62,n$10,{maxConcurrentRequests:3,chunkSize:null,progress:n$9(n$84(n$282)),state:n$9({defaultValue:t.NOT_SENDING}),willSend:n$12(),didComplete:n$12(),didSucceed:n$12(),didAbort:n$12(),uploadDidFail:n$12(),uploadRequestClass:n$380,addFile:function(e,t){e&&t||n$11("Missing required parameter.");var n=this.get("chunkSize");return n&&e.size>n?this._createChunkedUpload(e,t):this._createUpload(e,t)},addFilesAsDeferredUploads:function(e,t){(e instanceof Array||e instanceof window.FileList)&&t||n$11("Required params not provided");for(var n=0,i=e.length;i>n;n++){var r=e[n];r.__destinationURL=t,this._deferredFileQueue.push(r)}this._calculateTotalProgress(),this.set("_deferredFileQueueIsDirty",!0),this.propertyChanged("totalFileCount")},addFileAsDeferredUpload:function(e,t){e.__destinationURL=t,this._deferredFileQueue.push(e),this.set("_deferredFileQueueIsDirty",!0),this.propertyChanged("totalFileCount")},addFiles:function(e,t,n){if(e instanceof window.FileList||n$11("Must provide a file list."),n){var i=this.uploadRequestClass.create({url:t,body:e});return this.addUpload(i),[i]}n$66.pause();for(var r=[],s=0,a=e.length;a>s;s++){var o=e[s];r.push.apply(r,this.addFile(o,t))}return n$66.resume(),r},addUpload:function(e){if(!e)throw n$11("No upload provided.");this._requestRegistry[e.get("id")]=e,this._requestQueue.push(e),this.propertyChanged("totalFileCount"),this.get("state")===t.SENDING&&this._queueNeedsProcessing()},removeUpload:function(e){e||n$11("No upload provided for removal.");
var t=e.get("id");delete this._requestRegistry[t],delete this._activeRequests[t],delete this._completedRequests[t];var n=this._requestQueue.indexOf(e);n>-1&&this._requestQueue.splice(n,1),this.propertyChanged("totalFileCount")},send:function(){this._processQueue()},abortAllUploads:function(){var e=this,n=Object.keys(this._activeRequests);n.forEach(function(t){e._activeRequests[t].abort()}),this.didAbort(),this.set("state",t.NOT_SENDING),this.propertyChanged("completedFileCount")},clear:function(){n$382(this._requestRegistry);for(var e=this._requestQueue;this._requestQueue.length>0;)e.pop();for(var n=this._deferredFileQueue;n.length>0;)n.pop();this._deferredFileQueueIsDirty=!1,this._cachedDeferredFilesTotalSize=0,n$382(this._activeRequests),n$382(this._failedRequests),this._cachedTotalBytes=0,this._calculateTotalProgress(),this.clearCompleted(),this.set("state",t.NOT_SENDING),this.propertyChanged("totalFileCount")},clearCompleted:function(){var e=this._completedRequests;for(var t in e)e.hasOwnProperty(t)&&(delete this._completedRequests[t],delete this._requestRegistry[t]);this.propertyChanged("completedFileCount")},completedFileCount:n$9({readOnly:!0,get:function(){return i(this._completedRequests)}}),totalFileCount:n$9({readOnly:!0,get:function(){var e=0,t={},n=this._requestRegistry;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s.instanceOf(n$381)){var a=n$22(s.get("file"));t[a]=!0}else e+=s.files.length}return e+=i(t),e+=this._deferredFileQueue.length}}),requestCount:n$9({readOnly:!0,get:function(){return i(this._requestRegistry)}}),_queueNeedsProcessing:function(){var t=this;
this._currentJob&&clearTimeout(this._currentJob),this._currentJob=n$130(function(){t._processQueue()},e)},_sliceFileIntoUploadableChunks:function(e,t){n$379.isFile(e)||n$11("Cannot slice non-file.");var n=this.get("chunkSize");if(!n)return e;for(var i=[],r=e.name,s=e.size,a=0,o=n>s?s:n,u=s,l=o-a;u>0;){var c=n$379.blobSlice(e,a,o),d=n$381.create({url:t,body:c,fileName:r,fileSize:s,rangeStart:a,rangeEnd:o});i.push(d),a=o;var h=o+n;o=n>u?u:h,u-=l}return i},_createUpload:function(e,t){var n=this.uploadRequestClass.create({body:e,url:t});return this.addUpload(n),n},_createChunkedUpload:function(e,t){var n=this,i=this._sliceFileIntoUploadableChunks(e,t);return i.forEach(function(e){n.addUpload(e)}),i},_calculateTotalProgress:function(){var e=this._requestRegistry,t=0,n=0,i=!0,r=0;for(var s in e)if(e.hasOwnProperty(s)){var a=e[s],o=a.get("uploadProgress");t+=o.get("bytesTransferred"),n+=o.get("bytesTotal");var u=o.get("isDeterminate");i&&(i=u),r++}var l=this._getDeferredFilesTotalSize();n+=l,this._cachedTotalBytes=this._cachedTotalBytes||n,r||this._deferredFileQueue.length||(t=n||this._cachedTotalBytes);var c=this.get("progress");c.setMultipleValues({bytesTransferred:t,bytesTotal:n,isDeterminate:i})},_deferredFileQueueIsDirty:n$9({defaultValue:!1}),_getDeferredFilesTotalSize:function(){var e=this._cachedDeferredFilesTotalSize;if(!this.get("_deferredFileQueueIsDirty")&&e)return this._cachedDeferredFilesTotalSize;for(var t=this._deferredFileQueue,n=0,i=0,r=t.length;r>i;i++){var s=t[i];n+=s.size}return this.set("_deferredFileQueueIsDirty",!1),this._cachedDeferredFilesTotalSize=n,n},_enqueueDeferredFiles:function(e){var t=this._deferredFileQueue;
for(n$66.pause();e>0;){var n=t.shift();if(!n)break;this.addFile(n,n.__destinationURL),e--}n$66.resume(),this.set("_deferredFileQueueIsDirty",!0)},_processQueue:function(){var e=this.get("maxConcurrentRequests"),n=this._activeRequests,r=i(n),s=e-r,a=this._requestQueue.length,o=this._deferredFileQueue;if(!a){if(o.length>0&&!a)return this._enqueueDeferredFiles(s),this._queueNeedsProcessing(),void 0;var u=this._requestRegistry;this._allStates=this._allStates||[];var l,c=this._allStates,d=0;for(l in u)if(u.hasOwnProperty(l)){var h=u[l].get("state");c.push(h),d++}var p=c.filter(function(e){return e===n$270});if(p.length===d){this.set("state",t.NOT_SENDING);var f=window.Object.keys(this._failedRequests).length;if(0===f)this.didSucceed();else{var g=[];for(l in this._failedRequests)if(this._failedRequests.hasOwnProperty(l)){var _=this._failedRequests[l].get("files");g.push.apply(g,_)}this.uploadDidFail(g)}this.didComplete()}return this._allStates.length=0,void 0}if(s>0)for(n$63.debug("Sending more upload requests.");s&&a;){var v=this._requestQueue.shift();if(!v)return;this.attachCallbacks(v);var y=v.get("id");this._activeRequests[y]=v,n$63.debug("Sending upload with ID"+y),this.set("state",t.SENDING),v.send(),--s,--a}else n$63.debug("No room for additional upload requests, yet.")},attachCallbacks:function(e){var t=this;e||n$11("No request provided.");var n=e.get("id");e.on(n$274,function(){delete t._activeRequests[n],t._completedRequests[n]=e;var i=e.get("uploadProgress"),r=i.get("bytesTotal");i.set("bytesTransferred",r),t._processQueue(),t.propertyChanged("completedFileCount")}),e.on(n$269,function(){t._failedRequests[n]=e,delete t._activeRequests[n],t.propertyChanged("completedFileCount"),t._processQueue()
}),e.listen("uploadProgress.didChange",function(){t._calculateTotalProgress()})},_shouldTriggerWillSend:n$170("state","totalFileCount",function(e,n){return this._previousTotalFileCount||e!==t.NOT_SENDING?(this._previousTotalFileCount=n,void 0):(!this._previousTotalFileCount&&n>0&&this.willSend(),this._previousTotalFileCount=n,void 0)}),_requestRegistry:n$84(Object),_requestQueue:n$84(Array),_deferredFileQueue:n$84(Array),_activeRequests:n$84(Object),_completedRequests:n$84(Object),_failedRequests:n$84(Object),_requestTimer:null}),i=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t};n$476=t,n$475=n,n.__QUALIFIED_CLASS_NAME__="CWE.Network.UploadRequestManager"}();
    
    
        
!function(){"use strict";var e={shouldReportSuccess:n$4(!1),shouldReportFailure:n$4(!0),reportingPathname:n$4({defaultValue:"REDACTED"}),reportingMethod:null,_timeSent:null,send:function(){this._timeSent=Date.now();var e=this.__s._8Iz_q1govn$Q5$send.apply(this,arguments);return n$203.get("cloudOSService").requestSent(),e},didComplete:function(){this.sendReport()},sendReport:function(e){var t=this.get("response");if(t){var n=this.get("url"),i=t.get("encodedBody"),r=this.get("method"),o=this.get("reportingMethod"),s=null,a=t.get("status").toString()[0],u=this.get("shouldReportSuccess"),l=this.get("shouldReportFailure");(l&&("4"===a||"5"===a||"0"===a)||u&&"2"===a)&&(s={httpMethod:o?o+" VIA "+r:r,statusCode:t.get("status"),hostname:n.get("hostname"),clientTiming:Date.now()-this._timeSent,uncompressedResponseSize:i?i.length:null,timedOut:this.get("state")===n$271,urlPath:this.get("reportingPathname")||n.get("pathname")},n$43(s,e)),n$203.get("cloudOSService").requestReceived(s,t.get("status"),n.get("href"))}},__superMap:{_8Iz_q1govn$Q5$send:"send"}};n$387=e}();
    
    
        
!function(){"use strict";var t={staticMembers:{parse:function(){var t=this.__s._38ZDSIfvHBg$9N$parse.apply(this,arguments);return t.hostname=t.shardedHostname,delete t.shardedHostname,t},init:function(){var t=n$231(this.components),e=t.indexOf("hostname");e>=0&&(t[e]="shardedHostname"),this.components=t,this.__s._38ZDSIfvHBg$L7$init.apply(this,arguments)},generateShardedHostname:function(t,e){return t.replace(/\-/,"-"+e+"-")},__superMap:{_38ZDSIfvHBg$9N$parse:"parse",_38ZDSIfvHBg$L7$init:"init"}},shardedHostname:n$9({dependencies:["hostname","shardNumber"],readOnly:!0,get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=i.internalGetPath(this,e[1+n]);return r&&a?this.constructor.generateShardedHostname(r,a):r}}),shardNumber:n$9()};n$383=t}();
    
    
        
!function(){"use strict";var e=n$259.extend(n$383,{serviceName:n$9({defaultValue:function(){var e=n$203.get("cloudOSApplication"),t=e.get("primaryServiceName")||e.get("name");return t?t:null},didChange:function(e){this.retrieveServiceURL(e)}}),clientIdQueryParamKey:n$9("clientId"),init:function(){this.__s._3AhAIAUOb0i$P6$init.apply(this,arguments),this.setDefaultQueryParams()},setDefaultQueryParams:function(){this.setQueryParameter("clientBuildNumber",window.__CW_BUILD_INFO.buildNumber),this.setQueryParameter(this.get("clientIdQueryParamKey"),n$203.getPath("cloudOSService.environment.clientId")),this.setQueryParameter("dsid",n$203.getPath("currentUser.dsid"))},retrieveServiceURL:function(e){if(e){var t=n$203.getPath("authBag.servicesInfo."+e+".url");if(t&&n$57(t)){var n=this.constructor.parse(t);this.set("protocol",n.protocol),this.set("hostname",n.hostname),this.set("port",n.port)}}},__superMap:{_3AhAIAUOb0i$P6$init:"init"}});n$384=e,e.__QUALIFIED_CLASS_NAME__="COSK.Network.URL"}();
    
    
        
!function(){"use strict";function t(){if(void 0!==n)return n;var t=n$258.get("sharedInstance"),i=t.getCookie("X-APPLE-WEBAUTH-VALIDATE");return i&&'"'===i[0]&&'"'===i[i.length-1]&&(i=i.slice(1,-1)),n=i,n$130(e,0),i}function e(){n=void 0}var n;n$385=t}();
    
    
        
!function(){"use strict";var e=n$384.extend({clientIdQueryParamKey:"clientInstanceId",setQueryParamForSyncToken:function(){this.setQueryParameter("syncToken",n$373.syncToken)},setQueryParamForValidateToken:function(){this.setQueryParameter("validateToken",n$385())},setDefaultQueryParams:function(){this.__s._2QIUDYffsGx$Af$setDefaultQueryParams.apply(this,arguments),this.setQueryParameter("locale",n$260()),this.setQueryParameter("cruuid",n$261())},__superMap:{_2QIUDYffsGx$Af$setDefaultQueryParams:"setDefaultQueryParams"}});n$388=e,e.__QUALIFIED_CLASS_NAME__="Photos.URL"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$387],useCredentialsIfCrossOrigin:!0,URLClass:n$388,url:n$9({defaultValue:null}),finalize:function(){this.__s._k8aZiF2e7t$EW$finalize.apply(this,arguments);var t=this.get("response");t&&this._reportEmptySuccess(t)},_attemptCount:0,shouldFinalizeWithResponse:function(t,e,n){if(this._attemptCount=n+1,n>=n$298.requestRetryLimit)return!0;var i=5e3,r=t.get("status");if(500===r){var a=t.getPath("body.errorCode");(518===a||519===a)&&(r=a)}var s=r.toString()[0];if("5"!==s&&"0"!==s){if(200!==r||t.get("body"))return!0}else{if(518===r||519===r)return!0;if(520===r)i=15e3;else if(503===r){var o=t.get("headers").match(/^Retry-After:\s*(.*)$/im);if(o){var u=o[1].trim();i=u.match(/^[0-9]+$/)?1e3*parseInt(o[1],10):Date.parse(u)-Date.now(),i=Math.min(i,12e4)}}}this._reportEmptySuccess(t)||this.sendReport(t),this.shouldReportSuccess=!0,n$130(e,i);var c=this.url.getQueryParameter("cruuid");return c&&(c=c.replace(/(\+[0-9]+)?$/,"+"+this._attemptCount),this.url.setQueryParameter("cruuid",c)),!1},sendReport:function(t,e){var n={attemptCount:this._attemptCount,requestClass:n$24(this)};return n$43(n,e),this.__s._k8aZiF2e7t$12p$sendReport.call(this,t,n)},send:function(){this._attemptCount=1,n$103.getPath("application.isExiting")||this.__s._k8aZiF2e7t$15v$send.apply(this,arguments)},isEmptySuccessReportingEnabled:!0,_reportEmptySuccess:function(t){if(!this.isEmptySuccessReportingEnabled)return!1;t=t||this.response;var e=t.status.toString()[0];if("2"===e&&!t.body){var n="Server sent empty response.";return n$203.get("cloudOSService").recordStat("WebService",{pathname:this.get("reportingPathname")||this.getPath("url.pathname"),status:t.status,errorType:"server",errorTitle:n}),this.sendReport(t,{forceHubbleReporting:!0,errorTitle:n}),!0
}return!1},__superMap:{_k8aZiF2e7t$EW$finalize:"finalize",_k8aZiF2e7t$12p$sendReport:"sendReport",_k8aZiF2e7t$15v$send:"send"}};n$462=t}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{isFatal:!1});n$421=e,e.__QUALIFIED_CLASS_NAME__="Photos.Error"}();
    
    
        
!function(){"use strict";var e=200,t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],name:"alertIcon",classes:["alert-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"message",attributes:{}}],classes:["message"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["description"]}],name:"contentWrapper",classes:["content-wrapper"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"accessoryView"},{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"buttonViews"}],classes:["cw-alert-buttons"]}],name:"alertView",classes:["cw-alert"]}],classes:["cw-alert-modal"]}},message:n$9(),description:n$9(),iconNames:n$9(),accessoryView:n$9(),_updatePositionOnChange:n$7("message","description","accessoryView",function(){this.updatePosition()}),updatePosition:function(){var e=this.get("alertView");n$160(e,{"margin-left":-(e.offsetWidth/2),"margin-top":-(e.offsetHeight/2)})},animateOpen:function(t){this.updatePosition(),this.get("style").set("opacity",1),t&&n$130(t,e)},animateClosed:function(t){this.get("style").set("opacity",0),t&&n$130(t,e)},_iconNamesDidChange:n$7("iconNames",function(e){var t=this.get("alertIcon");this._originalClassName?t.className=this._originalClassName:this._originalClassName=t.className,e&&(e instanceof Array?e.forEach(function(e){t.classList.add(e)
}):t.classList.add(e))})});n$398=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.AlertView"}();
    
    
        
!function(){"use strict";var e={anchor:n$9(),contentController:n$9(),_appendedContentController:n$9({readOnly:!0,dependencies:["contentController","isAttached"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):null}}),show:function(e){this.isAttached||(e&&(this.anchor=e),this.paneManager.addPane(this))},hide:function(){this.isAttached&&this.paneManager.removePane(this)},toggle:function(e){this.isAttached?this.hide():this.show(e)},paneManager:n$9(n$103.bindingFor("application")),isActivePane:n$9({readOnly:!0,dependencies:["paneManager.activePane"],get:function(e,t,n,i){return this===i.internalGetPath(this,t[0+n])}})};n$391=e}();
    
    
        
!function(){"use strict";var t=n$8.extend({init:function(t){return"string"==typeof t?this.__s._xrBtDNlv0B$JG$init.call(this,{viewOutlet:t}):this.__s._xrBtDNlv0B$KR$init.apply(this,arguments)},initializeMember:function(t,e){var n=this.__s._xrBtDNlv0B$O0$initializeMember.apply(this,arguments),i=this,r="_"+e+"DidChange",a="_"+e,s="_"+e+"_view";return this._internalValueKey=a,this._internalViewKey=s,t.registerMetadata(r,n$7(e,e+".view",function(t,e){i.childViewControllerDidChange(this,t,e)})),n},childViewControllerDidChange:function(t,e,n){var i=t[this._internalValueKey],r=t[this._internalViewKey];t[this._internalValueKey]=e,t[this._internalViewKey]=n,(i!==e||r!==n)&&this.transition.call(t,i,r,e,n,this)},inheritFrom:function(t){this.__s._xrBtDNlv0B$el$inheritFrom.apply(this,arguments),this.viewOutlet||(this.viewOutlet=t.viewOutlet)},transition:function(t,e,n,i,r){t&&t.retain(),n&&n.retain();var a=r.viewOutlet;a||n$11("ChildViewController expects a `viewOutlet` to write to"),n&&(n._destinationViewOutlet=a),t!==n?(t&&t.willMoveToParentViewController(null),n&&n.willMoveToParentViewController(this),t!==n&&this._isViewLoaded&&this.get("view").set(a,i),t&&this.removeChildViewController(t),n&&this.addChildViewController(n),t&&t.didMoveToParentViewController(null),n&&n.didMoveToParentViewController(this)):e!==i&&this._isViewLoaded&&this.get("view").set(a,i),t&&t.release(),n&&n.release()},__superMap:{_xrBtDNlv0B$JG$init:"init",_xrBtDNlv0B$KR$init:"init",_xrBtDNlv0B$O0$initializeMember:"initializeMember",_xrBtDNlv0B$el$inheritFrom:"inheritFrom"}}),e=function(){return t.define.apply(t,arguments)
};n$392=t,n$941=e,t.__QUALIFIED_CLASS_NAME__="CW.UI.ChildViewControllerProperty"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"contentView"}],classes:["cw-popup-view"]}}});n$393=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.PopupView"}();
    
    
        
!function(){"use strict";var e=n$194.extend(n$391,{_appendedContentController:n$17(n$392,"contentView"),dispose:function(){var e=this.get("contentController");e&&e.release(),this.__s._S9X89YpYGO$Ff$dispose.apply(this,arguments)},contentController:n$9(),_manageContentControllerMemory:n$7("contentController",function(e){var t=this._previousContentController;t&&t.release(),e&&e.retain(),this._previousContentController=e}),_previousContentController:null,viewClass:n$393,__superMap:{_S9X89YpYGO$Ff$dispose:"dispose"}});n$399=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.PopupViewController"}();
    
    
        
!function(){"use strict";function e(e,n){var i=e.get("action"),r=e.get("event"),s=e.get("target")||e;if(r&&i&&n$11("Only one of `action` or `event` may be specified",e),r)n$57(r)?r={type:r,context:n}:r.isClass&&(r=r.create({context:n})),s.instanceOf(n$136)||n$11("`target` must be a responder",this),s.sendEvent(r);else if(i){n$57(i)||n$11("An action must be a method name only (as a string)",this);var o=t(s,i,n);o||n$11("Neither the target nor the target's responder chain responds to action `"+i+"`",this)}}function t(e,n,i){var r=e.get?e.get(n):e[n];if(r&&r.call)return r.call(e,i),!0;if(e.get){var s=e.get("nextResponder");if(s)return t(s,n,i)}}var n={mixinDependencies:[n$10],target:n$9(),action:n$9(),event:n$9(),actionDelay:0,callAction:function(t){void 0===t&&(t=this.get("context"));var n=this.get("actionDelay");n?n$130(e.bind(null,this,t),n):e(this,t)},context:n$4()};n$394=n}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$136,n$394,n$163],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingPressed",truevalue:"cw-being-pressed",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingHovered",truevalue:"cw-being-hovered",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]}}},isBeingPressed:n$9(!1),isBeingHovered:n$9(!1),isDisabled:n$9(!1),pointerHitTest:function(t){return this.get("element").contains(t.target)},pointerDown:function(t){return this.get("isDisabled")?!1:this.pointerHitTest(t)?(this.setPointerCapture(t.pointerId),this.updateHoverPressState(t),!0):!1},pointerOut:function(t){this.updateHoverPressState(t)},pointerOver:function(t){this.updateHoverPressState(t)},willCallActionFromPointerUp:n$23,pointerUp:function(t){if(this.get("isDisabled"))return this.updateHoverPressState(t),!1;this.releasePointerCapture(t.pointerId);var e=this.get("isBeingPressed");return this.updateHoverPressState(t),e&&this.willCallActionFromPointerUp()!==!1&&this.callAction(t),!0},pointerMove:function(t){return this.updateHoverPressState(t),this.getPointerCapture(t.pointerId)===this},setPointerCapture:function(t){this._capturedPointerId=t;var e=n$103.getPath("application.rootResponder");return e&&e.lockCursor(this.getPath("style.cursor")),this.__s._2OO9HAFkj4W$1XX$setPointerCapture.apply(this,arguments)},releasePointerCapture:function(){this._capturedPointerId=0/0;var t=n$103.getPath("application.rootResponder");
return t&&t.releaseCursor(),this.__s._2OO9HAFkj4W$1fn$releasePointerCapture.apply(this,arguments)},cancelPointerInteraction:function(){var t=this._capturedPointerId;isNaN(t)||this.releasePointerCapture(t);var e=n$275.begin();e.setIfChanged(this,"isBeingPressed",!1),e.setIfChanged(this,"isBeingHovered",!1),e.end()},updateHoverPressState:function(t){var e="pointerOut"!==t.cwType&&!!this.pointerHitTest(t),n=this.getPointerCapture(t.pointerId)===this,i=this.get("isDisabled");n$239(this,"isBeingPressed",n&&e&&!i),n$239(this,"isBeingHovered",(n||e)&&!i)},_releasePointerCaptureWhenUnattached:n$7("isAttached","isDisabled",function(t,e){(!t||e)&&this.cancelPointerInteraction()}),dispose:function(){this.cancelPointerInteraction(),this.__s._2OO9HAFkj4W$260$dispose.apply(this,arguments)},__superMap:{_2OO9HAFkj4W$1XX$setPointerCapture:"setPointerCapture",_2OO9HAFkj4W$1fn$releasePointerCapture:"releasePointerCapture",_2OO9HAFkj4W$260$dispose:"dispose"}};n$395=t}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$395,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],classes:["cw-button",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},title:n$9(""),tooltip:n$9(""),hasLeftIcon:n$9(!1),hasRightIcon:n$9(!1)});n$400=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Views.Controls.Button"}();
    
    
        
!function(){"use strict";var e=n$95.extend({_node:null,initFromPool:function(e,t,n){arguments.length<=2?this.__s._300Bo4rT3JL$8l$initFromPool.apply(this,arguments):(this._node=n,this.__s._300Bo4rT3JL$Bf$initFromPool.call(this,e),this._previousPosition=this._position=t)},didEnterPool:function(){this._previousPosition=0,this._node=null,this.__s._300Bo4rT3JL$Eu$didEnterPool.call(this)},_previousPosition:0,position:n$4({set:function(e){var t=this.get("source");if(!t)return e;var n=this.get("length");if(0>e||e>=n)return this._node=null,this._previousPosition=e;var i=!this._node;if(!i){var r=Math.abs(e-this._previousPosition);(r>e||r>n-1-e)&&(i=!0)}i&&(n/2>e?(this._node=t._firstNode,this._previousPosition=0):(this._node=t._lastNode,this._previousPosition=n-1));for(var s=e-this._previousPosition;s>0;)this._node=this._node.next,s--;for(;0>s;)this._node=this._node.prev,s++;return this._previousPosition=e}}),value:n$4({get:function(){var e=this._node?this._node.item:void 0;return this.get("source").decode(e)},set:function(e){return this._node.item=this.get("source").encode(e),e}}),clone:function(){return this.constructor.create(this.get("source"),this.get("position"),this._node)},remove:function(){var e=this.get("value"),t=this._node;if(!t)return e;var n=t.next,i=this.clone().retain();return this.get("source")._spliceWithIterator(i,this.get("position"),1),i.release(),this._node=n,e},add:function(e){var t=this.get("position")+1,n=this.clone().retain();return this.get("source")._spliceWithIterator(n,t,0,e),n.release(),this.set("position",Math.min(t,this.get("length")-1)),!0},__superMap:{_300Bo4rT3JL$8l$initFromPool:"initFromPool",_300Bo4rT3JL$Bf$initFromPool:"initFromPool",_300Bo4rT3JL$Eu$didEnterPool:"didEnterPool"}});
n$397=e,e.__QUALIFIED_CLASS_NAME__="CW.LinkedListIterator"}();
    
    
        
!function(){"use strict";var e=[],t=n$5.extend(n$97,{staticMembers:{_recycleNode:function(t){t.item=null,t.next=null,t.prev=null,e.push(t)}},iteratorClass:n$397,_firstNode:null,_lastNode:null,length:n$4({defaultValue:0,set:n$97.staticMembers.resizingLengthSetter}),_internalLength:n$4({readOnly:!0,get:function(){return this._length}}),rawSplice:function(){var e=this.createIterator().retain(),t=n$27(arguments,1);t[0]=e;var n=this._spliceWithIterator.apply(this,t);return e.release(),n},_spliceWithIterator:function(t,n,i){var r=this._length;0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),t.moveTo(n-1);var s=t._node;t.moveTo(Math.min(r,n+i));for(var o=t._node,a=arguments.length;a-->3;){var u=e.pop()||{};u.item=this.encode(arguments[a]),u.next=o,u.prev=null,o?o.prev=u:this._lastNode=u,o=u,this._length++}var l;0===n?(l=this._firstNode,this._firstNode=o):(l=s.next,s.next=o,o?o.prev=s:this._lastNode=s);for(var c=[];l&&i--;){c.push(this.decode(l.item));var h=l.next;this.constructor._recycleNode(l),l=h,this._length--}return c},objectAt:function(e){var t=this.createIteratorAt(e).retain(),n=t.get("value");return t.release(),n}});n$401=t,t.__QUALIFIED_CLASS_NAME__="CW.LinkedList"}();
    
    
        
!function(){"use strict";var e=n$401.create(),t=null,n=n$399.extend({staticMembers:{show:function(e){var t=n.create(e);return t.show(),t}},viewClass:n$398,view:n$9({downstreamBindings:{iconNames:"(owner).iconNames",message:"(owner).message",description:"(owner).description",accessoryView:"(owner).accessoryView"}}),iconNames:n$9(),message:n$9(),description:n$9(),context:n$4(),accessoryView:n$9(),primaryButton:n$4(),alternateButton:n$4(),otherButton:n$4(),init:function(){this.__s._3wiWN2qExca$1E7$init.apply(this,arguments),this.addButton(this.get("primaryButton"),"primary-button"),this.addButton(this.get("alternateButton"),"alternate-button"),this.addButton(this.get("otherButton"),"other-button")},show:function(){return t&&t!==this?(e.push(this),void 0):(t=this,this.__s._3wiWN2qExca$1Nj$show.apply(this,arguments))},hide:function(){t=null;var n=e.shift();return n&&n.show(),this.__s._3wiWN2qExca$1QB$hide.apply(this,arguments)},_accessoryViewObserver:n$7("accessoryView",function(e){e&&e.set("alertView",this.get("view"))}),_handlerCount:0,addButton:function(e,t){if(e){var n,i=this.getPath("view.buttonViews"),r=this.get("context"),s=n$5.extend(n$136,n$394).create({target:e.target,action:e.action}),a="_buttonHandler"+this._handlerCount++;e.target=this,e.action=a,n=n$400.create(e),n.context=r,n.originalTargetAction=e.originalTargetAction=s;var o=this;this[a]=function(e){return o.buttonWasPressed(e,n)},t&&n.get("element").classList.add(t),i.push(n)}},buttonWasPressed:function(e,t){var n=t.get("context"),i=t.get("originalTargetAction");this._handleButtonAction(i,n)},_invokeButtonPress:function(e){if(e){var t=e.originalTargetAction;
this._handleButtonAction(t,this.get("context"))}},_handleButtonAction:function(e,t){if(e||n$11("Cannot perform action: no action defined"),!this._isClosing){this._isClosing=!0,this.isDisposed&&n$11("Cannot perform action: view controller disposed");var n=this.get("view");n.animateClosed(function(){this.hide(),e.callAction(t),this._isClosing=!1}.bind(this))}},didAttach:function(){var e=this.get("view");e.animateOpen(),this.__s._3wiWN2qExca$2jR$didAttach.apply(this,arguments),this._handleKeyDown=function(e){if(this.get("isActivePane")){var t=e.keyCode;switch(t){case n$126.ESC:this._invokeButtonPress(this.get("alternateButton"));break;case n$126.RETURN:this._invokeButtonPress(this.get("primaryButton"))}}}.bind(this),document.body.addEventListener("keydown",this._handleKeyDown)},didDetach:function(){this.__s._3wiWN2qExca$2uW$didDetach.apply(this,arguments),document.body.removeEventListener("keydown",this._handleKeyDown)},__superMap:{_3wiWN2qExca$1E7$init:"init",_3wiWN2qExca$1Nj$show:"show",_3wiWN2qExca$1QB$hide:"hide",_3wiWN2qExca$2jR$didAttach:"didAttach",_3wiWN2qExca$2uW$didDetach:"didDetach"}});n$418=n,n.__QUALIFIED_CLASS_NAME__="CW.UI.AlertViewController"}();
    
    
        
!function(){"use strict";function e(e,t){return Math.abs(e)<Math.abs(t)?e:t}function t(t){return function(n){var i=this.get(t);return n=void 0===n?i:e(n,i),this.set(t,i-n),n}}var n=n$132.extend({deltaX:n$4(0),deltaY:n$4(0),consumeX:t("deltaX"),consumeY:t("deltaY"),isEmpty:n$4({get:function(){return 0===this.get("deltaX")&&0===this.get("deltaY")}})});n$402=n,n.__QUALIFIED_CLASS_NAME__="CW.UI.ScrollEvent"}();
    
    
        
!function(){"use strict";function e(e){var t=0,n=0,i=0;for(var s in e){t++;var o=e[s];n+=o.get("x"),i+=o.get("y")}return r.create({x:n/t,y:i/t})}function t(e,t,n,i){var r=Math.min(e,n-i);return Math.max(r,t)}var n=n$8.extend({readOnly:!0,cacheable:!1,get:function(e,t,n,i){return i.internalGet(this,t[1]+n)-i.internalGet(this,t[0]+n)}}),i={mixinDependencies:[n$10],init:function(){this._touches={},this.__s._1BpEfgdPN6z$Jy$init.apply(this,arguments)},_touches:null,supportsTouchScroll:n$4(n$111.get("isTouchSupported")),_touchCount:0,pointerDown:function(t){return this.get("supportsTouchScroll")?(t.preventDefault(),this._touches[t.pointerId]=r.create({x:t.clientX,y:t.clientY}),this._touchCount++,this.setPointerCapture(t.pointerId),this.averageTouch=e(this._touches),!0):!1},mayUseVerticalScrollingAsHorizontal:n$4(),processWheelEvent:function(e){this.get("mayUseVerticalScrollingAsHorizontal")&&e.deltaY&&(e.deltaX+=e.deltaY,e.deltaY=0)},wheel:function(e){e.preventDefault(),this.processWheelEvent(e);var t=n$402.create({deltaX:e.deltaX,deltaY:e.deltaY,nativeEvent:e});return this.bubbleScroll(t),this.set("overflowX",0),this.set("overflowY",0),!0},pointerMove:function(t){if(!this.get("supportsTouchScroll"))return!1;var n=this._touches,i=n[t.pointerId];if(!i)return!1;t.preventDefault(),i.set("x",t.clientX),i.set("y",t.clientY);var r=this.averageTouch,s=e(this._touches);this.averageTouch=s;var o=n$402.create({deltaX:r.get("x")-s.get("x"),deltaY:r.get("y")-s.get("y"),nativeEvent:t});return this.bubbleScroll(o),!0},pointerUp:function(t){if(!this.get("supportsTouchScroll"))return!1;var n=this._touches,i=n[t.pointerId];
return i?(t.preventDefault(),delete n[t.pointerId],0===--this._touchCount?(this.set("overflowX",0),this.set("overflowY",0)):this.averageTouch=e(n),this.releasePointerCapture(t.pointerId),!0):!1},pointerCancel:function(e){return this.pointerUp(e)},overflowX:n$9(0),overflowY:n$9(0),bubbleScroll:function(e){var t=this;for(e.set("deltaX",e.get("deltaX")+this.get("overflowX")),e.set("deltaY",e.get("deltaY")+this.get("overflowY"));!e.get("isEmpty");){for(;t&&!t.handleScroll;)t=t.get("nextResponder");if(!t)break;t.handleScroll(e),t=t.get("nextResponder")}this.set("overflowX",e.get("deltaX")),this.set("overflowY",e.get("deltaY"))},scrollX:n$9(0),scrollY:n$9(0),scrollMinX:n$9(0),scrollMaxX:n$9(0),scrollMinY:n$9(0),scrollMaxY:n$9(0),scrollHeight:n$17(n,{dependencies:["scrollMinY","scrollMaxY"]}),scrollWidth:n$17(n,{dependencies:["scrollMinX","scrollMaxX"]}),height:n$9(0),width:n$9(0),canScrollVertically:n$9({readOnly:!0,dependencies:["scrollHeight","height"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>i.internalGetPath(this,t[1+n])}}),canScrollHorizontally:n$9({readOnly:!0,dependencies:["scrollWidth","width"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>i.internalGetPath(this,t[1+n])}}),handleScroll:function(e){var t=this.get("scrollX"),n=this.get("scrollY"),i=e.get("deltaX"),r=e.get("deltaY"),s=(i>0?this.get("scrollMaxX")-this.get("width"):this.get("scrollMinX"))-t,o=(r>0?this.get("scrollMaxY")-this.get("height"):this.get("scrollMinY"))-n,a=e.consumeX(s),u=e.consumeY(o);this.attemptScrollBy(a,u,e)},attemptScrollBy:function(e,n,i){var r=this.get("scrollX"),s=r+e;
s=t(s,this.get("scrollMinX"),this.get("scrollMaxX"),this.get("width")),e=s-r;var o=this.get("scrollY"),a=o+n;return a=t(a,this.get("scrollMinY"),this.get("scrollMaxY"),this.get("height")),n=a-o,(e||n)&&this.scrollBy(e,n),this.didScrollBy&&this.didScrollBy(e,n,i),0!==e||0!==n},validateScrollPosition:function(){for(var e=!1;this.attemptScrollBy(0,0);)e=!0;return e},scrollBy:function(e,t){e&&this.set("scrollX",this.get("scrollX")+e),t&&this.set("scrollY",this.get("scrollY")+t)},didScrollBy:null,pageUp:function(){this.attemptScrollBy(0,-this.get("height"))},pageDown:function(){this.attemptScrollBy(0,this.get("height"))},pageLeft:function(){this.attemptScrollBy(-this.get("width"),0)},pageRight:function(){this.attemptScrollBy(this.get("width"),0)},scrollTo:function(e,t){var n=0;void 0!==e&&(e/=100,n=this.get("scrollX"),n=this.get("scrollWidth")*e+this.get("scrollMinX")-n);var i=0;void 0!==t&&(t/=100,i=this.get("scrollY"),i=this.get("scrollHeight")*t+this.get("scrollMinY")-i),this.attemptScrollBy(n,i)},viewport:n$9(n$84(n$106)),_updateViewport:n$7("viewport","scrollX","scrollY","width","height",function(e,t,n,i,r){n$275.begin().set(e,"x",t).set(e,"y",n).set(e,"width",i).set(e,"height",r).end()}),scrollToRect:function(e){var t=this.get("viewport"),n=0;e.isLeftOf(t)?n=e.get("x")-t.get("x"):e.isRightOf(t)&&(n=e.get("right")-t.get("right"));var i=0;e.isAbove(t)?i=e.get("y")-t.get("y"):e.isBelow(t)&&(i=e.get("bottom")-t.get("bottom")),this.attemptScrollBy(n,i)},__superMap:{_1BpEfgdPN6z$Jy$init:"init"}},r=n$5.extend(n$10,{x:n$9(0),y:n$9(0),toString:function(){return"x: "+this.get("x")+"y: "+this.get("y")
}});n$404=i,n.__QUALIFIED_CLASS_NAME__="CW.UI.SizeProperty$327",r.__QUALIFIED_CLASS_NAME__="CW.UI.Touch$327"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$395,{supportsDragScroll:n$4(!n$111.get("isTouchSupported")),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],name:"thumb",classes:["cw-scroll-indicator-thumb"]}],name:"track",classes:["cw-scroll-indicator-track"]}],classes:["cw-scroll-indicator"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isShowing",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},eventCoordinateKey:null,thumbPositionKey:null,minThumbSize:n$9(20),thickness:n$9(15),beginMargin:n$9(6),endMargin:n$9(6),totalEndMargin:n$9({readOnly:!0,dependencies:["inset","endMargin"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);return s+r}}),size:n$9({readOnly:!0,dependencies:["scrollSize","beginMargin","totalEndMargin"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-i.internalGetPath(this,t[1+n])-i.internalGetPath(this,t[2+n])}}),otherScrollIndicator:n$9(),inset:n$9({readOnly:!0,dependencies:["otherScrollIndicator.isShowing","otherScrollIndicator.thickness"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):0}}),scrollMin:n$9(0),totalSize:n$9(0),scrollSize:n$9(0),scrollPosition:n$9(0),isShowing:n$9({readOnly:!0,dependencies:["scrollSize","totalSize"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])<i.internalGetPath(this,t[1+n])&&1/0!==i.internalGetPath(this,t[1+n])}}),relativeScrollPosition:n$9({dependencies:["scrollMin","scrollPosition"],writeDependencies:["scrollPosition"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])-i.internalGetPath(this,t[0+n])
},set:function(e,t,n,i){n[0+i]=e+this.scrollMin},writeDependencySetPathMap:[!1]}),scrollProportion:n$9({readOnly:!0,dependencies:["scrollSize","totalSize"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])/i.internalGetPath(this,t[1+n])}}),minThumbProportion:n$9({readOnly:!0,dependencies:["size","minThumbSize"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])/i.internalGetPath(this,t[0+n])}}),thumbProportion:n$9({readOnly:!0,dependencies:["scrollProportion","minThumbProportion"],get:function(e,t,n,i){return Math.max(i.internalGetPath(this,t[0+n]),i.internalGetPath(this,t[1+n]))}}),sizeAdjustment:n$9({readOnly:!0,dependencies:["scrollProportion","thumbProportion"],get:function(e,t,n,i){return(1-i.internalGetPath(this,t[0+n]))/(1-i.internalGetPath(this,t[1+n]))}}),adjustedSize:n$9({readOnly:!0,dependencies:["totalSize","sizeAdjustment"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])*i.internalGetPath(this,t[1+n])}}),thumbSize:n$9({readOnly:!0,dependencies:["thumbProportion"],get:function(e,t,n,i){return 100*i.internalGetPath(this,t[0+n])}}),thumbPosition:n$9({readOnly:!0,dependencies:["adjustedSize","relativeScrollPosition"],get:function(e,t,n,i){return 100*(i.internalGetPath(this,t[1+n])/i.internalGetPath(this,t[0+n]))}}),_dragPointerId:null,_dragStartPixel:null,_dragStartThumbPosition:null,pointerUp:function(e){if(!this.get("supportsDragScroll"))return!1;this.__s._16m3oNVAPWg$2VA$pointerUp.apply(this,arguments);var t=e.pointerId;return this._dragPointerId!==t?!1:(this._dragPointerId=null,this._dragStartPixel=null,this._dragStartThumbPosition=null,!0)
},pointerDown:function(e){if(!this.get("supportsDragScroll"))return!1;this.__s._16m3oNVAPWg$2ap$pointerDown.apply(this,arguments);var t=this.get("thumb");if(e.target===t){var n=e.pointerId;this._dragPointerId=n,this._dragStartPixel=e[this.eventCoordinateKey],this._dragStartThumbPosition=this.get("relativeScrollPosition")/this.get("totalSize")}else{var i=t.getBoundingClientRect()[this.thumbPositionKey];e[this.eventCoordinateKey]<i?this.pageUp():this.pageDown()}return!0},pointerMove:function(e){if(!this.get("supportsDragScroll"))return!1;if(this._dragPointerId!==e.pointerId)return!1;this.__s._16m3oNVAPWg$2qi$pointerMove.apply(this,arguments);var t=e[this.eventCoordinateKey],n=t-this._dragStartPixel,i=this.get("size");return this.scrollTo(100*(this._dragStartThumbPosition+n/i*this.get("sizeAdjustment"))),!0},__superMap:{_16m3oNVAPWg$2VA$pointerUp:"pointerUp",_16m3oNVAPWg$2ap$pointerDown:"pointerDown",_16m3oNVAPWg$2qi$pointerMove:"pointerMove"}}),t=e.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:["vertical"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thickness",attributes:{},unit:"px",property:"width"}}},track:{type:"ELEMENT",tagname:"ext",children:[],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"top"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"bottom"}}},thumb:{type:"ELEMENT",tagname:"ext",children:[],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"top"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"height"}}}}},eventCoordinateKey:"clientY",thumbPositionKey:"top",pageUp:function(){this.get("parent").pageUp()
},pageDown:function(){this.get("parent").pageDown()},scrollTo:function(e){this.get("parent").scrollTo(void 0,e)}}),n=e.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:["horizontal"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thickness",attributes:{},unit:"px",property:"height"}}},track:{type:"ELEMENT",tagname:"ext",children:[],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"beginMargin",attributes:{},unit:"px",property:"left"},right:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"totalEndMargin",attributes:{},unit:"px",property:"right"}}},thumb:{type:"ELEMENT",tagname:"ext",children:[],styles:{left:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbPosition",attributes:{},unit:"%",property:"left"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"thumbSize",attributes:{},unit:"%",property:"width"}}}}},eventCoordinateKey:"clientX",thumbPositionKey:"left",pageUp:function(){this.get("parent").pageLeft()},pageDown:function(){this.get("parent").pageRight()},scrollTo:function(e){this.get("parent").scrollTo(e,void 0)}});n$942=e,n$406=t,n$405=n,e.__QUALIFIED_CLASS_NAME__="CW.UI.ScrollIndicatorView",t.__QUALIFIED_CLASS_NAME__="CW.UI.VerticalScrollIndicatorView",n.__QUALIFIED_CLASS_NAME__="CW.UI.HorizontalScrollIndicatorView"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$404],staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"verticalScrollIndicator"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"horizontalScrollIndicator"}]}}},hasVerticalScrollIndicator:n$9(!0),hasHorizontalScrollIndicator:n$9(!0),horizontalScrollIndicatorClass:n$405,verticalScrollIndicatorClass:n$406,scrollIndicatorOptions:{},createScrollIndicatorOptions:function(t){var e="vertical"===t?"Y":"X",n="vertical"===t?"height":"width",i=n$40(this.get("scrollIndicatorOptions"));return i.scrollMin=this.bindingFor("scrollMin"+e),i.scrollSize=this.bindingFor(n),i.totalSize=this.bindingFor(n$349("scroll "+n)),i.scrollPosition=this.bindingFor("scroll"+e),i},verticalScrollIndicator:n$9({readOnly:!0,cacheable:!1,dependencies:["hasVerticalScrollIndicator"],get:function(t,e,n,i){if(!i.internalGetPath(this,e[0+n]))return null;var r=this._verticalScrollIndicator;return r||(this._verticalScrollIndicator=r=this.get("verticalScrollIndicatorClass").create(this.createScrollIndicatorOptions("vertical")),r.set("otherScrollIndicator",this.get("horizontalScrollIndicator"))),r}}),_verticalScrollIndicator:null,horizontalScrollIndicator:n$9({readOnly:!0,cacheable:!1,dependencies:["hasHorizontalScrollIndicator"],get:function(t,e,n,i){if(!i.internalGetPath(this,e[0+n]))return null;var r=this._horizontalScrollIndicator;return r||(this._horizontalScrollIndicator=r=this.get("horizontalScrollIndicatorClass").create(this.createScrollIndicatorOptions("horizontal")),r.set("otherScrollIndicator",this.get("verticalScrollIndicator"))),r
}}),_horizontalScrollIndicator:null};n$407=t}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$404,n$407,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"contentView"}],name:"container",classes:["container"]}],classes:["cw-scroll-view"]}},windowSize:n$9(n$109.get("sharedInstance").window),scrollMaxX:n$9({readOnly:!0,cacheable:!1,dependencies:["isAttached","windowSize.width","contentView"],get:function(){return this.get("container").scrollWidth}}),scrollMaxY:n$9({readOnly:!0,cacheable:!1,dependencies:["isAttached","windowSize.height","contentView"],get:function(){return this.get("container").scrollHeight}}),height:n$9({readOnly:!0,cacheable:!1,dependencies:["element","isAttached"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n]).clientHeight}}),width:n$9({readOnly:!0,cacheable:!1,dependencies:["element","isAttached"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n]).clientWidth}}),scrollElementY:n$7("scrollY",function(e){this.container.scrollTop=e}),scrollElementX:n$7("scrollX",function(e){this.container.scrollLeft=e})});n$409=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.ScrollView"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$395,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"labelText",attributes:{}}],classes:["label-text"]}],name:"expanderNode",classes:["expander-control"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"contentView"}],classes:["content-view"]}],classes:["expandable-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isExpanded",truevalue:"is-expanded",attributes:{}}]}},isExpanded:n$9(!1),labelText:n$9(),contentView:n$84(n$409),action:"buttonAction",buttonAction:function(e){this.get("expanderNode").contains(e.target)&&this.set("isExpanded",!this.get("isExpanded"))}});n$414=e,e.__QUALIFIED_CLASS_NAME__="CWE.UI.ExpandableView"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$394,{target:n$14("owner"),delay:0,timesToFire:1,delays:null,fireCount:0,isRunning:!1,isPaused:!1,timeUntilFire:n$4({readOnly:!0,get:function(){return this.isRunning?this.isPaused?1/0:this._nextFiringTime-Date.now():0/0}}),start:function(){return this.isRunning?this:(this.isRunning=!0,this._nextFiringTime=Date.now(),this._scheduleNextFiringOrStop(),this)},restart:function(){return this.stop(),this.start(),this},stop:function(){return this.isRunning?(this._handle&&(window.clearTimeout(this._handle),this._handle=null),this.fireCount=0,this.isRunning=!1,this.isPaused&&(this.isPaused=!1,this._pauseCount=0,this._timeRemainingAtPause=0/0),this):this},pause:function(){return this.isRunning?(this._pauseCount++,1===this._pauseCount&&(this._timeRemainingAtPause=this.get("timeUntilFire"),this.isPaused=!0,this._nextFiringTime=0/0,clearTimeout(this._handle),this._handle=null),this):this},resume:function(){return this.isRunning?(this._pauseCount--,0===this._pauseCount&&(this._nextFiringTime=Date.now()+this._timeRemainingAtPause,this._handle=n$130(t,Math.max(0,this._timeRemainingAtPause),this),this._timeRemainingAtPause=0/0,this.isPaused=!1),this._pauseCount<0&&(this._pauseCount=0),this):this},fastForward:function(e){return this.isRunning?0>e?this.rewind(-e):0===e?this:(e||(e=this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause-=e:(this._nextFiringTime-=e,clearTimeout(this._handle),this._handle=n$130(t,Math.max(0,this._nextFiringTime-Date.now()),this)),this):this},rewind:function(e){return this.isRunning?0>e?this.fastForward(-e):0===e?this:(e||(e=this.getDelayAfterFireCount(this.fireCount)-this._getRunningTimeUntilNextFiring()),this.isPaused?this._timeRemainingAtPause+=e:(this._nextFiringTime+=e,clearTimeout(this._handle),this._handle=n$130(t,Math.max(0,this._nextFiringTime-Date.now()),this)),this):this
},getDelayAfterFireCount:function(e){var t=this.delays;return t?t[Math.min(t.length-1,e)]:e>=this.timesToFire?1/0:this.delay},fire:function(){this.callAction(this)},owner:n$9(),_handle:null,_nextFiringTime:0/0,_pauseCount:0,_timeRemainingAtPause:0/0,_getRunningTimeUntilNextFiring:function(){return this.isPaused?this._timeRemainingAtPause:this.get("timeUntilFire")},_scheduleNextFiringOrStop:function(){if(this.isRunning){var e=this.getDelayAfterFireCount(this.fireCount);if(1/0>e){var n=this._nextFiringTime+=e;this._handle=n$130(t,Math.max(0,n-Date.now()),this)}else this.stop()}},dispose:function(){this.stop(),this.__s._1Pge10f4TGB$49q$dispose.apply(this,arguments)},__superMap:{_1Pge10f4TGB$49q$dispose:"dispose"}}),t=function(e){e.fireCount++,e.callAction(e),e._scheduleNextFiringOrStop()};n$411=e,e.__QUALIFIED_CLASS_NAME__="CW.Utils.Timer"}();
    
    
        
!function(){"use strict";var e={staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isEnlarged",truevalue:"cw-scroll-indicator-enlarged",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInstantlyEnlarged",truevalue:"cw-scroll-indicator-instantly-enlarged",attributes:{}}],styles:{opacity:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_opacity",attributes:{},unit:null,property:"opacity"},visibility:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_isVisible",truevalue:"",falsevalue:"hidden",attributes:{},unit:null,property:"visibility"}}}}},scrollIndicatorShouldFade:n$9(!0),scrollIndicatorShouldEnlarge:n$9(!0),fadeDelay:500,fadeTime:200,FPS:60,_opacity:0,isEnlarged:n$9(!1),_isVisible:n$9({readOnly:!0,dependencies:["_opacity"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 0!==r}}),_maintainEnlargedState:n$7("scrollIndicatorShouldEnlarge","_isVisible","isBeingHovered",function(e,t,n){if(!e)return n$239(this,"isEnlarged",!1),void 0;var i=!1;t&&(i=n||this.get("isEnlarged")),n$239(this,"isEnlarged",i),i||(this.isInstantlyEnlarged=!1)}),_handleThumbProportionChange:n$7("thumbProportion",function(){this.renewVisibility()}),didScroll:function(e){var t=this.get("_isVisible");!t&&e&&this._boundingClientRectHitTest(e)&&(n$239(this,"isBeingHovered",!0),this.scrollIndicatorShouldEnlarge&&(this.isInstantlyEnlarged=!0)),this.renewVisibility()},_boundingClientRectHitTest:function(e){var t=this.get("element").getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;
return n>=0&&n<=t.width&&i>=0&&i<=t.height},_handleHoverStateChange:n$7("isBeingHovered",function(){this.renewVisibility()}),_handleAttachOrDetach:n$7("isAttached",function(e){e?this.get("_isVisible")&&this.renewVisibility():this.renewVisibility()}),renewVisibility:function(){this._fadeOutAnimationTimer.stop(),this._fadeOutTimer.stop();var e=this.get("scrollIndicatorShouldFade");return this.get("isAttached")?(this.set("_opacity",1),e&&!this.get("isBeingHovered")&&this._fadeOutTimer.start(),void 0):(this.set("_opacity",e?0:1),void 0)},_showOrFadeOnShouldFadeChange:n$7("scrollIndicatorShouldFade",function(){this.renewVisibility()}),_fadeOutTimer:n$84(n$411,function(){return{delay:this.fadeDelay,action:"beginFadeOut"}}),_fadeOutAnimationTimer:n$84(n$411,function(){return{delay:1e3/this.FPS,action:"fadeStep",timesToFire:this.fadeTime/1e3*this.FPS}}),beginFadeOut:function(){return this._fadeOutAnimationTimer.start(),!0},fadeStep:function(e){return this.set("_opacity",1-e.fireCount/e.timesToFire),!0}},t=n$405.extend(e),n=n$406.extend(e);n$562=e,n$412=t,n$413=n,t.__QUALIFIED_CLASS_NAME__="CW.UI.FadingHorizontalScrollIndicatorView",n.__QUALIFIED_CLASS_NAME__="CW.UI.FadingVerticalScrollIndicatorView"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$407],horizontalScrollIndicatorClass:n$412,verticalScrollIndicatorClass:n$413,scrollIndicatorsShouldFade:n$9(!0),didScrollBy:function(t,e,n){if(t||n&&n.deltaX&&this.get("canScrollHorizontally")){var i=this.get("horizontalScrollIndicator");i&&i.didScroll(n)}if(e||n&&n.deltaY&&this.get("canScrollVertically")){var r=this.get("verticalScrollIndicator");r&&r.didScroll(n)}},showScrollIndicators:function(){var t=this.get("horizontalScrollIndicator");t&&t.renewVisibility();var e=this.get("verticalScrollIndicator");e&&e.renewVisibility()},createScrollIndicatorOptions:function(){var t=this.__s._3YiQ2Zmjv_H$kf$createScrollIndicatorOptions.apply(this,arguments);return t.scrollIndicatorShouldFade=this.bindingFor("scrollIndicatorsShouldFade"),t},__superMap:{_3YiQ2Zmjv_H$kf$createScrollIndicatorOptions:"createScrollIndicatorOptions"}};n$416=t}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:" "},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"h3",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["title"]},{type:"ELEMENT",tagname:"p",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"description",attributes:{}}],classes:["description"]}],classes:["detail-text"]}],classes:["detail-view"]}},title:n$9(),description:n$9()}),t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"detailViews"}],classes:["details-view"]}},detailViews:n$84(Array)}),n=n$409.extend(n$416),i=n$398.extend({staticMembers:{templateExtensions:{contentWrapper:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"detailsView"}]}}},additionalClassNames:n$16(["cwe-view","cwe-alert-modal"]),init:function(){this.__s._3ZfoB5KLfGh$Tv$init.apply(this,arguments);var e=this.get("_scrollView"),t=this.get("detailsView");e.set("contentView",this.get("_detailsContainer")),t.set("contentView",e),t.get("style").set("display","none")},_scrollView:n$84(n),_detailsContainer:n$84(t),detailsLabel:n$9(n$290("Alert.Details.Label")),detailsView:n$84(n$414.extend({owner:n$9(),labelText:n$14("owner.detailsLabel")})),addDetail:function(t,n){var i=e.create({title:t,description:n});this.getPath("_detailsContainer.detailViews").push(i),this.get("_scrollView").propertyChanged("scrollMaxY");var r=this.get("detailsView").get("style");
r.set("display",null)},removeDetails:function(){var e=this.getPath("_detailsContainer.detailViews");e.clear(),this.get("_scrollView").propertyChanged("height");var t=this.get("detailsView").get("style");t.set("display","none")},__superMap:{_3ZfoB5KLfGh$Tv$init:"init"}});n$419=i,e.__QUALIFIED_CLASS_NAME__="CWE.UI.DetailView$335",t.__QUALIFIED_CLASS_NAME__="CWE.UI.DetailsContainerView$335",n.__QUALIFIED_CLASS_NAME__="CWE.UI.DetailsScrollView$335",i.__QUALIFIED_CLASS_NAME__="CWE.UI.DetailedAlertView"}();
    
    
        
!function(){"use strict";var e=n$418.extend({staticMembers:{show:function(e){var t=this.create(e);return t.show(),t}},viewClass:n$419,addDetail:function(e,t){this.get("view").addDetail(e,t)},removeDetails:function(){this.get("view").removeDetails()}});n$420=e,e.__QUALIFIED_CLASS_NAME__="CWE.UI.DetailedAlertViewController"}();
    
    
        
!function(){"use strict";var e={itemCount:n$9(0),hasDetailedView:n$9(),message:n$9(),description:n$9(),primaryButton:n$9({defualtValue:function(){return{title:n$290("Alert.OK.Button.Title")}}}),alternateButton:n$9(),iconNames:n$9(),detailTitleForItemAtIndex:n$23,detailDescriptionForItemAtIndex:n$23,_currentAlert:null,showAlert:function(){var e=this._currentAlert;if(!e||e.isDisposed||!e.isAttached){var t=n$40(this.get("primaryButton")),n=n$40(this.get("alternateButton"));e=n$420.create({primaryButton:t,alternateButton:n}),this._currentAlert=e}if(e.setPropertiesWithObject({iconNames:this.get("iconNames"),message:this.get("message"),description:this.get("description")}),e.removeDetails(),this.get("hasDetailedView"))for(var i=0,r=this.get("itemCount");r>i;++i)e.addDetail(this.detailTitleForItemAtIndex(i),this.detailDescriptionForItemAtIndex(i));e.show(),e.get("view").updatePosition()}};n$422=e}();
    
    
        
!function(){"use strict";var e=n$421.extend(n$422,{operation:n$9(),type:n$9(),subtype:n$9(),hasDetailedView:n$9({dependencies:["itemCount"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r>1}}),iconNames:n$9(["photos-icon","error"])});n$423=e,e.__QUALIFIED_CLASS_NAME__="Photos.AlertableError"}();
    
    
        
!function(){"use strict";var t="Alert.Upload.Failed.",e=".SingleItem.Message",n=".MultipleItems.Message",i=".SingleItem.Description",r=".MultipleItems.Description",a=".Detailed.Description",s=n$423.extend({staticMembers:{VALIDATION:"Validation",SERVER:"Server",GENERIC:"Generic",COALESCED:"Coalesced",FILE_TYPE_NOT_SUPPORTED:"FileFormat",FILE_SIZE_TOO_SMALL:"FileSizeSmall",FILE_SIZE_TOO_BIG:"FileSizeBig",FOLDER_NOT_SUPPORTED:"Folder",OUT_OF_QUOTA:"StorageFull",EXIF_ERROR:"Exif",GENERIC_SUBTYPE:"Generic"},operation:n$9("Upload"),files:n$9({defaultValue:function(){return n$158.create()}}),addFiles:function(t){t&&this.get("files").push.apply(this.get("files"),t)},detailedDescription:n$9({dependencies:["type","subtype"],readOnly:!0,get:function(e,n,i,r){var s=r.internalGetPath(this,n[1+i]),o=r.internalGetPath(this,n[0+i]);return n$290(t+o+"."+s+a)}}),itemCount:n$9({dependencies:["fileCount"],readOnly:!0,get:function(t,e,n,i){return i.internalGetPath(this,e[0+n])}}),fileCount:n$9({dependencies:["files","files.contentsDidChange"],readOnly:!0,get:function(t,e,n,i){i.internalGetPath(this,e[1+n]);var r=i.internalGetPath(this,e[0+n]);return r.get("length")}}),message:n$9({dependencies:["type","subtype","fileCount"],readOnly:!0,get:function(i,r,a,s){var o=s.internalGetPath(this,r[2+a]),u=s.internalGetPath(this,r[1+a]),c=s.internalGetPath(this,r[0+a]);return 1>=o?n$290(t+c+"."+u+e):n$290(t+c+"."+u+n,{count:o})}}),description:n$9({dependencies:["type","subtype","fileCount"],readOnly:!0,get:function(e,n,a,s){var o=s.internalGetPath(this,n[2+a]),u=s.internalGetPath(this,n[1+a]),c=s.internalGetPath(this,n[0+a]);
return 1>=o?n$290(t+c+"."+u+i):n$290(t+c+"."+u+r)}}),detailTitleForItemAtIndex:function(t){return this.get("files").objectAt(t).name},detailDescriptionForItemAtIndex:function(){return this.get("detailedDescription")}});n$425=s,s.__QUALIFIED_CLASS_NAME__="Photos.UploadError"}();
    
    
        
!function(){"use strict";var e=n$425.extend({type:n$9(n$425.SERVER),subtype:n$9(n$425.OUT_OF_QUOTA),alternateButton:n$9({defaultValue:function(){return{title:n$290("Alert.Upload.Failed.Server.StorageFull.Button.Title"),target:this,action:"_openStorageSupportPage"}}}),itemCount:n$9({dependencies:["fileCount"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return Math.min(r,1)}}),detailTitleForItemAtIndex:function(e){var t=this.get("files").objectAt(e).name,n=this.get("files").get("length")-1;return n>0?n$290("Alert.Upload.Failed.Server.StorageFull.MultipleItems.Title",{fileName:t,count:n}):t},_openStorageSupportPage:function(){window.open(n$298.get("storageSupportPage"),"_blank")}});n$426=e,e.__QUALIFIED_CLASS_NAME__="Photos.UploadStorageFullError"}();
    
    
        
!function(){"use strict";var e=n$425.extend(n$62,{_uploadErrors:n$9({defaultValue:function(){return n$158.create()}}),itemCount:n$9({dependencies:["_uploadErrors","_uploadErrors.contentsDidChange"],readOnly:!0,get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);for(var r=i.internalGetPath(this,t[0+n]),s=0,o=0,a=r.get("length");a>o;++o)s+=r.objectAt(o).get("itemCount");return s}}),fileCount:n$9({dependencies:["_uploadErrors","_uploadErrors.contentsDidChange"],readOnly:!0,get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);for(var r=i.internalGetPath(this,t[0+n]),s=0,o=0,a=r.get("length");a>o;++o)s+=r.objectAt(o).get("fileCount");return s}}),type:n$9({dependencies:["_uploadErrors","_uploadErrors.contentsDidChange"],readOnly:!0,get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);var r=i.internalGetPath(this,t[0+n]),s=r.get("length");return s?s>1?n$425.COALESCED:r.objectAt(0).get("type"):""}}),subtype:n$9({dependencies:["_uploadErrors","_uploadErrors.contentsDidChange"],readOnly:!0,get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);var r=i.internalGetPath(this,t[0+n]),s=r.get("length");return s?s>1?n$425.GENERIC_SUBTYPE:r.objectAt(0).get("subtype"):""}}),alternateButton:n$9({dependencies:["_uploadErrors","_uploadErrors.contentsDidChange"],readOnly:!0,get:function(e,t,n,i){i.internalGetPath(this,t[1+n]);var r=i.internalGetPath(this,t[0+n]),s=r.get("length");return 1===s?r.objectAt(0).get("alternateButton"):null}}),hasErrors:n$9({dependencies:["_uploadErrors.length"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r>0}}),primaryButton:n$9({defaultValue:function(){return{title:n$290("Alert.OK.Button.Title"),target:this,action:"_clear"}
}}),addError:function(e,t,n){for(var i,r=this.get("_uploadErrors"),s=r.length,o=0;s>o;++o)if(i=r.objectAt(o),i.get("subtype")===t)return i.addFiles(n),this.propertyChanged("itemCount"),this.propertyChanged("fileCount"),void 0;i=this._createUploadError(e,t),i.addFiles(n),this.get("_uploadErrors").push(i)},detailTitleForItemAtIndex:function(e){for(var t=this.get("_uploadErrors"),n=t.get("length"),i=0,r=0;n>r;++r){var s=t.objectAt(r).get("itemCount");i+=s;var o=e-i;if(0>o)return t.objectAt(r).detailTitleForItemAtIndex(s+o)}return null},detailDescriptionForItemAtIndex:function(e){for(var t=this.get("_uploadErrors"),n=t.get("length"),i=0,r=0;n>r;++r){var s=t.objectAt(r).get("itemCount");i+=s;var o=e-i;if(0>o)return t.objectAt(r).detailDescriptionForItemAtIndex(s+o)}return null},_clear:function(){this._uploadErrors.clear()},_createUploadError:function(e,t){return t===n$425.OUT_OF_QUOTA?n$426.create():n$425.create({type:e,subtype:t})},showAlert:function(){this.get("hasErrors")&&this.__s._1IyFbK9apgK$1TN$showAlert.apply(this,arguments)},__superMap:{_1IyFbK9apgK$1TN$showAlert:"showAlert"}});n$473=e,e.__QUALIFIED_CLASS_NAME__="Photos.CoalescedUploadError"}();
    
    
        
!function(){"use strict";var e=function(e,t,n){n=n||!1;var i=e._photosBindingForEventCache=e._photosBindingForEventCache||{},r=i[t]=i[t]||{},s=r[n];if(s)return s;var a={};a[t]=n$12();var o=n$5.extend(n$10,a).create();return n$107(e,t,function(){o[t].apply(o,arguments)},n),r[n]=o.bindingFor(t)};n$428=e}();
    
    
        
!function(){"use strict";var e=n$401.create(),t=n$5.extend(n$10,{max:n$9({defaultValue:1,didChange:function(){this.scheduleTriggerPending(),this._logDebug()}}),_used:0,_pending:n$84(n$401),_pendingSwap:n$84(n$401),hasAvailableConnection:n$4({get:function(){return this.get("max")>this._used}}),allocConnection:function(){this._used++,this._logDebug()},deallocConnection:function(){this._used--,this.scheduleTriggerPending(),this._logDebug()},onAvailableConnection:function(e){this._pending.push(e),this.scheduleTriggerPending()},cancelCallback:function(e){this._pending.remove(e),this._pendingSwap.remove(e)},_triggerPendingTimeoutId:0,scheduleTriggerPending:function(){this._triggerPendingTimeoutId||(this._triggerPendingTimeoutId=n$130(this._triggerPending,0))},_triggerPending:n$299(function(){this._triggerPendingTimeoutId=0;var t=this._pending;for(this._pending=this._pendingSwap,this._pendingSwap=t;this.get("hasAvailableConnection");){var n=t.shift();if(!n)break;var i=n();i&&e.push(n)}for(;t.get("length");)this._pending.unshift(t.shift());for(;e.get("length");)this._pending.unshift(e.shift())}),_logDebug:function(){n$298.get("enableConnectionAllocLogging")&&n$63.debug("ConnectionController: %{used}/%{max}",{used:this._used,max:this.get("max")})}}),n=t.extend({max:n$9({readOnly:!0,dependencies:[n$298.bindingFor("maxConcurrentRequestsTotal"),n$298.bindingFor("maxConcurrentRequestsTotalWhenHidden"),n$203.bindingFor("cloudOSApplication.cloudOSState"),n$428(document,"visibilitychange")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);
return document.hidden||r===n$427.Loaded.Suspended?s:a}})}).create();n$943=t,n$464=n,t.__QUALIFIED_CLASS_NAME__="Photos.ConnectionController"}();
    
    
        
!function(){"use strict";function e(e){for(var t=Object.keys(e),n={},r=0,s=t.length;s>r;r++)for(var a=t[r],o=a.split("/"),l=n,h=0,u=o.length;u>h;h++){var c=o[h];c&&(":"===c[0]&&(c=i),l[c]||(l[c]={}),l=l[c])}return n}function t(e,t){var n,r,s=t.split("/"),a=e._urlMap,o="";for(n=0,r=s.length;r>n;n++){var l=s[n];l&&(a[l]||(l=i),a[l]&&(o+="/"+l,a=a[l]))}var h=Object.keys(e.urls);for(n=0,r=h.length;r>n;n++){var u=h[n];if(u===o||u.replace(/\:[^\/]*/,i)===o)return u}}var n=n$341.extend({serverURL:null,urls:n$84(Object),resources:n$84(Object),statusHandlers:n$84(Object),RequestClass:n$291,_activeRequests:n$84(n$99),sendRequest:function(e){return this._activeRequests.push(e),e.set("url",this._mergeServerURLWithPath(e.get("path"))),this._attachResponseListeners(e),n$63.info("Sending Request: "+e.get("method")+" "+e.get("url")),e.send(),e.promise=n$247.create()},_attachResponseListeners:function(e){e.on(n$274,this._requestDidSucceed.bind(this)),e.on(n$269,this._requestDidFail.bind(this)),e.on(n$270,this._requestDidComplete.bind(this))},_requestDidSucceed:function(e){var t=this._handleRequestStatus(e,"success");if(!t){var n=e.process;n&&(e.processedData=n$340(e,n,arguments)),e.promise&&e.promise.resolve(e)}},_requestDidFail:function(e){var t=this._handleRequestStatus(e,"error");t||e.promise&&e.promise.reject(e)},_handleRequestStatus:function(e,t){var n=this.get("statusHandlers"),i=e.getPath("response.status"),r=n[i],s=!1;return r&&(s=r.call(this,e)),s||(r=n[t],r&&(s=r.call(this,e))),s},_requestDidComplete:function(e){n$63.info("Request Completed: "+e.get("method")+" "+e.get("url")),this._activeRequests.remove(e)
},processResources:function(e,t){var n=this.resources;if(n){var i=[];for(var r in n){var s=n[r],a=s.handleResponse(e,t);a&&i.push(a)}return i}},handlerForPath:function(e){var n=this.get("urls");if(n){var i=t(this,e.toString());return n[i]}},generateRequestDescription:function(e){var t=n$40(e);t.server=this;var n=this.handlerForPath(e.path),i=n.send,r=n.receive;return i&&(t.willSend=i.bind(this)),r&&(t.process=r.bind(this)),t},generateRequest:function(e){var t=this.get("RequestClass").create(e);return t},_mergeServerURLWithPath:function(e){var t=e,n=this.get("serverURL");return n&&(t=n.replace(/\/$/,"")+"/"+e.replace(/^\//,"")),t},init:function(){this.__s._2euiIXsDhL4$1GJ$init.apply(this,arguments),this._initializeResources(),this._initializeURLs()},_timers:n$84(Array),_initializeURLs:function(){var t=this.get("urls");t&&(this._urlMap=e(t))},_initializeResources:function(){var e=this.resources;if(e)for(var t in e){var n=e[t];n.set("key",t),n.set("server",this)}},_urlMap:null,__superMap:{_2euiIXsDhL4$1GJ$init:"init"}}),i="*";n$467=n,n.__QUALIFIED_CLASS_NAME__="CW.Data.Server"}();
    
    
        
!function(){"use strict";var e=n$5.extend({path:null,init:function(e){this.__s._3IvjMqjta80$2P$init.call(this),this.path=e},create:null,read:null,update:null,destroy:null,__superMap:{_3IvjMqjta80$2P$init:"init"}});n$430=e,e.__QUALIFIED_CLASS_NAME__="CW.Data.ResourceMap"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],generateRequest:n$48.create(),generateRequestDescription:n$48.create()};n$431=e}();
    
    
        
!function(){"use strict";var e={generateTransactionForAction:function(e,t){var n=this.__s._wUfJqoE7Za$6N$generateTransactionForAction.apply(this,arguments),i=n$429(t);return i&&n$326().attachChangesetDisablingHooks(n),n},__superMap:{_wUfJqoE7Za$6N$generateTransactionForAction:"generateTransactionForAction"}};n$432=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$431,{modelClass:null,server:null,resourceMap:null,key:null,init:function(e,t){this.__s._2qqO4eVYTO6$7V$init.call(this),this.resourceMap=(t||n$430).create(),this.modelClass=e,e.resource=this},getResourceMapAction:function(e){var t=this.get("resourceMap");return t||n$11("No resource map defined for: "+this.modelClass),t=t[e],t||n$11("No `"+e+"` resource for "+this.modelClass),t},handleResponse:function(e,t){var n=this.getResourceMapAction(t);return n.receive.call(this.get("server"),this,e)},generateRequestForChange:function(e){var t=e.get("operation").name.toLowerCase();return this.generateRequestForAction(t,[e.get("primaryKey")])},generateRequestDescription:function(e,t,n){var i={server:this.get("server"),resource:this,resourceAction:e,primaryKeys:t,body:n},r=this.getResourceMapAction(e),s=r.send,o=r.receive;return s&&(i.willSend=s.bind(r,this)),o&&(i.process=o.bind(r,this)),i},generateRequest:function(e){var t=e.resourceAction,n=e.primaryKeys,i=this.getResourceMapAction(t);e.path=i.url(this,n),e.method=i.method||"GET";var r=e.server;return r.generateRequest(e)},generateTransactionForAction:function(e,t,n,i){var r=n$328.create(),s=n$326(),o=this.generateRequestDescription(t,n,i);if(r.context=o,o.transactions=r,n&&!r.storeIds){var a=s.getStoreIdsForPrimaryKeys(e,n);r.allStoreIds=r.storeIds=a}return r},__superMap:{_2qqO4eVYTO6$7V$init:"init"}},n$432),t=function(t,n){return e.create(t,n)};n$944=e,n$468=t,e.__QUALIFIED_CLASS_NAME__="CW.Data.Resource"}();
    
    
        
!function(){"use strict";var t=new Error("cancelled");t.name="cancel";var e=null,n=[],i=function(){e=null;for(var t=0;t<n.length;t++)n[t]._fireThenableCallbacksWrapper();n.length=0},r=[],a=function(t){var e=r.pop()||new Array(t);return e.length=t,e},s={PENDING:-1,RESOLVED:0,REJECTED:1,state:n$4({get:function(){return this._thenableState},set:function(t){this._thenableState=t,t===this.PENDING&&this._setDefaults()}}),_scheduled:!1,cancelled:n$4({readOnly:!0,get:function(){return!(this._thenableState!==this.REJECTED||!this._thenableResult[0]||"cancel"!==this._thenableResult[0].name)}}),init:function(){this.__s._2XetqTBslfT$UD$init.apply(this,arguments),this._thenableCallbacks=[],this._thenableResult=[],this._setDefaults()},_setDefaults:function(){this._thenableState=this.PENDING,this._dontFire=!1,this._thenableResult.length=0},_recycleReusableCallbackArrays:function(){for(var t=this._thenableCallbacks.length;t--;){var e=this._thenableCallbacks[t];e.length=0,r.push(e)}this._thenableCallbacks.length=0},dispose:function(){this._thenableState===this.PENDING&&n$11("Disposing unresolved thenable."),this._unscheduleTimedRejection(),this._setDefaults(),this._recycleReusableCallbackArrays(),this.__s._2XetqTBslfT$ij$dispose.apply(this,arguments)},then:function(){for(var t=a(arguments.length),e=arguments.length;e--;)t[e]=arguments[e];this._thenableCallbacks.push(t),this._thenableState!==this.PENDING&&this._scheduleThenableCallbacks()},thenSync:function(){if(this._thenableState===this.PENDING)this.then.apply(this,arguments);else{var t=arguments[this._thenableState];if(t){var e=n$27(this._thenableResult);
e.push(!0),t.apply(void 0,e),e.length=0}}},resolve:function(){if(this._unscheduleTimedRejection(),!this.get("cancelled")){this._thenableResult.length=arguments.length;for(var t=arguments.length;t--;)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.RESOLVED,this._scheduleThenableCallbacks()}},reject:function(){if(this._unscheduleTimedRejection(),!this.get("cancelled")){this._thenableResult.length=arguments.length;for(var t=arguments.length;t--;)this._thenableResult[t]=arguments[t];this._thenableResult.push(this),this._thenableState=this.REJECTED,this._scheduleThenableCallbacks()}},rejectAfterTimeout:function(t){this._unscheduleTimedRejection(),this._thenableState!==this.PENDING||this.get("cancelled")||(this.retain(this),this._scheduledRejectionTimeout=n$130(this._performScheduledRejection,t,arguments))},_unscheduleTimedRejection:function(){this._scheduledRejectionTimeout&&(clearTimeout(this._scheduledRejectionTimeout),this._scheduledRejectionTimeout=null,this.autorelease(this))},_performScheduledRejection:n$299(function(t){this.reject.apply(this,n$27(t,0,1))}),cancel:function(e){if(this._dontFire=this._dontFire||e,!this.get("cancelled")){if(e)return this.reject(t),void 0;var n=new Error("cancelled");n.name="cancel",this.reject(n)}},_scheduleThenableCallbacks:function(){this._scheduled||(this._scheduled=!0,this.retain&&this.retain(this),n.push(this),e||(e=n$130(i,0)))},_fireThenableCallbacksWrapper:function(){this._scheduled=!1,this.release&&1===this._poolRetainCount&&(this._disposeWillFail=!0),this._thenableState!==this.PENDING&&(this._fireThenableCallbacks(),this._recycleReusableCallbackArrays()),this._disposeWillFail=!1,this.release&&this.release(this)
},_fireThenableCallbacks:function(){if(!this._dontFire)for(var t,e=0;e<this._thenableCallbacks.length;e++)t=this._thenableCallbacks[e][this._thenableState],t&&t.apply(void 0,this._thenableResult)},__superMap:{_2XetqTBslfT$UD$init:"init",_2XetqTBslfT$ij$dispose:"dispose"}};n$433=s}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$302,n$433),t=n$5.extend(n$433,{init:function(){this.__s._kzDs94td3o$80$init.apply(this,arguments),this.retain()},cancel:n$11.bind(void 0,"Cannot cancel a shared thenable."),__superMap:{_kzDs94td3o$80$init:"init"}});n$434=e,n$633=t,e.__QUALIFIED_CLASS_NAME__="Photos.Thenable",t.__QUALIFIED_CLASS_NAME__="Photos.SharedThenable"}();
    
    
        
!function(){"use strict";var e=n$363.extend({staticMembers:{pluralPrimaryKey:"clientIds",createWithIndex:function(e){var t=this.datastore.clientIdForIndex(e);return this.create(t)}},clientId:n$9({isPrimaryKey:!0,binding:null}),serverId:n$352({readOnly:!0}),_index:n$4({readOnly:!0,get:function(){return this.constructor.datastore?this.constructor.datastore.indexForClientId(this.get("clientId")):-1}}),toString:function(){var e=n$24(this);return"["+e+":"+n$22(this)+":"+this.get("clientId")+":"+this.get("_index")+"]"}});n$446=e,e.__QUALIFIED_CLASS_NAME__="Photos.IndexedModel"}();
    
    
        
!function(){"use strict";var e=function(e){if(null===e)return"";var n=Math.round(e/1e3),i=n%60,r=0|n/60%60,s=0|n/3600;return s?s+":"+t(r)+":"+t(i):r+":"+t(i)},t=function(e){return("00"+e).slice(-2)};n$448=e}();
    
    
        
!function(){"use strict";function e(e,t,n){n.length&&(n.length=0);for(var i=e.length,r=0;i>r;r++){var s=e[r];t(s)&&n.push(s)}return n}var t=n$109.sharedInstance.isIE&&n$109.sharedInstance.majorVersion<=10&&function(e){for(var t=0;t<e.length;t++)if(e[t].geometricLength>=1e3)return e.length=t+1,void 0},n={renderableTypeMatchingDerivativeInfos:{parentSubset:"derivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,i){switch(t){case n$309.IMAGE:return n.renderableImageDerivativeInfos.filter.call(this,e,i);case n$309.VIDEO:return n.renderableVideoDerivativeInfos.filter.call(this,e);case n$309.OTHER:return!1;default:return!1}},postProcess:t},renderableDerivativeInfos:{parentSubset:"derivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return!(e.isEdited!==t||e.genericType!==n$309.IMAGE&&e.genericType!==n$309.VIDEO||e.isOriginal&&"image/png"!==e.mimeType.substring(0,9)||!n$309.validateDerivativeInfo(e))},postProcess:t},renderableImageDerivativeInfos:{parentSubset:"renderableDerivativeInfos",filter:function(e){return e.genericType===n$309.IMAGE}},renderableUneditedImageDerivativeInfos:{parentSubset:"derivativeInfos",filter:function(e){return!(e.genericType!==n$309.IMAGE||e.isEdited||e.isOriginal&&"image/png"!==e.mimeType.substring(0,9)||!n$309.validateDerivativeInfo(e))},postProcess:t},renderableVideoDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["isEdited"],filter:function(e,t){return!(e.genericType!==n$309.VIDEO||e.isEdited!==t||!n$309.validateDerivativeInfo(e))},postProcess:function(){var t=function(e){return!(e.genericType!==n$309.VIDEO||!n$309.validateDerivativeInfo(e))
};return function(n,i){n.length||(n$203.cloudOSService.recordStat("WebService",{errorType:"server",errorTitle:"Had to fall back to unedited slo-mo for display."}),e(i,t,n))}}()},squareImageDerivativeInfos:{parentSubset:"derivativeInfos",filter:function(e){return e.isCroppedToSquare}},originalDerivativeInfos:{parentSubset:"serverDerivativeInfos",filter:function(e){return e.isOriginal}},emailableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return!(e.genericType!==t||e.isEdited!==n)}},downloadableDerivativeInfos:{parentSubset:"serverDerivativeInfos",additionalDependencies:["genericType","isEdited"],filter:function(e,t,n){return!(e.genericType!==t||e.isEdited!==n)}}};n$435=n}();
    
    
        
!function(){"use strict";function t(t){for(var e=[],n=Object.keys(t),i=n.length,r=0;i>r;r++){var a=n[r],s=t[a];s&&e.push(a)}return e}n$436=t}();
    
    
        
!function(){"use strict";function e(e){var t="_objectVersionOf_"+e+"_lastRet";return n$9({readOnly:!0,dependencies:[e],get:function(e,n,i,r){var s=r.internalGet(this,n[0+i]);if(this[t]&&n$307.disposeInstance(this[t]),!s)return this[t]=null;for(var o=n$307.getInstance(),a=0;a<s.length;a++){var u=s[a];o[u.clientId]=u}return this[t]=o}})}var t={staticMembers:{derivativeInfoPool:n$437.create(Object),isURLExpiryTooSoon:function(){return n$298.useCVWSForDerivatives?function(e){return n$298.derivativeURLExpirationOverride?e.urlExpiry<Date.now():e.urlExpiry-18e5<Date.now()}:function(){return!1}}(),synthesizeDerivativeInfo:function(e,t,n){for(var r=n$309.derivativeInfoPool.getInstance(),a=i.length;a--;){var u=i[a];r[u]=e[u]}r.width=t,r.height=n,r.byteSize=0|e.byteSize*t*n/(e.width*e.height),r.fileName=r.url=r.urlExpiry=null;for(var l=0;l<o.length;l++){var c=o[l];r[c]=s[c].call(r,e.assetClientId)}return r.synthesizedFromClientId=e.synthesizedFromClientId||e.clientId,r},assetClientIdForDerivativeClientId:function(e){return e?+e.substring(5,e.indexOf("_")):0/0},isDerivativeSubsetKey:function(e){return n$435.hasOwnProperty(this.propertyKeyForDerivativeSubset(e))},propertyKeyForDerivativeSubset:function(e){return e+"DerivativeInfos"},validateDerivativeInfo:function(){return n$298.useCVWSForDerivatives?function(e){return e.synthesizedFromClientId?!0:e.url?!0:(l(e),!1)}:function(){return!0}}()},_unparsedServerDerivativeInfos:n$352({dataKey:"derivativeInfo"}),serverDerivativeInfos:n$9({readOnly:!0,dependencies:["_unparsedServerDerivativeInfos","_unparsedServerDerivativeInfos.contentsDidChange"],get:function(e,t,u,l){var c=l.internalGetPath(this,t[0+u]),d=this._serverDerivativeInfos_lastRet,h=d&&d.derivativeInfoSetToken;
if(d&&(delete d.derivativeInfoSetToken,d.forEach(n$309.derivativeInfoPool.disposeInstance,n$309.derivativeInfoPool),n$319.disposeInstance(d)),!c)return this._serverDerivativeInfos_lastRet=null;for(var g=n$319.getInstance(),f=!1,_=this.clientId,p=0,$=c.length;$>p;p++){var v=c.objectAt(p),m=n$309.derivativeInfoPool.getInstance(),y=0,I=0,b=0;do{b=I,I=v.indexOf(":",b)+1;var S=i[y++],e=v.substring(b,I?I-1:v.length);m[S]=r[S](e)}while(I&&y<i.length);for(var C=o.length,E=0;C>E;E++){var P=o[E];m[P]=s[P].call(m,_)}g.push(m),f=f||A&&a(A,m)>0;var A=m}f&&g.sort(a);for(var D="",w=g.length;w--;)D+=g[w].clientId;var F=this._serverDerivativeInfos_lastClientIds;return this._serverDerivativeInfos_lastClientIds=D,g.derivativeInfoSetToken=D===F&&h||n(),this._serverDerivativeInfos_lastRet=g}}),serverDerivativeInfosByClientId:e("serverDerivativeInfos"),derivativeInfos:n$9({readOnly:!0,cacheable:!0,dependencies:["serverDerivativeInfos","serverDerivativeInfosByClientId","syntheticDerivativeDidLoad","syntheticDerivativeDidUnload"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),o=this._derivativeInfos_lastRet;if(o&&(delete o.derivativeInfoSetToken,n$319.disposeInstance(o)),!r||!r.length||!s)return this._derivativeInfos_lastRet=null;var u=this._loadedDerivativeSet;if(!u)return this._derivativeInfos_lastRet=null,r;for(var l=n$319.getInstance(),c=r,d=n$319.getInstance(),h=u.length;h--;){var g=u.items[h].info;g&&!s[g.clientId]&&d.push(g)}d.sort(a);for(var f=0,_=0,p=d.length,$=c.length;p>f||$>_;){var v=c[_],m=d[f],y=v&&(!m||v.geometricLength<m.geometricLength);
y?(l.push(v),_++):m&&(l.push(m),f++)}return n$319.disposeInstance(d),l.derivativeInfoSetToken=r.derivativeInfoSetToken,this._derivativeInfos_lastRet=l}}),derivativeInfosByClientId:e("derivativeInfos"),getDerivativeInfoSubset:function(e){return this[n$309.propertyKeyForDerivativeSubset(e||"renderableTypeMatching")]},resetDerivatives:function(){var e=this.clientId;c[e]=(0|c[e])+1},fetchDerivativeInfo:function(e){this.retain(this);var t=n$247.create(),n=function(){t.reject(new Error("Failed to load asset."))},i=function(){var n=e(this);return n?n$309.validateDerivativeInfo(n)?n$309.isURLExpiryTooSoon(n)?"expired":(t.resolve(n),"successful"):(t.reject(new Error("No valid derivativeInfo found.")),"invalid"):(t.reject(new Error("No derivativeInfo found.")),"nonexistent")}.bind(this);return this.load().then(function(){"expired"===i()&&this.reload().then(function(){"expired"===i()&&t.reject(new Error("After Asset reload, derivativeInfo is still expired."))}.bind(this),n)}.bind(this),n),t.finally(function(){this.release(this)}.bind(this)),t}};Object.keys(n$435).forEach(function(e){var n=n$435[e],i="_"+e+"_lastRet";t[e]=n$9({readOnly:!0,dependencies:[n.parentSubset].concat(n.additionalDependencies||[]),get:function(e,t,r,s){var o=s.internalGet(this,t[0+r]),a=n$8.getDependencyValuesAsTempArray(this,t,r,s),u=this[i];if(u&&(delete u.derivativeInfoSetToken,n$319.disposeInstance(u)),!o)return this[i]=null;for(var l=n$27(a,1,1),c=n$319.getInstance(),d=o.length,h=0;d>h;h++){var g=l[0]=o[h];n.filter.apply(this,l)&&c.push(g)}if(n.postProcess){var f=n$27(a,2,1);f[0]=c,f[1]=o,n.postProcess.apply(this,f)
}return c.derivativeInfoSetToken=o.derivativeInfoSetToken,this[i]=c}})});var n=function(){var e=1;return function(){return e++}}(),i=["derivativeId","width","height","byteSize","mimeType","isOriginal","isEdited","urlExpiry","url","fileName"],r=function(){var e=function(e){return e},t=function(e){return+e},n=function(e){return!!+e};return{derivativeId:e,width:t,height:t,byteSize:t,mimeType:e,isOriginal:n,isEdited:n,urlExpiry:t,url:decodeURIComponent,fileName:decodeURIComponent}}(),s={assetClientId:function(e){return e},_outdateCount:function(){return 0|c[this.assetClientId]},clientId:function(){return"asset"+this.assetClientId+"_"+this.width+"x"+this.height+"_"+u(this.mimeType)+(this.isOriginal?"_original":"")+(this.isEdited?"_edited":"")+(this._outdateCount?"_"+this._outdateCount+"outdate"+(1!==this._outdateCount?"s":""):"")},synthesizedFromClientId:function(){return null},genericType:function(){var e={};return function(){var t=this.mimeType,n=e[t];if(n)return n;var i=t.substring(0,t.indexOf("/")+1||t.length),r="application/pdf"===t?n$309.IMAGE:"image/"===i?n$309.IMAGE:"video/"===i?n$309.VIDEO:"audio/"===i?n$309.AUDIO:n$309.OTHER;return n=e[t]=n$309.genericTypeForType(r)}}(),geometricLength:function(){return Math.max(this.width,this.height)},isCroppedToSquare:function(){return!1},urlExpiry:function(){var e=n$298.derivativeURLExpirationOverride;return e?Date.now()+e:this.urlExpiry}},o=n$436(s),a=function(e,t){return e.geometricLength-t.geometricLength||+e.isOriginal-+t.isOriginal||e.byteSize-t.byteSize},u=function(){var e={},t=/([\/\-][\w\d])/g,n=function(e){return e[1].toUpperCase()
};return function(i){return e[i]||(e[i]=i.replace(t,n))}}(),l=function(){var e={};return function(t){e[t.clientId]||(e[t.clientId]=!0,t.url||n$203.get("cloudOSService").recordStat("WebService",{errorType:"server",errorTitle:"Server didn't send URL for derivative in Asset#derivativeinfo.",derivativeInfoId:t.clientId}))}}(),c={};n$438=t}();
    
    
        
!function(){"use strict";var e=function(e,n){var i=t.getInstance();return i.workFunc=e||n$23,i.thisArg=n,n$26(i.args,arguments,0,2),i.callback},t=n$437.extend({createInstance:function(){var e={};return e.workFunc=null,e.thisArg=null,e.args=[],e.callback=function(){e.args.push.apply(e.args,arguments),e.workFunc.apply(e.thisArg,e.args),t.disposeInstance(e)},e},disposeInstance:function(e){e.args.length=0,e.thisArg=null,e.workFunc=null,this.__s._1NVx8Bc98uo$TW$disposeInstance.apply(this,arguments)},__superMap:{_1NVx8Bc98uo$TW$disposeInstance:"disposeInstance"}}).create();n$440=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$438],staticMembers:{resetAllDerivatives:function(){for(var e=this.livingInstanceSet.items,t=this.livingInstanceSet.length;t--;)e[t].resetDerivatives()}},_derivativeSet:n$355(),_loadedDerivativeSet:n$355(),addDerivative:function(e){var n=this._derivativeSet||(this._derivativeSet=t.create());n.add(e),this.derivativeMayHaveLoaded(e)},removeDerivative:function(e){var t,n=!1;t=this._derivativeSet,t&&(t.remove(e),t.length||(this._derivativeSet=null)),t=this._loadedDerivativeSet,t&&(n=t.contains(e)&&!!e.isLoaded,t.remove(e),t.length||(this._loadedDerivativeSet=null)),n&&(n$66.pause(),e.getPath("info.synthesizedFromClientId")&&this.syntheticDerivativeDidUnload(),this.derivativeDidUnload(),n$66.resume())},derivativeMayHaveLoaded:function(e){if(e.isLoaded){var n=this._loadedDerivativeSet||(this._loadedDerivativeSet=t.create()),i=!n.contains(e);n.add(e),i&&(n$66.pause(),e.getPath("info.synthesizedFromClientId")&&this.syntheticDerivativeDidLoad(),this.derivativeDidLoad(),n$66.resume())}},derivativeDidLoad:n$12(!0),derivativeDidUnload:n$12(!0),syntheticDerivativeDidLoad:n$12(!0),syntheticDerivativeDidUnload:n$12(!0),resetDerivatives:function(){this.__s._4JCzLYtvlDU$1Ii$resetDerivatives.apply(this,arguments);var e=this._derivativeSet;if(e)for(var t=e.items,n=e.length;n--;)t[n].resetForChangeset()},derivativeInfoForGeometricLength:function(e,t,n){0>=e&&(e=1),e||(e=1/0);var i=this.getDerivativeInfoSubset(t),r=i&&i.length,s=this._loadedDerivativeSet&&this._loadedDerivativeSet.mappedItems;if(!r||n&&!s)return null;for(var a=null,o=0;r>o&&(n&&!s[i[o].clientId]||(a=i[o],!(a.geometricLength>=e)));o++);return a
},derivativeInfoForClientId:function(e){var t=this.derivativeInfosByClientId;return t?t[e]:null},snapGeometricLength:function(e,t,n){var i=this.derivativeInfoForGeometricLength(e,t,n);return i?i.geometricLength:0/0},getLoadedDerivative:function(e,t){var n=this._loadedDerivativeSet&&this._loadedDerivativeSet.mappedItems[e&&e.clientId||e];return n&&!t&&n.reactivate(),n||null},isDerivativeLoaded:function(e){return!!this.getLoadedDerivative(e,!0)},bestLoadedDerivative:function(e,t){return this.getLoadedDerivative(this.derivativeInfoForGeometricLength(e,t,!0))},requestDerivative:function(e,t,n){if(!this.serverDerivativeInfos){if(this.linkToStore(),this.serverDerivativeInfos)return this.requestDerivative.apply(this,arguments);this.retain(this);var i=n$441.create().retain(this),r=n$440(this._assetDidLoadOrFail,this,e.clientId||e,t,i);return this.load().then(r,r),i}var s=e,a=+s===s?this.derivativeInfoForGeometricLength(s,t):s.clientId?s:this.derivativeInfoForClientId(s);if(!a){var o=n||n$441.create().retain(this).autorelease(this);return o.reject(Error("Asset lacks compatible derivatives.")),o}var u=this.getLoadedDerivative(a);return!u&&t&&(u=this.bestLoadedDerivative(a.geometricLength,t)),(!u||u.geometricLength<a.geometricLength)&&(u=n$442.create(a)),u._load(n)},_assetDidLoadOrFail:function(e,t,n){this.serverDerivativeInfos?this.requestDerivative(e,t,n):n.reject(Error("Failed to load Asset metadata.")),n.autorelease(this),this.release(this)},_debug_display:function(e){var t=this.bestLoadedDerivative(1/0,"renderableImage");return t?(t._debug_display(void 0,this),"Displayed asset"+this.clientId+" using "+t.clientId+"."):this.loadingStatus!==n$329.LOADED?e?"The asset"+this.clientId+" is not loaded.":(this.load().then(this._debug_display.bind(this,!1),this._debug_display.bind(this,!0)),"Loading asset"+this.clientId+"."):e?"No loaded derivatives for asset"+this.clientId+".":(this.requestDerivative(1,"renderableImage").then(this._debug_display.bind(this,!1),this._debug_display.bind(this,!0)),"Loading derivative to display asset"+this.clientId+".")
},__superMap:{_4JCzLYtvlDU$1Ii$resetDerivatives:"resetDerivatives"}},t=n$439.extend(n$302,{mappedKey:"clientId",dispose:function(){this.length&&n$11("Disposing a DerivativeSet while it still has derivatives in it. A derivative failed to properly retain its asset."),this.__s._4JCzLYtvlDU$4pI$dispose.apply(this,arguments)},__superMap:{_4JCzLYtvlDU$4pI$dispose:"dispose"}});n$443=e,t.__QUALIFIED_CLASS_NAME__="Photos.DerivativeSet$357"}();
    
    
        
!function(){"use strict";function e(){o++}function t(){o--,0>=o&&(o=0,n())}function n(){h||(h=n$444(i))}function i(){if(h&&(window.cancelAnimationFrame(h),h=0),!(o>0)&&l.length){var e,t=Date.now()+1;do e=l.items[l.length-1],e._createResampledImageDerivatives();while(l.length&&Date.now()<t);l.length&&n()}}function r(e){return Math.min(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),1.5*Math.pow(2,Math.ceil(Math.log(e/1.5)/Math.log(2))))}function s(e,t){return r(e)>=2*r(t)}var a={mixinDependencies:[n$443],staticMembers:{suspendDerivativeCreations:e,resumeDerivativeCreations:t},bestLoadedDerivative:function(){var e=this.__s._30dPEHrB1x5$Ou$bestLoadedDerivative.apply(this,arguments);return e&&(e._stopgap_shouldCache=!0),e},requestDownsample:function(e,t){if(n$310.enableDerivativeSynthesis){var n=n$309.isDerivativeSubsetKey(t)?t:null,i=n?this.bestLoadedDerivative(e,n):t;if(i){var a=i.info;s(a.geometricLength,e)&&this.scheduleDerivativeCreation(r(e),n||a)}}},_cleanUpAndOrCancelPendingDerivativeCreations:function(){l.remove(this);var e=this._pendingDerivativeCreations;e&&(e.forEach(n$319.disposeInstance,n$319),n$319.disposeInstance(e),this._pendingDerivativeCreations=null)},scheduleDerivativeCreation:function(){for(var e=this._pendingDerivativeCreations=this._pendingDerivativeCreations||n$319.getInstance(),t=n$26(n$319.getInstance(),arguments),i=0;i<t.length;i++){var r=t[i];n$37(r)&&(r=t[i]=r.clientId)}for(var s=!1,a=e.length;a--;){for(var o=e[a],h=!0,u=Math.max(o.length,t.length);u--;)if(t[u]!==o[u]){h=!1;break}if(h){s=!0;break}}s||(e.push(t),l.add(this),n())},createDerivative:function(e,t){var n=+e?null:e.clientId?e:this.derivativeInfoForClientId(e),i=n?n.geometricLength:e,r=n$309.isDerivativeSubsetKey(t)&&t,a=r?null:t.clientId?t:this.derivativeInfoForClientId(t),o=r?this.bestLoadedDerivative(i,r):a?this.getLoadedDerivative(a):null;
return i&&o&&s(o.geometricLength,i)?(o._stopgap_shouldCache=!1,o.createResampledDerivative(i)):null},_createResampledImageDerivatives:function(){var e=this._pendingDerivativeCreations;if(e){for(var t=e.length;t--;){var n=e[t];this.createDerivative.apply(this,n)}this._cleanUpAndOrCancelPendingDerivativeCreations()}},didEnterPoolCache:function(){this._cleanUpAndOrCancelPendingDerivativeCreations(),this.__s._30dPEHrB1x5$37s$didEnterPoolCache.apply(this,arguments)},dispose:function(){this._cleanUpAndOrCancelPendingDerivativeCreations(),this.__s._30dPEHrB1x5$3Co$dispose.apply(this,arguments)},__superMap:{_30dPEHrB1x5$Ou$bestLoadedDerivative:"bestLoadedDerivative",_30dPEHrB1x5$37s$didEnterPoolCache:"didEnterPoolCache",_30dPEHrB1x5$3Co$dispose:"dispose"}},o=0,l=n$439.create(),h=0;n$449=a}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$62,{staticMembers:{CREATE:"Create",UNDELETE:"Recover",EXPUNGE:"Expunge",DELETE:"Delete",REMOVE:"Remove",ADD:"Add",UPDATE:"Update",RENAME:"Rename",UPLOAD:"Upload",EMAIL:"Email",GENERIC:"Generic",FILE_FORMAT:"File.Format",OVER_SIZE_LIMIT:"OverSizeLimit",operationFromServerAction:function(e,t){return"create"===e?this.CREATE:"destroy"===e?this.DELETE:"undelete"===e?this.UNDELETE:"expunge"===e?this.EXPUNGE:"update"===e?t.kindOf(n$370)?this.RENAME:this.UPDATE:(n$11('Attempting to get alert operation for "%{0}".',[e]),void 0)}},showRemoveAlert:function(e){var t=e.itemCount,n=e.type,i=e.burstItemCount,r=[],a=e.removeType||e.modelProvider.get("removeType"),s=this.constructor.REMOVE;a===n$366.DELETE?(s=this.constructor.DELETE,r.push("photos-red-delete-button")):a===n$366.EXPUNGE&&(s=this.constructor.EXPUNGE,r.push("photos-red-delete-button"));var o,l,u=null;return n===n$309.BURST?t>1?(o=n$290("Alert."+s+".MultipleItems.Message",{count:t}),l=n$290("Alert."+s+".MultipleItems.Description")):(o=n$290("Alert."+s+".Burst.Message"),l=n$290("Alert."+s+".Burst.Description",{count:i})):n===n$309.IMAGE?t>1?(o=n$290("Alert."+s+".MultipleItems.Message",{count:t}),l=n$290("Alert."+s+".MultipleItems.Description")):(o=n$290("Alert."+s+".SinglePhoto.Message"),l=n$290("Alert."+s+".SinglePhoto.Description")):n===n$309.VIDEO||n===n$309.TIME_LAPSE||n===n$309.SLO_MO?t>1?(o=n$290("Alert."+s+".MultipleItems.Message",{count:t}),l=n$290("Alert."+s+".MultipleItems.Description")):(o=n$290("Alert."+s+".SingleVideo.Message"),l=n$290("Alert."+s+".SingleVideo.Description")):n===n$370.FOLDER||n===n$370.ALBUM?(r.push("photos-red-delete-button"),t>1&&n$11("Deleting multiple %{0}s is not supported.",[n]),n===n$370.FOLDER?(u="Folder",o=n$290("Alert."+s+".SingleFolder.Message",e.locParams),l=n$290("Alert."+s+".SingleFolder.Description")):(u="Album",o=n$290("Alert."+s+".SingleAlbum.Message",e.locParams),l=n$290("Alert."+s+".SingleAlbum.Description"))):t>1?(o=n$290("Alert."+s+".MultipleItems.Message",{count:t}),l=n$290("Alert."+s+".MultipleItems.Description")):(o=n$290("Alert."+s+".SingleItem.Message"),l=n$290("Alert."+s+".SingleItem.Description")),n$420.show({iconNames:["photos-icon","error"],message:o,description:l,primaryButton:{title:n$290("Alert."+s+(u?"."+u:"")+".Button.Title"),target:e.target,action:e.action,additionalClassNames:n$16(r)},alternateButton:{title:n$290("Alert.Cancel.Button.Title")},context:e.context})
},showDownloadAlert:function(e){var t=e.itemCount,n=e.target,i=e.action;return n$420.show({iconNames:["photos-icon","error"],message:n$290("Alert.Download.MultipleItems.Message",{count:t}),description:n$290("Alert.Download.MultipleItems.Description",{count:t}),primaryButton:{title:n$290("Alert.Download.Button.Title"),target:n,action:i},alternateButton:{title:n$290("Alert.Cancel.Button.Title")},context:e.context})},showEmailAlert:function(t){var n,i,r=e.EMAIL,a=t.itemCount,s=t.failure||e.GENERIC,o="Alert."+r+".Failed.Attachment."+s;if(a>1)n=n$290(o+".MultipleItems.Message"),i=s===e.OVER_SIZE_LIMIT?n$290(o+".MultipleItems.Description",{maxFileSizeInMB:t.maxFileSizeInMB}):n$290(o+".MultipleItems.Description");else{var l=t.genericAssetType;l&&l===n$309.IMAGE?(n=n$290(o+".Photo.SingleItem.Message"),i=s===e.OVER_SIZE_LIMIT?n$290(o+".Photo.SingleItem.Description",{maxFileSizeInMB:t.maxFileSizeInMB}):n$290(o+".Photo.SingleItem.Description")):l&&l===n$309.VIDEO?(n=n$290(o+".Video.SingleItem.Message"),i=s===e.OVER_SIZE_LIMIT?n$290(o+".Video.SingleItem.Description",{maxFileSizeInMB:t.maxFileSizeInMB}):n$290(o+".Video.SingleItem.Description")):(n=n$290(o+".Item.SingleItem.Message"),i=s===e.OVER_SIZE_LIMIT?n$290(o+".Item.SingleItem.Description",{maxFileSizeInMB:t.maxFileSizeInMB}):n$290(o+".Item.SingleItem.Description"))}var u=this.showSimpleAlert(n,i,null,null,t.context);return u},showErrorAlert:function(e){var t,n,i=e.operation,r=e.itemCount,a=e.failure,s=e.type,o="Alert."+i+".Failed."+a;if(s===n$370.FOLDER||s===n$370.ALBUM){r>1&&n$11("Doing %{0} on multiple %{1}s is not supported.",[i,s]);
var l=s===n$370.FOLDER?"SingleFolder":"SingleAlbum";t=n$290(o+"."+l+".Message"),n=n$290(o+"."+l+".Description")}else r>1?(t=n$290(o+".MultipleItems.Message"),n=n$290(o+".MultipleItems.Description",{count:r})):(t=n$290(o+".Message"),n=n$290(o+".Description"));var u=this.showSimpleAlert(t,n,e.target,e.action,e.context);return u},showSimpleAlert:function(){this.createSimpleAlert.apply(this,arguments).show()},createSimpleAlert:function(e,t,n,i,r){var a={title:n$290("Alert.OK.Button.Title")};return n&&(a.target=n),i&&(a.action=i),n$420.create({iconNames:["photos-icon","error"],message:e,description:t,primaryButton:a,context:r})}});n$368=e,e.__QUALIFIED_CLASS_NAME__="Photos.AlertManager"}();
    
    
        
!function(){"use strict";var e={staticMembers:{_errorAlertOperationsToHandle:[n$368.DELETE,n$368.UNDELETE,n$368.EXPUNGE],handleAlertForOperationError:function(e){if(-1===this._errorAlertOperationsToHandle.indexOf(e))return!1;var t=this._pendingActionAlertInfo;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i&&n$368.sharedInstance.showErrorAlert({operation:n,failure:n$368.GENERIC,itemCount:i})}return!0},serverActionsRequiringModelDeregisterFromStore:["expunge"],deleteAssetsWithClientIds:function(e){n$63.info("Deleting assets: "+e.length),this._processServerActionForAssetsWithClientIds("destroy",e)},expungeAssetsWithClientIds:function(e){this._processServerActionForAssetsWithClientIds("expunge",e)},undeleteAssetsWithClientIds:function(e){this._processServerActionForAssetsWithClientIds("undelete",e)},_activeServerActionTxn:null,_serverActionQueue:n$84(n$401),_pendingActionAlertInfo:n$84(Object),_processServerActionForAssetsWithClientIds:function(e,t){if(t&&t.length){-1!==t.indexOf(void 0)&&n$11("clientIds for #_processServerActionForAssetsWithClientIds contained `undefined`",{action:e,clientIds:t,statId:20179739}),this.datastore.removeItemsAtIndexes(this.datastore.indexesForClientIds(t,void 0,!0),!0);var n=n$370.createAllInstancesInStore();n.forEach(function(e){e.retain(this)},this);var i=function(e){return e.linkToStore(),e.get("isAlbum")?(e.retain(this),!0):!1},r=[],s=n.filter(function(e){return r.push(e.clientId),n$340({iteratedIds:r},i,arguments,this)},this);n.forEach(function(e){e.release(this)},this),s.forEach(function(e){e.removeAssetsWithClientIds(t)});var o="destroy"===e?this.destroy.bind(this,t):this.performCustomServerAction.bind(this,e,t),a=this.alternateDatastores.toArray();
a.push(this.datastore);var u=this._pendingActionAlertInfo,l=n$368.operationFromServerAction(e,this.constructor);u[l]=u[l]||0,u[l]+=t.length;var c=n$247.create();c.then(function(){return this._activeServerActionTxn=o(),this._activeServerActionTxn.catch(function(){this._serverActionQueue.forEach(function(e){e.reject()}),this._serverActionQueue.length=0,this._activeServerActionTxn=null}.bind(this)),this._activeServerActionTxn}.bind(this)).then(function(){var e=this._serverActionQueue.shift();return e?(e.resolve(),void 0):(this._activeServerActionTxn=null,void 0)}.bind(this)).catch(function(){a.forEach(function(e){e.resetToBackingDatastore()})}).then(function(){s.forEach(function(e){e.release(this)},this),u[l]-=t.length}.bind(this)),this._activeServerActionTxn?this._serverActionQueue.push(c):c.resolve()}}}};n$450=e}();
    
    
        
!function(){"use strict";var e=n$353.extend({filename:n$352(),filesize:n$352(),flash:n$352(),apertureValue:n$352(),fnumber:n$352(),focalLength:n$352(),shutterSpeed:n$352(),whiteBalance:n$352(),ISOSpeedRatings:n$352(),exposureValue:n$352(),cameraMake:n$352(),cameraModel:n$352(),lensMake:n$352(),lensModel:n$352(),latitude:n$352(),longitude:n$352(),geocode:n$352()}),t=n$446.extend(n$364,n$443,n$449,n$450,{staticMembers:{datastore:n$447,alternateDatastores:n$439.create(),IMAGE:"image",VIDEO:"video",BURST:"burst",SLO_MO:"slo-mo",TIME_LAPSE:"time-lapse",AUDIO:"audio",OTHER:"other",genericTypeForType:function(e){switch(e){case this.IMAGE:case this.BURST:return this.IMAGE;case this.VIDEO:case this.TIME_LAPSE:case this.SLO_MO:return this.VIDEO;case this.OTHER:case this.AUDIO:return this.OTHER;default:if(!e)return null;n$11("invalid asset type",{type:e})}},create:function(e){var t=+e;return isNaN(t)&&n$11("Cannot create asset with clientId "+e+"."),this.__s._2akLi_0FY5h$13O$create.call(this,t)},__superMap:{_2akLi_0FY5h$13O$create:"create"}},expungeDate:n$352(),title:n$352(),isFavorite:n$352(),type:n$352(),genericType:n$9({readOnly:!0,dependencies:["type"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.constructor.genericTypeForType(r)}}),cannotHaveImageDerivative:n$9({readOnly:!0,dependencies:["genericType"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.OTHER}}),burstAssetModelProvider:n$355(),_burstAssetsBinaryFeed:n$352({dataKey:"burstAssetsBinaryFeed"}),_burstAssetsBinaryFeedDidChange:n$7("_burstAssetsBinaryFeed",function(e){if(this.get("type")===this.constructor.BURST){var t=this.get("burstAssetModelProvider")||n$367.create();
t.populate(e),this.setIfChanged("burstAssetModelProvider",t),this.constructor.alternateDatastores.add(t)}}),duration:n$352(),durationString:n$9({readOnly:!0,dependencies:["duration"],get:function(e,t,n,i){return n$448(i.internalGetPath(this,t[0+n]))}}),createdDate:n$352(),createdDateObject:n$9({readOnly:!0,dependencies:["createdDate"],cacheable:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?new Date(r):null}}),details:n$352({type:e}),_dimensions:n$352({dataKey:"dimensions"}),dimensions:n$9({readOnly:!0,dependencies:["_dimensions","type"],get:function(){var e=n$158.create([3e3,2e3]);return function(){return this.type!==this.constructor.AUDIO?this._dimensions:e}}()}),width:n$9({readOnly:!0,dependencies:["dimensions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.objectAt(0):0/0}}),height:n$9({readOnly:!0,dependencies:["dimensions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.objectAt(1):0/0}}),aspectRatio:n$9({readOnly:!0,dependencies:["dimensions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.objectAt(0)/r.objectAt(1):0}}),aspectRatioEstimate:n$9({readOnly:!0,dependencies:["aspectRatio","derivativeDidLoad"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r)return r;var s=this.bestLoadedDerivative();if(s){var a=s.rectInElement;return a.width/a.height}var o=this._index;if(-1!==o)return this.constructor.datastore.aspectRatioEstimateForItemAtIndex(o);for(var l=this.clientId,h=this.constructor.alternateDatastores,u=h.length;u--;){var c=h.items[u];if(o=c.indexForClientId(l),-1!==o)return c.aspectRatioEstimateForItemAtIndex(o)
}}}),toDatastoreData:function(){return[this.aspectRatioEstimate,this.clientId]},isEdited:n$352(),preferredEmailDerivativeInfo:n$9({readOnly:!0,dependencies:["emailableDerivativeInfos","genericType"],get:function(e,n,i,r){var s=r.internalGetPath(this,n[1+i]),a=r.internalGetPath(this,n[0+i]);return a&&(s===t.VIDEO?a[0]:a[a.length-1])}}),preferredDownloadDerivativeInfo:n$9({readOnly:!0,dependencies:["downloadableDerivativeInfos"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=r;return s&&s[s.length-1]}}),dispose:function(){var e=this.get("burstAssetModelProvider");e&&this.constructor.alternateDatastores.remove(e),this.__s._2akLi_0FY5h$3yF$dispose.apply(this,arguments)},requestDerivative:function(){return this._markAs("sought_by_user"),this.__s._2akLi_0FY5h$40l$requestDerivative.apply(this,arguments)},_markWasFullyDisplayed:n$7("derivativeDidLoad",function(){this._markAs("fully_displayed")}),_markWasLoaded:n$7("loadingStatus","clientId",function(e,t){t&&(e===n$329.LOADED||e===n$329.LOADING)&&this._markAs("loaded_by_app")}),_markAs:function(e){var t=this.clientId;t&&n.mark(t,e)},__superMap:{_2akLi_0FY5h$3yF$dispose:"dispose",_2akLi_0FY5h$40l$requestDerivative:"requestDerivative"}}),n={COUNT_COALESCING_WINDOW:4e3,markings:{},markingCounts:{},mark:function(e,t){var n=this.markings[t]||(this.markings[t]={});n[e]!==(n[e]=!0)&&(this.markingCounts[t]=(0|this.markingCounts[t])+1,this.scheduleFlush(this.COUNT_COALESCING_WINDOW))},flush:function(){this.unscheduleFlush();var e=!1;for(var t in this.markingCounts)this.markingCounts.hasOwnProperty(t)&&0|this.markingCounts[t]&&(e=!0);
e&&(n$203.cloudOSService.recordStat("AssetRequestCounts",this.markingCounts),n$382(this.markingCounts))},scheduleFlush:function(e){this._flushTimeout||(this._flushTimeout=n$130(n$356(this.flush,this),e))},unscheduleFlush:function(){this._flushTimeout&&clearTimeout(this._flushTimeout),this._flushTimeout=null}};n$309=t,e.__QUALIFIED_CLASS_NAME__="Photos.Details$361",t.__QUALIFIED_CLASS_NAME__="Photos.Asset"}();
    
    
        
!function(){"use strict";var e=n$446.extend(n$325,{titleTokens:n$352(),subtitleTokens:n$352(),dateRange:n$352()});n$451=e,e.__QUALIFIED_CLASS_NAME__="Photos.IndexedModelGroup"}();
    
    
        
!function(){"use strict";var e=n$99.create(),t=n$451.extend({staticMembers:{displayStringForRevGeoTokens:function(t){if(t.length<3)return t.join(n$290("RevGeo.Title.MidJoiner"));var n=this._compoundedTokensFromRevGeoTokens(t,e),i="",r=n.length-1;return n.forEach(function(e,t){i+=t?t===r?1===t?n$290("RevGeo.Title.EndJoiner.1")+e:n$290("RevGeo.Title.EndJoiner.N")+e:n$290("RevGeo.Title.MidJoiner")+e:e}),i},_compoundedTokensFromRevGeoTokens:function(e,t){var n=t||n$99.create();n.length=e.length-2;var i,r;if(e.forEach(function(t,a){a?a===e.length-1?r=t:n.setIndex(a-1,t):i=t}),!i&&!r)return n;if(!n.objectAt(0)){var a;return a=i&&r?i+n$290("RevGeo.Title.PrefixJoiner")+r:i||r,n.setIndex(0,a),n}var s=!1;return n.forEach(function(e,t){s=s||-1!==e.indexOf(r),!t&&i&&(e=-1===i.indexOf(e)&&e?i+n$290("RevGeo.Title.PrefixJoiner")+e:i),t===n.length-1&&r&&!s&&(e=e?e+n$290("RevGeo.Title.SuffixJoiner")+r:r),n.setIndex(t,e)}),n}},datastore:null,assetStartIndex:n$4({readOnly:!0,get:function(){var e=this.constructor.datastore,t=e.indexForClientId(this.get("clientId")),n=e.childRangeStartForGroupAtIndex(t);return n}}),assetEndIndex:n$4({readOnly:!0,get:function(){var e=this.constructor.datastore,t=e.indexForClientId(this.get("clientId")),n=e.childRangeEndForGroupAtIndex(t);return n}}),itemCount:n$9({readOnly:!0,dependencies:["contentsDidChange"],cacheable:!0,get:function(){return this.get("assetEndIndex")-this.get("assetStartIndex")}}),itemAtIndex:function(e){return n$309.createWithIndex(this.get("assetStartIndex")+e)},preloadRange:function(e,t){var n=this.get("assetStartIndex");n$309.datastore.preloadRange(e+n,t+n)
},aspectRatioEstimateForItemAtIndex:function(e){return n$309.datastore.aspectRatioEstimateForItemAtIndex(this.get("assetStartIndex")+e)},title:n$9({readOnly:!0,dependencies:["titleTokens"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.constructor.displayStringForRevGeoTokens(r):""}}),subtitle:n$9({readOnly:!0,dependencies:["subtitleTokens"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.constructor.displayStringForRevGeoTokens(r):""}})});n$455=t,t.__QUALIFIED_CLASS_NAME__="Photos.RangedAssetGroup"}();
    
    
        
!function(){"use strict";var e=n$324.extend(n$452,{itemLength:1,_backingData:null,init:function(){this.__s._2sQRjNcABZd$Av$init.apply(this,arguments),this._backingData=this.data.deepCopy()},dispose:function(){this._backingData.clear(),this._haveClientSideChange=!1,this.__s._2sQRjNcABZd$Dm$dispose.apply(this,arguments)},childIndexesRemovedFromGroups:function(e,t){this._haveClientSideChange=!0,this.contentsWillChange();var n=new Array(this.get("itemCount"));t||(e=e.slice(),e.sort(n$303));for(var i=0,r=0,s=this.get("itemCount");s>r;r++){var a=this.childRangeStartForGroupAtIndex(r);this.data.setItemAt(r,a-i);for(var o=this.childRangeEndForGroupAtIndex(r);e[i]<o;)i++,n[r]=(n[r]||0)+1}return this.contentsDidChange(),n},childIndexesAddedToGroups:function(e){this._haveClientSideChange=!0,this.contentsWillChange();for(var t=0,n=0,i=this.get("itemCount");i>n;n++){var r=this.childRangeStartForGroupAtIndex(n);this.data.setItemAt(n,r+t),t+=e[n]||0}this.contentsDidChange()},populate:function(e){return this.contentsWillChange(),this.data.clear(),this.resetClientIdsAndIndexCache(),n$320.create(e).iterate({thisArg:this,eachIndex:function(e,t){this.data.push(t)}}),this._backingData.set(this.data),this._haveClientSideChange=!1,this.contentsDidChange(),this.__s._2sQRjNcABZd$oE$populate.apply(this,arguments)},_resetToLastKnownServerStateIfNeeded:function(){this._haveClientSideChange&&(this.contentsWillChange(),this.data.set(this._backingData),this._haveClientSideChange=!1,this.contentsDidChange())},_didIngestChangeset:n$7("childrenModelProvider.didIngestChangeset",function(e){e&&(this._resetToLastKnownServerStateIfNeeded(),this._backingData.set(this.data))
}),_haveClientSideChange:!1,ingestChange:function(e){this._resetToLastKnownServerStateIfNeeded();var t=e.operation;if(t!==this.INSERT&&t!==this.UPDATE)return this.__s._2sQRjNcABZd$1Qs$ingestChange.apply(this,arguments),void 0;this.contentsWillChange();var n=n$320.create(e.binaryFeed),i=n$319.getAutodisposingInstance(),r=n$319.getAutodisposingInstance(),s=n$319.getAutodisposingInstance(),a=function(e,t){var n=n$319.getWrapperAutodisposingInstance(t);i.push(e),r.push(n)};t===this.INSERT?(n.iterate({thisArg:this,eachIndex:a}),this.baseInsertItemDataAtIndexes(i,r)):t===this.UPDATE&&(n.iterate({thisArg:this,eachIndex:function(e){a.apply(this,arguments),s.push(this.clientIdForIndex(e))}}),this.baseUpdateItemDataAtIndexes(i,r),this.get("itemClass").reloadOrResetDataForClientIdsAsNeeded(s)),this.contentsDidChange()},_childrenModelProviderContentsWillChange:n$7("childrenModelProvider.contentsWillChange",function(e){e&&this.contentsWillChange()}),_childrenModelProviderContentsDidChange:n$7("childrenModelProvider.contentsDidChange",function(e){e&&this.contentsDidChange()}),_contentsDidChangeSanityCheck:n$7("contentsDidChange",function(e){if(e)for(var t=this.get("itemCount"),n=t;n--;){var i=this.childRangeStartForGroupAtIndex(n),r=this.childRangeEndForGroupAtIndex(n);i>r&&n$11("Group start greater than its end after contentsDidChange.",{groupIndex:n,currentStart:i,currentEnd:r})}}),childrenModelProvider:n$9(n$447),childRangeStartForGroupAtIndex:function(e){return this.itemDatumAtIndexWithOffset(e)},childRangeEndForGroupAtIndex:function(e){var t=e+1;return t>=this.get("itemCount")?this.get("childrenModelProvider").get("itemCount"):this.itemDatumAtIndexWithOffset(t)
},childCountForGroupAtIndex:function(e){return this.childRangeEndForGroupAtIndex(e)-this.childRangeStartForGroupAtIndex(e)},binaryFeedPayloadEncoding:24,toBinaryFeed:function(e){for(var t=this.get("itemCount"),n=n$320.create(e||this.binaryFeedPayloadEncoding||0),i=0;t>i;i++)n.pushItem.call(n,this.itemDatumAtIndexWithOffset(i,0));return n},_toDebugArray:function(){for(var e=this.get("itemCount"),t=[],n=0;e>n;n++)t.push([this.childRangeStartForGroupAtIndex(n),this.childRangeEndForGroupAtIndex(n)]);return t},__superMap:{_2sQRjNcABZd$Av$init:"init",_2sQRjNcABZd$Dm$dispose:"dispose",_2sQRjNcABZd$oE$populate:"populate",_2sQRjNcABZd$1Qs$ingestChange:"ingestChange"}});n$453=e,e.__QUALIFIED_CLASS_NAME__="Photos.GroupsDatastore"}();
    
    
        
!function(){"use strict";var e=n$453.extend({itemClass:n$4({readOnly:!0,get:function(){return n$454}}),populate:function(){var e=this.__s._2ML94kG3AKR$6T$populate.apply(this,arguments);return e},__superMap:{_2ML94kG3AKR$6T$populate:"populate"}}),t=e.create().retain();n$447.registerGroupDatastore(t),n$456=t,e.__QUALIFIED_CLASS_NAME__="Photos.YearsDatastore$365"}();
    
    
        
!function(){"use strict";var e=n$455.extend({displayName:"Year",staticMembers:{datastore:n$456}});n$454=e,e.__QUALIFIED_CLASS_NAME__="Photos.Year"}();
    
    
        
!function(){"use strict";var e=n$453.extend({itemClass:n$4({readOnly:!0,get:function(){return n$457}}),populate:function(){var e=this.__s._3S4j9M7BiIW$6b$populate.apply(this,arguments);return e},__superMap:{_3S4j9M7BiIW$6b$populate:"populate"}}),t=e.create().retain();n$447.registerGroupDatastore(t),n$458=t,e.__QUALIFIED_CLASS_NAME__="Photos.MomentsDatastore$367"}();
    
    
        
!function(){"use strict";var e=n$455.extend({displayName:"Moment",staticMembers:{datastore:n$458}});n$457=e,e.__QUALIFIED_CLASS_NAME__="Photos.Moment"}();
    
    
        
!function(){"use strict";var e=n$453.extend({itemClass:n$4({readOnly:!0,get:function(){return n$459}}),populate:function(){var e=this.__s._PEfurMRW74$6r$populate.apply(this,arguments);return e},__superMap:{_PEfurMRW74$6r$populate:"populate"}}),t=e.create().retain();n$447.registerGroupDatastore(t),n$460=t,e.__QUALIFIED_CLASS_NAME__="Photos.CollectionsDatastore$369"}();
    
    
        
!function(){"use strict";var e=n$455.extend({displayName:"Collection",staticMembers:{datastore:n$460}});n$459=e,e.__QUALIFIED_CLASS_NAME__="Photos.Collection"}();
    
    
        
!function(){"use strict";var e={};e.setQueryParamForClassFromPrimaryKeys=function(e,t,n){if(!n.length)return"";if(t===n$370)e.setQueryParameter("serverIds",JSON.stringify(n));else{var i,r=[];if(i=t===n$309?t.datastore.backingIndexesForClientIds(n,r):t.datastore.indexesForClientIds(n,r),r.length)e.setQueryParameter("clientIds",JSON.stringify(n));else{i.sort(n$303);for(var a=t.datastore.clientIdsForIndexes(i),s=n.length;s--;)n[s]=a[s];var o=this._rangeQueryValueFromIndexes(i,!0);e.setQueryParameter("indexRanges",o)}}},e.setQueryParamForSingleRange=function(e,t,n){e.setQueryParameter("indexRanges","[["+t+","+n+"]]")},e.setQueryParamForAsset=function(e,t,n){t.linkToStore();var i=t.get("clientId");n&&e.setQueryParameter("clientId",i);var r=t.get("serverId");if(r)return e.setQueryParameter("serverId",r),void 0;var a=n$309.datastore.backingIndexForClientId(i);return-1===a?(e.setQueryParameter("clientId",i),void 0):(e.setQueryParameter("index",a),void 0)},e._rangeQueryValueFromIndexes=function(e,n){if(!n){var i=n$319.getInstance();i.push.apply(i,e),e=i,e.sort(n$303)}var r,a,s,o,l=n$319.getInstance();for(r=0,a=e.length;a>r;r++)s=e[r],o&&o[1]===s-1?o[1]=s:(o&&o[1]++,o=t.getInstance(),o[1]=o[0]=s,l.push(o));a&&o[1]++;var u=JSON.stringify(l);for(r=l.length;r--;)t.disposeInstance(l[r]);return n$319.disposeInstance(l),n||n$319.disposeInstance(e),u};var t=n$437.extend({createInstance:function(){return new Array(2)}}).create();n$461=e}();
    
    
        
!function(){"use strict";var e=n$5.extend({operation:null,_methodOverridesByOperation:{destroy:"DELETE",undelete:"UNDELETE",expunge:"EXPUNGE"},url:function(e){return n$373.createURL("/"+e.key)},method:"POST",send:function(e,t){var n=t.primaryKeys,i=e.modelClass,r=e.key,s={syncToken:n$373.syncToken,methodOverride:this._methodOverridesByOperation[this.operation]};t.reportingMethod=s.methodOverride,s[r]=n.map(function(e){void 0===e&&n$11("primaryKeys for #send contained `undefined`",{operation:this.operation,primaryKeys:n,type:r,statId:20179739});var t={};return t[i.get("primaryKey")]=e,t}),t.set("body",s)},receive:function(e,t){e||(e=t.resource);var n=t.get("response").get("body"),i=n.success,r=n$326();return r.fetchChangeset(),n$203.get("cloudOSService").refreshQuotaData(),{operation:this.operation,isPartial:!0,modelData:i,modelClass:e.modelClass}}}),t=n$430.extend({create:{url:function(e){return n$373.createURL("/"+e.key)},method:"POST",send:function(e,t){var n=e.modelClass,i=t.primaryKeys;Array.isArray(i)||(i=[i]);var r=e.key,s={syncToken:n$373.syncToken};s[r]=t.get("body"),n===n$370&&(s[r]=s[r].map(function(e){e=n$40(e),e.keyAssetClientId=e.keyAssetClientId||null;var t=n$370.find(e[n$370.primaryKey]);return e.childAssetIds=t&&t.isAlbum?t.childAssetIds:[],e})),t.set("body",s)},receive:function(e,t){e||(e=t.resource);var n=t.get("response").get("body"),i=n.success;return n$326().fetchChangeset(),{isPartial:!0,operation:"update",modelData:i,modelClass:e.modelClass}}},read:{method:"GET",url:function(e,t){var n=e.modelClass;if(n===n$309||n===n$370)return n$373.createURL("/"+e.key);
var i=n$373.createURL("/"+e.key,!0);return Array.isArray(t)||(t=[t]),n$461.setQueryParamForClassFromPrimaryKeys(i,e.modelClass,t),i},send:function(e,t){var n=e.modelClass;if(n===n$309||n===n$370){var i=t.primaryKeys;Array.isArray(i)||(i=[i]);var r={syncToken:n$373.syncToken,methodOverride:"GET"};t.reportingMethod=r.methodOverride,r[n.pluralPrimaryKey]=JSON.stringify(i),t.set("method","POST"),t.set("body",r)}},receive:function(e,t){var n=t.get("response").get("body"),i=e.key,r=n[i],s=t.resource.modelClass,a=t.primaryKeys;if(Array.isArray(a)||(a=[a]),s===n$370&&n$373.binFeedLog.addFolders(r),a)for(var o=0,u=r.length;u>o;o++)r[o].clientId&&r[o].clientId!==a[o]&&n$11("clientId mismatch: got "+r[o].clientId+" expected "+a[o]+"."),r[o].clientId=a[o];return{modelData:r,modelClass:e.modelClass}}},list:{url:function(e){return n$373.createURL("/"+e.key,!0)},receive:function(e,t){var n=t.get("response").get("body"),i=e.key,r=n[i],s=t.resource.modelClass;return s===n$370&&n$373.binFeedLog.addFolders(r),{modelData:r,modelClass:s}}},update:{url:function(e){return n$373.createURL("/"+e.key)},method:"POST",send:function(e,t){var n=t.primaryKeys;Array.isArray(n)||(n=[n]);var i=e.modelClass,r=e.key,s={syncToken:n$373.syncToken,methodOverride:"PUT"};if(t.reportingMethod=s.methodOverride,i===n$370){var a=n$326();s[r]=n.map(function(e){var t=a.getStoreIdForPrimaryKey(i,e),n=a.readData(t);if(i===n$370){var r=n$370.find(e);r&&r.isAlbum&&(r.isServerCreated&&n$11("Trying to update a server created album.",r),n=n$40(n),delete n.childAssetsBinaryFeed,n.childAssetIds=r.childAssetIds,-1===n.childAssetIds.indexOf(n.keyAssetClientId)&&(n.keyAssetClientId=null))
}return n})}else s[r]=t.get("body");for(var o=s[r],u=0,l=o.length;l>u;u++)o[u]||n$11("Attempted to update empty or deleted resouce:",{modelClass:i,body:s,primaryKeys:n,index:u});t.set("body",s)},receive:function(e,t){e||(e=t.resource);var n=t.get("response").get("body"),i=n.success;return n$326().fetchChangeset(),{isPartial:!0,operation:"update",modelData:i,modelClass:e.modelClass}}},destroy:e.create({operation:"destroy"}),undelete:e.create({operation:"undelete"}),expunge:e.create({operation:"expunge"})});n$469=t,e.__QUALIFIED_CLASS_NAME__="Photos.DestroyUndeleteExpunge$372",t.__QUALIFIED_CLASS_NAME__="Photos.ResourceMap"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$387],staticMembers:{requestLoggingLevel:n$209.LOG_LEVEL_DEBUG},shouldReportFailure:n$4({get:function(e){return"boolean"==typeof e?e:421!==this.getPath("response.status")}}),URLClass:n$384,finalize:function(){this.__s._1xSFxSHgxJ5$PV$finalize.apply(this,arguments);var e=this.get("response");if(e){var t=e.get("status");401===t||421===t?this._handleLogout():423===t&&this._handlePCSError()}},_handleLogout:function(){n$203.get("cloudOSService").performLogout()},_handlePCSError:function(){n$203.get("cloudOSService").exit(n$386,n$63.stringifyRecordedLogMessages())},url:n$9({defaultValue:function(){return this.URLClass.create()}}),__superMap:{_1xSFxSHgxJ5$PV$finalize:"finalize"}},t={mixinDependencies:[e],init:function(){this.__s._1xSFxSHgxJ5$g8$init.apply(this,arguments),this.setHeader("Content-Type","text/plain;charset=UTF-8"),this.reportingPathname=null},__superMap:{_1xSFxSHgxJ5$g8$init:"init"}};n$463=t}();
    
    
        
!function(){"use strict";var e=n$291.extend(n$463,n$462,{});n$470=e,e.__QUALIFIED_CLASS_NAME__="Photos.Request"}();
    
    
        
!function(){"use strict";var e=n$204.extend({shardCount:n$9(9)});n$465=e,e.__QUALIFIED_CLASS_NAME__="Photos.Network.ContentVendorServer"}();
    
    
        
!function(){"use strict";var e,t=n$5.extend(n$10,{init:function(){this._wrapperKey=n$22(this),this.__s._2UdwFET8bXv$Kp$init.apply(this,arguments)},_maxPerShard:n$9({binding:n$298.bindingFor("maxConcurrentRequestsPerShard"),didChange:function(){this._scheduleTriggerPending(),this._logDebug()}}),server:n$9(),_shardCount:n$9({binding:"server.shardCount",didChange:function(){this._scheduleTriggerPending(),this._logDebug()}}),_usedTotal:0,_usedPerShard:n$84(Array),_nextShard:n$4({get:function(){var e=this.get("_shardCount");if(1===e)return 0;for(var t=this.get("_maxPerShard"),n=0,i=1/0,r=1;e+1>r;r++){var a=this._usedPerShard[r]||0;if(t>a)return r;i>=a&&(n=r,i=a)}return n}}),hasAvailableShard:n$4({get:function(){var e=this.get("_maxPerShard")*this.get("_shardCount")-this._usedTotal;return e>0&&n$464.get("hasAvailableConnection")}}),allocShard:function(e){this._usedTotal++,this._usedPerShard[e]=this._usedPerShard[e]||0,this._usedPerShard[e]++,n$464.allocConnection(),this._logDebug()},deallocShard:function(e){this._usedTotal--,this._usedPerShard[e]--,n$464.deallocConnection(),this._logDebug()},allocNextShard:function(){var e=this.get("_nextShard");return this.allocShard(e),e},onAvailableShard:function(e){var t=e[this._wrapperKey]=e[this._wrapperKey]||function(){return this.get("hasAvailableShard")?e():!0}.bind(this);return n$464.onAvailableConnection(t)},cancelCallback:function(e){return n$464.cancelCallback(e[this._wrapperKey])},_scheduleTriggerPending:function(){return n$464.scheduleTriggerPending.apply(n$464,arguments)},_logDebug:function(){n$298.get("enableConnectionAllocLogging")&&n$63.debug("%{controller}: %{used}/%{max}",{controller:this,used:this._usedTotal,max:this.get("_maxPerShard")*this.get("_shardCount")})
},__superMap:{_2UdwFET8bXv$Kp$init:"init"}}),n=t.extend({server:n$298.bindingFor("server")}).create(),i=t.extend({server:n$298.bindingFor("server.uploadServer")}).create();e=n$298.get("useCVWSForDerivatives")?t.extend({server:n$465.create()}).create():n,n$945=t,n$466=n,n$478=i,n$505=e,t.__QUALIFIED_CLASS_NAME__="Photos.ShardController"}();
    
    
        
!function(){"use strict";var e={shardController:n$9(n$466),_shardNumber:null,send:function(){var e=this.get("shardController"),t=e.allocNextShard();this._shardNumber=t,this.setPath("url.shardNumber",t),this.__s._2KVPSdRjgdK$8c$send.apply(this,arguments)},finalize:function(){null!==this._shardNumber&&(this.get("shardController").deallocShard(this._shardNumber),this._shardNumber=null),this.__s._2KVPSdRjgdK$Fg$finalize.apply(this,arguments)},__superMap:{_2KVPSdRjgdK$8c$send:"send",_2KVPSdRjgdK$Fg$finalize:"finalize"}};n$471=e}();
    
    
        
!function(){"use strict";var e="/ph",t=n$467.extend(n$10,{RequestClass:n$470.extend(n$471),staticMembers:{DERIVATIVE_URL_PATH:e+"/derivative",SPRITE_URL_PATH:e+"/sprite",UPLOAD_URL_PATH:e+"/upload",DOWNLOAD_URL_PATH:e+"/download",STATUS_URL_PATH:e+"/status",createURL:function(t,n,i){var r=n$388.create(e+t);return n&&r.setQueryParamForSyncToken(),i&&r.setQueryParamForValidateToken(),r},syncToken:null,binFeedLog:{events:[],addFolders:function(e){var t=e.map(function(e){return{serverId:e.serverId,childAssetsBinaryFeed:e.childAssetsBinaryFeed}});this.events.push({folders:t})}}},urls:{"/startup":{send:function(e){var t=e.get("url");n$103.getPath("application.isRestarting")&&t.setQueryParameter("includeAllFolders",1)},receive:function(e){var t=e.get("response").get("body");this.constructor.syncToken=t.syncToken;var n={startup:{syncToken:t.syncToken}};if(!t.syncToken)return n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"server",errorTitle:"Server sent no syncToken from /startup."}),n$11("Server sent no syncToken from /startup."),void 0;n$298.setDefaultValue("enableUploads",t.isUploadEnabled!==!1),t.exitedDate&&n$103.setPath("application.exitedDate",t.exitedDate);var i=n$326();n$103.getPath("application.isRestarting")&&i.resetEverything(),n$309.datastore.suspendChangeNotifications(),n$454.datastore.suspendChangeNotifications(),n$459.datastore.suspendChangeNotifications(),n$457.datastore.suspendChangeNotifications(),n$309.datastore.populate(t.assetsBinaryFeed),n.startup.assetsBinaryFeed=t.assetsBinaryFeed,n$298.get("enableUnreleasedFeatures")&&(n$454.datastore.populate(t.yearsBinaryFeed),n$459.datastore.populate(t.collectionsBinaryFeed),n.startup.yearsBinaryFeed=t.yearsBinaryFeed,n.startup.collectionsBinaryFeed=t.collectionsBinaryFeed),n$457.datastore.populate(t.momentsBinaryFeed),n.startup.momentsBinaryFeed=t.momentsBinaryFeed,this.constructor.binFeedLog.events.push(n),t.folders&&this.constructor.binFeedLog.addFolders(t.folders);
var r=this.resources;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s].modelClass,o=t[s];if(o){if("folders"!==s&&"assets"!==s)for(var l=a.datastore,h=l.get("itemCount"),c=0,u=o.length;u>c;c++)o[c].clientId=l.clientIdForIndex(h-u+c);i.loadData(a,o)}}n$309.datastore.resumeChangeNotifications(),n$454.datastore.resumeChangeNotifications(),n$459.datastore.resumeChangeNotifications(),n$457.datastore.resumeChangeNotifications()}},"/status":{receive:function(e){var t=e.getPath("response.body"),n=n$326();n.set("statusData",t)}},"/changeset":{send:function(e){e.set("method","POST");var t={};t.syncToken=this.constructor.syncToken,t.syncToken||n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"client",errorTitle:"Don't have a syncToken to send with /changeset."}),e.set("body",t)},receive:function(e){var t=function(){var t=e.get("response").get("body");if(!t.syncToken)return n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"server",errorTitle:"Server sent no syncToken from /changeset."}),void 0;this.set("_changesetErrorCount",0),this.constructor.syncToken=t.syncToken,n$103.get("application").setIfChanged("exitedDate",t.exitedDate);var n=t.changes;if(!n.length)return n$326().didIngestChangeset(),void 0;this.constructor.binFeedLog.events.push({changeset:n$231(t)}),n$309.datastore.suspendChangeNotifications(),n$454.datastore.suspendChangeNotifications(),n$459.datastore.suspendChangeNotifications(),n$457.datastore.suspendChangeNotifications();var i,r,s=function(e){switch(e.type){case"years":n$454.datastore.ingestChange(e);break;case"collections":n$459.datastore.ingestChange(e);
break;case"moments":n$457.datastore.ingestChange(e);break;case"assets":case"asset-derivatives":n$309.datastore.ingestChange(e);break;case"folder-assets":e.serverId!==n$370.RECENTLY_DELETED_ID||"insert"!==e.operation&&"remove"!==e.operation||(i=n$43(i||{},n$127(n$370.assetClientIdsInChange(e)))),n$370.ingestChange(e);break;case"folder":case"folder-asset-derivatives":n$370.ingestChange(e);break;default:n$11('No handler for change type "'+e.type+'"."',e)}},a=n.length;for(r=0;a>r;r++){var o=n[r];n$340({change:o},s,[o])}if(i){var l=n$309.alternateDatastores.toArray();l.unshift(n$309.datastore);var h={};for(var c in i)if(i.hasOwnProperty(c))for(var u=0;u<l.length;u++)if(-1!==l[u].indexForClientId(c)){h[c]=!0;break}n$309.reloadOrResetDataForClientIdsAsNeeded(n$436(h))}n$309.datastore.resumeChangeNotifications(),n$454.datastore.resumeChangeNotifications(),n$459.datastore.resumeChangeNotifications(),n$457.datastore.resumeChangeNotifications(),n$326().didIngestChangeset()};n$340({assetsBefore:n$309.datastore.toBinaryFeed().toBase64String(),momentsBefore:n$457.datastore.toBinaryFeed().toBase64String()},t,null,this)}}},resources:function(){var e={assets:n$468(n$309,n$469),moments:n$468(n$457,n$469),folders:n$468(n$370,n$469)};return n$298.get("enableUnreleasedFeatures")&&(e.years=n$468(n$454,n$469),e.collections=n$468(n$459,n$469)),e}(),_mergeServerURLWithPath:function(t){return e+t},_changesetErrorCount:n$9(0),_changesetErrorCountObserver:n$7("_changesetErrorCount",function(e){(e&&!this.constructor.syncToken||e>=n$298.get("maxConsecutiveChangesetErrors"))&&(this.set("_changesetErrorCount",0),n$130(function(){n$326().restart()
},n$298.get("changesetFailureRestartDelay")))}),statusHandlers:{success:function(e){if(!e.getPath("response.encodedBody")){var t=this.statusHandlers.error.call(this,e);return e.promise&&!t&&e.promise.reject(e),!0}},207:function(e){var t=this.statusHandlers.error.call(this,e);return e.promise&&!t&&e.promise.reject(e),n$326().fetchChangeset(),!0},error:function(e){var t=e.get("path"),n=e.getPath("response.status");if(500===n){var i=e.getPath("response.body.errorCode");if(518===i||519===i){var r=this.get("statusHandlers")[i].call(this,e);if(r)return!0}}if("/startup"===t)n$63.error("Error fetching "+t+". Response ("+n+"): "+e.getPath("response.encodedBody")),n$203.get("cloudOSService").exit(n$472,n$63.stringifyRecordedLogMessages());else if("/changeset"===t){var s=e.get("server");s.increment("_changesetErrorCount")}},518:function(e){n$326().stopFetchingStatusData(),n$130(function(){n$326().restart()},5e3);var t=n$103.getPath("application.rootViewController");return t.navigateToLibraryNotProcessed(),e.promise&&e.promise.reject(e),!0},519:function(e){n$326().stopFetchingStatusData();var t=n$103.getPath("application.rootViewController");return t.navigateToLibraryProcessingFailed(!0),e.promise&&e.promise.reject(e),!0},428:function(e){return n$326().restart(),e.promise&&e.promise.reject(e),!0},405:function(e){var t=e.get("path");if("/startup"!==t)return n$63.error("Unexpected 405 error for path "+t),n$326().restart(),e.promise&&e.promise.reject(e),!0;if(n$103.getPath("application.isRestarting"))return e.promise&&e.promise.reject(e),!0;var n=e.getPath("response.body");n$326().beginFetchingStatusData(n);
var i=n$103.getPath("application.rootViewController");return i.navigateToLibraryNotProcessed(),e.promise&&e.promise.reject(e),!0},402:function(e){var t=e.get("path");"/startup"!==t&&n$11("Unexpected 402 error for path "+t);var n=n$103.getPath("application.rootViewController");return n.navigateToLibraryNotEnabled(),e.promise&&e.promise.reject(e),!0},406:function(e){var t=e.get("path");"/startup"!==t&&n$11("Unexpected 406 error for path "+t);var n=n$103.getPath("application.rootViewController");return n.navigateToComingSoon(),e.promise&&e.promise.reject(e),!0},409:function(){n$326().fetchChangeset()}}});n$373=t,t.__QUALIFIED_CLASS_NAME__="Photos.WebService"}();
    
    
        
!function(){"use strict";var e=n$388.extend({serviceName:"photosupload",pathname:n$373.UPLOAD_URL_PATH,setDefaultQueryParams:function(){this.__s._2R2nlseygU_$4M$setDefaultQueryParams.apply(this,arguments),this.setQueryParamForSyncToken()},__superMap:{_2R2nlseygU_$4M$setDefaultQueryParams:"setDefaultQueryParams"}});n$474=e,e.__QUALIFIED_CLASS_NAME__="Photos.UploadURL"}();
    
    
        
!function(){"use strict";var e=n$473.get("sharedInstance"),t=n$380.extend(n$462,{URLClass:n$474,_errorCaptured:!1,_needToDeallocConnection:!1,init:function(){this.__s._1JU1KAD8RB4$Aw$init.apply(this,arguments),this.onStatus("507",this._handleStorageFull),this.onStatus("531",this._handleExifFailure),this.on(n$269,this._handleGenericFailure)},_handleStorageFull:n$299(function(){this.captureError(n$425.SERVER,n$425.OUT_OF_QUOTA,this.get("files"))}),_handleExifFailure:n$299(function(){this.captureError(n$425.SERVER,n$425.EXIF_ERROR,this.get("files"))}),_handleGenericFailure:n$299(function(){this.captureError(n$425.GENERIC,n$425.GENERIC_SUBTYPE,this.get("files"))}),captureError:function(t,n,i){this._errorCaptured||(e.addError(t,n,i),this._errorCaptured=!0)},appendFileToFormData:function(e,t){this.__s._1JU1KAD8RB4$Si$appendFileToFormData.apply(this,arguments),e.lastModifiedDate&&t.append("lastModifiedDates",+e.lastModifiedDate)},generateFormDataFromBody:function(){var e=this.__s._1JU1KAD8RB4$YB$generateFormDataFromBody.apply(this,arguments);return e.append("timezoneOffset",(new Date).getTimezoneOffset()),e},__superMap:{_1JU1KAD8RB4$Aw$init:"init",_1JU1KAD8RB4$Si$appendFileToFormData:"appendFileToFormData",_1JU1KAD8RB4$YB$generateFormDataFromBody:"generateFormDataFromBody"}});n$477=t,t.__QUALIFIED_CLASS_NAME__="Photos.UploadRequest"}();
    
    
        
!function(){"use strict";function e(e,t,n){var i=e.size;if(!i&&0!==i)return n$130(n,0,e),void 0;var r=n$379.sharedInstance.blobSlice(e,0,1),s=new FileReader;s.addEventListener("load",function(){t(e)}),s.addEventListener("error",function(){n(e)});try{s.readAsArrayBuffer(r)}catch(a){n$130(n,0,e)}}function t(e,t,i){i=i?i instanceof Array?i:[i]:null,n.addError(e,t,i),n.showAlert()}var n=n$473.get("sharedInstance"),i=n$475.extend({maxConcurrentRequests:n$9(n$298.bindingFor("maxConcurrentUploadRequests")),maxFileSize:n$9(n$298.bindingFor("maxUploadFileSize")),minFileSize:n$9(n$298.bindingFor("minUploadFileSize")),uploadRequestClass:n$477.extend(n$471,{shardController:n$478}),url:n$9(null),maxFolderTestCount:n$9(10),_folderTestArray:n$9(n$84(n$158)),_pendingFolderTestCount:n$9(0),_freeQuota:n$9({readOnly:!0,dependencies:[n$203.bindingFor("cloudOSService.environment.quotaData.totalStorageInBytes"),n$203.bindingFor("cloudOSService.environment.quotaData.usedStorageInBytes")],cacheable:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s-r}}),_allowedFileTypes:n$9({readOnly:!0,cacheable:!0,dependencies:[n$298.bindingFor("allowedUploadFileTypes")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r=r||"*",new RegExp(r.replace(/\s/g,"").replace(",","|").replace("/","/"))}}),clear:function(){this._folderTestArray.rawSplice(0,this._folderTestArray.length),this._pendingFolderTestCount=0,this.url=null,this.__s._1pzn8GlII5I$ps$clear.apply(this,arguments)},clearIfNotSending:function(){this.get("state")===n$476.NOT_SENDING&&this.clear()
},abortAllUploads:function(){this._folderTestArray.rawSplice(0,this._folderTestArray.length),this.__s._1pzn8GlII5I$wC$abortAllUploads.apply(this,arguments)},addFilesWithValidation:function(e,n){var i=e.length;if(n$109.sharedInstance.isIE&&0===i)return t(n$425.VALIDATION,n$425.FOLDER_NOT_SUPPORTED),void 0;if(this.clearIfNotSending(),this.url=n$474.create(),n&&n$370.create(n).retain(this).autorelease(this).isUploadAllowed&&this.url.setQueryParameter("folderId",n),n$109.sharedInstance.isIE||n$310.hasDataTransferItemSupport){for(var r=0;i>r;r++){var s=e[r];if(s.webkitGetAsEntry){var a=s.webkitGetAsEntry();if(a.isDirectory){t(n$425.VALIDATION,n$425.FOLDER_NOT_SUPPORTED,a);continue}s=s.getAsFile()}this._fileValidationCheck(s)&&this._itemProcessed(s,!0)}return this.send(),void 0}n$66.pause();for(var r=0;i>r;r++){var s=e[r];s.size>this.maxFileSize?n$130(this._fileValidationCheck,0,s):this._folderTestArray.push(s)}n$66.resume()},attachCallbacks:function(e){this.__s._1pzn8GlII5I$1hF$attachCallbacks.apply(this,arguments),e.on(n$274,function(){n$203.get("cloudOSService").refreshQuotaData()})},isUploading:n$9({readOnly:!0,dependencies:["state"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===n$476.SENDING}}),_itemProcessed:function(e,n){var i=this.progress,r=i.bytesTotal-i.bytesTransferred;return r+e.size>this._freeQuota?(t(n$425.SERVER,n$425.OUT_OF_QUOTA,e),void 0):(n?this.addFileAsDeferredUpload(e,this.url):(this.addFile(e,this.url),this.send()),void 0)},_folderCallback:n$299(function(e){t(n$425.VALIDATION,n$425.FOLDER_NOT_SUPPORTED,e),--this._pendingFolderTestCount
}),_fileCallback:n$299(function(e){this._fileValidationCheck(e)&&this._itemProcessed(e),--this._pendingFolderTestCount}),_fileValidationCheck:n$299(function(e){var n=this._allowedFileTypes,i=this.maxFileSize,r=this.minFileSize,s=e.type,a=e.size;return n.test(s)?r>a?(t(n$425.VALIDATION,n$425.FILE_SIZE_TOO_SMALL,e),!1):a>i?(t(n$425.VALIDATION,n$425.FILE_SIZE_TOO_BIG,e),!1):!0:(t(n$425.VALIDATION,n$425.FILE_TYPE_NOT_SUPPORTED,e),!1)}),_folderTest:function(){n$66.pause(),++this._pendingFolderTestCount,e(this._folderTestArray.shift(),this._fileCallback,this._folderCallback),n$66.resume()},_uploadDidFail:n$170("uploadDidFail",function(){n.showAlert()}),_scheduleFolderTest:n$7("_folderTestArray.length","_pendingFolderTestCount","maxFolderTestCount",function(e,t,n){e&&n>t&&this._folderTest()}),__superMap:{_1pzn8GlII5I$ps$clear:"clear",_1pzn8GlII5I$wC$abortAllUploads:"abortAllUploads",_1pzn8GlII5I$1hF$attachCallbacks:"attachCallbacks"}});n$517=i,i.__QUALIFIED_CLASS_NAME__="Photos.UploadRequestManager"}();
    
    
        
!function(){"use strict";var e=n$5.extend({init:function(e){this.__s._1AQ6oFV8CqQ$3x$init.call(this,e);var t=document.createElement("a");this.isDownloadAttributeSupported=void 0!==t.download},isDownloadAttributeSupported:null,__superMap:{_1AQ6oFV8CqQ$3x$init:"init"}}),t=e.create();n$946=e,n$479=t,e.__QUALIFIED_CLASS_NAME__="CW.Platform.Capabilities.Links"}();
    
    
        
!function(){"use strict";var e=n$5.extend({maximumConcurrentIFrames:10,msToWaitForDownloadToStart:5e3,_queue:n$84(Array),_iframesAvailable:n$84(Array),_iframesBusy:n$84(Array),downloadFromURL:function(e){var t=this._queue.push(e.toString());1===t&&this._downloadFiles()},downloadFromURLs:function(e){for(var t=e.length,n=0;t>n;n++)this.downloadFromURL(e[n])},_createIFrame:function(){var e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e},_downloadFiles:function(){for(var e=this.get("maximumConcurrentIFrames");this._queue.length>0;){var t;if(this._iframesAvailable.length>0)t=this._iframesAvailable.pop();else{if(!(this._iframesAvailable.length+this._iframesBusy.length<e))break;t=this._createIFrame()}var n=this._queue.shift();t.id=n,t.src=n,this._iframesBusy.push(t),this._scheduleCleanup(n)}},_makeIFrameAvailable:function(e){for(var t=this._iframesBusy.length,n=0;t>n;n++)if(this._iframesBusy[n].id===e){var i=this._iframesBusy.splice(n,1)[0];this._iframesAvailable.push(i);break}},_scheduleCleanup:function(e){var t=this;n$130(function(){t._makeIFrameAvailable(e),t._downloadFiles()},this.get("msToWaitForDownloadToStart"))}});n$480=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.IFrameDownloader"}();
    
    
        
!function(){"use strict";var e=n$5.extend({downloadFromURL:function(e){this._downloadFile(e.toString())},downloadFromURLs:function(e){for(var t=e.length,n=0;t>n;n++)this._downloadFile(e[n].toString())},_downloadFile:function(e){var t=document.createElement("a");if(t.href=e,t.download="",document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),t.dispatchEvent(n)}}});n$481=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.LinkDownloader"}();
    
    
        
!function(){"use strict";var e=n$5.extend({_downloader:null,init:function(){this.__s._zkFqN2KR_v$Hq$init.apply(this,arguments),n$479.isDownloadAttributeSupported&&n$109.get("sharedInstance").get("isChrome")?this.set("_downloader",n$481.create()):this.set("_downloader",n$480.create())},downloadFromURL:function(e){this.get("_downloader").downloadFromURL(e)},downloadFromURLs:function(e){this.get("_downloader").downloadFromURLs(e)},__superMap:{_zkFqN2KR_v$Hq$init:"init"}});n$486=e,e.__QUALIFIED_CLASS_NAME__="CW.Network.DownloadManager"}();
    
    
        
!function(){"use strict";var e=n$388.extend({pathname:n$373.DOWNLOAD_URL_PATH,setDefaultQueryParams:function(){this.__s._25bU23cLw1m$3v$setDefaultQueryParams.apply(this,arguments),this.setQueryParamForSyncToken(),this.setQueryParamForValidateToken()},__superMap:{_25bU23cLw1m$3v$setDefaultQueryParams:"setDefaultQueryParams"}});n$482=e,e.__QUALIFIED_CLASS_NAME__="Photos.DownloadURL"}();
    
    
        
!function(){"use strict";function e(e,n){var i=n$37(n)?0|n.count:n,r=i===n?t:n,s=Math.min(i,e.length-1),a=e[s];return r.count=i,n$290(a,r)}var t={count:0};n$483=e}();
    
    
        
!function(){"use strict";var e=0,t={mixinDependencies:[n$10],pendingDownloadCount:n$17(n$81),fetchURLStringForClientId:function(t){e++;var n,i=n$309.create(t).retain(this);return n=n$298.getPath("useCVWSForDerivatives")?i.fetchDerivativeInfo(function(){return i.get("preferredDownloadDerivativeInfo")}).then(function(e){return e.url}):n$247.wrapFunction(function(){var e=n$482.create();return n$461.setQueryParamForAsset(e,i,!0),e.toString()}.bind(this))(),n.finally(function(){i.release(this),e--}.bind(this)),n.catch(function(e){r(t,e)}),n}},n=null,i=0,r=function(t,r){if(i++,n$63.error("Could not get download URL for %{0}: %{1}",[t,r]),!e){var o=n;if(!o){o=n$368.get("sharedInstance").createSimpleAlert();var l=0,h=o.observe("view.isAttached",function(e){l++,!e&&l>1&&(h.disconnect(),n=null,i=0)})}o.setPropertiesWithObject({message:n$483(s,i),description:n$483(a,i)}),o.show(),n=o}},s=["","Alert.Download.Failed.Generic.Message.1","Alert.Download.Failed.Generic.Message.2","Alert.Download.Failed.Generic.Message.More"],a=["","Alert.Download.Failed.Generic.Description.1","Alert.Download.Failed.Generic.Description.2","Alert.Download.Failed.Generic.Description.More"];n$484=t}();
    
    
        
!function(){"use strict";var e=n$481.extend(n$484,{pendingDownloadCount:n$9(0),downloadAssetWithClientId:function(e){this.set("pendingDownloadCount",this.get("pendingDownloadCount")+1),this.fetchURLStringForClientId(e).then(this.downloadFromURL.bind(this)).finally(function(){this.set("pendingDownloadCount",this.get("pendingDownloadCount")-1)}.bind(this))}});n$487=e,e.__QUALIFIED_CLASS_NAME__="Photos.AssetLinkDownloader"}();
    
    
        
!function(){"use strict";var e="X-APPLE-ECHO-",t="/",n=n$258.get("sharedInstance"),i={mixinDependencies:[n$484],_instanceId:n$9(n$203.bindingFor("cloudOSService.environment.clientId")),_cookieDomain:null,_cookieNameForClientId:function(t){return e+this._instanceId+"-"+t},removeAllDownloadCookies:function(){n.removeCookies(new RegExp(e+this._instanceId+"-"+"*"),this._cookieDomainString(),t)},checkCookie:function(e,i){if(n$298.getPath("useCVWSForDerivatives"))return n$130(i,1e4),void 0;var r=this._cookieNameForClientId(e),a=Date.now(),s=function(){!n.getCookie(r)&&Date.now()-a<n$310.get("downloadCookieDetectTimeout")?n$130(s,500):(n.removeCookie(r,this._cookieDomainString(),t),i())}.bind(this);s()},fetchURLStringWithInstanceIdForClientId:function(e){var t=n$247.create();return this.fetchURLStringForClientId(e).then(function(e){n$298.getPath("useCVWSForDerivatives")||(e+="&sendCookie=true"),t.resolve(e)}.bind(this),t.reject),t},_cookieDomainString:function(){var e=this._cookieDomain;if(e)return e;var t=window.location.hostname,n=/\.[^\.]+\.com/,i=t.match(n);return e=i?i[0]:t,this._cookieDomain=e,e}};n$485=i}();
    
    
        
!function(){"use strict";var e=n$480.extend(n$484,n$485,{_queue:n$84(n$158),pendingDownloadCount:n$9(n$14("_queue.length")),_iframesAvailable:n$84(Array),_iframeCount:0,_scheduleDownloadTimeoutId:0,_lastDownloadTime:0,init:function(){this.__s._rcFxdw2xQy$Cu$init.apply(this,arguments),this.removeAllDownloadCookies()},maximumConcurrentIFrames:n$9(n$310.bindingFor("maximumConcurrentDownloadIFrames")),downloadAssetWithClientId:function(e){this.get("_queue").push(e),this._downloadFromQueue()},_download:function(e,t){this._lastDownloadTime=Date.now();var n=function(){this.get("_iframesAvailable").push(t),this._downloadFromQueue()}.bind(this);this.fetchURLStringWithInstanceIdForClientId(e).then(function(i){t.src=i,this.checkCookie(e,n)}.bind(this),n)},_downloadFromQueue:function(){clearTimeout(this._scheduleDownloadTimeoutId),this._scheduleDownloadTimeoutId=0;var e=Date.now()-this._lastDownloadTime,t=500;if(t>e)return this._scheduleDownloadTimeoutId||(this._scheduleDownloadTimeoutId=n$130(this._downloadFromQueue.bind(this),t-e)),void 0;if(this.get("_queue").get("length")){var n=this._getIFrame();if(n){var i=this.get("_queue").shift();this._download(i,n),this._downloadFromQueue()}}},_getIFrame:function(){var e=this.get("_iframesAvailable").pop();return e||this._iframeCount>=this.get("maximumConcurrentIFrames")?e:(this._iframeCount++,e=document.createElement("iframe"),e.style.display="none",document.body.appendChild(e),e)},__superMap:{_rcFxdw2xQy$Cu$init:"init"}});n$488=e,e.__QUALIFIED_CLASS_NAME__="Photos.AssetIframeDownloader"}();
    
    
        
!function(){"use strict";var e=n$486.extend(n$10,n$62,{init:function(){this.__s._4YwKZB4dPw6$BN$init.apply(this,arguments),n$479.isDownloadAttributeSupported&&n$109.get("sharedInstance").isChrome?this.set("_downloader",n$487.create()):this.set("_downloader",n$488.create()),this.get("_downloader").observe("pendingDownloadCount",function(e){this.set("pendingDownloadCount",e)}.bind(this))},pendingDownloadCount:n$9(0),download:function(e){var t=this.get("_downloader");t.downloadAssetWithClientId(e.get("clientId"))},__superMap:{_4YwKZB4dPw6$BN$init:"init"}});n$518=e,e.__QUALIFIED_CLASS_NAME__="Photos.AssetDownloadManager"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$302,n$47,n$364,{geometricLength:0/0,isCacheableInPool:function(){return!!this.isLoaded&&this._stopgap_shouldCache},_stopgap_shouldCache:!0,staticMembers:{create:function(t){if(this!==e)return this.__s._2cXUwMlrgwl$pY$create.apply(this,arguments);t||n$11("Attempting to get derivative without providing a derivative clientId or derivativeInfo.");var n=t.clientId||t,i=t===n?n$309.create(n$309.assetClientIdForDerivativeClientId(n)).derivativeInfoForClientId(n):t;switch(i||n$11("Could not find derivativeInfo object in order to get derivative. Asset is likely unloaded."),i.genericType){case n$309.IMAGE:return n$489.create(i);case n$309.VIDEO:return n$490.create(i);default:n$11("Attempting to get derivative of unknown type "+i.genericType)}},computePoolingCacheKey:function(e){return e.clientId},_debug_logCache:function(){return this._cacheQueue.toArray().map(function(e){return e.clientId}).join("\n")},_debug_logLivingInstances:function(){return this.livingInstanceSet.toArray().map(function(e){return e.clientId}).join("\n")},__superMap:{_2cXUwMlrgwl$pY$create:"create"}},initFromPool:function(e){this.__s._2cXUwMlrgwl$1O2$initFromPool.apply(this,arguments),this.geometricLength=e.geometricLength;var t=n$309.create(e.assetClientId);this.clientId=e.clientId,this.asset=t,t.addDerivative(this)},dispose:function(){this.asset.removeDerivative(this),this._stopgap_shouldCache=!0,this._loadProgress=null;var e=this._selfOwnedDerivativeInfo;e&&(n$309.derivativeInfoPool.disposeInstance(e),this._selfOwnedDerivativeInfo=null),this.geometricLength=0/0,this.__s._2cXUwMlrgwl$1ko$dispose.apply(this,arguments)
},genericAssetType:n$85.create(),element:n$81.create(),isLoaded:n$81.create(),_loadProgress:n$9(),loadProgress:n$9({dependencies:["isLoaded","asset","_loadProgress"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a?1:s?+r:0},writeDependencies:["_loadProgress"],set:function(e,t,n,i){n[0+i]=e},writeDependencySetPathMap:[!1]}),asset:n$355(),_notifyIsLoaded:n$7("isLoaded","asset",function(e,t){e&&t&&t.derivativeMayHaveLoaded(this)}),clientId:n$9(),info:n$9({dependencies:["asset.serverDerivativeInfosByClientId","clientId","_selfOwnedDerivativeInfo"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a?r?a[r.clientId]||(a[r.synthesizedFromClientId]?r:null):a[s]||null:null},writeDependencies:["_selfOwnedDerivativeInfo"],set:function(e,t,n,i){n[0+i]=e||null},writeDependencySetPathMap:[!1]}),_selfOwnedDerivativeInfo:n$9(),_load:n$48.create(),didBecomeOutdated:n$12(!0),resetForChangeset:function(){n$130(n$356(this.didBecomeOutdated,this),0),this._stopgap_shouldCache=!1},toString:function(){var e=this.__s._2cXUwMlrgwl$3AS$toString.apply(this,arguments);return this.isInitialized?e.slice(0,-1)+":"+this.clientId+e.slice(-1):e},__superMap:{_2cXUwMlrgwl$1O2$initFromPool:"initFromPool",_2cXUwMlrgwl$1ko$dispose:"dispose",_2cXUwMlrgwl$3AS$toString:"toString"}});n$442=e,e.__QUALIFIED_CLASS_NAME__="Photos.Derivative"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$302,n$364,n$433,{priority:0,_didCancel:null,_willDispose:null,_derivative:null,derivative:n$355({didChange:function(e){this._derivative=e}}),_request:n$9(),progress:n$9({dependencies:["derivative.loadProgress"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return+r||0},set:function(e){var t=this.derivative;t&&(t.loadProgress=e)}}),_propagateProgressFromRequest:n$7("_request.progress.percentComplete",function(e){+e===e&&(this.progress=e)}),initFromPool:function(e){this.__s._3aZXwzDrF1R$xf$initFromPool.apply(this,arguments),this.derivative=e||null},resolve:function(){this.__s._3aZXwzDrF1R$103$resolve.call(this,this.derivative)},cancel:function(){this.__s._3aZXwzDrF1R$12J$cancel.apply(this,arguments),this._didCancel&&this._didCancel()},dispose:function(){this._willDispose&&this._willDispose(),this._didCancel=null,this._willDispose=null,this._request=null,this.priority=0,this.__s._3aZXwzDrF1R$1Bg$dispose.apply(this,arguments)},__superMap:{_3aZXwzDrF1R$xf$initFromPool:"initFromPool",_3aZXwzDrF1R$103$resolve:"resolve",_3aZXwzDrF1R$12J$cancel:"cancel",_3aZXwzDrF1R$1Bg$dispose:"dispose"}});n$441=e,e.__QUALIFIED_CLASS_NAME__="Photos.DerivativeLoadRef"}();
    
    
        
!function(){"use strict";var e=function(e,t,n,i){return e.removeEventListener(t,n$105(n),i||!1)};n$493=e}();
    
    
        
!function(){"use strict";var e=n$259.extend(n$383,{staticMembers:{generateShardedHostname:function(e,t){return e.replace(/cvws/,"cvws-00"+t)}}});n$495=e,e.__QUALIFIED_CLASS_NAME__="Photos.Network.ContentVendorURL"}();
    
    
        
!function(){"use strict";var e=5,t=0,n={suspend:function(){i++},resume:function(){i--}},i=0,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(n){if(i)return r.apply(this,arguments);try{return r.apply(this,arguments)}catch(s){if(n$63.error("CanvasDrawImageFailure: "+s),++t>=e)return;var a=n.src?n$259.create(n.src):null;n$203.cloudOSService.recordStat("CanvasDrawImageFailure",{numericalArguments:Array.prototype.slice.call(arguments,1),sourceImageWidth:n.naturalWidth||n.width,sourceImageHeight:n.naturalHeight||n.height,sourceImageTagName:n.tagName,sourceImageComplete:n.complete,sourceImageURLOrigin:a?a.origin:"n/a",sourceImageURL:a?a.isInDomain("icloud.com")?n.src:"omitted":"n/a",failureCountSinceAppLoad:t,stack:n$301()})}},n$496=n}();
    
    
        
!function(){"use strict";var e=!n$298.getPath("useCVWSForDerivatives"),t=n$291.extend(e?n$463:{},n$462,n$302,{initFromPool:function(){this._isFinalized=!1,this.__s._2aOCcKfku4p$B5$initFromPool.apply(this,arguments)},_needToFinalize:!1,send:function(){return this.retain(this),this._needToFinalize=!0,this.__s._2aOCcKfku4p$E4$send.apply(this,arguments)},finalize:function(){this.__s._2aOCcKfku4p$Eu$finalize.apply(this,arguments),this._needToFinalize=!1,this.release(this)},dispose:function(){this._needToFinalize&&this.finalize(),this.set("timeout",null),this.set("state",n$263),this.set("response",null),this.set("useCredentialsIfCrossOrigin",!0),this.set("delegate",null),this.willSend=null,this.didSend=null,this.didSucceed=null,this.didAbort=null,this.didFail=null,this.didComplete=null,this.didProgress=null,this.shouldReportSuccess=!1,this.shouldReportFailure=!0,this.reportingMethod=null,this.reportingPathname=e?null:"REDACTED";var t=this.uploadProgress;t&&(t.bytesTransferred=0,t.bytesTotal=0,t.isDeterminate=!0);var n=this.progress;n&&(n.bytesTransferred=0,n.bytesTotal=0,n.isDeterminate=!0),this.__s._2aOCcKfku4p$hF$dispose.apply(this,arguments)},__superMap:{_2aOCcKfku4p$B5$initFromPool:"initFromPool",_2aOCcKfku4p$E4$send:"send",_2aOCcKfku4p$Eu$finalize:"finalize",_2aOCcKfku4p$hF$dispose:"dispose"}});n$492=t,t.__QUALIFIED_CLASS_NAME__="Photos.PoolableRequest"}();
    
    
        
!function(){"use strict";var e=n$388.extend({pathname:n$373.DERIVATIVE_URL_PATH,setDefaultQueryParams:function(){this.__s._3fPC5kQYBoB$40$setDefaultQueryParams.apply(this,arguments),this.setQueryParamForSyncToken(),this.setQueryParamForValidateToken()},__superMap:{_3fPC5kQYBoB$40$setDefaultQueryParams:"setDefaultQueryParams"}});n$494=e,e.__QUALIFIED_CLASS_NAME__="Photos.DerivativeURL"}();
    
    
        
!function(){"use strict";var e=n$492.extend({isEmptySuccessReportingEnabled:!1,URLClass:n$9({dependencies:[n$298.bindingFor("useCVWSForDerivatives")],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$495:n$494}}),transport:n$4({readOnly:!0,get:function(){return n.get("sharedInstance")}})}),t=n$272.extend({blob:null,body:n$4({get:function(){return this.blob}})}),n=n$279.extend({prepare:function(){var e=this.__s._4G7yk9ShLCM$Np$prepare.apply(this,arguments);return e.responseType="blob",e},createResponse:function(e){return this._cachedResponse||(this._cachedResponse=t.create()),this._cachedResponse.status=e?e.status:0,this._cachedResponse.blob=e?e.response:null,this._cachedResponse.headers=e?e.getAllResponseHeaders():null,this._cachedResponse},__superMap:{_4G7yk9ShLCM$Np$prepare:"prepare"}});n$497=e,e.__QUALIFIED_CLASS_NAME__="Photos.BlobRequest",t.__QUALIFIED_CLASS_NAME__="Photos.BlobResponse$400",n.__QUALIFIED_CLASS_NAME__="Photos.BlobTransport$400"}();
    
    
        
!function(){"use strict";function e(e){n$496.suspend();try{return a.drawImage(e,0,0,1,1,0,0,1,1),!0}catch(t){return n$63.error("ImageRequestDecodeFailure: "+t),n$203.get("cloudOSService").recordStat("ImageRequestDecodeFailure",{errorType:"ImageRequestDecodeFailure",errorTitle:t+"",imageComplete:e&&e.complete,imageSize:e&&(e.naturalWidth||e.width)+" by "+(e.naturalHeight||e.height)}),!1}finally{n$496.resume()}}var t=n$310.get("hasBlobURLs"),n=n$492.extend({shouldTrackProgress:!1,seedImage:n$4(null),URLClass:n$9({dependencies:[n$298.bindingFor("useCVWSForDerivatives")],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$495:n$494}}),_shouldAllowReporting:!1,dispose:function(){this._shouldAllowReporting=!1,this.set("seedImage",null),this.__s._xtHACPeFRt$TD$dispose.apply(this,arguments)},transport:n$4({defaultValue:function(){return s.get("sharedInstance")}}),sendSynchronously:function(){n$11("Synchronous request for images disallowed.")},shouldFinalizeWithResponse:function(){return!0},sendReport:function(){return this._shouldAllowReporting?this.__s._xtHACPeFRt$bz$sendReport.apply(this,arguments):void 0},__superMap:{_xtHACPeFRt$TD$dispose:"dispose",_xtHACPeFRt$bz$sendReport:"sendReport"}}),i=n$272.extend({element:null,body:n$4({get:function(){return this.element}})}),r=i.create({status:200}),s=n$5.extend(n$266,{prepare:function(e){var t=e.__transport;n$107(t,"load",this._imgLoad),n$107(t,"error",this._imgError)},_imgLoad:n$299(function(e){var t=e.currentTarget;this._succeedRequest(t._request,t)}),_imgError:n$299(function(e){var t=e.currentTarget;t.removeAttribute("src"),this._failRequest(t._request,0)
}),_succeedRequest:function(n,i){return t&&URL.revokeObjectURL(i.src),e(i)?(n.get("state")===n$285&&(n.get("seedImage")?(r.set("element",i),n.set("response",r)):n.set("response",this.createResponse(200,i,n._headers)),n.set("state",n$270),n.triggerStatusEvents.apply(n,this.computeStatuses(i)),n.finalize()),void 0):this._failRequest(n,0)},_failRequest:function(e,t,n){if(e.get("state")===n$285){var i=this.createResponse(t||0,null,n);e.set("response",i),e.set("state",n$270),e.triggerStatusEvents.apply(e,this.computeStatuses()),e.finalize()}},_sendImage:function(e,t){var n=e.get("seedImage");n||(n=new Image),e.__transport=n,n._request=e,this.prepare(e),n.src=t},send:function(e){if(e||n$11("No request to send",this),e.triggerStatusEvent(n$267),t){var n=n$497.create().retain(this);n._imageRequest=e,e._blobRequest=n,n.set("reportPath",e.get("reportPath")),n.set("url",e.get("url")),n.set("timeout",e.get("timeout")),n.set("useCredentialsIfCrossOrigin",e.get("useCredentialsIfCrossOrigin")),n.didSucceed=this._blobSucceed,n.didFail=this._blobFail,n.shouldTrackProgress=e.shouldTrackProgress,e.shouldTrackProgress&&e.progress.addChild(n.progress),n.send()}else e.get("timeout")&&n$63.warn("Timeouts ignored for legacy image loading."),this._sendImage(e,e.get("url").get("href"));e.triggerStatusEvent(n$268)},_blobSucceed:n$299(function(e){var t=e._imageRequest;t._shouldAllowReporting=!0;var n=e.getPath("response.blob");if(!n||!n.size)return this._blobFail.apply(this,arguments);t._headers=e.getPath("response.headers");var i=URL.createObjectURL(n);this._sendImage(t,i)}),_blobFail:n$299(function(e){var t=e._imageRequest;
this._failRequest(t,e.getPath("response.status"),e.getPath("response.headers"))}),abort:function(e){e||n$11("No request to abort",this);var t=e.__transport,n=e._blobRequest;t||n?t?t.removeAttribute("src"):n.abort():n$63.warn("Cannot abort request because it is not in transit",e)},createResponse:function(e,t,n){return i.create({status:e,element:t,headers:n})},computeStatuses:function(e){this._statusCache=this._statusCache||{};var t=!!e;if(this._statusCache[t])return this._statusCache[t];var n=e?[n$274,n$270]:[n$269,n$270];return this._statusCache[t]=n,n},finalize:function(e){var t=e.__transport;t&&(t._request=null,e.__transport=null,n$493(t,"load",this._imgLoad),n$493(t,"error",this._imgError));var n=e._blobRequest;n&&(n._imageRequest=null,e._blobRequest=null,n.release(this)),e._headers=null,e.progress&&e.progress.removeChildren()}}),a=document.createElement("canvas").getContext("2d");a.canvas.width=a.canvas.height=1,n$502=n,n.__QUALIFIED_CLASS_NAME__="Photos.ImageRequest",i.__QUALIFIED_CLASS_NAME__="Photos.ImageResponse$401",s.__QUALIFIED_CLASS_NAME__="Photos.ImageRequestTransport$401"}();
    
    
        
!function(){"use strict";function e(e){return e&&"IMG"===e.tagName&&/^data:image\/svg|\.svg\?|\.svg$/.test(e.src)}function t(){var t=[],n=4,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(o,l,u,c,d,h,f,_,p){if(1===this.globalAlpha||!e(o))return i.apply(this,arguments);o._DrawImageSVGAlpha_bitmapCache||o.addEventListener("load",s);var g=arguments.length;3===g&&(g=5,c=o.naturalWidth||o.width,d=o.naturalHeight||o.height);var v;5===g&&(v=r(c,d)),9===g&&(v=r(l,u,c,d,_,p));var $=o._DrawImageSVGAlpha_bitmapCache||(o._DrawImageSVGAlpha_bitmapCache={}),m=$[v];if(!m){m=$[v]=t.pop()||document.createElement("canvas");var y=m.getContext("2d");5===g&&(m.width=Math.ceil(c),m.height=Math.ceil(d),i.call(y,o,0,0,c,d)),9===g&&(m.width=Math.ceil(_),m.height=Math.ceil(p),i.call(y,o,l,u,c,d,0,0,_,p));var I=$.currentCacheKeys||($.currentCacheKeys=[]);I.unshift(v),a($,n)}5===g&&i.call(this,m,l,u),9===g&&i.call(this,m,h,f)};var r=function(){return Array.prototype.join.call(arguments,",")},a=function(e,n){var i=e.currentCacheKeys;if(i)for(;i.length>n;){var r=i.pop(),a=e[r];a.width=a.height=0,t.push(a),delete e[r]}},s=function(){var e=this._DrawImageSVGAlpha_bitmapCache;e&&a(e,0)}}var n="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4wLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUkVDLVNWRy0yMDAxMDkwNC9EVEQvc3ZnMTAuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjFweCIgaGVpZ2h0PSIxcHgiIHZpZXdCb3g9IjAgMCAxIDEiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEgMSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+DQo8L3N2Zz4NCg==",i=document.createElement("canvas"),r=i.getContext("2d");
i.width=i.height=1;var a=new Image;a.addEventListener("load",function(){r.globalAlpha=.5,r.drawImage(a,0,0);try{r.getImageData(0,0,1,1).data[3]>192&&t()}catch(e){t()}}),a.src=n;var s={isProbablySVGImage:e};n$498=s}();
    
    
        
!function(){"use strict";var e=!1;n$211.observe("enableDrawImageSmooth",function(t){e=!t});var t=document.createElement("canvas"),n=t.getContext("2d"),i=document.createElement("canvas"),r=i.getContext("2d");t.width=i.width=t.height=i.height=0;var s=!1,a=!1,o=function(o,u){if(e||n$498.isProbablySVGImage(u))return o.drawImage.apply(o,n$27(arguments,0,1)),!0;var l=s,c=a;s=a=!1;var d,h,p,g,f,_,v,m,y=u.naturalWidth||u.width,$=u.naturalHeight||u.height;switch(arguments.length-1){case 3:d=0,h=0,p=y,g=$,f=arguments[2],_=arguments[3],v=y,m=$;break;case 5:d=0,h=0,p=y,g=$,f=arguments[2],_=arguments[3],v=arguments[4],m=arguments[5];break;case 9:d=arguments[2],h=arguments[3],p=arguments[4],g=arguments[5],f=arguments[6],_=arguments[7],v=arguments[8],m=arguments[9]}var C=v/p,I=m/g;y&&$||n$11("Source image provided to drawImageSmooth was not loaded, or otherwise had no dimensions.");var S=Math.max(C,I),b=Math.pow(2,Math.ceil(Math.log(1.1*S)/Math.log(2)));if(b>=1)return o.drawImage.apply(o,n$27(arguments,0,1)),!0;var A;if(l){A="_cachedSmoothDownsample_from"+d+","+h+","+p+","+g+"@"+b+"x";var w=u[A];if(w)return o.drawImage(w,0,0,w.width,w.height,f,_,v,m),!0}if(c)return o.drawImage.apply(o,n$27(arguments,0,1)),!1;var D=1,E=p,F=g,T=Math.max(Math.pow(2,Math.ceil(Math.log(E)/Math.log(2)),t.width)),N=Math.max(Math.pow(2,Math.ceil(Math.log(F)/Math.log(2)),t.height));for((t.width!==T||t.height!==N)&&(t.width=i.width=T,t.height=i.height=N),n.drawImage(u,d,h,p,g,0,0,p,g);D>b;){r.drawImage(t,0,0,E,F,0,0,E=Math.ceil(E/2),F=Math.ceil(F/2)),n.clearRect(0,0,E,F);var O=t;t=i,i=O,O=n,n=r,r=O,D/=2}if(l){var M=document.createElement("canvas");
M.width=E,M.height=F,M.getContext("2d").drawImage(t,0,0),u[A]=M}return o.drawImage(t,0,0,E,F,f,_,v,m),n.clearRect(0,0,p,g),r.clearRect(0,0,p,g),!0};o.usingCache=function(){return s=!0,this},o.avoidingWorkIf=function(e){return a=!!e,this},n$501=o}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$302,{element:null,offsets:n$305(Object),_resampledVersions:n$305(Object),_parentSprite:null,_croppedSize:0,itemGeometricLength:n$4({readOnly:!0,get:function(){return Math.max(this.itemWidth,this.itemHeight)}}),itemWidth:n$4({readOnly:!0,get:function(){var e=this._croppedSize;if(e)return e;var t=this.element;return t?t.naturalWidth||t.width:0/0}}),itemHeight:n$4({readOnly:!0,get:function(){var e=this._croppedSize;if(e)return e;var t=this.element;return t?t.naturalHeight||t.height:0/0}}),initFromPool:function(e,t){this.__s._3A6JEcmBEug$pb$initFromPool.apply(this,arguments),this._croppedSize=e||0,this._parentSprite=t,this._elementPool=t?n$500:n$499,this.element=this._elementPool.getInstance()},dispose:function(){for(var e in this.offsets)this.offsets.hasOwnProperty(e)&&delete this.offsets[e];for(e in this._resampledVersions)this._resampledVersions.hasOwnProperty(e)&&(this._resampledVersions[e]._parentSprite=null,delete this._resampledVersions[e]);this._parentSprite&&(delete this._parentSprite._resampledVersions[this.get("itemGeometricLength")],this._parentSprite=null),this._croppedSize=0,this._elementPool.disposeInstance(this.element),this.element=null,this.__s._3A6JEcmBEug$1J0$dispose.apply(this,arguments)},rectForAssetClientId:function(e,t){return t=t||{},t.x=this.offsets[e],t.y=0,t.width=this._croppedSize||this.element.naturalWidth||this.element.width,t.height=this._croppedSize||this.element.naturalHeight||this.element.height,t},createResampledImageSprite:function(t){var n=Math.round(t*this.get("itemGeometricLength")),i=this._resampledVersions[n];
if(i)return i;i=this._resampledVersions[n]=e.create(this._croppedSize?n:0,this);var r=i.element,s=this.element,o=Math.round((s.naturalWidth||s.width)*t),a=Math.round((s.naturalHeight||s.height)*t);r.width=o,r.height=a,n$501(r.getContext("2d"),s,0,0,o,a);for(var l in this.offsets)this.offsets.hasOwnProperty(l)&&(i.offsets[l]=Math.round(this.offsets[l]*t));return i},__superMap:{_3A6JEcmBEug$pb$initFromPool:"initFromPool",_3A6JEcmBEug$1J0$dispose:"dispose"}});n$503=e,e.__QUALIFIED_CLASS_NAME__="Photos.ImageSprite"}();
    
    
        
!function(){"use strict";var e=n$298.get("spritingBucketViabilityThreshold"),t=n$5.extend(n$302,{refs:n$305(Array),_assetIndexHash:n$305(Object),startIndex:0,maxLength:0,length:0,viable:!1,_canBeViable:!0,initFromPool:function(e,t){this.__s._2cCc7OjFHtp$B5$initFromPool.apply(this,arguments),this.startIndex=e,this.maxLength=t;var n=e+t,i=n$309.datastore.get("itemCount");n>i&&(this._canBeViable=!1)},add:function(t,n){this.refs.push(n),this._assetIndexHash[t]||(this.length++,this.viable=this._canBeViable&&this.length/this.maxLength>=e,this._assetIndexHash[t]=n)},hasRefForAssetIndex:function(e){return this._assetIndexHash[e]},pushUniqueRefsTo:function(e){for(var t in this._assetIndexHash)this._assetIndexHash.hasOwnProperty(t)&&e.push(this._assetIndexHash[t])},dispose:function(){this.refs.length=0;for(var e in this._assetIndexHash)this._assetIndexHash.hasOwnProperty(e)&&delete this._assetIndexHash[e];this.startIndex=0,this.maxLength=0,this.length=0,this.viable=!1,this._canBeViable=!0,this.__s._2cCc7OjFHtp$YY$dispose.apply(this,arguments)},__superMap:{_2cCc7OjFHtp$B5$initFromPool:"initFromPool",_2cCc7OjFHtp$YY$dispose:"dispose"}});n$504=t,t.__QUALIFIED_CLASS_NAME__="Photos.SpriteBucket"}();
    
    
        
!function(){"use strict";var e=n$388.extend({pathname:n$373.SPRITE_URL_PATH,setDefaultQueryParams:function(){this.__s._1UG38ejK3vm$3p$setDefaultQueryParams.apply(this,arguments),this.setQueryParamForSyncToken(),this.setQueryParamForValidateToken()},__superMap:{_1UG38ejK3vm$3p$setDefaultQueryParams:"setDefaultQueryParams"}});n$506=e,e.__QUALIFIED_CLASS_NAME__="Photos.SpriteURL"}();
    
    
        
!function(){"use strict";var e=[],t=[],n=[],i=n$297.create(),r=n$297.create(),s=n$297.create(),a=n$297.create(),o=n$5.extend({_timeout:null,_refs:n$305(Array),_isLoadingCache:n$305(n$297),_requests:n$305(n$297),_highestLoadingPriority:1/0,simultaneousLoadPriorityRange:1e3,init:function(){var e=n$22(this);this._refsOnRequestKey="_refsOnRequestKey"+e,this._shardNumberOnRequestKey="_shardNumberOnRequestKey"+e,this._spriteOnRequestKey="_spriteOnRequestKey"+e,this.__s._7pn4TdQJz4$aw$init.apply(this,arguments)},cancelAllLoadRefsForDerivativeForChangeset:function(e){for(var t=this._refs.length;t--;){var n=this._refs[t];l(n)===e&&n.cancel()}this._handleCancellations()},makeRequestForDerivative:function(e,t){this._scheduleLoad();var n=t||n$441.create();return n.derivative=e,n.retain(this).autorelease(this),n._willDispose=y,n._didCancel=$,e.get("isLoaded")?n.resolve():(n.retain(this),this._refs.push(n)),n},_scheduleLoad:function(){this._timeout||(this._timeout=n$130(this._scheduleLoadTimeoutHandler,50))},_scheduleLoadTimeoutHandler:n$299(function(){this._timeout=null,this._loadRefs()}),_handleCancellations:function(){var e,n;for(t.length=0,i.clear(),e=this._refs.length;e--;)n=this._refs[e],n.get("cancelled")?t.push(e):i.add(l(n));if(t.length){for(e=this._requests.length;e--;)for(var r=this._requests.items[e],s=r[this._refsOnRequestKey],a=s.length;a--&&!i.contains(l(s[a]));)this._removeRefAtIndexFromRequest(r,a);for(t.reverse(),e=t.length;e--;)this._removeRefAtIndex(t[e])}},_handleFailedMetadata:function(){for(var e,t=this._refs.length;t--;){var n=this._refs[t],i=l(n),r=i.get("asset");
r.linkToStore();var s=r.get("loadingStatus");if(s===n$329.ERRORED)e=e||[],e.push(n);else if(s===n$329.LOADED){if(!n$298.get("useCVWSForDerivatives"))continue;var a=i.info;if(a&&a.url)continue;a||(n$63.error("Could not get derivative info for %{0}.",[i]),n$203.get("cloudOSService").recordStat("DerivativeLoadManager",{errorType:"server",errorTitle:"Could not get derivative info."})),e=e||[],e.push(n)}}e&&this._fireForAllRefsMatchingRefs(e,"reject",Error("Failed to load asset metadata."))},_removeRefFromRequests:function(e){for(var t=this._requests.length;t--;){var n=this._removeRefFromRequest(this._requests.items[t],e);if(n)break}},_removeRefFromRequest:function(e,t){var n=e[this._refsOnRequestKey],i=n.indexOf(t);return-1===i?!1:(this._removeRefAtIndexFromRequest(e,i),!0)},_removeRefAtIndexFromRequest:function(e,t){var n=e[this._refsOnRequestKey];n[t].release(this),n[t]=n[n.length-1],n.length--,n.length||e.abort()},_removeRefAtIndex:function(e){var t=this._refs[e];this._refs[e]=this._refs[this._refs.length-1],this._refs.length--,t.release(this)},_loadRefs:function(){this._handleNewRefs(),this._handleCancellations(),this._handleFailedMetadata();var e=this._refs;e.sort(_),n.length=e.length,this._isLoadingCache.clear(),this._setUpBuckets(),this._highestLoadingPriority=1/0;for(var t=e.length;t--;){var i=e[t];this._loadRef(t),i._isLoading&&i.priority<this._highestLoadingPriority&&(this._highestLoadingPriority=i.priority),i._bucket=null,n[t]=l(i).asset.clientId}this._cleanUpBuckets(),g(),n$309.load(n)},_handleNewRefs:function(){for(var t=this._refs,n=t.length;n--;){if(s=t[n],!s._newlyAdded){n++;
break}s._newlyAdded=!1}if(n!==t.length&&-1!==n){var i=n;e.length=0;for(var r=e;i--;)s=t[i],s._isLoading&&r.push(i);for(var s,a,o,u=r.length,c=n,d=t.length;d>c;c++)for(s=t[c],o=l(s),u=r.length;u--;)if(a=t[r[u]],o===l(a)){s._isLoading=!0;break}}},_markRefsAsLoading:function(e){this._isLoadingCache.add(l(e)),e._isLoading=!0},_isLoadingWithCacheCheckAndUpdate:function(e){if(e._isLoading)return!0;var t=this._isLoadingCache.contains(l(e));return t&&(e._isLoading=!0),t},_bucketsBySize:n$305(Object),_cleanUpBuckets:function(){for(var e in this._bucketsBySize)if(this._bucketsBySize.hasOwnProperty(e)){var t=this._bucketsBySize[e];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.release(this),delete t[n]}delete this._bucketsBySize[e]}},_setUpBuckets:function(){for(var e,t,n,i,r,s,a,o=this._refs.length;o--;)e=this._refs[o],e._isLoading||(t=l(e),t.get("croppedToSquare")&&(a=c(e),-1!==a&&(n=t.geometricLength,this._bucketsBySize[n]||(this._bucketsBySize[n]={}),s=u(n),i=a,i-=i%s,r=this._bucketsBySize[n][i],r||(r=n$504.create(i,s).retain(this),this._bucketsBySize[n][i]=r),r.add(a,e),e._bucket=r)))},_loadSprite:function(e){if(n$505.get("hasAvailableShard")){var t=this._refs[e],n=l(t).geometricLength,i=n$503.create(n).retain(this),r=n$319.getInstance(),s=n$506.create();s.setQueryParameter("boundingBox",n);var a,o,c;if(t._bucket.viable){var d=t._bucket.startIndex,h=d+t._bucket.maxLength;for(c=d;h>c;c++)if(i.offsets[n$309.datastore.clientIdForIndex(c)]=n*(c-d),!t._bucket.hasRefForAssetIndex(c)){var p=n$309.create(c).retain(this),g=p.requestDerivative(n,"squareImage");r.push(g),g._isLoading=!0,g._newlyAdded=!1,g.cancel(!0),p.release(this)
}n$461.setQueryParamForSingleRange(s,d,h),s.setQueryParameter("_seedCount_",t._bucket.length);var f=t._bucket.refs;for(c=f.length;c--;)t=f[c],this._markRefsAsLoading(f[c]);t._bucket.pushUniqueRefsTo(r)}else{var _=u(n),v=n$319.getInstance();do if(t=this._refs[e],!(t._bucket&&t._bucket.viable||this._isLoadingWithCacheCheckAndUpdate(t))&&(a=t.get("derivative"),a.get("croppedToSquare")&&a.geometricLength===n&&(o=a.get("asset").get("clientId"),v.push(o),i.offsets[o]=n*r.length,this._markRefsAsLoading(t),r.push(t)),r.length>=_))break;while(e--);n$461.setQueryParamForClassFromPrimaryKeys(s,n$309,v),n$319.disposeInstance(v)}this._sendRequest(r,s,i)}},_checkLoadOfAssetForRef:function(e){var t=l(e),n=t.get("asset");n.linkToStore();var i=n.get("loadingStatus");return i!==n$329.LOADED?!1:n$298.get("useCVWSForDerivatives")?n$309.isURLExpiryTooSoon(t.info)?(n.reload(),!1):!0:!0},_loadRef:function(e){var t=this._refs[e];if(!this._isLoadingWithCacheCheckAndUpdate(t)){if(!this._checkLoadOfAssetForRef(t))return this._scheduleLoad(),void 0;var n=this.simultaneousLoadPriorityRange;if(!(Math.floor(this._highestLoadingPriority/n)*n+n<=t.priority)){var i=l(t);if(i.get("croppedToSquare"))return this._loadSprite(e),void 0;if(!n$505.get("hasAvailableShard"))return!1;this._markRefsAsLoading(t);var r=i.get("asset"),s=r.get("clientId"),a=n$503.create().retain(this);a.offsets[s]=0;var o;n$298.get("useCVWSForDerivatives")?o=n$495.create(i.info.url):(o=n$494.create(),n$461.setQueryParamForAsset(o,r),o.setQueryParameter("boundingBox",i.geometricLength));var u=n$319.getInstance();u[0]=t,this._sendRequest(u,o,a)
}}},_fireForAllRefsMatchingRefs:function(e,t,n){r.clear();for(var i=r,s=e.length;s--;)i.add(l(e[s]));for(s=this._refs.length;s--;){var a=this._refs[s];i.contains(l(a))&&(a[t].call(a,n),this._removeRefAtIndex(s))}},_resolveSmallerOrEqualPendingDerivativesForRefs:function(e){s.clear(),a.clear();for(var t=s,n=a,i=e.length;i--;){var r=e[i];t.add(l(r)),n.add(r)}for(i=t.length;i--;)this._resolveSmallerOrEqualPendingDerivatives(t.items[i],n)},_resolveSmallerOrEqualPendingDerivatives:function(e,t){for(var n=e.geometricLength,i=e.get("croppedToSquare"),r=e.get("asset"),s=this._refs.length;s--;){var a=this._refs[s],o=l(a),u=o.geometricLength,c=o.get("croppedToSquare"),d=o.get("asset");if(!(u>n||c!==i||d!==r)){var h=t.contains(a);h||this._removeRefFromRequests(a),u===n?a.resolve():(a.set("derivative",e),a.resolve(),r.scheduleDerivativeCreation(u,e.get("info"))),this._removeRefAtIndex(s)}}},_sendRequest:function(e,t,n){v(e,"retain",this);var i=n$502.create().retain(this);n$298.get("useCVWSForDerivatives")&&i.set("useCredentialsIfCrossOrigin",!1);var r=n$505.allocNextShard();t.set("shardNumber",r),i.set("url",t),i.set("seedImage",n.element),i.set("timeout",n$298.get("derivativeLoadingTimeout")),this._requests.add(i),i[this._shardNumberOnRequestKey]=r,i[this._refsOnRequestKey]=e,i[this._spriteOnRequestKey]=n,i.didSucceed=this._requestDidSucceed,i.didFail=this._requestDidFail,i.didComplete=this._requestDidComplete,i.didAbort=this._requestDidAbort,v(e,"setIfChanged","_request",i),i.send()},_requestDidSucceed:n$299(function(e){for(var t,n=e[this._spriteOnRequestKey],i=e[this._refsOnRequestKey],r=i.length;r--;)t=i[r],t.get("derivative").set("_imageSprite",n);
this._resolveSmallerOrEqualPendingDerivativesForRefs(i)}),_requestDidFail:n$299(function(e){var t=e[this._refsOnRequestKey];this._fireForAllRefsMatchingRefs(t,"reject",Error("Failed to load sprite."))}),_requestDidComplete:n$299(function(e){this._scheduleLoad(),this._requestDoCleanup(e)}),_requestDidAbort:n$299(function(e){this._requestDoCleanup(e)}),_requestDoCleanup:function(e){var t=e[this._refsOnRequestKey];v(t,"release",this),n$319.disposeInstance(t),e[this._refsOnRequestKey]=null;var n=e[this._shardNumberOnRequestKey];n$505.deallocShard(n);var i=e[this._spriteOnRequestKey];i.release(this),e[this._spriteOnRequestKey]=null,this._requests.remove(e),e.release(this)},__superMap:{_7pn4TdQJz4$aw$init:"init"}}),u=function(e){return Math.min(128,65536/(e*e))},l=function(e){return e._derivative},c=function(e){return p(e._derivative)},d="_dlm_assetIndexOnDerivativeCacheKey",h=[],p=function(e){var t=e[d];return void 0===t&&(t=n$309.datastore.backingIndexForClientId(e.get("asset").get("clientId")),e[d]=t,h.push(e)),t},g=function(){for(var e=h.length;e--;)h[e][d]=void 0;h.length=0},f=function(e,t){return c(e)-c(t)},_=function(e,t){var n=t.priority-e.priority;return n?n:f(e,t)},v=function(e,t){var n=e.length;for(n$26(m,arguments,0,2);n--;)e[n][t].apply(e[n],m)},m=[],y=function(){this._isLoading=!1,this._newlyAdded=!0,this._bucket=null,this._willDispose=null,this._didCancel=null},$=function(){C._scheduleLoad()},C=o.create();n$491=C,o.__QUALIFIED_CLASS_NAME__="Photos.DerivativeLoadManager$407"}();
    
    
        
!function(){"use strict";function e(e,t,n,i,r,s,a){var o,l,h,u,c;2===a||3===a?(n$33(e)?(l=e.get("height"),o=e.get("width")):(l=e.height,o=e.width),n$33(t)?(u=t.get("height"),h=t.get("width")):(u=t.height,h=t.width),c=n):(o=e,l=t,h=n,u=i,c=r);var d=o/l,p=h/u,g=s?p>d:d>p;return c=c||{},c.width=g?h:u*d,c.height=g?h/d:u,c}function t(t,n,i,r,s){return e(t,n,i,r,s,!1,arguments.length)}function n(t,n,i,r,s){return e(t,n,i,r,s,!0,arguments.length)}n$507=t,n$629=n}();
    
    
        
!function(){"use strict";var e={},t=n$442.extend({staticMembers:{_livingPixelCount:0,isCacheLengthAcceptable:function(){return n$298.enableDerivativeCache?this._livingPixelCount<=this._maxPixelCount:!1},_maxPixelCount:n$4({defaultValue:1e6*n$298.maxStoredMegapixels,set:function(e){return this.__maxPixelCount=e,this.prunePoolCache(),e}}),_cacheBleeder:n$411.extend({delay:1e3,timesToFire:1/0,_beginCacheBleed:n$7("appDidBecomeSuspended","windowDidBlur",function(e,n){!e&&!n||this.isRunning||(this._targetPixelCount=1e6*n$298.maxStoredMegapixelsInBackground,this._currentAmountOverTarget=t._maxPixelCount-this._targetPixelCount,this.start())}),_reinstateCacheLimit:n$7("appDidBecomeActive","windowDidFocus",function(e,n){(e||n)&&(this.stop(),t._maxPixelCount=1e6*n$298.maxStoredMegapixels)}),callAction:function(){this._currentAmountOverTarget/=Math.pow(2,this.delay/n$298.maxStoredMegapixelsHalfLife),this._currentAmountOverTarget-=1e6*n$298.maxStoredMegapixelsLinearBleed;var e=this._targetPixelCount+this._currentAmountOverTarget;e<this._targetPixelCount&&(e=this._targetPixelCount,this.stop()),t._maxPixelCount=e},appDidBecomeSuspended:n$12(!0),appDidBecomeActive:n$12(!0),windowDidBlur:n$12(!0),windowDidFocus:n$12(!0),init:function(){this.__s._1Gp5RgMvIyk$1Ad$init.apply(this,arguments),n$107(window,"blur",this.windowDidBlur.bind(this)),n$107(window,"focus",this.windowDidFocus.bind(this))},__superMap:{_1Gp5RgMvIyk$1Ad$init:"init"}}).create()},genericAssetType:n$4(n$309.IMAGE),_reuseableRect:n$305(Object),_imageSprite:n$355(),toCanvas:function(){if(!this.isLoaded)return null;var e=document.createElement("canvas");
return e.width=this.physicalWidth,e.height=this.physicalHeight,this.drawIntoCanvas(e),e},isLoaded:n$9({readOnly:!0,dependencies:["_imageSprite","asset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!r}}),element:n$9({readOnly:!0,dependencies:["_imageSprite"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.element:null}}),rectInElement:n$9({readOnly:!0,cacheable:!1,dependencies:["_imageSprite","asset.clientId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s?s.rectForAssetClientId(r,this._reuseableRect):null}}),physicalGeometricLength:n$9({readOnly:!0,dependencies:["physicalWidth","physicalHeight"],get:function(e,t,n,i){return Math.max(i.internalGetPath(this,t[0+n]),i.internalGetPath(this,t[1+n]))}}),physicalWidth:n$9({readOnly:!0,dependencies:["rectInElement"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.width:0}}),physicalHeight:n$9({readOnly:!0,dependencies:["rectInElement"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.height:0}}),initFromPool:function(e){e.synthesizedFromClientId&&(this.info=e),this.__s._1Gp5RgMvIyk$1xK$initFromPool.apply(this,arguments)},_currentPixelCountContribution:0,_pixelCountDidChange:n$7("rectInElement",function(e){if(this.isInitialized){var t=e&&0|e.width*e.height;this.constructor._livingPixelCount+=t-this._currentPixelCountContribution,this._currentPixelCountContribution=t,this.constructor.prunePoolCache()}}),resetForChangeset:function(){n$491.cancelAllLoadRefsForDerivativeForChangeset(this),this.__s._1Gp5RgMvIyk$2HK$resetForChangeset.apply(this,arguments)
},createResampledDerivative:function(e){if(this.isLoaded){var n=this.info;if(!n)return null;var i=e/this.physicalGeometricLength;if(i>=1)return null;var r=this._imageSprite.createResampledImageSprite(i),s=n$309.synthesizeDerivativeInfo(n,r.itemWidth,r.itemHeight),a=t.create(s).retain(this);return a._imageSprite=r,a.release(this),a}},drawIntoCanvas:function(t,n,i,r,s,a){if(this.isLoaded){var o=this.rectInElement,l=e;n=n||0,i=i||0,r=r||o.width,s=s||o.height,a=a||"contain",l.x=n,l.y=i,l.width=r,l.height=s;var u,c,h=r/o.width,d=s/o.height;"contain"===a?(u=Math.min(h,d),c=l):(u=Math.max(h,d),c=o);var _=Math.abs(o.width-r/u),g=Math.abs(o.height-s/u);c.x+=_/2,c.width-=_,c.y+=g/2,c.height-=g,t.getContext("2d").drawImage(this.element,o.x,o.y,o.width,o.height,l.x,l.y,l.width,l.height)}},_load:function(e){return n$491.makeRequestForDerivative(this,e)},_debug_display:function(e,t){if(!this.isLoaded)return this+" is not loaded.";this.retain("debug display"),this._debug_appendedPreviewDiv&&this._debug_appendedPreviewDiv._remove();var n=this._imageSprite.element,i=n$160(n);i.set("width","100%").set("height","100%");var r=document.createElement("div"),s=n$507(this.physicalWidth,this.physicalHeight,window.innerWidth,window.innerHeight),a=Math.min(s.width,this.physicalWidth),o=Math.min(s.height,this.physicalHeight),l=n$160(r);l.set("position","absolute").set("left",window.innerWidth/2-a/2).set("top",window.innerHeight/2-o/2).set("width",a).set("height",o).set("z-index",1e4).set("box-shadow","0px 25px 70px rgba(0,0,0,0.5)").set("opacity",0).set("transition","opacity 0.15s"),n$130(function(){l.set("opacity",1)
},16),r.innerHTML='<div style="position:absolute; left:10px; top:10px; color:white; font-weight:bold; font-size:20px; text-shadow:0px 0px 12px black, 0px 0px 12px black, 0px 0px 12px black;">'+((t?t+"<br><br>":"")+"Derivative: "+this.clientId)+"</div>",r.insertBefore(n,r.firstChild),r._remove=function(){r._wasRemoved||(r._wasRemoved=!0,this.release("debug display"),r===this._debug_appendedPreviewDiv&&(this._debug_appendedPreviewDiv=null),n$493(document,"mousemove",r._remove),r.parentNode&&r.parentNode.removeChild(r),n.parentNode&&n.parentNode.removeChild(n),i.clear("width").clear("height"))}.bind(this);var u=function(){r._wasRemoved||(l.set("opacity",0),n$130(r._remove,150))}.bind(this);return n$107(document,"mousemove",u),n$130(u,+e||5e3),document.body.appendChild(r),this._debug_appendedPreviewDiv=r,"Displayed "+this+"."},__superMap:{_1Gp5RgMvIyk$1xK$initFromPool:"initFromPool",_1Gp5RgMvIyk$2HK$resetForChangeset:"resetForChangeset"}});n$489=t,t.__QUALIFIED_CLASS_NAME__="Photos.ImageDerivative"}();
    
    
        
!function(){"use strict";var e=n$400.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOn",truevalue:"cw-on",attributes:{}}]}}},isOn:n$9(!1),callAction:function(){return this.set("isOn",!this.get("isOn")),this.__s._2MwCrDmygjv$ID$callAction.apply(this,arguments)},__superMap:{_2MwCrDmygjv$ID$callAction:"callAction"}});n$508=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Views.Controls.ToggleButton"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"_buttons"}],classes:["cw-segmented-control"]}},value:n$9(),segments:n$9({get:function(e){return e},set:function(e){return n$99.create(e)}}),_buttons:n$9(n$84(n$158)),_redraw:n$7("element","segments",function(e,t){var n=this.get("_buttons");if(e&&n){if(n.beginBatchedChanges(),n.clear(),t)for(var i=t.get("length"),r=this.get("value"),a=0,s=i;s>a;a++){var o=t.objectAt(a),l=n$508.create({title:o.title,value:o.value,action:"didToggle",target:this,tooltip:o.tooltip,isOn:o.value===r}),u=l.get("element"),c=u.classList;0===a?c.add("cw-first"):a===i-1&&c.add("cw-last"),n.push(l)}n.endBatchedChanges()}}),_updateButtonStates:n$7("value",function(e){var t,n=this.get("_buttons");if(n)for(var i=0,r=n.get("length");r>i;i++)t=n.objectAt(i),t.set("isOn",t.get("value")===e)}),didToggle:function(e){var t=n$509(e);if(t){var n=t.get("value");this.set("value",n)}}});n$510=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Views.Controls.Segmented"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_segmentedControl"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_currentTab"}],classes:["debug-panel"]}},tabs:n$9({defaultValue:function(){return n$158.create()},get:function(){return this._tabs},set:function(e){this._tabs=n$158.create(e)}}),_segmentedControl:n$9(function(){return n$510.create()}),_tabsDidChange:n$7("tabs","tabs.contentsDidChange",function(e){if(e){for(var t=this.get("_segmentedControl"),n=[],i=0,r=e.get("length");r>i;i++)n.push({title:e.objectAt(i).title,value:""+i});t.set("segments",n),r&&t.set("value",n[0].value)}}),_segmentedControlValueDidChange:n$7("_segmentedControl.value",function(e){if(void 0!==e){e=parseInt(e,10);var t=this.get("tabs").objectAt(e).view;this.set("_currentTab",t)}})});n$512=e,e.__QUALIFIED_CLASS_NAME__="DebugPanel.TabbedView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"table",children:[{type:"ELEMENT",tagname:"tr",children:[{type:"ELEMENT",tagname:"th",children:[{type:"TEXT",data:"Key"}]},{type:"ELEMENT",tagname:"th",children:[{type:"TEXT",data:"Value"}]},{type:"ELEMENT",tagname:"th",children:[{type:"TEXT",data:"Debug Value"}]},{type:"ELEMENT",tagname:"th",children:[{type:"TEXT",data:"URL Value"}]},{type:"ELEMENT",tagname:"th",children:[{type:"TEXT",data:"Default Value"}]}]}],name:"_table"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_clearButton"}],classes:["cw-config-tab"]}},_clearButton:n$9(function(){return n$400.create({title:"Clear Debug Values",target:this,action:"_clearDebugValues"})}),_clearDebugValues:function(){this.get("config").clearDebugValues()},config:n$9(),_configDidChange:n$7("config",function(e){var t=this.get("_table"),n=e.getMetadataByType(n$201);for(var i in n)n.hasOwnProperty(i)&&t.appendChild(this._rowForProperty(i))}),_rowForProperty:function(e){var n=this.get("config"),i=t.cloneNode(!0);i.children[0].textContent=e,i.children[1].appendChild(this._inputForProperty(e));var r=function(e){return void 0===e?"":e};return n$6.create(n,e,function(){i.children[2].textContent=r(n.getDebugValue(e)),i.children[3].textContent=r(n.getURLValue(e)),i.children[4].textContent=r(n.getDefaultValue(e))}).connect(),i},_selectForProperty:function(e){for(var t,n=this.get("config"),i=document.createElement("select"),r=n.getMetadata(e).allowedValues,s=0,a=r.length;a>s;s++)t=document.createElement("option"),t.textContent=r[s],i.appendChild(t);
return i},_inputForProperty:function(e){var t,n=this.get("config"),i=n.typeOf(e),r="enum"===i?this._selectForProperty(e):document.createElement("input");return"boolean"===i?(r.setAttribute("type","checkbox"),t=n$6.create(n,e,function(e){r.checked=e}),t.connect(),n$107(r,"change",function(){n.set(e,this.checked)}),r):("number"===i&&r.setAttribute("type","number"),t=n$6.create(n,e,function(e){r.value=e}),t.connect(),n$107(r,"change",function(){n.setFromString(e,this.value)}),r)}}),t=function(){for(var e=document.createElement("tr"),t=document.createElement("td"),n=0;5>n;n++)e.appendChild(t.cloneNode());return e}();n$513=e,e.__QUALIFIED_CLASS_NAME__="DebugPanel.ConfigView"}();
    
    
        
!function(){"use strict";var e,t=function(){if(!e){e=n$512.create();var t=e.get("style"),n=!1,i=[n$298,n$310,n$211],r=i.map(function(e){return{title:e.constructor.storageKey,view:n$513.create({config:e})}});e.set("tabs",r),t.set({position:"fixed",top:"5%",right:"10%",bottom:"5%",left:"10%",padding:"40px 10px 10px 10px","box-shadow":"0px 15px 60px rgba(0,0,0,0.7)",overflow:"auto",background:"rgba(255,255,255,0.95)",transition:"opacity 0.15s",opacity:0,"z-index":1e3,"text-align":"left"}).layerBack();var a=e.getPath("_segmentedControl.style");n$32(a,t.constructor)&&a.set({position:"absolute",left:"50%",transform:"translateX(-50%) translateY(-29px)","font-weight":"bold"});var s,o;window.addEventListener("keydown",function(i){192!==i.keyCode||i.shiftKey||i.metaKey||i.altKey||(i.preventDefault(),clearTimeout(s),clearTimeout(o),n=!n,n?document.body.appendChild(e.get("element")):s=n$130(document.body.removeChild.bind(document.body,e.get("element")),150),t.set("opacity",0),o=n$130(t.set.bind(t,"opacity",n?1:0),0))})}};n$519=t}();
    
    
        
!function(){"use strict";function e(e,t){var n=e.indexOf(t);return 0>n?(e.push(t),e.length-1):n}var t=1e4,n=5e3,i=!1,r=n$330.extend(n$339,{shouldCoalesce:!0,autocommit:!0,servers:[n$373.create()],_prevStatusData:null,statusData:n$9({defaultValue:null,didChange:function(e){n$332(e,this._prevStatusData)||(this._didLogStatusDataFail||this._setUpLogStatusDataFailTimeout(),this._setUpNavigateStatusDataFailTimeout()),this._prevStatusData=e}}),_didLogStatusDataFail:!1,_logStatusDataFailTimeoutId:0,_setUpLogStatusDataFailTimeout:function(){clearTimeout(this._logStatusDataFailTimeoutId),this._logStatusDataFailTimeoutId=n$130(function(){n$203.get("cloudOSService").recordStat("PreparingLibraryFailure",{pathname:"/ph/status",errorType:"server",errorTitle:"Server failed to provide status updates to client."}),this._didLogStatusDataFail=!0}.bind(this),3*t+n)},_navigateStatusDataFailTimeoutId:0,_setUpNavigateStatusDataFailTimeout:function(){clearTimeout(this._navigateStatusDataFailTimeoutId),this._navigateStatusDataFailTimeoutId=n$130(function(){this.stopFetchingStatusData();var e=n$103.getPath("application.rootViewController");e.navigateToLibraryProcessingFailed(!0)}.bind(this),30*t+n)},_statusDataTxn:null,_statusDataPollingIntervalId:0,beginFetchingStatusData:function(e){if(!this._statusDataTxn){this._statusDataTxn=this.loadDataFrom("/status"),this._setUpLogStatusDataFailTimeout(),this._setUpNavigateStatusDataFailTimeout();var n=function(){this._statusDataTxn&&(this._statusDataTxn.cancel(),this._statusDataTxn=this.loadDataFrom("/status"))}.bind(this);i?this._statusDataTxn.then(n,n):this._statusDataPollingIntervalId=n$374(n,t),e&&this.set("statusData",e)
}},stopFetchingStatusData:function(){this._statusDataTxn&&this._statusDataTxn.cancel(),this._statusDataTxn=null,clearInterval(this._statusDataPollingIntervalId),clearTimeout(this._logStatusDataFailTimeoutId),clearTimeout(this._navigateStatusDataFailTimeoutId),this._didLogStatusDataFail=!1},initialStartup:function(){return this._doFirstStartup(),this._initialStartupThenable},firstSuccessfulStartup:function(){return this._doFirstStartup(),this._firstSuccessfulStartupThenable},lastChangesetFetchTimestamp:n$4({readOnly:!0,get:function(){return this._changesetFetchTimestamps[this._changesetFetchTimestamps.length-1]}}),_changesetFetchTimestamps:n$514(function(){return[0]}),_hasHadFirstSuccessfulStartup:!1,_initialStartupThenable:null,_firstSuccessfulStartupThenable:null,_doFirstStartup:function(){this._initialStartupThenable||(this._initialStartupThenable=n$434.create().retain(this),this._firstSuccessfulStartupThenable=n$434.create().retain(this),n$298.getPath("server.url")&&(this.loadDataFrom("/startup").then(function(){this._initialStartupThenable.resolve(),this._firstSuccessfulStartupThenable.resolve()}.bind(this),function(){this._initialStartupThenable.reject()}.bind(this)),this._firstSuccessfulStartupThenable.then(function(){this._hasHadFirstSuccessfulStartup=!0,this.enableChangesets(!0)}.bind(this))))},fetchChangeset:n$299(function(e){return!e&&this._changesetDisableCount?(this._changesetDisableCount&&(this._wasChangesetRequestedWhileDisabled=!0),void 0):(this.disableChangesets(),this._changesetFetchTimestamps.push(Date.now()),this.set("isFetchingChangeset",!0),this._hasHadFirstSuccessfulStartup||n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"client",errorTitle:"Attempting to fetch changeset while firstSuccessfulStartupThenable is pending.",force:!!e}),this._changesetTransaction=this.loadDataFrom("/changeset"),this._changesetTransaction.then(this._doneFetchingChangeset,this._doneFetchingChangeset),this._changesetTransaction)
}),_doneFetchingChangeset:n$299(function(){var e=this.get("lastChangesetFetchTimestamp");this._changesetFetchTimestamps.length=1,this._changesetFetchTimestamps[0]=e,this._changesetTransaction=null,this.set("isFetchingChangeset",!1),this.enableChangesets()}),_changesetTransaction:null,isFetchingChangeset:n$9(!1),didIngestChangeset:n$12(!0),_changesetDisableCount:1,enableChangesets:function(e){--this._changesetDisableCount<=0&&(this._changesetDisableCount<0&&n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"client",errorTitle:"#enableChangesets() called more times than #disableChangesets().",stack:n$301()}),this._changesetDisableCount=0,this._hasHadFirstSuccessfulStartup||n$203.get("cloudOSService").recordStat("WebService",{statId:20757340,errorType:"client",errorTitle:"Attempting to enableChangesets while firstSuccessfulStartupThenable is pending.",stack:n$301(),alsoDoFetch:e}),(this._wasChangesetRequestedWhileDisabled||e)&&n$130(this.fetchChangeset),this._wasChangesetRequestedWhileDisabled=!1)},disableChangesets:function(){++this._changesetDisableCount,this._changesetTransaction&&(this._changesetTransaction.cancel(),this._changesetTransaction=null,this._changesetFetchTimestamps.pop())},inevitablyRestartSoon:function(){this._restartTimeout||(this._restartTimeout=n$130(this.restart.bind(this),200))},restart:function(){if(!n$103.getPath("application.isRestarting")){clearTimeout(this._restartTimeout),this._restartTimeout=null,this.stopFetchingStatusData(),this.disableChangesets();var e=this._hasHadFirstSuccessfulStartup;e&&n$103.setPath("application.isRestarting",!0),n$130(this._finishRestart.bind(this,e))
}},_finishRestart:function(e){this.cancelAllTransactions(),this.loadDataFrom("/startup").then(function(){if(this._firstSuccessfulStartupThenable.resolve(),e){n$103.setPath("application.isRestarting",!1);var t=n$103.getPath("application.rootViewController");t.reloadAllViewControllers()}this.enableChangesets(!0)}.bind(this),function(){n$103.setPath("application.isRestarting",!1),n$203.get("cloudOSService").reload()}.bind(this))},fetchFolders:function(e){var t=e||!this._fetchFoldersThenable&&!n$103.getPath("application.isRestarting");return e&&this._fetchFoldersThenable&&this._fetchFoldersThenable.set("state",this._fetchFoldersThenable.PENDING),this._fetchFoldersThenable||(this._fetchFoldersThenable=n$434.create().retain(this)),t&&this.firstSuccessfulStartup().then(function(){n$370.loadAll().then(this._fetchFoldersThenable.resolve.bind(this._fetchFoldersThenable),this._fetchFoldersThenable.reject.bind(this._fetchFoldersThenable))}.bind(this),function(e){this._fetchFoldersThenable.reject(e)}.bind(this)),this._fetchFoldersThenable},_fetchFoldersThenable:null,resetEverything:function(){n$309.resetAllDerivatives(),n$363.resetAllForChangeset(),this.resetAll(),this._persistenceStore.resetAll()},isWritePending:n$9(!1),_unsetPendingWrite:n$299(function(){this.set("isWritePending",!1)}),isSyncing:n$9({readOnly:!0,dependencies:["isFetchingChangeset","isWritePending"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a||r}}),coalesceTransactions:function(t){var n,i,r,a,o,l=t.get("length"),u={};for(n=0;l>n;n++){var c,h,d=t.objectAt(n),_=d.context,f=_.resource;
if(f){var g=_.resourceAction;a=n$22(f)+":"+g;var p=s(g);if(p){if(this.get("isWritePending")&&!o)continue;if(o){if(o!==a)continue}else o=a}if(c=u[a]){var v=_.primaryKeys,$=c.primaryKeys,m=_.body,y=c.body;if(!$&&y)y.push.apply(y,m);else if($)for(i=0,r=v.length;r>i;i++){var S=e($,v[i]);y&&(c.body[S]=m[i])}h=c.transactions,Array.isArray(h)||(h=c.transactions=[h]),h.push(d)}else u[a]=_,"destroy"===g&&(_.body=void 0),p&&(this.set("isWritePending",!0),d.finally(this._unsetPendingWrite))}else{var I=_.path;c=u[I],c&&(n$63.warn("Multiple requests for URL route `"+I+"` in the same cycle"),h=c.transactions,Array.isArray(h)||(h=[h]),h.push(d),_.transactions=h),u[I]=_}}var w=n$99.create();for(a in u)w.push(u[a]);return w},transactionDidFail:function(e){this.__s._1mLyKYiMsgJ$6AA$transactionDidFail.apply(this,arguments);var t=e.context,n=t.resourceAction;if(("update"!==n||e.changes)&&-1!==["create","destroy","undelete","expunge","update"].indexOf(n)){var i,r=t.resource.modelClass,a=n$368.operationFromServerAction(n,r),s=t.primaryKeys.length;if(r.kindOf(n$370))if(e.changes)i=e.changes.objectAt(0).newData.type;else{var o=t.primaryKeys[0],l=this.getStoreIdForPrimaryKey(r,o),u=this._persistenceStore.readData(l);i=u.type}this.revertTransaction(e),r.handleAlertForOperationError&&r.handleAlertForOperationError(a)||n$368.sharedInstance.showErrorAlert({operation:a,failure:n$368.GENERIC,itemCount:s,type:i})}},attachChangesetDisablingHooks:function(e){this.disableChangesets(),e.finally(function(){this.enableChangesets(!0)}.bind(this))},commit:function(){var e=this.__s._1mLyKYiMsgJ$6j8$commit.apply(this,arguments);
if(!e)return e;var t=e.changes;if(!t)return e;var n=t.dependencies;if(n)return e;for(var i,r=!1,a=t.createIterator().retain();i=a.value;){var o=i.operation.name.toLowerCase();if(s(o)){r=!0;break}a.moveToNext()}return a.release(),r&&this.attachChangesetDisablingHooks(e),e},__superMap:{_1mLyKYiMsgJ$6AA$transactionDidFail:"transactionDidFail",_1mLyKYiMsgJ$6j8$commit:"commit"}}),a=r.create(),s=function(e){return"create"===e||"update"===e||"destroy"===e||"undelete"===e||"expunge"===e};n$323=a,n$429=s,r.__QUALIFIED_CLASS_NAME__="Photos.DataManager$415"}();
    
    
        
!function(){"use strict";var e=n$515.extend({init:function(){this.__s._iuipD7xmZr$GZ$init.apply(this,arguments),n$107(window,"beforeunload",function(e){if(!n$103.getPath("application.isExiting")){var t;return n$330.get("dataManager").get("isWritePending")?t=n$290("Alert.LeavingWhileSaving.Message"):n$517.get("sharedInstance").get("isUploading")?t=n$290("Alert.LeavingWhileUploading.Message"):n$518.get("sharedInstance").get("pendingDownloadCount")&&(t=n$290("Alert.LeavingWhileDownload.Message")),t&&(e.returnValue=t),t}}),n$107(document,"mousedown",function(){this._userClickCountSinceLoad++}.bind(this))},enableDebugPanel:n$9(n$211.bindingFor("enableDebugPanel")),_enableDebugPanelDidChange:n$7("enableDebugPanel",n$310.bindingFor("isICloud2Or3Or4"),function(e,t){e&&t&&n$519()}),run:function(){n$63.info("Running Photos Application"),this.set("rootViewController",n$520.create()),this.__s._iuipD7xmZr$tF$run.call(this),window.PhotosApp=this;var e=function(){n$310.get("isRunningInsideCloudOS")&&n$427.Unloading!==this.get("cloudOSState")&&this.didPrepareForLoad()}.bind(this);if(!n$298.getPath("server.url")){var t=this.get("rootViewController");return t.navigateToLibraryNotEnabled(),e(),void 0}n$323.initialStartup().then(e,e)},prepareForLoad:function(){this.__s._iuipD7xmZr$1Il$prepareForLoad.apply(this,arguments),this.run()},didBecomeSuspended:function(){this.__s._iuipD7xmZr$1gG$didBecomeSuspended.apply(this,arguments),n$489._cacheBleeder.appDidBecomeSuspended()},didBecomeActive:function(){this.__s._iuipD7xmZr$1lN$didBecomeActive.apply(this,arguments),n$489._cacheBleeder.appDidBecomeActive()
},_userInteractionLogger:n$4(function(){var e=n$209.create();return e.set("outputMessagePrefix","User Interaction: "),e}),logUserInteraction:function(){var e=this.get("_userInteractionLogger");e.info.apply(e,arguments),n$203.get("cloudOSService").recordStat("UserInteraction",{message:n$19.apply(this,arguments)})},handleException:function(e){this._insertRadarReportLink(e);try{var t=this.get("rootViewController");(!this._userClickCountSinceLoad||this._recordCrashAndIndicateWhetherInCrashLoop())&&t.set("stringifiedLastState",null),t.preventFurtherAppStateWrites()}catch(n){n$63.error(n+"")}this.__s._iuipD7xmZr$2HP$handleException.apply(this,arguments)},_userClickCountSinceLoad:0,_recordCrashAndIndicateWhetherInCrashLoop:function(){var e=Date.now();return function(){var t=n$200.get("sharedInstance");if(Date.now()-e>n$298.get("maxTimeBetweenCrashesToTreatAsCrashLoop"))return t.removeItem("Photos.recentCrashCount"),!1;var n=+t.getItem("Photos.recentCrashCount")+1||1;t.setItem("Photos.recentCrashCount",n);var i=n>=n$298.get("numRepeatedCrashesToTreatAsCrashLoop");return i&&t.removeItem("Photos.recentCrashCount"),i}}(),fatalExceptionHandlerClass:n$295.extend({createModifiedErrorBodyBeforeSend:function(e){return e.lastState=n$103.getPath("application.rootViewController.stringifiedLastState"),e.userInteractionLog=n$103.getPath("application._userInteractionLogger").stringifyRecordedLogMessages(),e.binFeedLog=JSON.stringify(n$373.binFeedLog),e}}),_insertRadarReportLink:function(e){try{if(n$310.get("isICloud2Or3Or4")){var t=window.parent.document,n=t.createElement("a");n.textContent="File Radar",n$160(n).set({"z-index":1e3,position:"absolute",bottom:10,right:10,color:"#F00",cursor:"pointer"}),t.body.appendChild(n),n.addEventListener("click",function(){var i=e.stack?e.stack.split("\n").shift():e,r="rdar://new/problem/"+n$259.formatQuery({componentid:565148,title:i,description:t.querySelector("body > .cw-alert textarea").value}).replace(/^\?/,"");
n.href=r})}}catch(i){n$63.error(i+"")}},rootViewController:n$9(),isRestarting:n$9(!1),isExiting:n$9({readOnly:!0,dependencies:["cloudOSState"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===n$427.Unloading}}),areKeyboardShortcutsDisabled:n$9(!1),isUserOverQuota:n$9(n$203.bindingFor("cloudOSService.environment.isUserOverQuota")),exitedDate:n$9(),iCloudPhotoLibraryWasExited:n$9({cacheable:!0,readOnly:!0,dependencies:["exitedDate"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!r}}),dateUpdated:n$9({cacheable:!0,readOnly:!0,dependencies:[n$330.bindingFor("dataManager.didIngestChangeset"),"isRestarting"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!s&&r&&this._dateUpdated||(this._dateUpdated=new Date),this._dateUpdated}}),_dateUpdated:null,isCreateAllowed:n$9({readOnly:!0,cacheable:!0,dependencies:["isRestarting","iCloudPhotoLibraryWasExited","isUserOverQuota"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a||s||r?!1:!0}}),isUpdateAllowed:n$9({readOnly:!0,cacheable:!0,dependencies:["isRestarting","iCloudPhotoLibraryWasExited","isUserOverQuota"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a||s||r?!1:!0}}),isDeleteAllowed:n$9({readOnly:!0,cacheable:!0,dependencies:["isRestarting","iCloudPhotoLibraryWasExited"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||r?!1:!0
}}),isDownloadAllowed:n$9({readOnly:!0,cacheable:!0,dependencies:["isRestarting"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?!1:!0}}),isEmailAllowed:n$9({readOnly:!0,dependencies:["isRestarting",n$203.bindingFor("currentUser")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||!r.isServiceActive("mail")?!1:!0}}),isSharingAllowed:n$9({readOnly:!0,dependencies:["isRestarting"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?!1:!0}}),_iCloudPhotoLibraryWasExitedDidChange:n$7("iCloudPhotoLibraryWasExited",function(e){var t=n$203.get("cloudOSService");if(e&&!this._exitedBanner){this._exitedBanner={};var n=n$516.get("sharedInstance");this._exitedBanner.observer=n.observe("today",function(e){var n=this.get("exitedDate"),i=Math.max(30-Math.round(Math.abs(+e-n)/864e5),1);if(this._exitedBanner.daysRemaining!==i){var r;r=1===i?n$290("Banner.ExitedHyperion.SingleDayRemaining.Description"):n$290("Banner.ExitedHyperion.MultipleDaysRemaining.Description",{daysRemaining:i});var s={title:n$290("Banner.ExitedHyperion.Title"),description:r,optionalLink:{text:n$290("Banner.ExitedHyperion.LinkText"),url:"http://support.apple.com/kb/HT6378"}};t.setAppBanner(s)}this._exitedBanner.daysRemaining=i}.bind(this))}else!e&&this._exitedBanner&&(t.setAppBanner(null),this._exitedBanner.observer.disconnect(),this._exitedBanner=null)}),_clearServerCaches:function(){var e=n$470.create({url:n$373.createURL("/internal/control"),method:"POST",body:{action:"clearCache",clearL1Cache:!0,clearL2Cache:!0}});e.on(n$274,function(){alert("cache clear succeeded")
}),e.on(n$269,function(){alert("cache clear failed")}),e.send()},__superMap:{_iuipD7xmZr$GZ$init:"init",_iuipD7xmZr$tF$run:"run",_iuipD7xmZr$1Il$prepareForLoad:"prepareForLoad",_iuipD7xmZr$1gG$didBecomeSuspended:"didBecomeSuspended",_iuipD7xmZr$1lN$didBecomeActive:"didBecomeActive",_iuipD7xmZr$2HP$handleException:"handleException"}});n$897=e,e.__QUALIFIED_CLASS_NAME__="Photos.App"}();
    
    
        
!function(){"use strict";var e=n$110.extend({isMobile:void 0,isAndroid:void 0,isiPadNonRetina:void 0,isDesktop:void 0,screenDimensions:n$9({readOnly:!0,get:function(){return{width:this._screenWidth,height:this._screenHeight}}}),browserDimensions:n$9({readOnly:!0,get:function(){return{width:this._browserWidth,height:this._browserHeight}}}),init:function(e){var t=e&&e.userAgent;t||(t=window.navigator.userAgent),this.__s._4bru4pRZ47z$ZU$init.apply(this,arguments);var n=this;t=t.toLowerCase(),this.isAndroid=-1!==t.indexOf("android"),this.isMobile=-1!==t.indexOf("mobile")||this.isAndroid,this.isDesktop=this.isMac||this.isWindows,this.isiPadNonRetina=this.isiPad&&1===window.devicePixelRatio,this.setDeviceDimensions(),this.listen(".devicePixelRatio",function(){n.setDeviceDimensions()}),window.addEventListener("resize",function(){n.setDeviceDimensions()})},setDeviceDimensions:function(){var e=this.get("devicePixelRatio"),t=(screen.width||window.innerWidth)*e,n=(screen.height||window.innerHeight)*e,i=window.innerWidth*e,r=window.innerHeight*e;(t!==this._screenWidth||n!==this._screenHeight)&&(this._screenWidth=t,this._screenHeight=n,this.propertyChanged("screenDimensions")),(i!==this._browserWidth||r!==this._browserHeight)&&(this._browserWidth=i,this._browserHeight=r,this.propertyChanged("browserDimensions"))},__superMap:{_4bru4pRZ47z$ZU$init:"init"}}).create();n$522=e}();
    
    
        
!function(){"use strict";var e={getInstantiated:function(e){var t=this.get(e);return t&&t.isClass&&(t=t.create(this._ownerMixin),this.set(e,t)),t},_ownerMixin:n$514(function(){return{owner:this}})};n$521=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$136,n$521,{nextResponder:null,items:n$424(Array),layout:function(){},owner:n$9()});n$523=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarConfiguration"}();
    
    
        
!function(){"use strict";var e={configuration:n$9(),configurationClass:n$5,transitionToConfiguration:function(e){var t=this.configurationClass;e&&!e.instanceOf(t)&&n$11(this.constructor.toString()+" can only be configured with "+t.toString()+"."),this.set("configuration",e)}};n$524=e}();
    
    
        
!function(){"use strict";function e(e,t,n){return">="===t?Math.max(e,n):"<="===t?Math.min(e,n):(n$11("Unknown operator in layout plan: "+t,{left:e,right:n}),void 0)}var t=n$5.extend({width:0,height:0,items:null,init:function(){this.items=[],this.__s._36T9UKHG5d3$P7$init.apply(this,arguments)},addItem:function(e,t,n){var i=r.create(this,e);return t||(t={left:0,top:0,width:0,height:0}),i.reset(t,n),this.items.push(i),this[e]=i,i},reset:function(){var e,t=this.items,n=t.length;for(e=0;n>e;e++)t[e].reset()},__superMap:{_36T9UKHG5d3$P7$init:"init"}}),n=n$28.extend({initializeMember:function(e,t){var n=this.get,i=this.set;if(!n||!i){var r="_"+t;n||(n=function(){return this[r]}),i||(i=function(e){this[r]=e})}return Object.defineProperty(e,t,{get:n,set:i}),null}}),i=function(e){return n.create(e)},r=n$5.extend({_left:0,_top:0,_width:0,_height:0,_right:0,_bottom:0,init:function(e,t){this.plan=e,this.key=t,this.__s._36T9UKHG5d3$144$init.call(this)},reset:function(e,t){if(e){var n=0,i=0,r=0,s=0;n=e.left,i=e.top,r=e.width,s=e.height,t&&(n-=t.left,i-=t.top),this._initialLeft=n,this._initialTop=i,this._initialWidth=r,this._initialHeight=s}this._left=this._initialLeft,this._top=this._initialTop,this._width=this._initialWidth,this._height=this._initialHeight,this._right=this._left+this._width,this._bottom=this._top+this._height},widthHasChanged:i({get:function(){return this._width!==this._initialWidth}}),heightHasChanged:i({get:function(){return this._height!==this._initialHeight}}),centerHorizontally:function(e,t){var n=0,i=0;"number"==typeof e?(t=e,n=this.plan.width):e?(n=e._width,i=e._left):n=this.plan.width,t||(t=0);
var r=i+n/2-this._width/2+t;this._left=r,this._right=r+this._width},centerVertically:function(e,t){var n=0,i=0;"number"==typeof e?(t=e,n=this.plan.height):e?(n=e._height,i=e._top):(e=this.plan,n=this.plan.height),t||(t=0);var r=i+n/2-this._height/2+t;this._top=r,this._bottom=r+this._height},resizeSoThatLeft:function(t,n){var i=e(this._left,t,n);this._left=i,this._width=this._right-this._left},resizeSoThatRight:function(t,n){var i=e(this._right,t,n);this._right=i,this._width=this._right-this._left},resizeSoThatTop:function(t,n){var i=e(this._top,t,n);this._top=i,this._height=this._bottom-i},resizeSoThatBottom:function(t,n){var i=e(this._bottom,t,n);this._bottom=i,this._height=i-this._top},moveSoThatLeft:function(t,n){var i=e(this._left,t,n);this._left=i,this._right=i+this._width},moveSoThatRight:function(t,n){var i=e(this._right,t,n);this._right=i,this._left=i-this._width},moveSoThatTop:function(t,n){var i=e(this._top,t,n);this._top=i,this._bottom=i+this._height},moveSoThatBottom:function(t,n){var i=e(this._bottom,t,n);this._bottom=i,this._top=i-this._height},moveLeftSoThatWidth:function(t,n){var i=e(this._width,t,n);this._width=i,this._left=this._right-i},moveRightSoThatWidth:function(t,n){var i=e(this._width,t,n);this._width=i,this._right=this._left+i},moveTopSoThatHeight:function(t,n){var i=e(this._height,t,n);this._height=i,this._top=this._bottom-i},moveBottomSoThatHeight:function(t,n){var i=e(this._height,t,n);this._height=i,this._bottom=this._top+i},reduceWidthBy:function(e,t){var n=this._width,i=Math.max(n-e,t);return this.width=i,e-(n-i)},reduceHeightBy:function(e,t){var n=this._height,i=Math.max(n-e,t);
return this.height=i,e-(n-i)},setLeft:function(e){this._left=e,this._right=e+this._width},setRight:function(e){this._right=e,this._left=e-this._width},setTop:function(e){this._top=e,this._bottom=e+this._height},setBottom:function(e){this._bottom=e,this._top=e-this._height},setWidth:function(e){this.setWidthFromLeft(e)},setWidthFromLeft:function(e){this._width=e,this._right=this._left+e},setWidthFromRight:function(e){this._width=e,this._left=this._right-e},setHeight:function(e){this.setHeightFromTop(e)},setHeightFromTop:function(e){this._height=e,this._bottom=this._top+e},setHeightFromBottom:function(e){this._height=e,this._top=this._bottom-e},left:i({set:function(e){this.setLeft(e)}}),right:i({set:function(e){this.setRight(e)}}),top:i({set:function(e){this.setTop(e)}}),bottom:i({set:function(e){this.setBottom(e)}}),width:i({set:function(e){this.setWidth(e)}}),height:i({set:function(e){this.setHeight(e)}}),__superMap:{_36T9UKHG5d3$144$init:"init"}});n$525=t,n$947=r,t.__QUALIFIED_CLASS_NAME__="CWE.Layout.Plan",n.__QUALIFIED_CLASS_NAME__="CWE.Layout.NativeProperty$421",r.__QUALIFIED_CLASS_NAME__="CWE.Layout.PlanItem"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],minimumWidth:n$9(0),preferredWidth:n$17(n$81),width:n$9("auto"),displayWidth:n$9({readOnly:!0,cacheable:!0,dependencies:["width"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return"auto"===r?"auto":r+"px"}})};n$527=e}();
    
    
        
!function(){"use strict";function e(e,t){return function(){if(!this[e]){this[e]=!0;var n=t.apply(this,arguments);return this[e]=!1,n}}}n$529=e}();
    
    
        
!function(){"use strict";function e(e,n,i,r){t(i);var s=i.get("rect");if(i.instanceOf(n$527)&&(s={left:s.left,top:s.top,width:s.width,height:s.height},s.width=i.get("preferredWidth")),e.hasOwnProperty(n))e[n].reset(s,r);else{var a=e.addItem(n,s,r);i.layoutItem=a,a.view=i}}function t(e){var t=e.get("style");t.translate(0,0).set("height",null),e.instanceOf(n$527)||t.set("width",null)}function n(e,t,n){var i=t.getInstantiated(n);if(i&&i.instanceOf&&i.instanceOf(n$193))return i;var r=i;return i=e.getInstantiated(n),i||n$11("Could not find a toolbar item for key: "+n,{toolbar:e,toolbarConfiguration:t}),r&&(i.instanceOf(n$524)||n$11("Toolbar item has a configuration but is not configurable",{toolbar:e,toolbarConfiguration:t,itemConfiguration:r,item:i}),i.transitionToConfiguration(r)),i}function i(e,t,n){var i=t.get(n);return i&&i.instanceOf&&i.instanceOf(n$193)?i:(i=e.get(n),i||n$11("Could not find a toolbar item for key: "+n,{toolbar:e,configuration:t}),i)}var r=n$193.extend(n$524,n$521,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"_items"}],classes:["photos-toolbar"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:"px",property:"height"}}}},height:n$9(n$211.bindingFor("toolbarHeight")),_views:null,nextResponder:n$4({get:function(e){return e?e:this.get("configuration")}}),init:function(){this._currentItems={},this._currentItemsSwap={},this._views={},this.__s._1MCsm90t4LB$PL$init.apply(this,arguments)},attachMayResizeListener:n$7("isAttached",function(e){e?window.addEventListener("resize",this.viewMayHaveResized):window.removeEventListener("resize",this.viewMayHaveResized)
}),viewMayHaveResized:n$528(function(){this.updateLayout()}),configurationClass:n$523,configurationItemsDidChange:n$7("configuration.items","isAttached",function(e,t){e&&t&&this.update()}),update:function(){this.updateItems(),this.updateInitialMeasurements(),this.updateLayout()},updateItems:n$529("_isUpdating",function(){var e,t,i,r,s,a,o,l,h,u,d,c,p,g,f,_;if(i=this._currentItems,t=this._currentItemsSwap,r=null,u=this._views,f=[],_=[],e=this.get("configuration"),o=this.get("_items"),l=n$525.create(),h=this.get("rect"),!h)return this._layoutPlan=null,void 0;if(e)for(r=e.get("items"),c=r.length,d=0;c>d;d++)p=r[d],a=n(this,e,p),g=n$22(a),s=i[g],s?delete i[g]:_.push(a),t[n$22(a)]=a,u[p]=a,a.instanceOf(n$527)&&f.push(a);for(n$66.pause(),c=_.length,d=0;c>d;d++)a=_[d],o.push(a);for(p in i)i.hasOwnProperty(p)&&(s=i[p],o.remove(s),delete i[p],delete u[p]);n$66.resume(),this._currentItemsSwap=i,this._currentItems=t,this._layoutPlan=l;var v=f.reduce(function(e,t){return e+"."+n$22(t)},"");if(this._preferredWidthObserverCacheKey!==v){this._preferredWidthObserverCacheKey=v;var $=f.map(function(e){return e.bindingFor("preferredWidth")}),m=this._preferredWidthObserver;m&&(m.disconnect(),this._preferredWidthObserver=null),$.push(this.preferredWidthsDidChange),this._preferredWidthObserver=this.listen.apply(this,$)}}),updateInitialMeasurements:function(){var t,n,r,s,a,o,l,h;if(t=this.get("configuration"),n=this._layoutPlan,r=this.get("rect"),n||(this.updateItems(),n=this._layoutPlan),n){if(!r)return this._layoutPlan=null,void 0;if(t)for(s=t.get("items"),a=s.length,o=0;a>o;o++)l=s[o],h=i(this,t,l),e(n,l,h,r)
}},updateLayout:function(){var e,t,n,r;if(e=this.get("configuration"),t=this._layoutPlan,n=this.get("rect"),r=n$522.get("devicePixelRatio"),e&&n&&(t||(this.updateItems(),this.updateInitialMeasurements(),t=this._layoutPlan),t)){t.reset(),t.width=n.width,t.height=n.height,e.layout(t,this._views);var s,a,o,l,h,u,d;for(s=t.items,a=this._views,o=s.length,l=0;o>l;l++)h=s[l],u=i(this,e,h.key),d=u.get("style"),d.translate(Math.round(h.left*r)/r,0).set("position","absolute").set("left",0),u.instanceOf(n$527)?u.set("width",Math.ceil(h.width)):h.widthHasChanged?d.set("width",Math.ceil(h.width)):d.clear("width"),h.heightHasChanged?d.set("height",Math.ceil(h.height)):d.clear("height")}},preferredWidthsDidChange:function(){this._isUpdating||(this.updateInitialMeasurements(),this.updateLayout())},__superMap:{_1MCsm90t4LB$PL$init:"init"}});n$674=r,r.__QUALIFIED_CLASS_NAME__="Photos.ToolbarView"}();
    
    
        
!function(){"use strict";function e(e){return n$9({dependencies:[e,"_isReversed"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGet(this,t[0+n]),a=i.internalGet(this,t[1+n]);if(!a)return r;if(r._slider_reversedTween)return r._slider_reversedTween;var s=r._slider_reversedTween=function(e){return 1-r(e)};return s}})}function t(e,t){return e-t}function n(e){return e}var i=n$110.sharedInstance,r=n$193.extend(n$395,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["cw-slider-track"],name:"track"},{type:"ELEMENT",tagname:"div",children:[],classes:["cw-slider-handle"],name:"handle"}],classes:["cw-slider",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasLeftIcon",truevalue:"cw-has-left-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasRightIcon",truevalue:"cw-has-right-icon",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isVertical",truevalue:"cw-vertical",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHorizontal",truevalue:"cw-horizontal",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isBeingDragged",truevalue:"cw-being-dragged",attributes:{}}],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},tooltip:n$9(""),hasLeftIcon:n$9(!1),hasRightIcon:n$9(!1),pointerPadding:n$9(),isBeingDragged:n$9({readOnly:!0,dependencies:["_currentDragOffset"],get:function(e,t,n,i){return!isNaN(i.internalGetPath(this,t[0+n]))}}),step:n$9(0),minValue:n$9(0),maxValue:n$9(1),value:n$9(.5),handleLength:n$9(0),trackLength:n$9(0),handlePositionTween:n$9(),isVertical:n$9(!1),isHorizontal:n$9({dependencies:["isVertical"],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])
},set:function(e,t,n,i){n[0+i]=!e},writeDependencySetPathMap:[!1]}),isScrollingEnabled:n$9(!0),layoutMayHaveChanged:function(){this._measureSelf()},intervals:n$9(),notchValues:n$9(),notchSnapDistance:2,_isReversed:n$9({readOnly:!0,dependencies:["minValue","maxValue"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>i.internalGetPath(this,t[1+n])}}),_minValue:n$9({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[2+n]):i.internalGetPath(this,t[1+n])}}),_maxValue:n$9({readOnly:!0,dependencies:["_isReversed","minValue","maxValue"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):i.internalGetPath(this,t[2+n])}}),_notchPositions:n$9({cacheable:!0,readOnly:!0,dependencies:["notchValues","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween"],get:function(e,n,i,r){var a=r.internalGetPath(this,n[0+i]),s=r.internalGetPath(this,n[1+i]),o=r.internalGetPath(this,n[2+i]);if(!a)return[];var l,e,u=[],c=a.length;for(l=0;c>l;l++)e=a[l],+e!==e||s>=e||e>=o||u.push(this._rawIdealHandlePositionForValue(e,s,o,r.internalGetPath(this,n[3+i]),r.internalGetPath(this,n[4+i])));return u.sort(t),u}}),_scaledHandlePositionTween:n$9({readOnly:!0,dependencies:["handlePositionTween"],get:function(e,t,i,r){var a=r.internalGetPath(this,t[0+i]);if(a||(a=n),a._slider_scaledTween)return a._slider_scaledTween;var s=a(0),o=a(1);(s!==+s||o!==+o||s===o)&&n$11("Function ƒ used for handlePositionTween must return numbers, and ƒ(0) cannot equal ƒ(1).",{fOf0:s,fOf1:o,tweenFunction:a});
var l=a._slider_scaledTween=function(e){return(a(e)-s)/(o-s)};return l}}),_handlePositionTween:e("_scaledHandlePositionTween"),_inverseScaledHandlePositionTween:n$9({readOnly:!0,dependencies:["_scaledHandlePositionTween"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r._slider_inverseTween)return r._slider_inverseTween;var a=r._slider_inverseTween=function(e){var t,n,i,a=0,s=1,o=1e-7;do n=(s+a)/2,i=r(n),t=i-e,0>t?a=n:s=n;while(t>o||-o>t);return n};return a}}),_inverseHandlePositionTween:e("_inverseScaledHandlePositionTween"),_handleTravel:n$9({readOnly:!0,dependencies:["handleLength","trackLength"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])-i.internalGetPath(this,t[0+n])}}),_rawIdealHandlePositionForValue:function(e,t,n,i,r){return r((e-t)/(n-t))*i},_idealHandlePositionForValue:function(e){return this._rawIdealHandlePositionForValue(e,this._minValue,this._maxValue,this._handleTravel,this._inverseHandlePositionTween)},_rawIdealValueForHandlePosition:function(e,t,n,i,r){return r(e/i)*(n-t)+t},_idealValueForHandlePosition:function(e){return this._rawIdealValueForHandlePosition(e,this._minValue,this._maxValue,this._handleTravel,this._handlePositionTween)},_handlePosition:n$9({dependencies:["value","_minValue","_maxValue","_handleTravel","_inverseHandlePositionTween",i.bindingFor("devicePixelRatio")],writeDependencies:["value"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]),e=Math.max(r,Math.min(a,i.internalGetPath(this,t[0+n]))),s=i.internalGetPath(this,t[3+n]),o=i.internalGetPath(this,t[4+n]),l=i.internalGetPath(this,t[5+n]),u=this._rawIdealHandlePositionForValue(e,r,a,s,o);
return u=Math.round(u*l)/l,u=Math.max(0,Math.min(s,u))},set:function(e,t,n,i){var r=this._minValue,a=this._maxValue,s=this._handleTravel,o=this._handlePositionTween,l=this.step;e=Math.max(0,Math.min(s,e));var u=this._rawIdealValueForHandlePosition(e,r,a,s,o);l&&(u=Math.round((u-r)/l)*l+r),u=Math.max(Math.min(u,a),r);var c=this.intervals;if(c)for(var h=c.length;h;){h-=2;var d=c[h+1],_=c[h],f=h?c[h-1]:-1/0;if(d>=u&&u>=_)break;if(u>f){u=u>d?d:Math.abs(u-_)<Math.abs(u-f)?_:f;break}if(!h&&_>u){u=_;break}}n[0+i]=u},writeDependencySetPathMap:[!1]}),_transformPositionKey:n$9({readOnly:!0,dependencies:["isHorizontal"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?"translateX":"translateY"}}),_measurementLengthKey:n$9({readOnly:!0,dependencies:["isHorizontal"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?"offsetWidth":"offsetHeight"}}),_getPositionFromEvent:function(e){var t=this.element.getBoundingClientRect();return this.isHorizontal?e.clientX-t.left:this.trackLength-(e.clientY-t.top)},pointerDown:function(e){if(this.__s._33c3SJsqkU2$6Xl$pointerDown.apply(this,arguments),!this.isDisabled){var t=this._getPositionFromEvent(e);this._prepareForDrag(t);var n=-this._currentDragOffset;return e.target!==this.handle&&(0>n||n>this.handleLength)&&this._jumpToCursor(t),!0}},pointerMove:function(e){return this.__s._33c3SJsqkU2$6sC$pointerMove.apply(this,arguments),this.isDisabled?void 0:(this._moveDrag(this._getPositionFromEvent(e)),!0)},pointerUp:function(e){return this.__s._33c3SJsqkU2$6vy$pointerUp.apply(this,arguments),this.isDisabled?void 0:(this._endDrag(this._getPositionFromEvent(e)),!0)
},wheel:function(e){if(!this.isDisabled&&this.isScrollingEnabled&&(e.preventDefault(),!this.isBeingDragged)){var t=n$109.getPath("sharedInstance.isMac")?-1:1,n=this._minValue,i=this._maxValue,r=this.value,a=Math.max(0,Math.min(1,(r-n)/(i-n))),s=this._inverseHandlePositionTween(a),o=s+(-e.deltaX+e.deltaY)/1e3*t,l=this._handlePositionTween(Math.max(0,Math.min(1,o))),u=n+l*(i-n);return r!==u&&(this.value=u),!0}},_currentDragOffset:n$9(0/0),_prepareForDrag:function(e){this._currentDragOffset=this._handlePosition-e},_moveDrag:function(e){if(this.isBeingDragged){for(var t,n=e+this._currentDragOffset,i=this._notchPositions,r=this.notchSnapDistance,a=i.length;a--;)t=i[a],Math.abs(t-n)<r&&(n=t);this._handlePosition=n}},_endDrag:function(){this._currentDragOffset=0/0},_endDragWhenBecomesDisabled:n$7("isDisabled",function(e){e&&this.isBeingDragged&&this._endDrag()}),_jumpToCursor:function(e){this._currentDragOffset=0|-this.handleLength/2,this._moveDrag(e)},_positionHandle:n$7("_handlePosition","isVertical","_handleTravel","_transformPositionKey",function(e,t,n,i){n$160(this.handle)[i](+e===e?t?n-e:e:n/2)}),_measureSelf:n$7("isAttached","_measurementLengthKey",function(e,t){e&&n$275.begin().setIfChanged(this,"handleLength",this.handle[t]).setIfChanged(this,"trackLength",this.element[t]).end()}),_maintainPointerPaddingElement:n$7("pointerPadding",function(e){var t=0|(e&&e.left),n=0|(e&&e.top),i=0|(e&&e.right),r=0|(e&&e.bottom),a=this._pointerPaddingElement;t||n||i||r?(a||(a=this._pointerPaddingElement=document.createElement("div")),n$160(a).set("position","absolute").set("left",-t).set("top",-n).set("right",-i).set("bottom",-r),a.parentNode||this.element.appendChild(a)):a&&a.parentNode&&this.element.removeChild(a)
}),__superMap:{_33c3SJsqkU2$6Xl$pointerDown:"pointerDown",_33c3SJsqkU2$6sC$pointerMove:"pointerMove",_33c3SJsqkU2$6vy$pointerUp:"pointerUp"}});n._slider_scaledTween=n,n._slider_inverseTween=n,n$531=r,r.__QUALIFIED_CLASS_NAME__="CW.UI.SliderView"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{isDisabled:n$9(!1),tooltip:n$9(""),value:n$9(0/0),minValue:n$9(0/0),maxValue:n$9(0/0),notchValues:n$9(),handlePositionTween:n$9(),step:n$9(0/0),isScrollingEnabled:n$9(!0),owner:n$9()}),t=e.extend({actualPixelsValue:n$9(0/0)}),n=t.extend({gridViewController:n$9(),maxValue:n$14("gridViewController.minimumColumnCount"),minValue:n$14("gridViewController.maximumColumnCount"),value:n$14("gridViewController.preferredColumnCount"),isDisabled:n$14("gridViewController.isEmpty"),step:1,isScrollingEnabled:!1});n$532=e,n$533=t,n$822=n,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarSliderConfiguration",t.__QUALIFIED_CLASS_NAME__="Photos.ToolbarZoomSliderConfiguration",n.__QUALIFIED_CLASS_NAME__="Photos.ToolbarFlexibleGridZoomSliderConfiguration"}();
    
    
        
!function(){"use strict";var e=n$531.extend(n$524,{isDisabled:n$9({readOnly:!0,dependencies:["configuration.isDisabled",n$103.bindingFor("application.isRestarting")],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}}),tooltip:n$9(n$14("configuration.tooltip")),notchValues:n$9(n$14("configuration.notchValues")),value:n$9(n$14("configuration.value")),minValue:n$9(n$14("configuration.minValue")),maxValue:n$9(n$14("configuration.maxValue")),step:n$9(n$14("configuration.step")),handlePositionTween:n$9(n$14("configuration.handlePositionTween")),isScrollingEnabled:n$9(n$14("configuration.isScrollingEnabled")),configurationClass:n$532},{additionalClassNames:["photos-toolbar-slider"],marginLeft:30,marginRight:40}),t=e.extend({actualPixelsValue:n$9(n$14("configuration.actualPixelsValue")),_maintainHandleReadout:n$7("value","actualPixelsValue","minValue","maxValue",function(e,t,n){if(e&&t&&(e!==n&&this._bringUpHandleReadout(),this._readoutElement)){var i=Math.round(100*(e/t)),r=i?1===e?n$290("Toolbar.OneUp.ZoomSlider.FitsInWindow"):i+"%":"";this._readoutElement.textContent=r,this._readoutElement.classList.toggle("percentage","%"===r.slice(-1))}}),_bringUpHandleReadout:function(){var e=this._readoutElement;e||(this._readoutElement=e=document.createElement("div"),e.classList.add("handle-readout"),this.get("handle").appendChild(e)),n$160(e).set("opacity",1),this._readoutDeathTimeout&&clearTimeout(this._readoutDeathTimeout),this._readoutDeathTimeout=n$130(this._killHandleReadout,1e3)},_killHandleReadout:n$299(function(){var e=this._readoutElement;
e&&n$160(e).set("opacity",0)}),configurationClass:n$533});n$948=e,n$675=t,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarSlider",t.__QUALIFIED_CLASS_NAME__="Photos.ToolbarZoomSlider"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{isDisabled:n$9(!1),target:n$9(),event:n$9(),tooltip:n$9(),owner:n$9()});n$535=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarButtonConfiguration"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$524],isDisabled:n$9({readOnly:!0,dependencies:["configuration.isDisabled",n$103.bindingFor("application.isRestarting")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||r}}),target:n$9(n$14("configuration.target")),event:n$9(n$14("configuration.event")),tooltip:n$9(n$14("configuration.tooltip")),configurationClass:n$535};n$536=e}();
    
    
        
!function(){"use strict";var e={additionalClassNames:["photos-toolbar-button"],marginLeft:10,marginRight:10};n$537=e}();
    
    
        
!function(){"use strict";var e=n$400.extend(n$536,n$537);n$538=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarButton"}();
    
    
        
!function(){"use strict";var e=n$508.extend(n$536,n$537,{marginLeft:0,marginRight:0});n$676=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarToggleButton"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[],classes:["photos-toolbar-separator"]}},marginLeft:10,marginRight:10});n$677=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarSeparator"}();
    
    
        
!function(){"use strict";var e=n$538.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"input",children:[],styles:{display:"none"},attributes:{type:"file",accept:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"accept",attributes:{},attribute:"accept"},multiple:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"multiple",attributes:{},attribute:"multiple"}}}],classes:["photos-toolbar-file-input-button"]}}},accept:n$9(n$298.bindingFor("allowedUploadFileTypes")),multiple:n$9("true"),change:function(e){var t=e.target.files;t&&t.length&&(this.callAction(t),e.target.value=null)},willCallActionFromPointerUp:function(){if(!n$310.get("hasXHRUploadSupport")){var e=n$368.get("sharedInstance");return e.showSimpleAlert(n$290("Alert.Upload.Not.Supported.Browser.Message"),n$290("Alert.Upload.Not.Supported.Browser.Description")),!1}var t=this.get("element"),n=t.children[0];return n.click(),!1}});n$678=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarFileInputButton"}();
    
    
        
!function(){"use strict";var e=n$535.extend({asset:n$9()});n$679=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarAssetMetadataButtonConfiguration"}();
    
    
        
!function(){"use strict";var e=n$535.extend({folder:n$9()});n$680=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarFolderMetadataButtonConfiguration"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$527],maxSizeMode:null,widthPadding:0,measuredSizes:n$9({readOnly:!0,cacheable:!0,dependencies:["isAttached","valueDidChange","didRender"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=[];if(!r||this._isMeasuring)return s;this._isMeasuring=!0;var a=0,o=this.maxSizeMode;for(a=0;o>=a;a++)s.push(this._measureSizeMode(a));return this.set("_measuringSizeMode",-1),this._isMeasuring=!1,s}}),displaySize:n$9({readOnly:!0,cacheable:!0,dependencies:["width","measuredSizes"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(!r||0===r.length)return 0;if("auto"===s)return r[r.length-1];for(var a=r.length-1;a>=0;a--)if(r[a]<=s)return r[a];return s}}),chosenSizeMode:n$9({readOnly:!0,cacheable:!0,dependencies:["width","measuredSizes"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(!r||0===r.length)return 0;if("auto"===s)return r.length-1;for(var a=r.length-1;a>=0;a--)if(r[a]<=s)return a;return 0}}),preferredWidth:n$9({readOnly:!0,dependencies:["measuredSizes"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 0===r.length?0:r[r.length-1]}}),minimumWidth:n$9({readOnly:!0,dependencies:["measuredSizes"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 0===r.length?0:r[0]}}),sizeMode:n$9({readOnly:!0,dependencies:["chosenSizeMode","_measuringSizeMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return 0>r?s:r}}),_measuringSizeMode:n$9(-1),_measureSizeMode:function(e){return this.set("_measuringSizeMode",e),this.measureWidth()
},_displayWidthDidChange:n$7("displayWidth",function(e){this.get("style").set("width",e)}),measureWidth:function(){var e=this.get("style"),t=e.getInline("width");e.set("width","auto");var n=Math.ceil(this.get("element").getBoundingClientRect().width);return e.set("width",t),n+this.get("widthPadding")}};n$540=e}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$524,n$540,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{signal:"titleDidRender"}}],name:"titleElement",classes:["title"]},{type:"ELEMENT",tagname:"br",children:[]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{signal:"subtitleDidRender"}}],name:"subtitleElement",classes:["subtitle"]}],classes:["title-wrapper"]}],classes:["photos-toolbar-title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"hasSubtitle",truevalue:"has-subtitle",falsevalue:"has-no-subtitle",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldWrap",truevalue:"photos-should-wrap",attributes:{signal:"shouldWrapDidRender"}}]}},widthPadding:n$109.get("sharedInstance").isIE?3:0,shouldWrap:!0,hasSubtitle:n$9({readOnly:!0,dependencies:["subtitle"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!r}})});n$545=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarTitle"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{asset:n$9()});n$546=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarAssetMetadataConfiguration"}();
    
    
        
!function(){"use strict";var e=function(t,n){if(t){if(!t.getFullYear)throw new TypeError("Object passed to date formatter was not a date!");isNaN(t.getTime())&&n$11("Invalid date passed to date formatter")}else n$11("No date passed to date formatter.");n||n$11("No formatting string passed to date formatter. Date: "+t);for(var i=n.length,r=n[0],s=1;i>s;s++)n[s]!==r&&n$11("Invalid format string for a date; all characters mustbe the same: "+n+"; date: "+t);var o=e[r];return o||n$11("Formatter `"+r+"` not supported for date: "+t),o(t,i)};e.G=function(e,t){var n="Date.Era.";return n+=e.getFullYear()>=0?"AD":"BC",3>=t?n$290(n+".Abbreviated"):4===t?n$290(n+".Full"):5===t?n$290(n+".Letter"):(n$11("Invalid era format: Expected at most 5 digits; found "+t+"."),void 0)},e.y=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=Math.abs(n).toString();i.length<t;)i="0"+i;return i=i.substr(i.length-t)},e.Y=e.y,e.u=function(e,t){var n=e.getFullYear();1===t&&(t=n.length);for(var i=e.getFullYear()<0,r=Math.abs(n).toString();r.length<t;)r="0"+r;return r=r.substr(r.length-t),(i?"-":"")+r},e.Q=function(e,t,n){var i=e.getMonth(),r=Math.floor(i/3)+1,s="Date.Quarter."+(n?"StandAlone.":"")+"Q"+r;return 1===t?""+r:2===t?"0"+r:3===t?n$290(s+".Abbreviated"):4===t?n$290(s+".Full"):(n$11("Unrecognized number of characters for quarter: "+t),void 0)},e.q=function(t,n){return e.Q(t,n,!0)},e.ENGLISH_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],e.M=function(t,n,i){var r=t.getMonth(),s=""+(r+1),o="Date.Month."+(i?i:"")+e.ENGLISH_MONTH_NAMES[r];
return 1===n?s:2===n?(s.length<2&&(s="0"+s),s):3===n?n$290(o+".Abbreviated"):4===n?n$290(o+".Full"):5===n?n$290(o+".Letter"):(n$11("The # of Ms or Ls must be 1 to 5. Supplied: "+n),void 0)},e.L=function(t,n){var i="StandAlone.";return e.M(t,n,i)},e.P=function(t,n){var i="Prepositional.";return e.M(t,n,i)},e.d=function(e,t){var n=""+e.getDate();return t>n.length&&(n="0"+n),n},e.D=function(e,t){var n=new Date(e.getFullYear(),0,1),i=n.getTime(),r=e.getTime()-i,s=Math.floor(r/864e5)+1;for(s=""+s;s.length<t;)s="0"+s;return s},e.ENGLISH_DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.E=function(t,n){return 3>n&&(n=3),e.e(t,n)},e.e=function(t,n,i){var r=t.getDay(),s=""+(r+1),o="Date.Day."+(i?"StandAlone.":"")+e.ENGLISH_DAY_NAMES[r];return 1===n?s:2===n?s="0"+s:3===n?n$290(o+".Abbreviated"):4===n?n$290(o+".Full"):5===n?n$290(o+".Letter"):(n$11("Unrecognized number of `e`s, `c`s, or `E`s in date format string."),void 0)},e.c=function(t,n){return e.e(t,n,!0)},e.a=function(e,t){1!==t&&n$11("`a` can only be included in a date format string once.");var n="Date.Period."+(e.getHours()>11?"PM":"AM");return n$290(n)},e._h=function(e,t,n,i){var r=e.getHours();n||(r%=12),i&&(n?0===r&&(r=24):0===r&&(r=12));var s=""+r;return s.length<t&&(s="0"+s),s},e.h=function(t,n){return e._h(t,n,!1,1)},e.H=function(t,n){return e._h(t,n,!0,0)},e.K=function(t,n){return e._h(t,n,!1,0)},e.k=function(t,n){return e._h(t,n,!0,1)},e.m=function(e,t){for(var n=""+e.getMinutes();n.length<t;)n="0"+n;return n},e.s=function(e,t){for(var n=""+e.getSeconds();n.length<t;)n="0"+n;return n},e.S=function(e,t){var n=e.getMilliseconds()/1e3,i=Math.pow(10,t);
for(n=Math.round(n*i),n=""+n;n.length<t;)n="0"+n;return n},e.A=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDay()).getTime(),i=e.getTime()-n;for(i=""+i;i.length<t;)i="0"+i;return i},n$542=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{locKeys:{"No.Similarities":"Date.Range.No.Similarities","Same.Year":"Date.Range.Same.Year","Same.Month":"Date.Range.Same.Month","Same.Day":"Date.Range.Same.Day","Same.Day.Day.Of.Week":"Date.Range.Same.Day.Day.Of.Week","Same.Day.Tomorrow":"Date.Range.Same.Day.Tomorrow","Same.Day.Yesterday":"Date.Range.Same.Day.Yesterday","Same.Day.Today.Same.Time":"Date.Range.Same.Day.Today.Same.Time","Same.Day.Today.Time.Range":"Date.Range.Same.Day.Today.Time.Range","Same.Day.Today.Time.Range.Same.Period":"Date.Range.Same.Day.Today.Time.Range.Same.Period","Today.To.Tomorrow":"Date.Range.Today.To.Tomorrow","Yesterday.To.Tomorrow":"Date.Range.Yesterday.To.Tomorrow","Yesterday.To.Today":"Date.Range.Yesterday.To.Today","Day.Of.Week.To.Day.Of.Week":"Date.Range.Days.Of.Week","Day.Of.Week.To.Tomorrow":"Date.Range.Day.Of.Week.To.Tomorrow","Day.Of.Week.To.Today":"Date.Range.Day.Of.Week.To.Today","Day.Of.Week.To.Yesterday":"Date.Range.Day.Of.Week.To.Yesterday"},_dateOrTimezoneDidChangeRelay:n$7(n$516.get("sharedInstance").bindingFor("dateOrTimezoneDidChange"),function(){this.dateOrTimezoneDidChange()}),dateOrTimezoneDidChange:n$12(),locRange:function(e,n,i){return t.date1=n,t.date2=i,e=this.locKeys[e],n$290(e,t)},fmt:function(e,t){if(e||0===e||n$11("No date passed to fmt."),arguments.length<=1&&(t=e),e="number"==typeof e?new Date(e):e,t="number"==typeof t?new Date(t):t,isNaN(e.getTime())||isNaN(t.getTime()))return"";if(e>t){var n=t;t=e,e=n}var i,r=n$516.get("sharedInstance");if(r.isColloquial(e)&&r.isColloquial(t))if(n$375(e,t))if(r.isToday(e)){var s=new Date(t);
s.setSeconds(0,0),i=9e5>=s-e?"Same.Day.Today.Same.Time":(0|e.getHours()/12)===(0|t.getHours()/12)?"Same.Day.Today.Time.Range.Same.Period":"Same.Day.Today.Time.Range"}else i="Same.Day."+r.colloquialLocKey(e);else i=r.colloquialLocKey(e)+".To."+r.colloquialLocKey(t);else i=e.getFullYear()!==t.getFullYear()?"No.Similarities":e.getMonth()!==t.getMonth()?"Same.Year":e.getDate()!==t.getDate()?"Same.Month":"Same.Day";return this.locRange(i,e,t)}}),t={date1Formatter:n$542,date2Formatter:n$542},n=e.create();n$543=n,e.__QUALIFIED_CLASS_NAME__="Photos.DateRangeFormatter$441"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{locKeys:null,date:n$9(),_relativeDates:n$516.get("sharedInstance"),dateIsColloquial:n$9({readOnly:!0,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this._relativeDates.isColloquial(r)}}),_dateLocKey:n$9({readOnly:!0,dependencies:["date","dateIsColloquial","_relativeDates.today","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(!s)return"";var o=this._relativeDates;return a?o.colloquialLocKey(s):s.getFullYear()===r.getFullYear()?"Date":"DateWithYear"}}),_locDateString:function(e,n){if(!n||isNaN(n.getTime()))return"";var i=this.locKeys;return e=i[e],t.date=n,n$290(e,t)},dateString:n$9({readOnly:!0,dependencies:["date","_dateLocKey","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return this._locDateString(r,a)}}),shortDateString:n$9({readOnly:!0,dependencies:["date","_dateLocKey","dateIsColloquial","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return r||(a+="Short"),this._locDateString(a,s)}}),timeString:n$9({readOnly:!0,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this._locDateString("Time",r)}}),shortTimeString:n$9({readOnly:!0,dependencies:["date","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);
return this._locDateString("TimeShort",r)}}),dateTimeString:n$9({readOnly:!0,dependencies:["dateString","timeString","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,i,r){var a=r.internalGetPath(this,t[1+i]),s=r.internalGetPath(this,t[0+i]);return s&&a?(n.dateString=s,n.timeString=a,n$290(this.locKeys.DateAndTime,n)):""}}),shortDateTimeString:n$9({readOnly:!0,dependencies:["shortDateString","shortTimeString","_relativeDates.dateOrTimezoneDidChange"],get:function(e,t,i,r){var a=r.internalGetPath(this,t[1+i]),s=r.internalGetPath(this,t[0+i]);return s&&a?(n.dateString=s,n.timeString=a,n$290(this.locKeys.DateAndTime,n)):""}})}),t={dateFormatter:n$542},n={dateString:"",timeString:""};n$547=e,e.__QUALIFIED_CLASS_NAME__="Photos.FormattedDate"}();
    
    
        
!function(){"use strict";var e=n$545.extend(n$364,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"burstCount",truevalue:"is-burst",attributes:{signal:"burstCountClassDidRender"}}]},subtitleElement:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"burstCount",attributes:{signal:"burstCountDidRender"}}],classes:["burst-count"]}]}}},additionalClassNames:["photos-toolbar-oneup-title"],maxSizeMode:4,valueDidChange:n$12(),_signalValueDidChange:n$7("_asset.title","_asset.details.geocode","date.dateTimeString","burstCount",function(){this.valueDidChange()}),didRender:n$12(),_signalDidRender:n$7("burstCount",function(){this.didRender()}),shouldWrap:n$9({readOnly:!0,dependencies:["sizeMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 3>=r&&r>1}}),marginRight:25,marginLeft:25,init:function(){this.__s._1kWFHM5z_SA$YA$init.apply(this,arguments),this.set("date",n$547.create({locKeys:n,date:this.bindingFor("_asset.createdDateObject")}))},_asset:n$9(n$14("configuration.asset")),date:n$355(),title:n$9({readOnly:!0,dependencies:["_asset.title","_asset.details.geocode","date.dateString","date.shortDateString","sizeMode"],cacheable:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[4+n]),s=i.internalGetPath(this,t[3+n]),a=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[1+n]),l=i.internalGetPath(this,t[0+n]);return l?l:o?o:a?2>=r?s:a:""}}),subtitle:n$9({readOnly:!0,dependencies:["_asset.title","_asset.details.geocode","date.timeString","date.shortDateString","date.dateTimeString","date.shortDateTimeString","sizeMode"],cacheable:!0,get:function(e,t,n,i){var r,s=i.internalGetPath(this,t[6+n]),a=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),l=i.internalGetPath(this,t[3+n]),d=i.internalGetPath(this,t[2+n]),h=i.internalGetPath(this,t[1+n]),u=i.internalGetPath(this,t[0+n]);
return r=2>=s?1>=s?l:a:o,u&&h?0===s?r:h+" "+r:!u&&h?r:u||h?"":1>=s?"":d}}),burstCount:n$9({readOnly:!0,dependencies:["_asset.type","_asset.burstAssetModelProvider.itemCount"],cacheable:!0,get:function(e,n,i,r){var s=r.internalGetPath(this,n[1+i]),a=r.internalGetPath(this,n[0+i]);return a===n$309.BURST?n$483(t,s):void 0}}),configurationClass:n$546,__superMap:{_1kWFHM5z_SA$YA$init:"init"}}),t=["","Toolbar.OneUp.Title.BurstCount.1","Toolbar.OneUp.Title.BurstCount.2","Toolbar.OneUp.Title.BurstCount.More"],n={DateWithYear:"Toolbar.OneUp.Title.DateWithYear",Date:"Toolbar.OneUp.Title.Date",Today:"Date.Range.Same.Day.Today",Tomorrow:"Date.Range.Same.Day.Tomorrow",Yesterday:"Date.Range.Same.Day.Yesterday","Day.Of.Week":"Toolbar.OneUp.Title.Date.Day.Of.Week",DateShort:"Toolbar.OneUp.Title.DateShort",DateWithYearShort:"Toolbar.OneUp.Title.DateWithYearShort",Time:"Toolbar.OneUp.Title.Time",TimeShort:"Toolbar.OneUp.Title.TimeShort",DateAndTime:"Toolbar.OneUp.Title.DateAndTime"};n$681=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarOneupTitle"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{folder:n$9()});n$573=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarFolderMetadataConfiguration"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"contentView"}],name:"container",classes:["cw-popover-content"]}],classes:["cw-popover-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:null,property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}}}},layout:n$9(),left:n$9(n$14("layout.left")),top:n$9(n$14("layout.top")),_transformObserver:n$7("left","top",function(e,t){this.style.translateDevicePixels(e,t)}),height:n$9(n$14("layout.height")),width:n$9(n$14("layout.width"))});n$549=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.PopoverView"}();
    
    
        
!function(){"use strict";var e=n$549.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[],name:"arrow",classes:["cw-popover-arrow",{type:"CLASSNAMEOUTLET",bindingtype:"ENUMBINDING",name:"arrowDirectionClass",validvalues:["cw-up-arrow","cw-left-arrow","cw-right-arrow","cw-down-arrow"],attributes:{}}]}]},container:{type:"ELEMENT",tagname:"ext",children:[],styles:{margin:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"arrowLength",attributes:{},unit:"px",property:"margin"}}}}},left:n$9({readOnly:!0,dependencies:["layout.x","arrowLength"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s-r},defaultValue:0}),top:n$9({readOnly:!0,dependencies:["layout.y","arrowLength"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s-r||0},defaultValue:0}),height:n$9({readOnly:!0,dependencies:["layout.height","arrowLength"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s+2*r||0},defaultValue:0}),width:n$9({readOnly:!0,dependencies:["layout.width","arrowLength"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s+2*r||0},defaultValue:0}),anchorLayout:n$9(),arrowLength:n$9(10),arrowWidth:n$9(10),arrowOffset:n$9({readOnly:!0,dependencies:["arrowDirection","arrowWidth","arrowLength","layout.x","layout.width","layout.y","layout.height","anchorLayout.x","anchorLayout.width","anchorLayout.y","anchorLayout.height"],get:function(e,t,n,i){var r,s,a,o,u=i.internalGetPath(this,t[10+n]),l=i.internalGetPath(this,t[9+n]),c=i.internalGetPath(this,t[8+n]),d=i.internalGetPath(this,t[7+n]),h=i.internalGetPath(this,t[6+n]),p=i.internalGetPath(this,t[5+n]),g=i.internalGetPath(this,t[4+n]),f=i.internalGetPath(this,t[3+n]),_=i.internalGetPath(this,t[2+n]),v=i.internalGetPath(this,t[1+n]),m=i.internalGetPath(this,t[0+n]),y="up"===m||"down"===m?"horizontal":"vertical";
"horizontal"===y?(r=f,s=f+g,a=d,o=d+c):(r=p,s=p+h,a=l,o=l+u);var $=v/2,C=(a+o)/2;return C=Math.max(Math.min(C,s-$),r+$),C-="horizontal"===y?f:p,C=C+_-$}}),arrowLeft:n$9({readOnly:!0,dependencies:["arrowOffset","arrowDirection"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return"up"===r||"down"===r?i.internalGetPath(this,t[0+n]):null}}),arrowTop:n$9({readOnly:!0,dependencies:["arrowOffset","arrowDirection"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]);return"left"===r||"right"===r?i.internalGetPath(this,t[0+n]):null}}),arrowDirection:n$9({readOnly:!0,dependencies:["layout.x","layout.width","layout.y","layout.height","anchorLayout.x","anchorLayout.width","anchorLayout.y","anchorLayout.height"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[7+n]),s=i.internalGetPath(this,t[6+n]),a=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),u=i.internalGetPath(this,t[3+n]),l=i.internalGetPath(this,t[2+n]),c=i.internalGetPath(this,t[1+n]),d=i.internalGetPath(this,t[0+n]);return d>o+a?"left":o>d+c?"right":l>s+r?"up":s>l+u?"down":"left"}}),arrowDirectionClass:n$9({readOnly:!0,dependencies:["arrowDirection"],get:function(e,t,n,i){return"cw-"+i.internalGetPath(this,t[0+n])+"-arrow"}}),_positionArrow:n$7("arrowLeft","arrowTop",function(e,t){var n=n$160(this.arrow);e&&n.translateX(e),t&&n.translateX(t)})});n$553=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.ArrowPopoverView"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{target:n$9(),targetLayout:n$9(),recomputeLayoutIfNecessary:n$23});n$551=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.LayoutMeasurer"}();
    
    
        
!function(){"use strict";var e={},t=n$551.extend({_rectangle:null,recomputeLayoutIfNecessary:n$7("target.element",function(t){var n;if(t){var i=t.getBoundingClientRect(),r=i.left,s=i.top;e.width=i.right-r,e.height=i.bottom-s,e.x=r,e.y=s;var a=this._rectangle;if(a){var o=n$275.begin();o.setIfChanged(a,"x",e.x),o.setIfChanged(a,"y",e.y),o.setIfChanged(a,"width",e.width),o.setIfChanged(a,"height",e.height),o.end()}else this._rectangle=a=n$106.create(e);n=a}else n=null;n$239(this,"targetLayout",n)})});n$554=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.DOMLayoutMeasurer"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{config:n$9(),anchorLayout:n$9(n$14("config.anchorLayout")),spaceLayout:n$9(n$14("config.spaceLayout")),desiredSize:n$9(n$14("config.desiredSize")),minimumSize:n$9(n$14("config.minimumSize")),layout:n$9(),fit:n$9({readOnly:!0,dependencies:["layout.height","layout.width"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(!a||!r)return 0;var s=this.minimumSize.width,o=this.minimumSize.height;return o>a?0:s>r?0:r+a}})});n$552=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.PopoverLayout"}();
    
    
        
!function(){"use strict";function e(e){var t=n[e],u=r[e],h=i[e],c=o[e],d=a[e],_=s[e];return n$7("arrowLength","desiredSize."+_,"desiredSize."+i[_],"anchorLayout."+t,"anchorLayout."+h,"anchorLayout."+c,"anchorLayout."+d,"spaceLayout."+t,"spaceLayout."+h,"spaceLayout."+c,"spaceLayout."+d,function(e,n,i,r,s,o,a,_,g,f,p){"height"===t||"width"===t?(r+=s,_+=g):("height"===h||"width"===h)&&(s+=r,g+=_),p+=f,a+=o;var $=r+e*u,v=$+n*u;(v>_&&u>0||_>v&&0>u)&&(v=_);var m=(o+a)/2,y=i/2,I=m-y,b=m+y,S=f-I;S>0&&(I+=S,b+=S);var C=p-b;0>C&&(I+=C,b+=C),f>I&&(I=f),l[t]=v,l[h]=$,l[c]=I,l[d]=b,l.width-=l.x,l.height-=l.y;var A=this._layoutRectangle;if(A){var E=n$275.begin();E.setIfChanged(A,"x",l.x),E.setIfChanged(A,"y",l.y),E.setIfChanged(A,"height",l.height),E.setIfChanged(A,"width",l.width),E.end()}else this._layoutRectangle=A=n$106.create(l);n$239(this,"layout",A)})}var t=n$552.extend({arrowLength:n$9(n$14("config.arrowLength")),_layoutRectangle:null}),n={left:"x",right:"width",top:"y",bottom:"height"},i={left:"width",right:"x",top:"height",bottom:"y",width:"height",height:"width"},r={left:-1,right:1,top:-1,bottom:1},s={left:"width",right:"width",top:"height",bottom:"height"},o={left:"y",right:"y",top:"x",bottom:"x"},a={left:"height",right:"height",top:"width",bottom:"width"},l={x:0,y:0,height:0,width:0},u=t.extend({layoutCalculator:e("right")}),h=t.extend({layoutCalculator:e("left")}),c=t.extend({layoutCalculator:e("top")}),d=t.extend({layoutCalculator:e("bottom")});n$555=u,n$949=h,n$950=c,n$558=d,t.__QUALIFIED_CLASS_NAME__="CW.UI.OnSideLayout$450",u.__QUALIFIED_CLASS_NAME__="CW.UI.OnRightLayout",h.__QUALIFIED_CLASS_NAME__="CW.UI.OnLeftLayout",c.__QUALIFIED_CLASS_NAME__="CW.UI.OnTopLayout",d.__QUALIFIED_CLASS_NAME__="CW.UI.OnBottomLayout"
}();
    
    
        
!function(){"use strict";function e(){for(var e=arguments,t=e.length,n=0,i=null,r=0;t>r;r++){var s=e[r];s>n&&(i=r)}return i}function t(){for(var e=arguments,t=e.length,n=0;t>n;n++){var i=e[n];if(i>0)return n}return null}var n=n$399.extend({view:n$9({downstreamBindings:{layout:"(owner).matchedLayout.layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth"}}),anchorLayoutMeasurer:n$554,anchorLayout:n$9(n$14("_anchorLayoutMeasurerInstance.targetLayout")),spaceLayout:n$9(n$109.get("sharedInstance").window),allowedLayouts:[n$555],arrowLength:n$9(10),arrowWidth:n$9(10),resolutionStrategy:t,desiredSize:n$9(n$84(n$556,{height:100,width:50})),minimumSize:n$9(n$84(n$556,{height:10,width:10})),desiredOffset:n$9(n$84(n$82,{x:0,y:0})),show:function(){var e=this.get("_anchorLayoutMeasurerInstance");e&&e.recomputeLayoutIfNecessary(),this.__s._SfRDeKFLK7$2AR$show.apply(this,arguments)},init:function(){this.__s._SfRDeKFLK7$2Dw$init.apply(this,arguments);var e=this.get("anchorLayout");if(!e){var t=this.anchorLayoutMeasurer;t||n$11("PopoverController must be configured with either a anchorLayout or a anchorLayoutMeasurer");var n=t.create({target:this.bindingFor("anchor")});this.set("_anchorLayoutMeasurerInstance",n)}for(var i=n$40(this.allowedLayouts),r=i.length,s=[],a=0;r>a;a++){var o=i[a];o=o.create({config:this}),s.push(o.bindingFor("fit")),i[a]=o}this.allowedLayouts=i,s.push(this._resolveLayouts),this.fitObserver=this.observe.apply(this,s)},_resolveLayouts:function(){var e=this.resolutionStrategy,t=e.apply(this,arguments);this.set("matchedLayout",null===t?null:this.allowedLayouts[t])
},_anchorLayoutMeasurerInstance:n$9(),matchedLayout:n$9(),viewClass:n$553,__superMap:{_SfRDeKFLK7$2AR$show:"show",_SfRDeKFLK7$2Dw$init:"init"}});n$557=n,n$951=e,n$952=t,n.__QUALIFIED_CLASS_NAME__="CW.UI.PopoverViewController"}();
    
    
        
!function(){"use strict";function e(e){return t.create(e)}var t=n$30.extend({init:function(e){this.provider=e,this.__s._1wEZsipPSdy$Ec$init.call(this)},initializeMember:function(e,t){return this.provider.call(e,e[t])},__superMap:{_1wEZsipPSdy$Ec$init:"init"}});n$559=e,t.__QUALIFIED_CLASS_NAME__="Photos.DefaultValueOverride$452"}();
    
    
        
!function(){"use strict";var e=n$557.extend({allowedLayouts:[n$558],arrowLength:13,arrowWidth:29,insetFromWindow:30,viewClass:n$559(function(e){return e.extend({additionalClassNames:n$16(["photos-popover-view"]),pointerDown:function(){return!0}})}),updateLayout:function(){this.propertyChanged("anchor")},createView:function(){var e=this.__s._4TCn9nmTNb8$Go$createView.apply(this,arguments);return t.create({popoverView:e})},hidePopover:function(){return this.hide(),!0},spaceLayout:n$84(n$106.extend({owner:n$9(),window:n$9(n$109.sharedInstance.window),x:n$9({readOnly:!0,dependencies:["window.x","owner"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGetPath(this,t[1+n]).insetFromWindow}}),y:n$9({readOnly:!0,dependencies:["window.y","owner"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])+i.internalGetPath(this,t[1+n]).insetFromWindow}}),width:n$9({readOnly:!0,dependencies:["window.width","owner"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGetPath(this,t[1+n]).insetFromWindow}}),height:n$9({readOnly:!0,dependencies:["window.height","owner"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-2*i.internalGetPath(this,t[1+n]).insetFromWindow}})})),__superMap:{_4TCn9nmTNb8$Go$createView:"createView"}}),t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"popoverView"}],classes:["photos-popover-modal"]}},layout:n$9(),anchorLayout:n$9(),arrowLength:n$9(),arrowWidth:n$9(),popoverView:n$9({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth"}}),contentView:n$9(n$14("popoverView.contentView")),pointerDown:function(){return this.sendEvent("hidePopover"),!0
},keyUp:function(e){e.which===n$126.ESC&&this.sendEvent("hidePopover")}});n$569=e,e.__QUALIFIED_CLASS_NAME__="Photos.PopoverViewController",t.__QUALIFIED_CLASS_NAME__="Photos.ModalView$453"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"input",children:[],name:"inputNode",classes:["cw-input"],attributes:{type:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"type",attributes:{},attribute:"type"},maxlength:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"maxLength",attributes:{},attribute:"maxlength"}}},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"placeholder",attributes:{}}],name:"placeholderNode",classes:["cw-placeholder",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isPlaceholderShowing",truevalue:"show",attributes:{}}]}],name:"inputContainer",classes:["container"]}],classes:["cw-textfield-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]}},value:n$9(""),type:"text",placeholder:void 0,action:"submit",maxLength:null,isDisabled:n$9(!1),isEditable:n$9(!0),hasUserChangedValue:n$9(!1),isFocused:n$9(!1),selection:n$9({cacheable:!1,dependencies:["inputNode"],writeDependencies:["_selection"],get:function(e,t,n,i){var r,s,a,o=i.internalGetPath(this,t[0+n]),l=null;if(""===o.value?r=s=0:("selectionStart"in o&&(r=o.selectionStart),"selectionEnd"in o&&(s=o.selectionEnd)),null===r||null===s){var u=document.selection;if(u){var h=u.type;!h||"None"!==h&&"Text"!==h||(l=u.createRange(),a=l.text.length,r=Math.abs(l.moveStart("character",0-(o.value.length+1))),s=r+a)
}}return a=-1===r||-1===s?-1:s-r,Object.freeze({start:r,end:s,length:a,value:o.value.slice(r,s)})},set:function(e){this.set("_selection",e)}}),select:function(){var e=this.get("inputNode");e&&e.select()},focus:function(){var e=this.get("inputNode");n$130(function(){e.focus()},0)},isDefaultTabbingEnabled:!0,allowedCharacters:void 0,isIMEInputActive:n$9(!1),input:function(){this._elementValueDidChange()},keyDown:function(e){if(e.which===n$126.RETURN){this.sendEvent("didEndEditing",this);var t=this.action,n=!1;return t&&(n=this.sendEvent(t,this)),this.select(),n}},didReceiveFocus:function(){this.set("isFocused",!0)},didReceiveBlur:function(){this.set("isFocused",!1),this.sendEvent("didEndEditing",this)},pointerDown:function(e){var t=this.get("placeholderNode");e.target===t&&(this.set("isFocused",!0),this.focus())},compositionStart:function(){this.set("isIMEInputActive",!0)},compositionEnd:function(){this.set("isIMEInputActive",!1)},handleSelectionChange:function(){this.propertyChanged("selection")},init:function(){this.__s._1LeXEj930r7$2PC$init.apply(this,arguments);var e=this.get("inputNode"),t=this.get("isDefaultTabbingEnabled");t||e.setAttribute("tabindex","-1");var n=this.get("placeholder");n&&e.setAttribute("aria-label",n);var i=this.get("allowedCharacters");!i||i instanceof RegExp||n$11("Must use only RegExp for TextField character validation."),n$107(e,"select",this.handleSelectionChange.bind(this))},_isPlaceholderShowing:n$9({dependencies:["value"],readOnly:!0,get:function(e,t,n,i){var e=i.internalGetPath(this,t[0+n]);return e?!1:!0}}),_valueDidChange:n$7("value",function(e){var t=this.get("inputNode");
t.value!==e&&(t.value=e)}),_elementValueDidChange:function(){var e=this.get("inputNode"),t=this.get("value"),n=e.value;if(t!==n){var i=this.get("isIMEInputActive");if(i)return;var r=this._isInputAllowed(n);r?(this.set("value",n),this.hasUserChangedValue=!0):e.value=t||""}},isAttached:n$9({didChange:function(e){e&&(this.hasUserChangedValue=!1)}}),_isInputAllowed:function(e){var t=this.get("allowedCharacters");return t&&e?t.test(e):!0},_selection:n$9(),_selectionDidChange:n$7("_selection",function(e){if(e){var t=this.get("inputNode");this.focus();var n=e.start,i=e.end,r=null;if(t.setSelectionRange)t.setSelectionRange(n,i);else{r=t.createTextRange(),r.move("character",n),r.moveEnd("character",i-n);try{r.select()}catch(s){return null}}}}),_statusDidChange:n$7("isDisabled","isEditable",function(e,t){var n=this.get("inputNode");e?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"),t?n.removeAttribute("readonly"):n.setAttribute("readonly","readonly")}),__superMap:{_1LeXEj930r7$2PC$init:"init"}});n$561=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Views.TextField"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"viewTitle",attributes:{}}],classes:["photos-folder-editing-view-title"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"inputView"}],classes:["photos-folder-editing-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"shouldShowViewTitle",truevalue:"showing-editing-title",attributes:{}}]}},shouldShowViewTitle:n$9(!0),viewTitle:n$9({readOnly:!0,dependencies:["isAlbum","shouldShowViewTitle"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n])?n$290("Folder.Info.Album.Name"):n$290("Folder.Info.Folder.Name"):""}}),selectText:n$9(!1),title:n$9(),isAlbum:n$9(),_isInputViewDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isUpdateAllowed")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),inputView:n$9({readOnly:!0,defaultValue:function(){return n$561.create({isDisabled:n$14("parent._isInputViewDisabled")})}}),_selectOnAppear:n$7("isAttached","_isInputViewDisabled",function(){this._focusAndSelect()}),_focusAndSelect:function(){this.isAttached&&this.selectText&&!this._isInputViewDisabled&&(this.inputView.focus(),this.inputView.select())},resetInputValue:function(){this.inputView.hasUserChangedValue=!1},_folderTitleUpdate:n$7("title","inputView.hasUserChangedValue",function(e,t){t||(this.inputView.setIfChanged("value",e),this.inputView.element.contains(document.activeElement)&&this._focusAndSelect())
})});n$566=e,e.__QUALIFIED_CLASS_NAME__="Photos.FolderTitleEditingView"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$302,n$83,{width:n$9(),height:n$9(),target:n$9(),initFromPool:function(e){this.target=e,this.__s._1360u_mgdat$8s$initFromPool.apply(this,arguments)},recomputeLayoutIfNecessary:n$7("target",n$428(window,"resize"),function(e){e&&n$275.begin().setIfChanged(this,"width",e.clientWidth).setIfChanged(this,"height",e.clientHeight).end()}),dispose:function(){this.target=null,this.__s._1360u_mgdat$Jc$dispose.apply(this,arguments)},__superMap:{_1360u_mgdat$8s$initFromPool:"initFromPool",_1360u_mgdat$Jc$dispose:"dispose"}});n$563=e,e.__QUALIFIED_CLASS_NAME__="Photos.DOMLayoutMeasurer"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$562],scrollIndicatorShouldEnlarge:n$9(!1)},t=n$412.extend(e),n=n$413.extend(e);n$953=e,n$564=t,n$565=n,t.__QUALIFIED_CLASS_NAME__="Photos.FlatSizeFadingHorizontalScrollIndicatorView",n.__QUALIFIED_CLASS_NAME__="Photos.FlatSizeFadingVerticalScrollIndicatorView"}();
    
    
        
!function(){"use strict";var e=1,t=n$409.extend(n$416,n$364,{scrollMaxX:n$9({readOnly:!0,dependencies:["contentView.desiredSize.width"],get:function(t,n,i,r){return 0|r.internalGetPath(this,n[0+i])-2*e}}),scrollMaxY:n$9({readOnly:!0,dependencies:["contentView.desiredSize.height"],get:function(t,n,i,r){return 0|r.internalGetPath(this,n[0+i])-2*e}}),viewSize:n$355({readOnly:!0,dependencies:["element"],get:function(e,t,n,i){return n$563.create(i.internalGetPath(this,t[0+n]))}}),_viewSizeRemeasure:n$7("isAttached",function(e){e&&this.viewSize.recomputeLayoutIfNecessary()}),height:n$9({dependencies:["viewSize.height"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}}),width:n$9({dependencies:["viewSize.width"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])}}),scrollPositionObserver:n$7("height","width",function(){this.validateScrollPosition(),this.showScrollIndicators()}),scrollElement:n$7("scrollX","scrollY","contentView",function(e,t,n){n&&n.style.translateDevicePixels(-e,-t)}),horizontalScrollIndicatorClass:n$564,verticalScrollIndicatorClass:n$565});n$567=t,t.__QUALIFIED_CLASS_NAME__="Photos.PopoverScrollView"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"folderTitleEditingView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_deleteFolderButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_doneButton"}],classes:["photos-folder-action-buttons"]}],classes:["photos-folder-info-view"]}},desiredSize:n$355({readOnly:!0,dependencies:["element"],get:function(e,t,n,i){return n$563.create(i.internalGetPath(this,t[0+n]))}}),_desiredSizeRemeasure:n$7("isAttached",function(e){e&&this.desiredSize.recomputeLayoutIfNecessary()}),folderTitleEditingView:n$9({defaultValue:n$84(n$566),downstreamBindings:{title:"(owner).folder.title",isAlbum:"(owner).folder.isAlbum"}}),folder:n$9(),_isDoneButtonDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isUpdateAllowed")],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}}),_isDeleteFolderButtonDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isDeleteAllowed"),"folder.indexInParent"],get:function(e,t,n,i){if(!i.internalGetPath(this,t[0+n]))return!0;var r=i.internalGetPath(this,t[1+n]);return-1===r||null===r}}),_deleteFolderButton:n$9({readOnly:!0,dependencies:["folder.isAlbum"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return n$400.create({isDisabled:n$14("parent._isDeleteFolderButtonDisabled"),additionalClassNames:n$16(["delete-folder-button","photos-red-delete-button"]),title:r?n$290("Folder.Info.DeleteAlbum.Title"):n$290("Folder.Info.DeleteFolder.Title"),event:"_confirmDeleteFolder"})
}}),_doneButton:n$84(n$400,{isDisabled:n$14("parent._isDoneButtonDisabled"),additionalClassNames:n$16(["done-button"]),title:n$290("Folder.Info.Done.Title"),event:"hidePopover"}),didEndEditing:function(){this._updateFolderInfo(!0)},_pendingUpdateTimeoutId:0,_updateFolderInfo:function(e){var t=this.folderTitleEditingView,n=this.folderTitleEditingView.getPath("inputView.value");if(!n$370.isValidTitle(n))return t.resetInputValue(),!0;clearTimeout(this._pendingUpdateTimeoutId);var i=this.folder.retain(),r=function(){t.resetInputValue(),i.title!==n&&(i.title=i.parentFolder.getDedupedTitle(n,i.type)),i.release()};return e?this._pendingUpdateTimeoutId=n$130(r,100):r(),!0},_confirmDeleteFolder:function(){this._updateFolderInfo();var e=n$368.sharedInstance;return e.showRemoveAlert({removeType:n$366.DELETE,itemCount:1,type:this.folder.type,locParams:{title:this.folder.title},target:this,action:"_performFolderDelete"}),!0},_performFolderDelete:function(){var e=this.folder,t=e.parentFolder,n=e.indexInParent;t.removeItemsAtIndexesAndWriteToServer([n]),this.sendEvent("hidePopover")}}),t=n$567.extend({folder:n$9(),contentView:n$9({defaultValue:n$84(e),downstreamBindings:{folder:"(owner).folder"}})});n$568=t,e.__QUALIFIED_CLASS_NAME__="Photos.FolderInfoView$459",t.__QUALIFIED_CLASS_NAME__="Photos.FolderInfoScrollView"}();
    
    
        
!function(){"use strict";var e=n$194.extend({desiredSize:n$9(n$14("view.contentView.desiredSize")),viewClass:n$568,folder:n$9(),view:n$9({downstreamBindings:{folder:"(owner).folder"}})});n$570=e,e.__QUALIFIED_CLASS_NAME__="Photos.FolderInfoViewController"}();
    
    
        
!function(){"use strict";var e=n$569.extend({desiredSize:n$9(n$14("contentController.desiredSize")),folder:n$9(),contentController:n$9({readOnly:!0,defaultValue:function(){return n$570.create()},downstreamBindings:{folder:"(owner).folder"}})});n$574=e,e.__QUALIFIED_CLASS_NAME__="Photos.FolderInfoPopoverViewController"}();
    
    
        
!function(){"use strict";var e=n$545.extend(n$364,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"folderInfoButton"}],classes:["photos-toolbar-folder-title",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_folder.isServerCreated",truevalue:"",falsevalue:"user-created",attributes:{}}]}}},folderInfoButton:n$9({readOnly:!0,dependencies:["_folder.isAlbum"],get:function(e,t,n,i){return n$538.create({additionalClassNames:["photos-folder-info-button"],tooltip:i.internalGetPath(this,t[0+n])?n$290("Toolbar.Album.Info.Tooltip"):n$290("Toolbar.Folder.Info.Tooltip"),event:"showFolderInfoPopover"})}}),_folderInfoPopoverViewController:n$355({readOnly:!0,defaultValue:function(){return n$574.create({folder:this.bindingFor("_folder"),anchor:this.bindingFor("folderInfoButton")})}}),maxSizeMode:1,valueDidChange:n$12(),_signalValueDidChange:n$7("title","subtitle","folderInfoButton",function(){this.valueDidChange()}),didRender:n$12(),_signalDidRender:n$7("titleDidRender","subtitleDidRender",function(){this.didRender()}),shouldWrap:n$9({readOnly:!0,dependencies:["sizeMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 0===r}}),_folder:n$9(n$14("configuration.folder")),title:n$9({readOnly:!0,dependencies:["_folder.title"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r}}),subtitle:n$9({readOnly:!0,dependencies:["_folder.dateRange","_folder.itemCount","_folder.clientId","_folder.isUserCreatedSmartAlbum",n$543.bindingFor("dateOrTimezoneDidChange")],get:function(e,n,i,r){var a=r.internalGetPath(this,n[3+i]),s=r.internalGetPath(this,n[2+i]),o=r.internalGetPath(this,n[1+i]),l=r.internalGetPath(this,n[0+i]);
if(s===n$370.RECENTLY_DELETED_ID)return"";if(a)return"";var u=n$483(t,o);return l&&l.get("length")&&o?n$290("Toolbar.Folder.Title.Subtitle",{dateRange:n$543.fmt(l.objectAt(0),l.objectAt(1)),countString:u}):u}}),configurationClass:n$573,dispose:function(){this._dateListener.disconnect(),this.__s._2zUXr7LcX6B$12J$dispose.apply(this,arguments)},showFolderInfoPopover:function(){return this._folderInfoPopoverViewController.show(),!0},updateLayout:function(){this._folderInfoPopoverViewController&&this._folderInfoPopoverViewController.updateLayout()},__superMap:{_2zUXr7LcX6B$12J$dispose:"dispose"}}),t=["Toolbar.Folder.Title.AssetCount.0","Toolbar.Folder.Title.AssetCount.1","Toolbar.Folder.Title.AssetCount.2","Toolbar.Folder.Title.AssetCount.More"];n$682=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarFolderTitle"}();
    
    
        
!function(){"use strict";var e={DATE_FEED:"date-feed",FOLDERS:"folders",OTHER:"other"};n$683=e}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"svg",children:[{type:"ELEMENT",tagname:"path",children:[],namespace:"http://www.w3.org/2000/svg",attributes:{d:"M5.5,6.34852814 L0.651471863,1.5 L1.5,0.651471863 L5.5,4.65147186 L9.5,0.651471863 L10.3485281,1.5 L5.5,6.34852814 Z"}}],namespace:"http://www.w3.org/2000/svg",classes:["cosk-chevron-icon"],attributes:{width:"11px",height:"7px",viewBox:"0 0 11 7",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}}});n$578=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.ChevronView"}();
    
    
        
!function(){"use strict";var e=n$400.extend({staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"span",children:[],classes:["cosk-icloud-logo"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"appName",attributes:{signal:"appNameDidRender"}}],classes:["cosk-app-display-name"],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"appSwitcherTooltip",attributes:{},attribute:"title"}}},{type:"VIEWOUTLET",tagname:"view",children:[],name:"chevronView"}],classes:["cosk-app-switcher-trigger"]}},chevronView:n$578.create(),appName:n$9(),appSwitcherTooltip:n$9({get:function(){return n$290("Toolbar.AppSwitcher.Tooltip")}}),event:"showAppSwitcher",showAppSwitcher:function(){var e=this.getPath("parent.rect"),t=n$203.get("cloudOSService"),n=n$106.create({top:e.bottom,left:e.left+e.width/2,width:1,height:1});t.showAppSwitcher(n)}});n$579=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.AppSwitcherTriggerView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"appSwitcherTriggerView"}],classes:["cosk-app-name"]}},appName:n$9(),appSwitcherTriggerView:n$9({defaultValue:function(){return n$579.create({appName:this.bindingFor("appName")})}}),preferredWidth:n$9({dependencies:["appSwitcherTriggerView.isAttached","appSwitcherTriggerView.appNameDidRender"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var s,o;s=this.get("style"),o=s.getInline("width"),s.set("width","auto");var a=this.get("element").offsetWidth;return s.set("width",o),a}}})});n$684=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.AppNameView"}();
    
    
        
!function(){"use strict";var e=[[4352,4607],[11904,12031],[12032,12255],[12288,12351],[12352,12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12800,13055],[13056,13311],[13312,19893],[19968,40959],[40960,42127],[42128,42191],[44032,55203],[63744,64255],[65072,65103]],t=function(t){var n,i=e;if(!t)return!1;for(var r=0,s=i.length;s>r;++r)if(n=i[r],t>=n[0]&&t<=n[1])return!0;return!1},n=function(e){if(e=e.trim(),0===e.length)return!1;for(var n=0,i=e.length-1;i>=n;)if(!t(e.charCodeAt(n++))||!t(e.charCodeAt(i--)))return!1;return!0};n$954=t,n$580=n}();
    
    
        
!function(){"use strict";var e=n$400.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"?"}],classes:["cosk-help-icon"]}},event:"showHelp",tooltip:n$290("Button.Help.Tooltip"),owner:n$9(),showHelp:function(){n$203.get("cloudOSService").get("showHelp").call(this,this.get("helpAnchor"))}});n$591=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.HelpView"}();
    
    
        
!function(){"use strict";var e=function(e,t,n,i,r){var a;return e&&t?a=n$580(e)&&n$580(t)?t+e:n$290("Name.Display.FirstAndFamilyNames",{firstName:e,familyName:t}):e?a=e:t?a=t:i?a=i:r&&(a=r),a||(a=n||""),a};n$592=e}();
    
    
        
!function(){"use strict";var e=n$400.extend({action:null,callAction:function(){this.sendEvent("accountMenuItemWasSelected",{action:this.get("action")})}});n$582=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.AccountMenuItemView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"accountMenuItemViews"}],classes:["cosk-account-menu"]}},desiredSize:n$9(n$84(n$556,{width:100,height:100})),minimumSize:n$9(n$14("desiredSize")),accountMenuItemViews:n$84(n$158),accountMenuItems:n$9(n$84(Array)),_accountMenuItemsObserver:n$7("accountMenuItems",function(e){var t=this.get("accountMenuItemViews");if(t.splice(0,t.get("length")),e){var n=e.length,i=0;for(i=0;n>i;i++)t.push(n$582.create(e[i]))}}),_remeasureIfNeeded:n$7("isAttached","_accountMenuItemsObserver",function(){if(this.get("isAttached")){this.get("style").set("width","auto").set("height","auto");var e=this.get("element"),t=this.get("desiredSize");t.set("width",e.offsetWidth),t.set("height",e.offsetHeight),this.get("style").set("width","").set("height","")}})});n$585=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.AccountMenuView"}();
    
    
        
!function(){"use strict";var e=n$194.extend({viewClass:n$585,accountMenuItems:n$9({dependencies:[n$203.bindingFor("environment.accountMenu")],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r&&r.items?r.items:[]}}),createView:function(){return this.get("viewClass").create({accountMenuItems:this.bindingFor("accountMenuItems")})},accountMenuItemWasSelected:function(e){var t=n$203.get("cloudOSService");return t.invokeMethodOnCloudOS(e.context.action),!1},showAccountSettings:function(){var e=n$203.get("cloudOSService");e.showAccountSettings.call(e)},signOut:function(){var e=n$203.get("cloudOSService");e.performLogout.call(e)}});n$586=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.ViewControllers.AccountMenuViewController"}();
    
    
        
!function(){"use strict";var e=n$557.extend({allowedLayouts:[n$558],viewClass:n$553.extend({additionalClassNames:n$16(["cosk-account-menu-popover"])}),arrowLength:26,desiredSize:n$14("contentController.view.desiredSize"),minimumSize:n$14("contentController.view.minimumSize"),createView:function(){var e=this.__s._4W0xn9Vt6uT$ES$createView.apply(this,arguments);return t.create({popoverView:e})},accountMenuItemWasSelected:function(){return this.hide(),!0},updateLayout:function(){this.propertyChanged("anchor")},contentController:n$9({defaultValue:function(){return n$586.create()}}),modalTap:function(){this.toggle()},__superMap:{_4W0xn9Vt6uT$ES$createView:"createView"}}),t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"popoverView"}],classes:["cosk-account-menu-modal"]}},layout:n$9(),anchorLayout:n$9(),arrowLength:n$9(),arrowWidth:n$9(),popoverView:n$9({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth"}}),contentView:n$9(n$14("popoverView.contentView")),pointerDown:function(){return this.sendEvent("modalTap"),!0}});n$587=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.ViewControllers.AccountMenuPopoverViewController",t.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.ViewControllers.ModalView$474"}();
    
    
        
!function(){"use strict";var e=n$400.extend({staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayName",attributes:{}}],classes:["cosk-display-name"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"chevronView"}],classes:["cosk-user-display-name-wrapper"]}},chevronView:n$84(n$578),displayName:n$9(),event:"toggleAccountMenu",accountMenuPopoverController:n$9({defaultValue:function(){return n$587.create().retain()}}),tooltip:n$290("Toolbar.Button.Action.UserAction"),dispose:function(){this.get("accountMenuPopoverController").release(),this.__s._4A9WPmLkoAV$Hu$dispose.apply(this,arguments)},updateLayout:function(){this.get("accountMenuPopoverController").updateLayout()},toggleAccountMenu:function(){var e=this.get("accountMenuPopoverController");e.toggle(this)},writeNameToDOMForMeasurement:function(e){this.get("element").querySelector(".cosk-display-name").childNodes[0].data=e},__superMap:{_4A9WPmLkoAV$Hu$dispose:"dispose"}});n$593=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.DisplayNameView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"displayNameView"},{type:"ELEMENT",tagname:"span",children:[],classes:["cosk-user-splitter"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"helpView"}],classes:["cosk-user-view"],styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"widthStyle",attributes:{},unit:null,property:"width"}}}},width:n$9("auto"),widthStyle:n$9({dependencies:["width"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return"auto"===r?r:r+"px"}}),helpAnchor:n$9(),helpView:n$84(n$591.extend({helpAnchor:n$9(n$14("owner.helpAnchor"))})),displayName:n$9({cacheable:!0,dependencies:["widthOptions","width"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(!r)return"";var s,a=r.longName,o=r.shortName;return s=n$580(a.value)?a.value:o.value,this.set("_displayName",s),s}}),displayNameView:n$9({defaultValue:function(){return n$593.create({displayName:this.bindingFor("displayName")})}}),widthOptions:n$9({cacheable:!0,dependencies:["isAttached","displayNameView",n$203.bindingFor("currentUser.firstName"),n$203.bindingFor("currentUser.lastName")],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]);if(!r)return null;var l,u,h,c,d,_=n$592(a),g=n$592(a,o),f=this,p=f.get("element"),$=p.style;return l=p.style.width,u=this.get("_displayName")||g,h=$.position,$.width="auto",$.position="absolute",s.writeNameToDOMForMeasurement(_),c=p.offsetWidth,s.writeNameToDOMForMeasurement(g),d=p.offsetWidth,$.width=l,$.position=h,s.writeNameToDOMForMeasurement(u),{shortName:{width:c,value:_},longName:{width:d,value:g}}
}}),_displayName:null,updateLayout:function(){this.get("displayNameView").updateLayout()}});n$685=e,e.__QUALIFIED_CLASS_NAME__="COSK.UI.TitleBar.UserView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"folderTitleEditingView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_createAlbumButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_cancelButton"}],classes:["photos-create-album-action-buttons"]}],classes:["photos-create-album-view"]}},parentFolder:n$9(),shouldShowEditingViewTitle:n$9(!0),defaultBaseTitle:n$9({get:function(e){return e||n$290("Album.DefaultTitle")},set:function(e){return e}}),folderTitleEditingView:n$9({readOnly:!0,defaultValue:function(){return n$566.create({selectText:!0,isAlbum:!0,shouldShowViewTitle:this.bindingFor("shouldShowEditingViewTitle")})}}),_isCreateAlbumButtonDisabled:n$9({readOnly:!0,dependencies:["folderTitleEditingView.inputView.value"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!n$370.isValidTitle(r)}}),_cancelButton:n$84(n$400,{additionalClassNames:n$16(["cancel-button"]),title:n$290("Alert.Cancel.Button.Title"),event:"hidePopover"}),_createAlbumButton:n$84(n$400,{isDisabled:n$14("parent._isCreateAlbumButtonDisabled"),additionalClassNames:n$16(["create-album-button"]),title:n$290("Alert.OK.Button.Title"),event:"submit"}),isAttached:n$9({didChange:function(e){e&&this.folderTitleEditingView.setIfChanged("title",this.parentFolder.getDedupedTitle(this.defaultBaseTitle,n$370.ALBUM))}}),submit:function(e){var t=this.folderTitleEditingView.getPath("inputView.value");return n$370.isValidTitle(t)?(e.folderTitle=t,!1):!0
}});n$595=e,e.__QUALIFIED_CLASS_NAME__="Photos.CreateAlbumView"}();
    
    
        
!function(){"use strict";var e=n$194.extend({viewClass:n$595,parentFolder:n$9(),shouldShowEditingViewTitle:n$9(!0),defaultBaseTitle:n$9(),view:n$9({downstreamBindings:{parentFolder:"(owner).parentFolder",shouldShowEditingViewTitle:"(owner).shouldShowEditingViewTitle",defaultBaseTitle:"(owner).defaultBaseTitle"}})});n$610=e,e.__QUALIFIED_CLASS_NAME__="Photos.CreateAlbumViewController"}();
    
    
        
!function(){"use strict";var e={bookmark:n$9(null),isActiveViewController:n$9(!1),isTransitioning:n$9(!1),returnToViewController:n$9(null),title:n$9(null),shouldBeCached:n$4(!1),navigationManager:n$9(null),navigateTo:function(e){this.setPath("navigationManager.bookmark",e)},navigateToReturnToIfActive:function(){if(this.get("isActiveViewController")){var e=this.getPath("bookmark.returnTo");this.navigateTo(e)}}};n$596=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$364],toolbarConfiguration:n$355({get:function(){return this._toolbarConfiguration},set:function(e){return e&&e.isClass&&(e=e.create({owner:this,returnTo:this.bindingFor("bookmark.returnTo"),returnToTitle:this.bindingFor("returnToViewController.title")})),this._toolbarConfiguration=e}}),init:function(){this.__s.__0DCRekGQi$Pt$init.apply(this,arguments),this.get("toolbarConfiguration").set("nextResponder",this)},userReturnRequest:function(){var e=this.get("bookmark").get("returnTo");return e?(this.sendEvent({type:"userNavigationRequest",navigationTarget:e}),void 0):!1},__superMap:{__0DCRekGQi$Pt$init:"init"}};n$597=e}();
    
    
        
!function(){"use strict";var e={actionMode:n$9(null),isInActionMode:n$9({readOnly:!0,dependencies:["actionMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return null!==r}}),actionModeToolbarViewController:n$9(n$14("actionMode.toolbarViewController")),actionModeToolbarViewControllerDidChange:n$7("actionModeToolbarViewController",function(e){e&&e.set("nextResponder",this)})};n$598=e}();
    
    
        
!function(){"use strict";var e={handleEvent:function(){return n$103.getPath("application.isRestarting")?!1:this.__s._1Bu6XfI0QK_$7G$handleEvent.apply(this,arguments)},__superMap:{_1Bu6XfI0QK_$7G$handleEvent:"handleEvent"}};n$599=e}();
    
    
        
!function(){"use strict";var e=0,t={_loadPrioritySpace:1e4,loadPriorityBase:n$9(0),preloadPriorityOffset:n$491.get("simultaneousLoadPriorityRange"),willMoveToParentViewController:function(){this.set("loadPriorityBase",e),e-=this.get("_loadPrioritySpace"),this.__s._4SDB2LqokmH$PL$willMoveToParentViewController.apply(this,arguments)},__superMap:{_4SDB2LqokmH$PL$willMoveToParentViewController:"willMoveToParentViewController"}};n$600=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$596,n$597,n$598,n$599,n$600]};n$607=e}();
    
    
        
!function(){"use strict";var e=n$538.extend(n$540,{leftMargin:12,target:null,event:"userReturnRequest",widthPadding:1,additionalClassNames:n$16(["photos-toolbar-back-button"]),returnToTitle:n$9(),valueDidChange:n$12(),_signalValueDidChange:n$7("returnToTitle",function(){this.valueDidChange()}),didRender:n$12(),maxSizeMode:1,title:n$9({readOnly:!0,dependencies:["returnToTitle","sizeMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&r>0?s:n$290("Toolbar.Back")}}),displayWidthDidChange:n$7("displayWidth",function(e){this.get("style").set("width",e)})});n$604=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarBackButton"}();
    
    
        
!function(){"use strict";var e={init:function(){var e=this.getMetadataByType(n$602),t=[];for(var n in e){var i=e[n].getFunctionForObject(this);this[n]=i,t.push(i)}this.layoutCollapseFunctions=t,this.__s._4J3lU8WADqd$Az$init.apply(this,arguments)},__superMap:{_4J3lU8WADqd$Az$init:"init"}};n$603=e}();
    
    
        
!function(){"use strict";var e=n$30.extend({requiresSupport:n$603,priority:0,call:function(){return 0},getFunctionForObject:function(e){var t=this.call.bind(e);return t.priority=this.priority,t.category=this.category,t}}),t=function(t,n,i){return e.create({priority:t,call:n,category:i})};n$602=e,n$605=t,e.__QUALIFIED_CLASS_NAME__="CWE.Layout.CollapseFunction"}();
    
    
        
!function(){"use strict";function e(e){return n.create(e)}var t=n$30.extend({requiresSupport:n$603,init:function(){var e=this;this.value=function(t,n){return e.call(this,t,n)},this.__s._2vgosuzvF7_$6J$init.apply(this,arguments)},setItemPosition:function(){},call:function(e,t,n){var i=0|n,r=0,s=0,a=t.length;for(s=0;a>s;s++){var o=t[s];r=Math.max(r,this.marginBefore(o)),i+=r,this.setItemPosition(o,i),i+=o.width,r=this.marginAfter(o)}return i+r},marginBefore:function(){return 0},marginAfter:function(){return 0},__superMap:{_2vgosuzvF7_$6J$init:"init"}}),n=t.extend({setItemPosition:function(e,t){e.left=t}});n$955=t,n$606=e,t.__QUALIFIED_CLASS_NAME__="CWE.Layout.DirectionalLayout",n.__QUALIFIED_CLASS_NAME__="CWE.Layout.LeftToRightLayout$488"}();
    
    
        
!function(){"use strict";var e=n$523.extend(n$603,{padding:0,returnTo:n$9(),returnToTitle:n$9(),returnToButton:n$9({defaultValue:function(){return n$604.create({returnToTitle:this.bindingFor("returnToTitle")})}}),uploadButton:n$535.extend({isDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isCreateAllowed")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}})}),addAlbumButton:n$535.extend({isDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isCreateAllowed")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}})}),isReturnToAllowed:n$9(!0),returnToItems:n$9({readOnly:!0,dependencies:["returnTo","isReturnToAllowed"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]),s=[];return a&&r&&s.push("returnToButton"),s}}),leftItems:n$9({defaultValue:function(){return[]}}),middleItem:n$9(null),rightItems:n$9({defaultValue:function(){return[]}}),items:n$9({readOnly:!0,dependencies:["returnToItems","leftItems","middleItem","rightItems"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),a=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]),l=[];return a&&l.push(a),["homeButton"].concat(o,s,l,r,["userButton"])}}),collapseUserButtonToShortForm:n$605(0,function(e,t){var n=e.userButton.view.get("minimumWidth"),i=e.userButton.width;return e.userButton.width=n,t-(i-n)},"right"),collapseMiddleItem:n$605(10,function(e,t){var n=e[this.get("middleItem")];if(n){var i=n.view.get("minimumWidth");void 0===i&&(i=n.width),t=n.reduceWidthBy(t,i)
}return t},"middle"),collapseReturnTo:n$605(20,function(e,t){var n=e.returnToButton;return n&&(t=n.reduceWidthBy(t,n.view.get("minimumWidth"))),t},"left"),collapseUserButtonBeyondShortForm:n$605(30,function(e,t){var n=e.userButton.reduceWidthBy(t,e.userButton.view.get("aggressiveMinimumWidth"));return n},"right"),collapseMiddleItemBeyondMinimumWidth:n$605(100,function(e,t){var n=e[this.get("middleItem")];return n&&(t=n.reduceWidthBy(t,0)),t},"middle"),layoutLeftToRight:n$606({marginBefore:function(e){return 0|e.view.get("marginLeft")},marginAfter:function(e){return 0|e.view.get("marginRight")}}),layout:function(e){var t,n,i,r,a=this.layoutCollapseFunctions,s=0,o=0,l=0,u=0,h=0,c=0,d=0,_=0,f=0,g=0,p=null,$=null,v=null;p=["homeButton"].concat(this.get("returnToItems")).concat(this.get("leftItems")).map(function(t){return e[t]}),$=this.get("rightItems").concat(["userButton"]).map(function(t){return e[t]});var m=e[this.get("middleItem")];for(v=m?[m]:[],h=this.get("padding"),l=h,u=e.width-h,g=u-l,r=a.length,i=0;r>i;i++)t=a[i],n=t.category,c=l+this.layoutLeftToRight(p),d=u-this.layoutLeftToRight($),_=this.layoutLeftToRight(v),f=Math.floor(g/2-_/2),s=Math.floor(c-f),o=Math.floor(f+_-d),"left"===n&&s>0?t(e,s):"right"===n&&o>0?t(e,o):"middle"===n&&(s>0||o>0)&&t(e,2*Math.max(s,o));c=l+this.layoutLeftToRight(p,l),d=u-this.layoutLeftToRight($),this.layoutLeftToRight($,d),_=this.layoutLeftToRight(v),f=Math.floor(g/2-_/2),this.layoutLeftToRight(v,f)}});n$608=e,e.__QUALIFIED_CLASS_NAME__="Photos.StandardToolbarConfiguration"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,n$318,{_subproviders:n$305(Array),_cachedItemCount:0/0,_indexKey:n$514(function(){return"_indexInCompoundProvider_"+n$22(this)}),_didChangeObserverKey:n$514(function(){return"_didChangeObserverForCompoundProvider_"+n$22(this)}),_willChangeObserverKey:n$514(function(){return"_willChangeObserverForCompoundProvider_"+n$22(this)}),_startIndexKey:n$514(function(){return"_startIndexForCompoundProvider_"+n$22(this)}),_outstandingSubproviderContentsWillChangeCount:0,groupProvider:null,itemCount:n$9({dependencies:["contentsDidChange"],readOnly:!0,get:function(){return this.endIndexForProviderAtIndex(this._subproviders.length-1)}}),init:function(){this.__s._VBVOOOFNsg$jy$init.apply(this,arguments),this.groupProvider=t.create(this)},clear:function(){this.contentsWillChange();var e,t,n=this._indexKey,i=this._didChangeObserverKey,r=this._willChangeObserverKey,s=this._startIndexKey,a=this._subproviders,o=a.length;for(t=0;o>t;t++)e=a[t],e[n]=e[s]=0/0,e[r].disconnect(),e[i].disconnect(),e.release(this);a.length=0,this._cachedItemCount=0/0,this.contentsDidChange()},addProvider:function(e){if(e&&isNaN(e[this._indexKey])){this.contentsWillChange(),this._cachedItemCount=0/0,e[this._indexKey]=this._subproviders.length,e.retain(this),this._subproviders.push(e);var t=e[this._willChangeObserverKey],n=e[this._didChangeObserverKey];t&&n?(t.connect(),n.connect()):(e[this._willChangeObserverKey]=e.observe("contentsWillChange",this._subproviderContentsWillChange.bind(this,e)),e[this._didChangeObserverKey]=e.observe("contentsDidChange",this._subproviderContentsDidChange.bind(this,e))),this._subproviderContentsDidChange(this,e,!0),this.hasUniqueIds=this.hasUniqueIds&&e.hasUniqueIds
}},removeProvider:function(e){var t=this._indexKey,n=this._subproviders,i=isNaN(e)?e[t]:e,r=n[i];if(r){this.contentsWillChange(),this._cachedItemCount=0/0,r[t]=0/0,r[this._willChangeObserverKey].disconnect(),r[this._didChangeObserverKey].disconnect(),r[this._startIndexKey]=0/0,r.release(this);for(var s,a=i,o=n.length-1;o>a;a++)s=n[a]=n[a+1],s[t]--,s[this._startIndexKey]=0/0;n.length--;var l=!0;for(a=0;o>a;a++)l=l&&n[a].hasUniqueIds;this.hasUniqueIds=l,this.contentsDidChange()}},_subproviderContentsWillChange:function(e,t){t&&this.contentsWillChange()},_subproviderContentsDidChange:function(e,t){if(t){for(var n=this._startIndexKey,i=this._subproviders,r=i.length,s=e[this._indexKey]+1;r>s;s++)e=i[s],e[n]=0/0;this._cachedItemCount=0/0,this.contentsDidChange()}},preloadRange:function(e,t){if(e=Math.max(e,0),t=Math.min(t,this.get("itemCount")),!(e>=t)){var n,i,r,s=this._subproviders,a=s.length;for(n=0;a>n;n++)i=Math.max(e,this.startIndexForProviderAtIndex(n)),r=Math.min(t,this.endIndexForProviderAtIndex(n)),r>i&&s[n].preloadRange(i,r)}},subproviderForItemIndex:function(e){for(var t,n,i=this._subproviders,r=0,s=0;;){if(t=i[r],n=this.endIndexForProviderAtIndex(r),n>e)break;s=n,r++}return t},invokeProviderMethodForItemAtIndex:function(e,t){var n=this.subproviderForItemIndex(t),i=this.startIndexForProviderAtIndex(n[this._indexKey]);return n[e].call(n,t-i)},itemAtIndex:function(e){return this.invokeProviderMethodForItemAtIndex("itemAtIndex",e)},startIndexForProviderAtIndex:function(e){if(0===e)return 0;var t=this._subproviders[e],n=t[this._startIndexKey];return isNaN(n)?n=t[this._startIndexKey]=this.startIndexForProviderAtIndex(e-1)+this.lengthForProviderAtIndex(e-1):n
},endIndexForProviderAtIndex:function(e){var t=this._subproviders.length;if(!t)return 0;if(e===t-1){var n=this._cachedItemCount;return isNaN(n)&&(n=this._cachedItemCount=this.startIndexForProviderAtIndex(e)+this.lengthForProviderAtIndex(e)),n}return this.startIndexForProviderAtIndex(e+1)},lengthForProviderAtIndex:function(e){return this._subproviders[e].get("itemCount")},uniqueIdForItem:function(e){for(var t,n=this._subproviders.length,i=-1;-1===i&&n--;)t=this._subproviders[n],i=t.indexOfItem(e);return-1===i?null:t.uniqueIdForItem(e)},uniqueIdForIndex:function(e){return this.invokeProviderMethodForItemAtIndex("uniqueIdForIndex",e)},__superMap:{_VBVOOOFNsg$jy$init:"init"}}),t=n$5.extend(n$10,n$452,{init:function(e){this.__s._VBVOOOFNsg$4Kc$init.call(this),this._owningCompoundProvider=e,e.observe("contentsWillChange",function(e){e&&this.contentsWillChange()}.bind(this)),e.observe("contentsDidChange",function(e){e&&this.contentsDidChange()}.bind(this))},childrenModelProvider:n$4({readOnly:!0,get:function(){return this._owningCompoundProvider}}),itemCount:n$9({dependencies:["contentsDidChange"],readOnly:!0,get:function(){return this._owningCompoundProvider._subproviders.length}}),childRangeStartForGroupAtIndex:function(e){return this._owningCompoundProvider.startIndexForProviderAtIndex(e)},childRangeEndForGroupAtIndex:function(e){return this._owningCompoundProvider.endIndexForProviderAtIndex(e)},childCountForGroupAtIndex:function(e){return this._owningCompoundProvider.lengthForProviderAtIndex(e)},itemAtIndex:function(e){return this._owningCompoundProvider._subproviders[e]},indexOfItem:function(e){return e[this._indexKey]
},preloadRange:n$23,__superMap:{_VBVOOOFNsg$4Kc$init:"init"}});n$609=e,e.__QUALIFIED_CLASS_NAME__="Photos.CompoundModelProvider",t.__QUALIFIED_CLASS_NAME__="Photos.CompoundModelProviderGroupProvider$490"}();
    
    
        
!function(){"use strict";var e=n$609.extend(n$364,n$325,{itemClass:n$370,clientId:"top-level-combined",title:n$9(n$290("Tab.Albums")),type:n$370.FOLDER,_serverFolder:n$355(function(){return n$370.create(n$370.TOP_LEVEL_GENERATED_ID)}),_userFolder:n$355(function(){return n$370.create(n$370.TOP_LEVEL_USER_ID)}),_appDidStart:n$7(n$103.bindingFor("application.rootViewController"),n$103.bindingFor("application.isRestarting"),function(e,t){e&&!t&&(this.clear(),this.addProvider(this.get("_serverFolder")),this.addProvider(this.get("_userFolder")),this.load())}),load:function(){return n$247.all([this.get("_serverFolder").loadAfterAllFolders(),this.get("_userFolder").loadAfterAllFolders()])},getDedupedTitle:function(){return this._userFolder.getDedupedTitle.apply(this._userFolder,arguments)},loadingStatus:n$9({readOnly:!0,dependencies:["_serverFolder.loadingStatus","_userFolder.loadingStatus"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]),a=[s,r];return-1!==a.indexOf(n$329.ERRORED)?n$329.ERRORED:-1!==a.indexOf(n$329.LOADING)?n$329.LOADING:-1!==a.indexOf(n$329.CANCELLED)?n$329.CANCELLED:s===n$329.LOADED&&r===n$329.LOADED?n$329.LOADED:n$329.NOT_LOADED}}),aspectRatioEstimateForItemAtIndex:function(e){return this.invokeProviderMethodForItemAtIndex("aspectRatioEstimateForItemAtIndex",e)},toString:function(){return"[Root Folder]"}}).create().retain();n$372.registerModelProviderForBookmarkId(e.get("clientId"),e),n$611=e}();
    
    
        
!function(){"use strict";var e=n$569.extend({desiredSize:n$9(n$84(n$556,{width:259,height:148})),contentController:n$9({readOnly:!0,get:function(){return n$610.create({parentFolder:this.bindingFor("parentFolder")})}}),parentFolder:n$9(),submit:function(e){var t=this.parentFolder;t===n$611&&(t=n$370.create(n$370.TOP_LEVEL_USER_ID).retain(this).autorelease(this));var n=n$370.create(n$261().toUpperCase());return n.setPropertiesWithObject({type:n$370.ALBUM,title:t.getDedupedTitle(e.folderTitle,n$370.ALBUM),parentFolder:t}),this.sendEvent("navigateToAlbumContentsSelection",n),this.hide(),!0}});n$686=e,e.__QUALIFIED_CLASS_NAME__="Photos.AlbumCreationPopoverViewController"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$404,n$407,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"itemViews"}],classes:["cw-collection-view"]}},delegate:null,scrollBy:function(e,t){var n=this.get("delegate");n.didScroll(e,t)}});n$614=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.CollectionView"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{left:n$9(0),top:n$9(0),right:n$9(0),bottom:n$9(0),isEstimated:n$9(!1)});n$612=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.SpaceAroundViewport"}();
    
    
        
!function(){"use strict";var e=n$106.extend(n$91,{initFromPool:function(e){this._layoutController=e,this.__s._uSTJkqTFOE$41$initFromPool.apply(this,arguments)},didEnterPool:function(){var e=this._layoutController;this._isMapped&&e._cellWasDisposed(this),this._layoutController=null,this._isMapped=!1,this._isPositioned=!1,this.set("iterator",null),this.id=null,this.set("x",-1),this.set("y",-1),this.set("width",-1),this.set("height",-1),this.scrollX=0,this.scrollY=0,this.hasEntered=!1,this.isLastItem=!1,this.__s._uSTJkqTFOE$DJ$didEnterPool.apply(this,arguments)},iterator:n$4({get:function(e){return e},set:function(e,t){var t=this._iterator;return e!==t&&(t&&t.release(),e&&e.retain()),e}}),id:null,x:-1,y:-1,width:-1,height:-1,scrollX:0,scrollY:0,hasEntered:!1,moveBy:function(e,t){this.set("x",this.get("x")+e),this.set("y",this.get("y")+t),this.scrollX+=e,this.scrollY+=t},toString:function(){return this.__s._uSTJkqTFOE$rh$toString.call(this)+" iterator: "+this.get("iterator")+" x: "+this.get("x")+" y: "+this.get("y")+" width: "+this.get("width")+" height: "+this.get("height")},_layoutController:null,_isMapped:!1,_isPositioned:!1,__superMap:{_uSTJkqTFOE$41$initFromPool:"initFromPool",_uSTJkqTFOE$DJ$didEnterPool:"didEnterPool",_uSTJkqTFOE$rh$toString:"toString"}});n$613=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.Cell"}();
    
    
        
!function(){"use strict";var e=[],t=n$99.extend({splice:function(t,n){var i,r,s=t+n;for(i=t;s>i;i++)r=this.objectAt(i),r._isPositioned=!1,r.release();for(e.length=2,e[0]=t,e[1]=n,s=arguments.length,i=2;s>i;i++)r=arguments[i],r._isPositioned||(e.push(r),r._isPositioned=!0,r.retain());this.__s._kuRX19Iql7$R0$splice.apply(this,e)},__superMap:{_kuRX19Iql7$R0$splice:"splice"}}),n=n$5.extend(n$10,{collection:n$9(),layoutDelegate:n$9(),presenter:n$9(),cellClass:n$613,anchor:null,viewportWidth:n$9(1024),viewportHeight:n$9(768),horizontalOverdraw:n$9(0),verticalOverdraw:n$9(0),_updateBounds:n$7("viewportWidth","viewportHeight","horizontalOverdraw","verticalOverdraw",function(e,t,n,i){var r=this.get("bounds");n$66.pause(),r.set("x",-n),r.set("y",-i),r.set("width",e+2*n),r.set("height",t+2*i),n$66.resume()}),bounds:n$84(n$106,function(){return{x:-this.horizontalOverdraw,y:-this.verticalOverdraw}}),spaceAroundViewport:n$9(n$84(n$612)),visibleCells:n$84(t),_oldCells:n$84(t),_cellsHash:n$84(global.Object),_tmp_cellsArray:n$84(global.Array),moveBy:function(e,t){var n=this.visibleCells,i=n.get("length"),r=0;for(r=0;i>r;r++)n.objectAt(r).moveBy(e,t);this.anchor=this.get("layoutDelegate").updateAnchorForMovement(this,this.get("collection"),this.anchor,e,t)},_updateWhenContentsChange:n$7("collection","collection.contentsDidChange",function(){this.update()}),showItem:function(e){this.set("anchor",this.get("layoutDelegate").setUpCellForItemInViewport(this,this.get("collection"),this.get("visibleCells"),e)),this.update()},rectForItem:function(e){return this.get("layoutDelegate").setUpCellForItem(this,this.get("collection"),this.get("visibleCells"),e)
},_previousCollection:null,update:function(){if(!(this.get("viewportWidth")<1||this.get("viewportHeight")<1)){this._isUpdating&&n$11("LayoutController cannot update while an update is already in progress."),this._isUpdating=!0;var e=this.anchor,t=this.get("collection"),n=this.get("layoutDelegate"),i=null;e&&(i=n.setUpCellForAnchor(this,t,e)),!i||i.getPath("iterator.isValid")&&this._previousCollection===t||(i.release(),i=null),this._previousCollection=t,null===i&&(i=n.setUpInitialCell(this,t));var r=this._oldCells,s=this.visibleCells;this.visibleCells=r,this._oldCells=s,r.set("length",0);for(var a=s.get("length"),o=0;a>o;o++){var u=s.objectAt(o);u._isPositioned=!1}if(i&&null!==i.iterator){var l=this.get("bounds");if(!i.intersects(l)){var d=l.get("x")-i.get("x"),c=l.get("y")-i.get("y"),h=n.setUpCellAtDistance(this,t,i,d,c);i.release(),i=h}n.repositionCellIfNeeded(this,i),r.push(i),n.visibleCellsInViewport(this,t,i),i.release()}this._handleItemEnters(r),this._handleItemMoves(r),this._handleItemExits(s),s.set("length",0),e=n.anchorForNextCycle(this,t,e),this.anchor=e,this._isUpdating=!1,this.computeSpaceAroundViewport()}},_handleItemExits:function(e){var t=this._tmp_cellsArray,n=this.get("presenter"),i=0,r=0,s=null;for(t.length=0,r=e.get("length"),i=0;r>i;i++)s=e.objectAt(i),s._isPositioned||t.push(s);for(n.cellsWillExit(t),r=t.length,i=0;r>i;i++)s=t[i],s.hasEntered=!1,n.cellDidExit(s);n.cellsDidExit(t)},_handleItemEnters:function(e){var t=this._tmp_cellsArray,n=this.get("presenter"),i=0,r=0,s=null;for(t.length=0,r=e.get("length"),i=0;r>i;i++)s=e.objectAt(i),s.hasEntered||t.push(s);
for(n.cellsWillEnter(t),r=t.length,i=0;r>i;i++)s=t[i],n.cellDidEnter(s),s.hasEntered=!0;n.cellsDidEnter(t),t.length=0},_handleItemMoves:function(e){var t=this.get("presenter"),n=0,i=0,r=null;for(t.cellsWillMove(e),i=e.get("length"),n=0;i>n;n++)r=e.objectAt(n),t.cellDidMove(r);t.cellsDidMove(e)},cellForIterator:function(e){var t=n$22(e.get("value")),n=this._cellsHash[t];return n?n:(n=this.cellClass.create(this),n.set("iterator",e),n.id=t,this._mapCell(n),n)},_mapCell:function(e){var t=this._cellsHash,n=e.id;if(null===n){var i=this.get("collection");e.id=n=i.idForIterator(e.iterator)}var r=t[n];r||(e._isMapped=!0,t[n]=e)},_unmapCell:function(e){var t=e.id,n=this._cellsHash;n[t]===e&&delete n[t]},_cellWasDisposed:function(e){this._unmapCell(e)},computeSpaceAroundViewport:function(){var e=this.get("spaceAroundViewport");return n$66.pause(),0===this.visibleCells.get("length")?(e.set("left",0),e.set("right",0),e.set("top",0),e.set("bottom",0)):(e=this.get("layoutDelegate").computeSpaceAroundViewport(this),this.set("spaceAroundViewport",e)),n$66.resume(),e}});n$615=n,t.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.CellsArray$496",n.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.LayoutController"}();
    
    
        
!function(){"use strict";var e=n$109.getPath("sharedInstance.window"),t=n$194.extend({viewClass:n$614,cellClass:n$613,viewportWidth:n$9(0),viewportHeight:n$9(0),layoutController:n$9(),layoutDelegate:n$9(),presenter:n$9(),init:function(){this.__s._1jTt8eSxTIE$1pR$init.apply(this,arguments),this.setPath("presenter.views",this.getPath("view.itemViews")),this.set("layoutController",this._createLayoutController())},viewDidLoad:function(e){e.set("delegate",this)},didAttach:function(){this.__s._1jTt8eSxTIE$1tp$didAttach.apply(this,arguments),this.update()},_measureViewport:n$7("isAttached",e.bindingFor("x"),e.bindingFor("y"),function(){this.measureViewport()}),measureViewport:function(){if(this.get("isAttached")){var e=this.get("view");if(e){var t=e.get("element"),n=1,i=1;t&&(n=t.offsetWidth,i=t.offsetHeight),(this.get("viewportWidth")!==n||this.get("viewportHeight")!==i)&&(n$66.pause(),this.set("viewportWidth",n),this.set("viewportHeight",i),n$66.resume(),this.update())}}},collection:n$9(),_createLayoutController:function(){return n$615.create({collection:this.bindingFor("collection"),viewportWidth:this.bindingFor("viewportWidth"),viewportHeight:this.bindingFor("viewportHeight"),layoutDelegate:this.bindingFor("layoutDelegate"),presenter:this.bindingFor("presenter"),cellClass:this.cellClass})},update:function(){if(this.get("isViewLoaded")&&this.get("isAttached")){var e=this.get("viewportWidth"),t=this.get("viewportHeight"),n=this.get("view");n.set("height",t),n.set("width",e),this.get("layoutController").update()}},updateScrollBounds:n$7("viewportHeight","viewportWidth","layoutController.spaceAroundViewport.left","layoutController.spaceAroundViewport.top","layoutController.spaceAroundViewport.right","layoutController.spaceAroundViewport.bottom",function(e,t,n,i,r,s){if(void 0!==n&&void 0!==r&&void 0!==i&&void 0!==s){var o=this.get("view");
n$66.pause();var a=-n,l=r+t,u=-i,h=s+e;o.set("scrollMinX",a),o.set("scrollMaxX",l),o.set("scrollMinY",u),o.set("scrollMaxY",h),n$66.resume(),this.get("view").validateScrollPosition(0,0)}}),didScroll:function(e,t){this.get("layoutController").moveBy(-e,-t),this.update()},showItem:function(e){this.get("layoutController").showItem(e)},scrollToItem:function(e){var t=this.get("layoutController").rectForItem(e);if(t){var n=n$106.create(t).retain();t.release(),t=n;var i=this.get("view");t.set("x",t.get("x")+i.get("scrollX")),t.set("y",t.get("y")+i.get("scrollY")),i.scrollToRect(t)}},__superMap:{_1jTt8eSxTIE$1pR$init:"init",_1jTt8eSxTIE$1tp$didAttach:"didAttach"}});n$622=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.CollectionViewController"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],collectionType:n$86,setUpInitialCell:n$17(n$48),setUpFirstCell:n$17(n$48),setUpLastCell:n$17(n$48),setUpCellForItem:n$17(n$48),setUpCellForItemInViewport:n$17(n$48),visibleCellsInViewport:n$17(n$48),setUpCellAtDistance:n$17(n$48),repositionCellIfNeeded:function(){},computeSpaceAroundViewport:n$17(n$48),anchorForNextCycle:function(e){var t=e.visibleCells,n=t.get("length");return t.objectAt(Math.floor(n/2))},updateAnchorForMovement:function(e,t,n){return n},setUpCellForAnchor:function(e,t,n){return n.retain()}};n$616=e}();
    
    
        
!function(){"use strict";var e=n$82.create().retain(),t=n$106.create().retain(),n=n$5.extend(n$616,n$10,{collectionType:n$93,rowHeight:n$9(30),setUpInitialCell:function(e,t){return this.setUpFirstCell(e,t)},setUpFirstCell:function(e,t){if(!t)return null;var n=t.createIterator().retain();if(!n.get("isValid"))return n.release(),null;var i=e.cellForIterator(n).retain();return n.release(),i.set("x",0),i.set("y",0),i.set("width",this.widthForCell(e,i)),i.set("height",this.heightForCell(e,i)),i},setUpLastCell:function(e,t){if(!t)return null;var n=t.createIteratorAtEnd().retain();if(!n.get("isValid"))return n.release(),null;var i=e.cellForIterator(n).retain();n.release(),i.set("width",this.widthForCell(e,i));var r=this.heightForCell(e,i);return i.set("height",r),i.set("x",0),i.set("y",e.get("viewportHeight")-r),i},setUpCellForAnchor:function(e,t,n){return n.retain(),n.set("width",this.widthForCell(e,n)),n},_findCellForItemInDirection:function(e,t,n,i){n=n.clone().retain();for(var r;n.get("isValid");){if(r=n.get("value"),r===t){var a=e.cellForIterator(n).retain();return n.release(),a}n.moveBy(i)}return n.release(),null},_findCellForItem:function(e,t,n,i){var r=n.find(function(e){return e.getPath("iterator.value")===i});return r?r.retain():(r=this._findCellForItemInDirection(e,i,n.objectAt(0).get("iterator"),-1))?r:r=this._findCellForItemInDirection(e,i,n.objectAt(n.get("length")-1).get("iterator"),1)},setUpCellForItem:function(e,t,n,i){var r=this._findCellForItem(e,t,n,i);if(!r)return null;if(n.contains(r))return r;var a=n.objectAt(0),s=this.topForCell(e,a)-a.get("y");return r.set("x",this.leftForCell(e,r)),r.set("y",this.topForCell(e,r)-s),r.set("width",this.widthForCell(e,r)),r.set("height",this.heightForCell(e,r)),r
},setUpCellForItemInViewport:function(e,t,n,i){var r=this._findCellForItem(e,t,n,i);return r?(r.set("x",0),r.set("y",0),r.set("width",this.widthForCell(e,r)),r.set("height",this.heightForCell(e,r)),r):null},layOutInDirection:function(e,t,n,i){for(var r=n,a=e.get("bounds"),s=i>0;;){var o=r;if(r=this.positionAdjacentCell(e,o,i),!n$41(r))return o;if(s?r.isBelow(a):r.isAbove(a))return r.release(),o;(s?r.isAbove(a):r.isBelow(a))&&o&&o.get("x")<r.get("x")&&o.get("y")<r.get("y")&&n$11("Positioned an iterator out of bounds, and further out of bounds than the previous iterator. Crashing as this likely will end with an infinite loop."),s?t.push(r):t.unshift(r),r.release()}},visibleCellsInViewport:function(e,t,n){n.intersects(e.bounds)||n$11("Anchor is out of bounds. Crashing as this likely will end with an infinite loop.");var i=e.visibleCells;return this.layOutInDirection(e,i,n,-1),this.layOutInDirection(e,i,n,1),i},verticalScan:1/0,horizontalScan:1/0,setUpCellAtDistance:function(n,i,r,a,s){var o=this.horizontalScan,l=this.verticalScan;if(Math.abs(a)>o||Math.abs(s)>l)return this.estimateCellAtDistance(n,i,r,a,s);var u=isFinite(o)||isFinite(l),h=0;if(s>0)h=1;else if(0>s)h=-1;else if(a>0)h=1;else{if(!(0>a))return r;h=-1}if(e.set("x",r.get("x")+a),e.set("y",r.get("y")+s),u){var c=n.bounds;t.set("x",c.get("x")-o),t.set("y",c.get("y")-l),t.set("width",c.get("width")+2*o),t.set("height",c.get("height")+2*l)}r.retain();for(var d;null!==(d=this.positionAdjacentCell(n,r,h));){if(d.containsPoint(e)||0>h&&d.get("y")<=e.get("y")||h>0&&d.get("y")>=e.get("y")||u&&!d.intersects(t))return r.release(),d;
r.release(),r=d}return h>0?this.setUpLastCell(n,i):this.setUpFirstCell(n,i)},estimateCellAtDistance:null,positionAdjacentCell:function(e,t,n){var i,r=t.get("y"),a=t.get("iterator").retain(),s=t.retain();if(n>0){if(0===a.get("countAfter"))return a.release(),null;r+=this.heightForCell(e,s),s.release(),i=a.clone().retain(),a.release(),a=i,a.moveToNext(),s=e.cellForIterator(a).retain(),a.release()}else{if(0===a.get("countBefore"))return a.release(),null;s.release(),i=a.clone().retain(),a.release(),a=i,a.moveToPrevious(),s=e.cellForIterator(a).retain(),a.release(),r-=this.heightForCell(e,s)}return s.set("y",r),s.set("width",this.widthForCell(e,s)),s.set("height",this.heightForCell(e,s)),s.set("x",this.leftForCell(e,s)),s},widthForCell:function(e){return e.get("viewportWidth")},heightForCell:function(){return this.get("rowHeight")},leftForCell:function(){return 0},topForCell:function(e,t){return t.getPath("iterator.countBefore")*this.get("rowHeight")},computeSpaceAroundViewport:function(e){var t=e.get("spaceAroundViewport"),n=e.visibleCells,i=n.objectAt(0);t.set("left",0),t.set("right",0);var r=i.getPath("iterator.countBefore")*this.get("rowHeight");t.set("top",r-i.get("y"));var a=n.objectAt(n.get("length")-1),s=a.getPath("iterator.countAfter")*this.get("rowHeight");return t.set("bottom",s-(e.get("viewportHeight")-a.get("bottom"))),t}});n$617=n,n.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.ListLayoutDelegate"}();
    
    
        
!function(){"use strict";var e=n$617.extend({collectionType:n$96,topForCell:function(e,t){return t.getPath("iterator.position")*this.get("rowHeight")},verticalScan:1024,horizontalScan:1024,estimateCellAtDistance:function(e,t,n,i,r){var s=n.getPath("iterator.position"),a=Math.round(r/this.get("rowHeight"))+s,o=t.createIteratorAt(a),l=e.cellForIterator(o).retain(),d=this.topForCell(e,n),u=d-n.get("y");return l.set("x",this.leftForCell(e,l)),l.set("y",this.topForCell(e,l)-u),l.set("width",this.widthForCell(e,l)),l.set("height",this.heightForCell(e,l)),l},_findCellForItem:function(e,t,n,i){var r=n.find(function(e){return e.getPath("iterator.value")===i});if(r)return r.retain();var s=t.indexOf(i);if(-1===s)return null;var a=t.createIteratorAt(s);return e.cellForIterator(a).retain()}});n$623=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.IndexedListLayoutDelegate"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],cellsWillEnter:function(){},cellDidEnter:n$17(n$48),cellsDidEnter:function(){},cellsWillMove:function(){},cellDidMove:n$17(n$48),cellsDidMove:function(){},cellsWillExit:function(){},cellDidExit:n$17(n$48),cellsDidExit:function(){}};n$618=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],mappedViews:null,activeViews:null,init:function(){this.__s._yS5mR5eQmD$Hd$init.apply(this,arguments),this._pools={},this._viewHash={},this._itemsHash={},this.mappedViews=n$99.create(),this.activeViews=n$99.create()},viewForCell:function(e,t){var n=n$22(e),i=this._viewHash[n];if(!i){if(!t)return null;i=this._getViewOfClass(t),this._viewHash[n]=i,this._itemsHash[n$22(i)]=e}return i},cellForView:function(e){var t=this._itemsHash[n$22(e)];return void 0===t&&n$11("No item for view"),t},releaseViewForItem:function(e){var t=n$22(e),n=this._viewHash[t],i=n$22(n);n||n$11("No view for item"),this._releaseView(n),delete this._viewHash[t],delete this._itemsHash[i]},_getViewOfClass:function(e){var t=n$22(e),n=this._pools[t];n||(n=this._pools[t]=[]);var i;return n.length>0?i=n.pop():(i=this.viewForViewClass(e),this.mappedViews.push(i)),this.activeViews.push(i),i},viewForViewClass:function(e){return e.create()},_releaseView:function(e){var t=n$22(e.constructor),n=this._pools[t];n.push(e),this.activeViews.remove(e)},__superMap:{_yS5mR5eQmD$Hd$init:"init"}},t=n$5.extend(e);n$956=e,n$619=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.ViewPool"}();
    
    
        
!function(){"use strict";var e=n$619.extend(n$618,{itemViewClass:n$9(n$193),views:null,dataProperty:"content",itemViewClassForItem:function(){return this.itemViewClass},viewForViewClass:function(e){return e.create()},cellDidEnter:function(e){var t=this.viewForCell(e,this.itemViewClassForItem(e));this.itemViewDidEnter(t,e)},cellDidMove:function(e){var t=this.viewForCell(e);t&&this.itemViewDidMove(t,e)},cellDidExit:function(e){var t=this.viewForCell(e);this.itemViewDidExit(t,e),this.releaseViewForItem(e)},itemViewDidEnter:function(e,t){e.get("isAttached")||this.get("views").push(e),e.set(this.get("dataProperty"),t.get("iterator").get("value"))},itemViewDidMove:function(){},itemViewDidExit:function(){}});n$620=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.ItemViewPresenter"}();
    
    
        
!function(){"use strict";var e=n$620.extend({itemViewDidMove:function(e,t){e.get("style").set("width",t.get("width")).set("height",t.get("height")).translateDevicePixels(t.get("x"),t.get("y"))},itemViewDidExit:function(e){e.get("style").translate(-1e3,-1e3)}});n$624=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.AbsolutelyPositionedPresenter"}();
    
    
        
!function(){"use strict";var e=n$193.extend({additionalClassNames:["cw-list-item-view"]});n$625=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.ListItemView"}();
    
    
        
!function(){"use strict";var e=n$622.extend({viewClass:n$16({additionalClassNames:n$16(["cw-list-view"])}),layoutDelegate:n$9({defaultValue:n$84(n$623),downstreamBindings:{rowHeight:"(owner).rowHeight"}}),presenter:n$9({defaultValue:n$84(n$624),downstreamBindings:{itemViewClass:"(owner).itemViewClass"}}),rowHeight:n$9({readOnly:!0,defaultValue:30}),itemViewClass:n$9({readOnly:!0,defaultValue:n$625})});n$661=e,e.__QUALIFIED_CLASS_NAME__="CW.UI.Collections.ListViewController"}();
    
    
        
!function(){"use strict";var e=function(e,t,n){if(!t&&0!==t||t.toString===Object.prototype.toString||t.toString===Function.prototype.toString)return n.removeAttribute(e),void 0;if("boolean"==typeof t)t="";else if(Array.isArray(t)){if(!t.length)return n.removeAttribute(e),void 0;t=t.join(" ")}n.setAttribute(e,t)},t=function(t,n,i){e("data-"+t,n,i)},n=function(t,n,i){"boolean"==typeof n&&n&&(n=""+n),e("aria-"+t,n,i)};n$957=e,n$626=t,n$638=n}();
    
    
        
!function(){"use strict";var e=/(\.[a-z]|\.?[A-Z]|[0-9]+)/g,t={},n=function(n){var i=t[n];return i?i:(i=n.replace("_","").replace(e,function(e,t,n){return(n?"-":"")+t.toLowerCase().replace(".","")}),t[n]=i,i)};n$627=n}();
    
    
        
!function(){"use strict";var e={dataset:n$9({readOnly:!0,cacheable:!0,dependencies:["element"],get:function(e,n,i,r){return new t(r.internalGetPath(this,n[0+i]))}})},t=function(e){this._element=e};t.prototype={constructor:t,set:function(e,t){var n=n$627(e);n$626(n,t,this._element)},get:function(e){this._element.getAttribute("data-"+e)}};var n=n$8.extend({initForObject:function(e,t){this.__s._jGFtbKW14y$NE$initForObject.apply(this,arguments),e.observe(t,"dataset",function(e,n){n&&this.get("dataset").set(t,e)})},__superMap:{_jGFtbKW14y$NE$initForObject:"initForObject"}}),i=function(e){return"object"!=typeof e&&(e={defaultValue:e}),n.create(e)},r=function(e,t){var n=e.split(".").pop();return n$7(e,function(e){this.get("dataset").set(n,e),t.call(this,e)})};n$634=e,n$958=i,n$879=r,n.__QUALIFIED_CLASS_NAME__="Photos.DatasetProperty$509"}();
    
    
        
!function(){"use strict";var e=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),t=n$5.extend(n$62,{isSupported:e}),n=t.get("sharedInstance");n$959=t,n$628=n,t.__QUALIFIED_CLASS_NAME__="CW.Platform.Capabilities.FileAPI"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$136,n$10],dropEvent:"uploadFiles",allowsDrop:n$9(!0),handlesDrop:n$9({readOnly:!0,dependencies:["allowsDrop",n$103.bindingFor("application.isCreateAllowed"),n$298.bindingFor("enableUploads")],get:function(e,t,n,i){return!!(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])&&i.internalGetPath(this,t[2+n])&&n$628.isSupported)}}),_draggedTimer:n$84(n$411,{delay:100,action:"_dragEnded"}),isBeingDraggedOver:n$9({readOnly:!0,dependencies:["_isDragging","handlesDrop"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])},didChange:function(e){var t=this.getPath("element.classList");t&&t.toggle("photos-being-dragged-over",e)}}),_renewDrag:function(){this._draggedTimer.restart(),this.set("_isDragging",!0)},_dragEnded:function(){this.set("_isDragging",!1)},_isDragging:n$9(!1),dragEnter:function(e){return this._renewDrag(),this.configureDrag(e)},configureDrag:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer;return n$109.get("sharedInstance").get("isIE")||(t.effectAllowed="copy"),this.handlesDrop?(t.dropEffect="copy",!0):(t.dropEffect="none",!1)},dragOver:function(e){return this._renewDrag(),this.configureDrag(e)},dragLeave:function(e){return e.preventDefault(),e.stopPropagation(),this.handlesDrop},drop:function(e){return this.handlesDrop&&(n$310.hasDataTransferItemSupport?this.sendEvent(this.dropEvent,e.dataTransfer.items):this.sendEvent(this.dropEvent,e.dataTransfer.files)),this.dragLeave(e)}};n$635=e}();
    
    
        
!function(){"use strict";function e(e){return n$9({readOnly:!0,dependencies:["width","height","asset.width","asset.height","shouldCover","shouldCorrectForDevicePixelRatio",n$110.sharedInstance.bindingFor("devicePixelRatio")],get:function(t,i,r,s){var a=s.internalGetPath(this,i[6+r]),o=s.internalGetPath(this,i[5+r]),u=s.internalGetPath(this,i[4+r]),l=s.internalGetPath(this,i[3+r]),d=s.internalGetPath(this,i[2+r]),h=s.internalGetPath(this,i[1+r]),c=s.internalGetPath(this,i[0+r]);return c&&h&&d&&l?(o&&(c*=a,h*=a),(u?n$629:n$507)(d,l,c,h,n),0|n[e]):0/0}})}var t=n$5.extend(n$364,{owner:n$9(),width:n$9(0/0),height:n$9(0/0),shouldCorrectForDevicePixelRatio:n$9(!1),shouldCover:n$9(!1),asset:n$355(),derivativeSubset:n$9("renderableImage"),priority:n$9(0),minPriorityReduction:n$9(2e3),priorityReductionRange:n$9(1),wantsDownsampledDerivatives:n$9(!1),allowsShrinking:n$9(!0),areRequestsAllowed:n$9(!0),areAssetRequestsAllowed:n$9(!0),isDisabled:n$9({dependencies:[n$211.bindingFor("idl_disableDerivativeUse")],get:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])},writeDependencies:[],set:n$192}),firstByteSizeLimit:98304,byteSizeLimitMultiplier:n$9(10),perfectWidth:e("width"),perfectHeight:e("height"),perfectGeometricLength:n$9({readOnly:!0,dependencies:["perfectWidth","perfectHeight"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return Math.max(s,r)}}),nonOutdatedDerivative:n$9({readOnly:!0,dependencies:["perfectGeometricLength","derivativeSubset","asset","allowsShrinking","asset.derivativeDidLoad","_derivativeInfos"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[3+n]);
o||(r=Math.max(this._longestReturnedDerivativeDimension,r));var u=r&&a?a.bestLoadedDerivative(r,s):null;return u&&(this._longestReturnedDerivativeDimension=Math.max(this._longestReturnedDerivativeDimension,u.geometricLength)),u}}),derivative:n$355({readOnly:!0,dependencies:["nonOutdatedDerivative"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=r?r.asset.clientId:null,a=this._derivative_lastAssetClientId!==s;this._derivative_lastAssetClientId=s;var o=a?null:this._derivative_lastExistentDerivative;return this._derivative_lastExistentDerivative=r||o,this._derivative_lastExistentDerivative}}),shouldShowError:n$9({readOnly:!0,dependencies:["isComplete","_error","_derivativeInfos","_asset.loadingStatus"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),s=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);return o?!1:r===n$329.LOADED?!!a||!s||!s.length:r===n$329.ERRORED}}),isLoading:n$9({readOnly:!0,dependencies:["_loadRef"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!r}}),loadProgress:n$9({readOnly:!0,dependencies:["isComplete","isLoading","_loadRef.progress"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a?1:s?+r||0:0/0}}),totalProgress:n$9({readOnly:!0,dependencies:["isComplete","loadProgress","_loadRef","_asset","_derivativeInfos","perfectGeometricLength","byteSizeLimitMultiplier","_byteSizeLimit"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[7+n]),s=i.internalGetPath(this,t[6+n]),a=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),u=i.internalGetPath(this,t[3+n]),l=i.internalGetPath(this,t[2+n]),d=i.internalGetPath(this,t[1+n]),h=i.internalGetPath(this,t[0+n]);
if(h)return 1;if(!(o&&a&&l&&u))return 0/0;var c=u.derivativeInfoForClientId(this._loadingDerivativeClientId),p=0|this._totalProgressTrackingObject.loadedBytes,g=p,f=p;if(c&&(g+=c.byteSize,f+=d*c.byteSize),c.geometricLength<a){r=Math.max(r,c.byteSize*s);for(var _=o.indexOf(c);++_<o.length;){var v=o[_],m=o[_+1],$=!m||v.geometricLength>=a;if(($||m.byteSize>=r)&&(r=Math.max(r,v.byteSize*s),g+=v.byteSize),$)break}}return f/g}}),_totalProgressTrackingObject:n$84(Object),imperfection:n$9({readOnly:!0,dependencies:["perfectGeometricLength","nonOutdatedDerivative.info"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return Math.max(0,-1+s/(r?r.geometricLength:0))}}),isPerfect:n$9({readOnly:!0,dependencies:["imperfection"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 0===r}}),isComplete:n$9({readOnly:!0,dependencies:["isPerfect","_derivativeInfos","nonOutdatedDerivative.info"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(a)return!0;if(!r||!s)return!1;var o=s[s.length-1];return(r?r.geometricLength:0)>=(o?o.geometricLength:0)}}),_asset:n$9({readOnly:!0,dependencies:["asset","asset.cannotHaveImageDerivative","isDisabled"],get:function(e,t,n,i){return i.internalGetPath(this,t[2+n])||i.internalGetPath(this,t[1+n])?null:i.internalGetPath(this,t[0+n])}}),_loadRef:n$355({didChange:function(e){e||(this._loadingDerivativeClientId=null,this._loadingDerivativeGeometricLength=0/0)}}),_loadingDerivativeGeometricLength:0/0,_loadingDerivativeClientId:null,_error:n$9(null),error:n$9({readOnly:!0,dependencies:["shouldShowError","_error"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n])||new Error("Metadata load failure"):null
}}),_byteSizeLimit:n$9({defaultValue:function(){return this.firstByteSizeLimit}}),_adjustedPriority:n$9({readOnly:!0,dependencies:["priority","nonOutdatedDerivative","imperfection","minPriorityReduction","priorityReductionRange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[4+n]),s=i.internalGetPath(this,t[3+n]),a=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[1+n]),u=i.internalGetPath(this,t[0+n]);if(!o)return u;var l=1-Math.min(a/4,1),d=s+l*r;return u+d}}),_longestReturnedDerivativeDimension:0,_derivativeInfos:n$9(),_maintainDerivativeInfosBinding:function(){var e={},t=function(t){var n=e[t];return n||(n=e[t]=n$14("_asset."+n$309.propertyKeyForDerivativeSubset(t))),n};return n$7("derivativeSubset",function(e){this.bind("_derivativeInfos",t(e))})}(),_maintainRefPriority:n$7("_loadRef","_adjustedPriority",function(e,t){e&&e.setIfChanged("priority",t)}),_updateStateForNewOrBetterDerivatives:n$7("nonOutdatedDerivative","_derivativeInfos",function(e,t){n$66.pause();var n=t?t.derivativeInfoSetToken:null,i=n!==this._updateStateForNewOrBetterDerivatives_lastDISToken;if(this._updateStateForNewOrBetterDerivatives_lastDISToken=n,i)this._cleanUpCurrentLoad(),this._longestReturnedDerivativeDimension=0,this.setIfChanged("_error",null),this.setIfChanged("_byteSizeLimit",this.firstByteSizeLimit),n$382(this._totalProgressTrackingObject);else if(e){var r=e.info,s=r.clientId,a=r.byteSize,o=this._totalProgressTrackingObject;o[s]||(o[s]=!0,o.loadedBytes=(0|o.loadedBytes)+a),this.setIfChanged("_byteSizeLimit",Math.max(a*this.byteSizeLimitMultiplier,this._byteSizeLimit))}n$66.resume()
}),_load:n$7("_asset","_derivativeInfos","isComplete","areRequestsAllowed","perfectGeometricLength","_updateStateForNewOrBetterDerivatives",function(e,t,n,i,r){var s=!(!(i&&t&&r)||n&&this.nonOutdatedDerivative||this._error),a=this._loadRef,o=a;if(!s&&a&&(a.cancel(!0),a=null),!t||!t.length)return e&&i&&this.areAssetRequestsAllowed&&e.loadingStatus===n$329.NOT_LOADED&&e.load(),void 0;if(s){for(var u=null,l=this._byteSizeLimit,d=0|this.getPath("nonOutdatedDerivative.geometricLength"),h=0;h<t.length&&!u;h++){var c=t[h];if(!(c.geometricLength<=d)){var p=t[h+1];(c.geometricLength>=r||!p||p.byteSize>l)&&(u=c)}}u?(a&&this._loadingDerivativeGeometricLength<u.geometricLength&&(a.cancel(!0),a=null),a||(this._loadingDerivativeGeometricLength=u.geometricLength,this._loadingDerivativeClientId=u.clientId,a=e.requestDerivative(u),a.then(n$356(this._derivativeDidLoad,this),n$356(this._derivativeDidFail,this)))):this._derivativeDidFail()}a=a||null,o!==a&&(this._loadRef=a)}),_informAssetOfDownsampleDesire:n$7("wantsDownsampledDerivatives","perfectGeometricLength","nonOutdatedDerivative","_asset",function(e,t,n,i){e&&t&&n&&i&&i.requestDownsample(t,n)}),_derivativeDidLoad:function(){n$66.pause(),this._cleanUpCurrentLoad(),this._error=null,this.propertyChanged("nonOutdatedDerivative"),n$66.resume()},_derivativeDidFail:function(e){n$66.pause(),this._cleanUpCurrentLoad(),this._error=e||new Error("Derivative load failure"),n$66.resume()},_cleanUpCurrentLoad:function(){var e=this._loadRef;e&&(e.cancel(!0),this._loadRef=null)},dispose:function(){this._cleanUpCurrentLoad(),this.__s._KyWXopHRgY$9kA$dispose.apply(this,arguments)
},__superMap:{_KyWXopHRgY$9kA$dispose:"dispose"}}),n={};n$630=t,t.__QUALIFIED_CLASS_NAME__="Photos.ImageDerivativeLoader"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{owner:n$9(),shouldCover:n$9(!1),width:n$9(0),height:n$9(0),priority:n$9(0),wantsDownsampledDerivatives:n$9(!1),assets:n$9(),_derivativeLoaders:n$361({source:"assets",outputForInput:function(e){return e?t.create(this,e):null},didChange:n$23}),derivatives:n$361({source:"_derivativeLoaders",inputDidEnter:function(e,t){e&&(e.notifyDerivativeChange=t)},inputDidExit:function(e){e&&(e.notifyDerivativeChange=null)},outputForInput:function(e){return e&&e.derivative}})}),t=n$630.extend(n$302,{shouldCover:n$14("owner.shouldCover"),width:n$14("owner.width"),height:n$14("owner.height"),priority:n$14("owner.priority"),wantsDownsampledDerivatives:n$14("owner.wantsDownsampledDerivatives"),notifyDerivativeChange:null,_derivativeDidChange:n$170("derivative",function(){this.notifyDerivativeChange&&this.notifyDerivativeChange(this)}),initFromPool:function(e,t){this.__s._1Dz3088cxxi$ym$initFromPool.apply(this,arguments),this.owner=e,this.asset=t},dispose:function(){this.owner=this.asset=null,this.__s._1Dz3088cxxi$105$dispose.apply(this,arguments)},__superMap:{_1Dz3088cxxi$ym$initFromPool:"initFromPool",_1Dz3088cxxi$105$dispose:"dispose"}});n$636=e,e.__QUALIFIED_CLASS_NAME__="Photos.MultipleImageDerivativeLoader",t.__QUALIFIED_CLASS_NAME__="Photos.SingleImageDerivativeLoader$513"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{isLoaded:n$9(!1),_checkCount:0,init:function(){this.__s._4ataoWDFHr1$AM$init.apply(this,arguments);var e=this._testDiv=document.createElement("div");e.className="app-css-support-test-element",document.body.appendChild(e),this._loadCheckInterval=setInterval(this._checkForLoadedCSS,100),document.addEventListener("mousemove",this._checkForLoadedCSS,!1),this._checkForLoadedCSS()},_checkForLoadedCSS:n$528(function(){this._checkCount++,100===this._checkCount&&clearInterval(this._loadCheckInterval),this.get("isLoaded")||"app_css_is_loaded"!==n$160(this._testDiv).get("font-family")||this.set("isLoaded",!0)}),_cssDidLoad:n$7("isLoaded",function(e){if(e){document.removeEventListener("mousemove",this._checkForLoadedCSS,!1),clearInterval(this._loadCheckInterval);var t=this._testDiv;t.parentNode&&t.parentNode.removeChild(t)}}),__superMap:{_4ataoWDFHr1$AM$init:"init"}}),t=e.create();n$632=t,e.__QUALIFIED_CLASS_NAME__="Photos.AppCSS$514"}();
    
    
        
!function(){"use strict";function e(e){return t.canvasFromCSSBackground(e)}var t=n$5.extend(n$10,{isCSSLoaded:n$9(n$632.bindingFor("isLoaded")),canvasFromCSSBackground:function(e){var t=this._canvasPreparers,i=n$22(e),r=t[i];return r||(r=t[i]=n.create(e)),r.thenable},_canvasPreparers:{}}).create(),n=n$5.extend({className:null,staticMembers:{_imageCache:{},_styleReaderDiv:document.createElement("div"),_srcForURLStyle:function(e){if(!e)return null;var t=e.substring(0,4);return"url("!==t?null:'"'===e[4]||"'"===e[4]?e.slice(5,-2):e.slice(4,-1)},_imageLoadHandler:function(){for(var e=this._preparers,t=e.length;t--;)e[t].prepareAsFarAsPossible()},_imageErrorHandler:function(){for(var e=this._preparers,t=e.length;t--;)e[t].handleFailure()}},init:function(e){this.__s._4GX4EKMlUAk$w7$init.call(this),"string"==typeof e?this.className=e:this.element=e,this.thenable=n$633.create(),this.prepareAsFarAsPossible()},handleFailure:function(){this._hasFailed=!0,this.thenable.reject()},prepareAsFarAsPossible:function(){if(!this.canvas||!this._hasFailed){if(!t.get("isCSSLoaded"))return this._hasLoadObserver||(this._hasLoadObserver=!0,t.observe("isCSSLoaded",this.prepareAsFarAsPossible.bind(this))),void 0;if(this._addBackgroundStylingInfoIfNeeded(),!this.src)return this.handleFailure(),void 0;this._addImageIfNeeded();var e=this.image;e.complete&&(this._computeDrawMetricsIfNeeded(),this._createCanvasIfNeeded(),this.thenable.resolve(this.canvas))}},_addBackgroundStylingInfoIfNeeded:function(){if(!this.hasStyleInfo){this.hasStyleInfo=!0;var e=this.element;e||(e=this.constructor._styleReaderDiv,e.className=this.className,document.body.appendChild(e));
var t=n$160(e);if(this.src=this.constructor._srcForURLStyle(t.get("background-image")),this.src){var n=t.get("background-position");this.bgX=-Math.round(parseFloat(n)),this.bgY=-Math.round(parseFloat(n.substring(n.indexOf(" ")+1))),this.divW=Math.round(parseFloat(t.get("width"))),this.divH=Math.round(parseFloat(t.get("height")));var i=t.get("background-size");i?(this.bgW=Math.round(parseFloat(i)),this.bgH=Math.round(parseFloat(i.substring(i.indexOf(" ")+1)))):this.bgW=this.bgH=0/0,e===this.constructor._styleReaderDiv&&document.body.removeChild(e)}}},_addImageIfNeeded:function(){var e=this.image;if(!e){var t=this.src,n=this.constructor._imageCache;e=n[t],e||(e=n[t]=new Image,e._preparers=[],e.onload=this.constructor._imageLoadHandler,e.src=t),e._preparers.push(this),this.image=e}},_computeDrawMetricsIfNeeded:function(){if(!this.hasDrawMetrics){this.hasDrawMetrics=!0;var e=this.image,t=this.imageW=e.naturalWidth,n=this.imageH=e.naturalHeight,i=t/(this.bgW||t),r=n/(this.bgH||n);(i!==r||0!==i%1)&&n$11('The background-size provided by sprited-image class name "'+this.className+"\" should be the sprite's size divided by an integer."+"\n    sprite is "+t+" by "+n+"\n    background size is "+this.bgW+" by "+this.bgH+"\n    horizontal downscale is "+i+"\n    vertical downscale is "+r);var s=i;this.sourceX=this.bgX*s,this.sourceY=this.bgY*s,this.sourceW=this.divW*s,this.sourceH=this.divH*s,this.pixelRatio=s}},_createCanvasIfNeeded:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");e.width=this.sourceW,e.height=this.sourceH,e.getContext("2d").drawImage(this.image,this.sourceX,this.sourceY,this.sourceW,this.sourceH,0,0,this.sourceW,this.sourceH),e.pixelRatio=this.pixelRatio
}},__superMap:{_4GX4EKMlUAk$w7$init:"init"}});n$637=e,n.__QUALIFIED_CLASS_NAME__="Photos.CanvasPreparer$515"}();
    
    
        
!function(){"use strict";var e={staticMembers:{registerOutletAndSubOutlets:function(e){n$57(e)||this._pushNamesToClasses(e),this.__s._xj_sGeHOPL$9q$registerOutletAndSubOutlets.apply(this,arguments)},_pushNamesToClasses:function(e){if(e.children)for(var t=e.children.length;t--;)this._pushNamesToClasses(e.children[t]);var n=e.name;if(n&&(e.classes=e.classes||[],-1===e.classes.indexOf(n)&&(e.classes.push(n$627(e.name)),"VIEWOUTLET"===e.type||"MULTIVIEWOUTLET"===e.type))){var i="__TemplateNamesToClassesSupport__"+n+"DidChange"+n$22(e),r=function(t){if(t){var n=t.get("element").classList;n.add.apply(n,e.classes)}};r.displayName=i,this.prototype.registerMetadata(i,n$7(n,r))}},__superMap:{_xj_sGeHOPL$9q$registerOutletAndSubOutlets:"registerOutletAndSubOutlets"}}};n$639=e}();
    
    
        
!function(){"use strict";function e(e){var t=n[e];if(!t){t=n[e]=new Image;var i=t._thenable=n$633.create();n$107(t,"load",function(){t.naturalWidth||t.width||(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),i.resolve(t)}),n$107(t,"error",i.reject.bind(i)),t.src=e}return t._thenable}function t(e){var t=n[e];return t&&t.complete&&t.naturalWidth?t:null}var n={};n$640=e,n$641=t}();
    
    
        
!function(){"use strict";var e="toggle",t="extend",n="set";n$644=e,n$645=t,n$643=n}();
    
    
        
!function(){"use strict";var t={day:864e5,hour:36e5,minute:6e4},e={day:[void 0,"RecentlyDeleted.DaysRemaining.1","RecentlyDeleted.DaysRemaining.2","RecentlyDeleted.DaysRemaining.More"],hour:[void 0,"RecentlyDeleted.HoursRemaining.1","RecentlyDeleted.HoursRemaining.2","RecentlyDeleted.HoursRemaining.More"],minute:["RecentlyDeleted.MinutesRemaining.0","RecentlyDeleted.MinutesRemaining.1","RecentlyDeleted.MinutesRemaining.2","RecentlyDeleted.MinutesRemaining.More"]},n=n$193.extend(n$395,n$364,n$634,n$639,n$635,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_favoriteBadge"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_textContent",attributes:{}}],name:"_textContainer",classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isShowingFolder",truevalue:"folder-title",falsevalue:"asset-time-remaining",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isExpungeImminent",truevalue:"expunge-imminent",attributes:{}}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_textContent",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}}],classes:["photos-flexible-grid-item-view","absolutely-positionable"]}},targetEdgeRipSize:6,actionDelay:n$9({readOnly:!0,dependencies:["isSelectionEnabled"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r?0:1}}),shouldLayerBack:!0,_shouldShowError:n$9(n$14("_derivativeLoader.shouldShowError")),_derivative:n$9(n$14("_derivativeLoader.derivative")),_folderPreviewDerivatives:n$9(n$14("_folderPreviewDerivativesLoader.derivatives")),priority:n$9(0),_derivativeLoader:n$9(n$84(n$630.extend({shouldCover:!0,shouldCorrectForDevicePixelRatio:!1,wantsDownsampledDerivatives:!0,areAssetRequestsAllowed:!1,priority:n$14("owner.priority"),asset:n$14("owner._asset"),_maintainIsDisabled:n$7("owner.velocity",function(t){this.setIfChanged("isDisabled",Math.abs(t)>3e3)
})}))),_folderPreviewDerivativesLoader:n$355({readOnly:!0,dependencies:["_folder.previewAssets"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=this._fpdl_cache;return r&&r.length?(a||(a=this._fpdl_cache=l.create(this)),a):(a&&(this._fpdl_cache=null),null)}}),_cannotHaveImageDerivative:n$9({readOnly:!0,dependencies:["_asset","_asset.cannotHaveImageDerivative"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return!a||r}}),isSelectionEnabled:n$9(!1),isFavoritingAllowed:n$9(!1),isTimeRemainingTextAllowed:n$9(!1),_isFavoritingDisabled:n$9({readOnly:!0,dependencies:["isSelectionEnabled","isFavoritingAllowed","_asset.loadingStatus","_isShowingRecentlyDeleted","_isShowingFolder"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[4+n]),a=i.internalGetPath(this,e[3+n]),s=i.internalGetPath(this,e[2+n]),o=i.internalGetPath(this,e[1+n]),l=i.internalGetPath(this,e[0+n]);return!(!l&&o&&s===n$329.LOADED&&!a&&!r)}}),_isShowingRecentlyDeleted:n$9({readOnly:!0,dependencies:["_asset.expungeDate","isTimeRemainingTextAllowed"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return+a===a&&r}}),_isShowingFolder:n$9({readOnly:!0,dependencies:["_folder"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!!r}}),isSelected:n$9(!1),model:n$355(),_folder:n$9({readOnly:!0,dependencies:["model"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return n$32(r,n$370)?r:null},didChange:function(t){n$215("folderClientId",t&&t.isServerCreated?t.clientId:null,this.element,"data-"),n$215("folderIsUserCreatedSmartAlbum",t?t.isUserCreatedSmartAlbum:!1,this.element)
}}),_asset:n$355({readOnly:!0,dependencies:["_folder","_folder.keyAsset","model"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[0+n]);return s?a:r}}),allowsDrop:n$14("_folder.isUploadAllowedInUI"),_modelAspectRatio:n$9({readOnly:!0,dependencies:["_asset","_asset.aspectRatioEstimate","_folder","_folder.aspectRatioEstimate"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[0+n]);return r?r.aspectRatioEstimate:a?a.aspectRatioEstimate:1}}),_requiresPrettierPaint:!1,velocity:n$9(0),_isStationary:n$9({readOnly:!0,dependencies:["velocity"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r}}),_isStationaryDidChange:n$7("_isStationary",function(t){return t&&this._requiresPrettierPaint?(this._stationaryPrettyPaintTimeout||(this._stationaryPrettyPaintTimeout=n$130(this._didStayStationaryWhileNeedingPrettierPaint,0|n$211.fgiv_prettyPaintDelayFromIdle+n$211.fgiv_prettyPaintDuration*(this._currentTop/window.innerHeight+.1*(this._currentLeft/window.innerWidth)))),void 0):(this._cancelStationaryPrettyPaintTimeout(),void 0)}),_cancelStationaryPrettyPaintTimeout:function(){this._stationaryPrettyPaintTimeout&&(clearTimeout(this._stationaryPrettyPaintTimeout),this._stationaryPrettyPaintTimeout=null)},_didStayStationaryWhileNeedingPrettierPaint:n$299(function(){this.get("_isStationary")&&this._requiresPrettierPaint&&this._forcePaint()}),_millisRemainingUntilExpunge:n$9({readOnly:!0,dependencies:["_asset.expungeDate","_heartbeatBinding"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=Math.max(0,(+r||0/0)-Date.now());
return a&&!this._mrue_isHeartbeatConnected&&(this._mrue_isHeartbeatConnected=!0,n$357(this.bind.bind(this,"_heartbeatBinding",n$377.bindingFiringEverySecond()))),a}}),_heartbeatBinding:n$9(),_isExpungeImminent:n$9({readOnly:!0,dependencies:["_millisRemainingUntilExpunge","_isShowingRecentlyDeleted",n$211.bindingFor("turnRecentlyDeletedTimeRemainingRedBelowDays")],get:function(e,n,i,r){var a=r.internalGetPath(this,n[2+i]),s=r.internalGetPath(this,n[1+i]),o=r.internalGetPath(this,n[0+i]);return s&&Math.floor(o/t.day)<=a}}),_timeRemainingText:n$9({readOnly:!0,dependencies:["_millisRemainingUntilExpunge","_isShowingRecentlyDeleted"],get:function(n,i,r,s){var o=s.internalGetPath(this,i[0+r]);if(!s.internalGetPath(this,i[1+r])||isNaN(o))return"";var l=o>=t.day?"day":o>=t.hour?"hour":"minute",h=a.count=Math.floor(o/t[l]),u=Math.max(0,Math.min(3,0|h));return n$290(e[l][u],a)}}),_textContent:n$9({readOnly:!0,dependencies:["_wantsTextContent","_isShowingFolder","_timeRemainingText","_folder.title"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[2+n]),o=i.internalGetPath(this,e[3+n]);return r?(a?o:s)||"":""}}),_wantsTextContent:n$9(),_isFavoriteDidChange:n$7("_asset.isFavorite","_favoriteBadge",function(t,e){e&&e.setIfChanged("isOn",!!t)}),_favoriteBadge:n$9({readOnly:!0,dependencies:["_isShowingFolder"],get:function(t,e,n,r){var a=r.internalGetPath(this,e[0+n]);return a?null:(this.__favoriteBadge=this.__favoriteBadge||i.create({target:this,action:"_toggledFavoriteBadge",isDisabled:this.bindingFor("_isFavoritingDisabled"),additionalClassNames:n$16(["favorite-badge"])}).retain(this),this.__favoriteBadge)
}}),__favoriteBadge:null,_toggledFavoriteBadge:function(){if(!this.get("isSelectionEnabled")){var t=this.get("_asset"),e=this.get("_favoriteBadge");t&&e&&t.setIfChanged("isFavorite",e.get("isOn"))}},_topStripeCount:n$9({readOnly:!0,dependencies:["_folder.isAlbum","_folder.itemCount","_asset.burstAssetModelProvider.itemCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[2+n]);if(r===!1)return 0;var o=void 0===a?s:a;return Math.max(0,(o||0)-1)}}),_layoutPropertiesChanged:n$7("isSelected","_topStripeCount","isBeingPressed","_shouldShowError","_derivative","_folderPreviewDerivatives","_folder.loadingStatus","_asset.loadingStatus","_isShowingRecentlyDeleted","_modelAspectRatio",function(){this.doLayout()}),_buildFontString:function(t){var e=this._font;if(!e&&(e=this._font=this.style.get("font-family"),!e))return"";var n=this._fontWeight;return n||(n=this._fontWeight=this.style.get("font-weight")),n+" "+t+"px "+e},init:function(){this.__s._3ngMovQeJO6$7Lm$init.apply(this,arguments);var t,e;t=document.createElement("canvas"),t.width=t.height=0,t.className="absolutely-positionable",e=t.getContext("2d"),this.get("element").appendChild(t),this._canvas=t,this._context=e,this._derivativeLoader.retain(this)},clearForReuse:function(){this._isLayoutDisabled=!0;var t=this._canvas,e=this._context;t&&e&&e.clearRect(0,0,t.width,t.height),this._layoutArgs&&n$319.disposeInstance(this._layoutArgs),this._layoutArgs=null,this._paintInputsGuid=null,this._currentLeft=0/0,this._currentTop=0/0,this._currentWidth=0/0,this._currentHeight=0/0,this._requiresPrettierPaint=!1,this._cancelStationaryPrettyPaintTimeout(),this._unscheduleForcedPaint(),this.style.translate(-1e4,-1e4).scale(0).layerBackIf(this.shouldLayerBack),this._updateDerivativeLoader(!0),this.unsetAllStrongRefs(),this._isLayoutDisabled=!1
},dispose:function(){var t=this._derivativeLoader;this.__s._3ngMovQeJO6$86a$dispose.apply(this,arguments),t.release(this),this.__favoriteBadge&&(this.__favoriteBadge.release(this),this.__favoriteBadge=null)},_ensureThatModelsAreLoaded:n$7("_asset","_folder",function(t,e){t&&t.load(),e&&e.load()}),pointerHitTest:function(t){var e=t.clientX-this._currentLeft,n=t.clientY-this._currentTop,i=this._currentWidth,r=this._currentHeight;return e>=0&&i>=e&&n>=0&&r>=n},_maintainDropTargetStyling:n$7("isBeingDraggedOver",function(t){var e=this._dropTargetDecor;if(!(e&&t||!e&&!t)){var n=150,i=6,r=1/15,a=.6;if(t){e=document.createElement("div"),e.classList.add("fgiv-drop-target");var s=n$110.sharedInstance.devicePixelRatio,l=Math.max(this._drawnWidthInCanvas,this._drawnHeightInCanvas),h=i+l*r,u=a*o.multiStripesHeightForSizeAndQuantity(this._backingBaseSize,this._topStripeCount),d=-h+(this._drawnTopInCanvas-u)/s,c=-h,_=2*h+(this._drawnLeftInCanvas+this._drawnWidthInCanvas)/s,g=h+Math.max(this._textContentVisualHeight,h)+(this._drawnHeightInCanvas+u)/s;n$160(e).set("top",0|d).set("left",0|c).set("width",Math.ceil(_)).set("height",Math.ceil(g)).set("border-radius",h).set("transition","opacity "+n+"ms").set("opacity",1),this.element.appendChild(e)}else n$160(e).set("opacity",0),setTimeout(this.element.removeChild.bind(this.element,e),n),e=null;this._dropTargetDecor=e}}),layOutMainRect:function(t,e,n,i,r){this.doLayout(t,e,n,i,Math.max(n,i),r,!0)},doLayout:function(t,e,n,i,r,a,s){if(!this._isDoingLayout&&!this._isLayoutDisabled){if(this._isDoingLayout=!0,!arguments.length){if(this._isDoingLayout=!1,!this._layoutArgs)return;
return this.doLayout.apply(this,this._layoutArgs),void 0}this._layoutArgs&&n$319.disposeInstance(this._layoutArgs),this._layoutArgs=n$319.getInstance(),this._layoutArgs.push.apply(this._layoutArgs,arguments),r||(r=Math.max(n,i));var l=n$110.sharedInstance.devicePixelRatio;this._devicePixelRatio=l,n=Math.round(n*l)/l,i=Math.round(i*l)/l,r=Math.round(r*l)/l,this._backingBaseSize=r*l,this._backingWidth=n*l,this._backingHeight=this._backingBaseSize,this._backingCellHeight=i*l,this._topStripesHeight=o.multiStripesHeightForSizeAndQuantity(this._backingBaseSize,this._isShowingFolder?1/0:this._topStripeCount),s&&(e-=this._topStripesHeight/l,i+=this._topStripesHeight/l,this._backingCellHeight+=this._topStripesHeight,this._backingHeight=Math.max(this._backingCellHeight,this._backingHeight)),this._shouldPrioritizeDerivativeForLayout=!this._isShowingFolder,this._shouldAllowUpscalingOfSmallAssets=this._isShowingFolder||n$211.fgiv_shouldAllowUpscaling,this._spansMultipleColumns=this._backingWidth>this._backingHeight&&!s,this._cropInset=(0|.75*this.targetEdgeRipSize*l)/l,this._debug_isRenderingEnabled=!n$211.fgiv_disableRendering,this._paintIfNeeded();var h=this._canvasWidth/l,u=this._canvasHeight/l,d=this._drawnLeftInCanvas/l,c=this._drawnTopInCanvas/l,_=this._drawnWidthInCanvas/l,g=this._drawnHeightInCanvas/l,f=(n-_-d)/2,p=t+f,v=(i-g-c)/2,m=e+v;if(p=Math.round(p*l)/l,m=Math.round(m*l)/l,this._textContentVisualHeight=0,this._debug_isRenderingEnabled){var $=n>=40;this._wantsTextContent!==$&&(this._wantsTextContent=$);var y=this.style;y.layerBackIf(this.shouldLayerBack).translate(p,m),a&&y.set("z-index",a),n$160(this._canvas).set("width",h).set("height",u);
var w=this.getPath("_favoriteBadge.style");if(w&&w.translate(d+this._horizontalCropInset,c+this._verticalCropInset),this._isShowingRecentlyDeleted&&(this._textContentVisualHeight=30,n$160(this._textContainer).set("top",Math.ceil(g+c+11)).translateY("-30%").set("left",-f).set("width",n)),this._isShowingFolder){var I=Math.round(15*Math.min(1,.5*(n/150)+.5)),S=Math.round(.8*I);this._textContentVisualHeight=2*I+S,n$160(this._textContainer).set("font-size",I).set("top",i-v+S).set("left",Math.ceil(-.1*(_+d))).set("width",Math.ceil(1.2*(_+d))).set("height",Math.ceil(1.6*I))}}this._currentLeft=p+d,this._currentTop=m+c,this._currentWidth=_,this._currentHeight=g,this._isDoingLayout=!1}},_paintIfNeeded:function(){this._needsPaint()&&(this._sizeCanvas(),this._computeDrawnRectangle(),this._updateDerivativeLoader(),this._decideVisualCropIndication(),this._debug_isRenderingEnabled&&(this._paintInProperlySizedCanvas(),this._drawDurationBadgeIfNeeded(),this._drawTypeBadgeIfNeeded(),this._drawWarningBadgeIfNeeded(),this._drawEmptyAlbumBadgeIfNeeded(),this._drawDebugInfoIfNeeded(),this._drawSelectionStylingIfNeeded(),this._finalizeTopStripeOpacitiesIfNeeded(),this._tearCroppedEdgesIfNeeded(),this._clipRoundedCornersIfNeeded(),this._drawPointerInteractionStateIfNeeded()))},_forcePaint:n$299(function(){this._unscheduleForcedPaint(),this._paintInputsGuid=null,this.doLayout()}),_forcePaintOnceSoon:n$299(function(){this._forcePaintFrame||(this._forcePaintFrame=n$357(this._forcePaint))}),_unscheduleForcedPaint:function(){this._forcePaintFrame&&(window.cancelAnimationFrame(this._forcePaintFrame),this._forcePaintFrame=null)
},_forcePaintFrame:null,_needsPaint:function(){return this._havePaintInputsChanged(this._backingWidth,this._backingCellHeight,this.getPath("model.loadingStatus")+":"+(this._isShowingFolder?this.getPath("_asset.loadingStatus"):""),this._derivative,String(this._folderPreviewDerivatives),this._modelAspectRatio,this._topStripeCount,this.isSelected,this.isBeingPressed,this._shouldShowError)},_havePaintInputsChanged:function(){return this._paintInputsGuid!==(this._paintInputsGuid=n$236(arguments))},_sizeCanvas:function(){var t=this._canvas,e=this._context,n=this._backingWidth,i=this._backingHeight;this._imageWidthInCanvas=n,this._imageHeightInCanvas=i;var r=this._devicePixelRatio;n=Math.ceil(n/r)*r,i=Math.ceil(i/r)*r,this._canvasWidth=n,this._canvasHeight=i,this._debug_isRenderingEnabled&&(t.width!==n||t.height!==i?(t.width=n,t.height=i):e.clearRect(0,0,n,i))},_computeDrawnRectangle:function(){var t=this._devicePixelRatio,e=this._imageWidthInCanvas,n=this._backingCellHeight,i=this._asset,a=this._derivative;a=a&&a.isLoaded&&a;var s=i&&i.width,o=i&&i.height;s&&o||(s=o=0);var l,h,u,d=0,c=0,_=0,g=0;if(this._shouldPrioritizeDerivativeForLayout)if(a){if(u=a.rectInElement,l=_=u.width,h=g=u.height,s&&o){var f=_/g/(s/o);Math.max(f,1/f)>1.2&&n$63.warn("Received a derivative whose aspect ratio does not match its asset's.\n     asset index: "+i.get("_index")+", asset clientId: "+i.get("clientId")+"\n"+"     asset is "+s+" by "+o+".\n"+"     derivative is "+_+" by "+g+".")}}else!this._cannotHaveImageDerivative&&s&&o&&(l=s,h=o);l&&h||(l=this._modelAspectRatio,h=1);var p=this._topStripesHeight;c+=p,n-=p,this._spansMultipleColumns?(h=Math.min(n,e/(l/h)),l=e):(n$507(l,h,e,n,r),l=r.width,h=r.height);
var v=Math.max(t,1);s&&o&&!this._shouldAllowUpscalingOfSmallAssets&&(l=Math.min(l,v*Math.max(_,s)),h=Math.min(h,v*Math.max(g,o)));var m=40*t,$=Math.min(m,e),y=Math.min(m,n);($>l||y>h)&&(n$629(l,h,$,y,r),l=r.width,h=r.height),l=Math.ceil(l),h=Math.ceil(h),l=Math.min(l,e),h=Math.min(h,n),this._drawnLeftInCanvas=d,this._drawnTopInCanvas=c,this._drawnWidthInCanvas=l,this._drawnHeightInCanvas=h},_updateDerivativeLoader:function(t){var e=this._derivativeLoader;n$275.begin().setIfChanged(e,"width",t?0:this._drawnWidthInCanvas).setIfChanged(e,"height",t?0:this._drawnHeightInCanvas).end()},_paintInProperlySizedCanvas:function(){var t=this._folderPreviewDerivatives,e=t?null:this._derivative,n=e&&e.isLoaded?e:"#eeeeee",i=this._context,r=!this._isStationary,a=!0;a=o.paintInRect(i,n,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas,0/0,0/0,r)&&a,t&&(a=this._paintFolderPreviewGrid(t,n,r)&&a),this._topStripeCount&&(a=o.drawMultiStripes(i,n,this._topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,!this._isShowingFolder,!0,r)&&a);var s=!1;e||t||this.getPath("_asset.type")!==n$309.AUDIO||(n$640(__CW_PATH_PREFIX+n$646).thenSync(this._paintCentralBadgeImage),s=!0),this._didPaintDerivative=!(!t&&e!==n&&!s),this._requiresPrettierPaint=!a},_paintFolderPreviewGrid:function(t,e,n){for(var i=this._devicePixelRatio,a=this._drawnWidthInCanvas,s=this._context,l=!0,h=50>a/i?0:Math.round(24/354*a),u=10/354*a,d=1/3*(a-2*u-2*h),c=0;9>c&&c<t.length;c++){var _=(0|c/3)*(d+u)+h+this._drawnTopInCanvas,g=c%3*(d+u)+h+this._drawnLeftInCanvas,f=g+d,p=_+d,v=0|_,m=0|g,$=Math.ceil(f),y=Math.ceil(p),w=$-m,I=y-v,S=t[c];
if(S){l=o.paintInRect(s,S,m,v,w,I,0/0,0/0,n)&&l,s.fillStyle=e;var C=_-v;C>.005&&(s.globalAlpha=C,s.fillRect(m,v,w,1)),C=g-m,C>.005&&(s.globalAlpha=C,s.fillRect(m,v,1,I)),C=y-p,C>.005&&(s.globalAlpha=C,s.fillRect(m,y-1,w,1)),C=$-f,C>.005&&(s.globalAlpha=C,s.fillRect($-1,v,1,I)),s.globalAlpha=1}else{s.fillStyle="rgb(218, 218, 218)",s.fillRect(g,_,d,d);var b=b||this._folder.childFoldersForPreviewAssets,A=this._badgeUrlForFolder(b[c]);if(A){var D=n$641(A);if(D){s.globalAlpha=.15;var P=n$507(D.naturalWidth||D.width,D.naturalHeight||D.height,3*d/5,3*d/5,r);P.width|=0,P.height|=0,s.drawImage(D,Math.ceil(g+d/2-P.width/2),Math.ceil(_+d/2-P.height/2),P.width,P.height),s.globalAlpha=1}else n$640(A).then(this._forcePaintOnceSoon)}}}return l},_debuggingConfigDidChange:n$170(n$211.bindingFor("fgiv_shouldAllowUpscaling"),n$211.bindingFor("fgiv_drawAssetClientIds"),n$211.bindingFor("fgiv_drawValueAtPropertyPath"),function(){this._forcePaint()}),_paintCentralBadgeImage:n$299(function(t,e,n){return n?(this._context.globalAlpha=.15,this._drawUXImage(t,"center","center",0,0,.25,.25,1/0,1/0),this._context.globalAlpha=1,void 0):(this._forcePaint(),!1)}),_finalizeTopStripeOpacitiesIfNeeded:function(){if(this._topStripeCount){var t=this._context;t.fillStyle="black",t.globalCompositeOperation="destination-out",o.forEachMultiStripe(this._applySingleStripeOpacity,this._topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas),t.globalAlpha=1,t.globalCompositeOperation="source-over"}},_applySingleStripeOpacity:n$299(function(t,e,n,i,r){var a=this._context;
a.globalAlpha=1-t.opacity,a.fillRect(e,n,i,r),a.globalAlpha=1,a.drawImage(h,e,n,i,r)}),_drawTypeBadgeIfNeeded:function(){this._isShowingFolder||n$637("type-badge "+(this._debugTypeOverride||this.getPath("_asset.type"))).thenSync(this._drawTypeBadge)},_drawTypeBadge:n$299(function(t,e,n){return n?(this._drawUXImage(t,"left","bottom",0,0,this._drawnDurationBadgeWidth,20),this.getPath("_asset.type")===n$309.BURST&&this._drawBurstCount(),void 0):(this._forcePaint(),!1)}),_drawDurationBadgeIfNeeded:function(){this._drawnDurationBadgeWidth=this._drawnDurationBadgeHeight=0;var t=this.getPath("_asset.durationString");if(t&&!this._isShowingFolder){var e=this._context,n=this._devicePixelRatio,i=Math.round(13*n),r=this._buildFontString(i);if(r){e.font=r;var a=Math.ceil(e.measureText(t).width),s=5*n,o=a+2*s+1*n,l=22*n,h=4*n,u=this._drawnWidthInCanvas,d=this._drawnHeightInCanvas;u-=this._horizontalCropInset*n,d-=this._verticalCropInset*n,u+=this._drawnLeftInCanvas,d+=this._drawnTopInCanvas,e.fillStyle="rgba(0, 0, 0, 0.6)",e.beginPath(),e.moveTo(u,d),e.lineTo(u,d-l),e.arcTo(u-o,d-l,u-o,d,h),e.lineTo(u-o,d),e.lineTo(u,d),e.closePath(),e.fill(),e.fillRect(u,d-l,this._horizontalCropInset*n,l),e.fillRect(u-o,d,o,this._verticalCropInset*n),e.fillStyle="white",e.fillText(t,u-s-a,d-6*n),this._drawnDurationBadgeWidth=o/n,this._drawnDurationBadgeHeight=l/n}}},_drawWarningBadgeIfNeeded:function(){this._didPaintWarningBadge=!1,this.get("_shouldShowError")&&n$637("warning-badge").thenSync(this._drawWarningBadge)},_drawWarningBadge:n$299(function(t,e,n){if(!n)return this._forcePaint(),!1;var i=this._context;
this._didPaintDerivative?(i.save(),i.globalAlpha=.85,i.shadowBlur=5,i.shadowOffsetX=0,i.shadowOffsetY=1,i.shadowColor="rgba(0, 0, 0, 0.4)",this._drawUXImage(t,"right","bottom",5,5+this._drawnDurationBadgeHeight,5,5,25,23,"white"),i.restore()):this._drawUXImage(t,"center","center",0,0,.3,.3,0,0,"rgba(0, 0, 0, 0.15)"),this._didPaintWarningBadge=!0}),_drawEmptyAlbumBadgeIfNeeded:function(){if(!this._didPaintDerivative&&!this._didPaintWarningBadge&&this._isShowingFolder){var t=this._badgeUrlForFolder(this._folder);t&&n$640(t).thenSync(this._paintCentralBadgeImage)}},_badgeUrlForFolder:function(t){return t?t.isRecentlyDeleted?__CW_PATH_PREFIX+n$647:t.isHiddenAlbum?__CW_PATH_PREFIX+n$648:t.isUserCreatedSmartAlbum?__CW_PATH_PREFIX+n$649:t.isAlbum===!0?__CW_PATH_PREFIX+n$650:t.isAlbum===!1?__CW_PATH_PREFIX+n$651:null:null},_drawSelectionStylingIfNeeded:function(){if(this.get("isSelected")){var t=this._context,e=this._selectionBorderStrokeWeight=2*this._devicePixelRatio;this._drawSingleSelectionBox(null,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas,this._drawnHeightInCanvas),o.forEachMultiStripe(this._drawSingleSelectionBox,this._topStripeCount,this._backingBaseSize,this._drawnLeftInCanvas,this._drawnTopInCanvas,this._drawnWidthInCanvas),(this._showingHorizontalCrop||this._showingVerticalCrop)&&(t.fillStyle="rgb(38, 121, 251)",this._fillJaggedEdges(e*Math.sqrt(2))),n$637("selected-badge").thenSync(this._drawSelectionBadge)}},_drawSingleSelectionBox:n$299(function(t,e,n,i,r){var a=this._selectionBorderStrokeWeight,s=this._context;s.fillStyle="rgba(255, 255, 255, 0.4)",s.fillRect(e,n,i,r),s.fillStyle="rgb(38, 121, 251)",s.fillRect(e,n,i,a),s.fillRect(e,n,a,r),s.fillRect(e+i-a,n,a,r),t||s.fillRect(e,n+r-a,i,a)
}),_drawSelectionBadge:n$299(function(t,e,n){return n?(this._drawUXImage(t,"right","bottom",5,5),void 0):(this._forcePaint(),!1)}),_drawUXImage:function(t,e,n,i,a,o,l,h,u,d){i=i||0,a=a||0,o=o||0,l=l||0;var c=t.pixelRatio||1,_=this._devicePixelRatio,g=this._drawnTopInCanvas+this._verticalCropInset*_,f=this._drawnLeftInCanvas+this._horizontalCropInset*_,p=this._drawnWidthInCanvas-2*this._horizontalCropInset*_,v=this._drawnHeightInCanvas-2*this._verticalCropInset*_,m=t.naturalWidth||t.width,$=t.naturalHeight||t.height;(1/0===h||1/0===u)&&(h=1e5*m,u=1e5*$);var y=(h||m/c)*_,w=(u||$/c)*_;if(i=Math.round(i*_),a=Math.round(a*_),o=1>o&&o>0?Math.round(o*p):Math.round(_*o),l=1>l&&l>0?Math.round(l*v):Math.round(_*l),n$507(y,w,y-Math.max(0,i+y+("center"===e?2:1)*o-p),w-Math.max(0,a+w+("center"===n?2:1)*l-v),r),y=Math.round(r.width),w=Math.round(r.height),d){var I=n$22(t)+d,S=s[I];if(!S){S=s[I]=document.createElement("canvas");var C=S.getContext("2d");S.width=t.width,S.height=t.height,C.fillStyle=d,C.fillRect(0,0,S.width,S.height),C.globalCompositeOperation="destination-in",C.drawImage(t,0,0)}t=S}n$501.usingCache()(this._context,t,f+Math.round("left"===e?i:"right"===e?p-y-i:p/2-y/2+i),g+Math.round("top"===n?a:"bottom"===n?v-w-a:v/2-w/2+a),y,w)},_drawBurstCount:function(t){var e,n,i=this._context,r=this._devicePixelRatio,a=void 0===t?this.getPath("_asset.burstAssetModelProvider.itemCount")||0:t,s=a>=1e4?(0|a/1e3)+"K":a+"",o=16;switch(s.length){case 1:e=13,n=6.5;break;case 2:e=13,o+=.5*("1"===s[1]&&"1"!==s[0]),n=6.5;break;case 3:e=11,o+=.5*("1"===s[2]&&"1"!==s[0]),n=7.5;break;default:e=9,o+=.5*("1"===s[3]&&"1"!==s[0])-.5*n$109.get("sharedInstance").isFirefox-.5*n$109.get("sharedInstance").isIE,n=8
}o+=this._horizontalCropInset,n+=this._verticalCropInset,e=Math.round(e*r),n=Math.round(n*r),o=Math.round(o*r),i.font=this._buildFontString(e),i.fillStyle="#333333";var l=i.measureText(s).width;i.fillText(s,0|this._drawnLeftInCanvas+o-l/2,0|this._drawnTopInCanvas+this._drawnHeightInCanvas-n)},_tearCroppedEdgesIfNeeded:function(){if(this._showingHorizontalCrop||this._showingVerticalCrop){var t=this._context;t.globalCompositeOperation="destination-out",t.fillStyle="black",this._fillJaggedEdges(),t.globalCompositeOperation="source-over"}},_fillJaggedEdges:function(t){var e=this._showingHorizontalCrop,n=this._showingVerticalCrop;if(e||n){t=t||0;var i=this._drawnLeftInCanvas,r=this._drawnTopInCanvas,a=this._drawnWidthInCanvas,s=this._drawnHeightInCanvas,o=this._devicePixelRatio,l=2*this.targetEdgeRipSize*o,h=e?s:a,u=Math.round(h/l),d=h/u,c=d/2,_=this._context;_.save(),_.translate(i,r);for(var g=0;2>g;g++){_.translate(a,s),_.rotate(Math.PI),_.beginPath(),_.moveTo(0,0),_.lineTo(e?t:0,e?0:t);for(var f=0;u>f;f++)_.lineTo(e?c+t:c+f*d,e?c+f*d:c+t),_.lineTo(e?t:(1+f)*d,e?(1+f)*d:t);_.lineTo(e?0:h,e?h:0),_.closePath(),_.fill()}_.restore()}},_decideVisualCropIndication:function(){var t=this.get("_derivative");t=t&&t.get("isLoaded")&&t;var e=!1,n=!1;if(t){var i=t.get("rectInElement"),r=i.width/i.height,a=this._drawnWidthInCanvas/this._drawnHeightInCanvas;e=r/a>1.05,n=a/r>1.05}n=n&&!(e||this._spansMultipleColumns||this._topStripeCount),this._isShowingFolder&&(e=n=!1),this._showingHorizontalCrop=e,this._showingVerticalCrop=n,this._horizontalCropInset=this._showingHorizontalCrop?this._cropInset:0,this._verticalCropInset=this._showingVerticalCrop?this._cropInset:0
},_clipRoundedCornersIfNeeded:function(){var t=this._folder;if(t&&t.isAlbum===!1){var e=this._devicePixelRatio,n=this._drawnTopInCanvas,i=this._drawnLeftInCanvas,r=this._drawnWidthInCanvas,a=this._drawnHeightInCanvas,s=Math.max(4*e,12/354*Math.max(r,a)),l=this._context;l.globalCompositeOperation="destination-out",l.fillStyle="black",o.fillRoundedCorner(l,i,n,s,1,1),o.fillRoundedCorner(l,i+r,n,s,-1,1),o.fillRoundedCorner(l,i+r,n+a,s,-1,-1),o.fillRoundedCorner(l,i,n+a,s,1,-1),l.globalCompositeOperation="source-over"}},_drawPointerInteractionStateIfNeeded:function(){if(this.get("isBeingPressed")){var t=this._context;t.globalCompositeOperation="source-atop",t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,this._canvasWidth,this._canvasHeight),t.globalCompositeOperation="source-over"}},_drawDebugInfoIfNeeded:function(){var t,e,n,i,r=this._context,a=this._devicePixelRatio,s=n$211.defaultFontFamily+"-Light";n$211.fgiv_drawAssetClientIds&&(t=0|.4*Math.min(this._drawnWidthInCanvas,this._drawnHeightInCanvas),e=0|.85*t,n=String(this.getPath("_asset.clientId")||""),r.font="bold "+t+"px "+s,i=r.measureText(n).width,r.fillStyle="red",r.fillText(n,0|this._drawnWidthInCanvas/2-i/2,0|this._drawnHeightInCanvas/2+e/2));var o=n$211.fgiv_drawValueAtPropertyPath;o&&(o=o.trim())&&(t=Math.ceil(.1*Math.min(this._drawnWidthInCanvas,this._drawnHeightInCanvas)),e=0|.85*t,r.font=t+"px "+s,r.fillStyle="red",r.fillText(this.getPath(o)+"",this._drawnLeftInCanvas+this._horizontalCropInset+5*a,this._drawnTopInCanvas+this._verticalCropInset+5*a+e),u(this))},action:"_buttonAction",_buttonAction:function(t){if(this.get("_isShowingFolder"))this.sendEvent("navigateToFolder",this.get("_folder"));
else if(this.get("isSelectionEnabled")||t.altKey){var e=n$644;t.shiftKey&&(e=n$645),this.sendEvent({type:"userSelectionRequest",view:this,operation:e,enableShouldCancelSelectionUponEmptySelection:t.altKey})}else this.sendEvent("showAsset",this.get("_asset"));return!0},uploadFiles:function(t){return t.folderId=this._folder.clientId,!1},__superMap:{_3ngMovQeJO6$7Lm$init:"init",_3ngMovQeJO6$86a$dispose:"dispose"}}),i=n$508.extend({_updateARIAAttrs:n$7("isDisabled","isOn",function(t,e){var n=this.get("element");n$638("hidden",t&&!e,n),n$638("disabled",t,n)})}),r={},a={},s={},o={STRIPES:[{gap:2/354,minGap:0,maxGap:1,height:8/354,minHeight:2,inset:9/354,minInset:2,opacity:.6,cropX:0,cropY:.1,flipHorizontal:!0},{gap:2/354,minGap:0,maxGap:1,height:8/354,minHeight:2,inset:8/354,minInset:2,opacity:.36,cropX:1,cropY:0,flipHorizontal:!1}],forEachMultiStripe:function(t,e,n,i,r,a){var s,o,l,h,u,d=Math.min(e,this.STRIPES.length),c=r,_=i,g=a;for(s=0;d>s;s++)o=this.STRIPES[s],l=Math.max(o.minGap,Math.min(o.maxGap,Math.round(o.gap*n))),h=Math.max(o.minHeight,Math.round(o.height*n)),u=Math.max(o.minInset,Math.round(o.inset*n)),c-=l+h,_+=u,g-=2*u,t(o,_,c,g,h,l,u)},drawMultiStripes:function(t,e,n,i,r,a,s,o,l,h){return this._context=t,this._content=e,this._startingWidth=s,this._ignoreFlip=o,this._ignoreOpacity=l,this._shouldMaximizePerformance=h,this._paintWasFullyPretty=!0,this.forEachMultiStripe(n$356(this._drawSingleStripe,this),n,i,r,a,s),this._ignoreOpacity||(this._context.globalAlpha=1),this._paintWasFullyPretty},multiStripesHeightForSizeAndQuantity:function(t,e){for(var n,i=0,r=Math.min(e,this.STRIPES.length);r--;)n=this.STRIPES[r],i+=Math.max(n.minGap,Math.min(n.maxGap,Math.round(n.gap*t))),i+=Math.max(n.minHeight,Math.round(n.height*t));
return i},_drawSingleStripe:function(t,e,n,i,r){this._ignoreOpacity||(this._context.globalAlpha=t.opacity);var a=!this._ignoreFlip&&t.flipHorizontal;a&&(this._context.save(),this._context.translate(this._startingWidth,0),this._context.scale(-1,1)),this._paintWasFullyPretty=o.paintInRect(this._context,this._content,e,n,i,r,t.cropX,t.cropY,this._shouldMaximizePerformance)&&this._paintWasFullyPretty,a&&this._context.restore()},paintInRect:function(t,e,n,i,a,s,o,l,h){if((isNaN(o)||isNaN(l))&&(o=l=.5),n=Math.round(n),i=Math.round(i),a=Math.round(a),s=Math.round(s),!n$32(e,n$442))return t.fillStyle=e,t.fillRect(n,i,a,s),!0;var u=e.get("rectInElement");n$629(u.width,u.height,a,s,r);var d=r.width,c=r.height,_=Math.round(a*u.width/d),g=Math.round(s*u.height/c),f=Math.round(u.x+(u.width-_)*o),p=Math.round(u.y+(u.height-g)*l);return _=Math.max(0,Math.min(u.width,_)),g=Math.max(0,Math.min(u.height,g)),f=Math.max(0,Math.min(u.width,f)),p=Math.max(0,Math.min(u.height,p)),n$501.avoidingWorkIf(h)(t,e.get("element"),f,p,_,g,n,i,a,s)},fillRoundedCorner:function(t,e,n,i,r,a){t.beginPath(),t.moveTo(e,n),t.lineTo(e,n+a*i),t.arcTo(e,n,e+r*i,n,i),t.lineTo(e,n),t.closePath(),t.fill()}},l=n$636.extend(n$302,{wantsDownsampledDerivatives:!0,assets:n$14("owner._folder.previewAssets"),priority:n$14("owner.priority"),shouldCover:!0,_squareSize:n$9({readOnly:!0,dependencies:["owner._derivativeLoader.width","owner._derivativeLoader.height"],get:function(t,e,n,i){return Math.round(Math.max(i.internalGetPath(this,e[0+n]),i.internalGetPath(this,e[1+n]))*(1-68/354)/3)}}),width:n$14("_squareSize"),height:n$14("_squareSize"),initFromPool:function(t){this.__s._3ngMovQeJO6$Tj_$initFromPool.apply(this,arguments),this.owner=t
},dispose:function(){this.owner&&(this.owner=null),this.__s._3ngMovQeJO6$Tlv$dispose.apply(this,arguments)},__superMap:{_3ngMovQeJO6$Tj_$initFromPool:"initFromPool",_3ngMovQeJO6$Tlv$dispose:"dispose"}}),h=function(){var t=document.createElement("canvas");t.width=1,t.height=32;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,0,t.height);return n.addColorStop(0,"transparent"),n.addColorStop(.9,"rgba(0, 0, 0, 0.35)"),n.addColorStop(1,"black"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),t}(),u=function(){var t,e=function(){for(var t=n.length,e=n$211.fgiv_drawValueAtPropertyPath.trim();t--;){var i=n.items[t],r=i._debug_lastSeenDebugText,a=i._debug_lastSeenDebugText=i.getPath(e);a!==r&&i._forcePaint()}},n=n$439.create();return function(i){t=t||n$374(e,32),n.add(i)}}();n$652=n,n.__QUALIFIED_CLASS_NAME__="Photos.FlexibleGridItemView",i.__QUALIFIED_CLASS_NAME__="Photos.ARIAFriendlyPrivateButton$519",l.__QUALIFIED_CLASS_NAME__="Photos.FolderPreviewDerivativesLoader$519"}();
    
    
        
!function(){"use strict";var e=n$625.extend(n$395,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_thumbView"},{type:"ELEMENT",tagname:"div",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isNewAlbumItem",truevalue:"new-album-thumb",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_title",attributes:{}}],classes:["photos-title"]},{type:"ELEMENT",tagname:"div",children:[],classes:["photos-darkener"]}],classes:["photos-folder-list-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isDrillable",truevalue:"photos-drillable",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isNewAlbumItem",truevalue:"photos-new-album-item",attributes:{}}]},rowHeight:44},folder:n$9(),height:n$4({defaultValue:function(){return this.constructor.rowHeight}}),thumbSize:32,_thumbView:n$84(n$652.extend({model:n$14("parent.folder"),shouldLayerBack:!1,_layOut:n$7("parent",function(e){e&&this.layOutMainRect(17,(e.height-e.thumbSize)/2,e.thumbSize,e.thumbSize)})})),_title:n$9({readOnly:!0,dependencies:["folder","folder.title"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n])||"":n$290("AlbumsPopover.NewAlbum")}}),_isDrillable:n$9({readOnly:!0,dependencies:["folder.isAlbum","_isNewAlbumItem"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===!1||i.internalGetPath(this,t[1+n])}}),_isNewAlbumItem:n$9({readOnly:!0,dependencies:["folder"],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])
}})});n$662=e,e.__QUALIFIED_CLASS_NAME__="Photos.FolderListItemView"}();
    
    
        
!function(){"use strict";function e(){T=!1;var e=P=Date.now(),n=Math.max(e-L,1);F=1e3/n,L=e,n$66.pause(),M=!0;for(var i,r=0,s=U,l=0,g=0,p=0,b=0;s>r;r++)b=O[r],n$66.setNodeToDirtyFromParent(b);for(n$66.resume(),n$66.pause(),s=x,r=0;s>r;r++)if(l=N[r],f[l]=-1,!(0>l)){if(g=c[l],p=h[l],p&=w,B>=0&&B>g&&p&I)a[l]=d[l].skipVariableToEnd(l,v,l*t),d[l]=null,i=_[l],i||(i=[]),i[0]=n$654,_[l]=i,p|=E;else if(H>=0&&H>g&&p&m){0===(p&A)&&($[l]=W,V[W++]=l,p|=A),h[l]=p;continue}if(p&E){i=_[l];var z=i[0],K=d[l],j=u[l]+n,Q=0,G=0,q=l*t;K&&(Q=K.velocityForVariable(l,j,v,q),G=K.accelerationForVariable(l,j,v,q),K.finishVariable(l,j,v,q,a[l]),K!==z&&K.animatorWillChange(l,j,v,q)),i[0]=l,i[1]=u[l]=0,i[2]=v,i[3]=q,i[4]=a[l],i[5]=Q,i[6]=0,z.initVariable.apply(z,i),i.length=0,d[l]=z,p&=D,p&=S,p|=(0|z.isSkippable)*I,p&=y,p|=(0|z.isPauseable)*m}else p&A?($[l]=-1,p&=C):u[l]+=n;h[l]=p,n$66.setNodeToDirtyFromParent(o[l])}for(x=0,M=!1,n$66.resume(),n$66.pause(),s=k,r=0;s>r;r++)b=R[r],n$66.setNodeToDirtyFromParent(b);n$66.resume(),P=-1}var t=9,n=128,i=0,r=-1,s=n,o=new Int32Array(n),a=new Float64Array(n),l=new Float64Array(n),u=new Int32Array(n),h=new Int32Array(n),c=new Int32Array(n),d=new Array(n),_=new Array(n),g=new Array(n),p=new Array(n),f=new Int32Array(n),$=new Int32Array(n),v=new Float64Array(n*t),m=1,y=~m,I=2,S=~I,b=4,w=~b,A=8,C=~A,E=16,D=~E,P=-1,F=0,L=Date.now(),T=!1,N=new Int32Array(n),M=!1,x=0,O=new Int32Array(64),U=0,R=new Int32Array(64),k=0,V=new Int32Array(n),W=0,z=[],H=-1,K=[],B=-1,j=function(){var e,n=2*s;e=new Int32Array(n),e.set(o),o=e,e=new Float64Array(n),e.set(a),a=e,e=new Float64Array(n),e.set(l),l=e,e=new Int32Array(n),e.set(u),u=e,e=new Int32Array(n),e.set(h),h=e,e=new Int32Array(n),e.set(c),c=e,e=new Int32Array(n),e.set(N),N=e,e=new Int32Array(n),e.set(V),V=e,e=new Float64Array(n*t),e.set(v),v=e,e=new Int32Array(n),e.set(f),f=e,e=new Int32Array(n),e.set($),$=e,s=n
},Q=n$65.extend({isCacheable:!1,flushNode:function(e,n){var i=n$66.getDataForNode(n),r=d[i].tick(i,u[i],v,i*t,a[i]);a[i]=r},calculateValueForNode:function(e,t){var n=n$66.getDataForNode(t);return a[n]}}).create(),G=function(e,t){var n=0;r>0?(n=r,r=o[n]):(n=i++,i>s&&j());var l=n$66.allocNode(Q,null,n$66.FLUSH);o[n]=l,a[n]=+e,h[n]=E,c[n]=0|t,f[n]=-1,$[n]=-1,n$66.setDataForNode(n,l);var u=_[n];return u||(u=[],_[n]=u),u[0]=n$654,dt(n),n},q=function(e){var t=o[e];n$66.freeNode(t);var n=f[e];n>0&&(N[n]=-1,f[e]=-1);var i=f[e];i>0&&(V[i]=-1,$[e]=-1),o[e]=r,r=e,a[e]=h[e]=c[e]=d[e]=0,Z(e)},Y=function(e,t){var n=_[e];n||(n=[]),n[0]=t,n[1]=null,n[2]=null,n[3]=null,n[4]=null,n[5]=null,n[6]=null;for(var i=5,r=2,s=arguments.length;s>r;r++)n[r+i]=arguments[r];var o=h[e];o|=E,h[e]=o,dt(e)},X=function(e,t,n){g[e]=t,p[e]=n},J=function(e){var t=p[e];if(t){var n=g[e];t.call(n,e,a[e])}},Z=function(e){p[e]=null,g[e]=null},et=function(e){z.push(e),H=H>=0?Math.min(H,e):e},tt=function(e){var t=z.indexOf(e),n=0;if(0>t&&n$11("begin/endPausingVariablesBelowPriority mismatch! "+e+" not paused."),z.splice(t,1),z.length>0)for(H=1e7,t=0,n=z.length;n>t;t++)H=Math.min(H,z[t]);else H=-1;n=W,W=0;var i,r;for(t=0;n>t;t++)i=V[t],r=c[i],H>0&&H>r?($=W,V[W++]=i):dt(i)},nt=function(e){K.push(e),B=B>=0?Math.min(B,e):e},it=function(e){var t=K.indexOf(e),n=0;if(0>t&&n$11("begin/endSkippingVariablesBelowPriority mismatch! "+e+" not paused."),K.splice(t,1),K.length>0)for(B=1e7,t=0,n=K.length;n>t;t++)B=Math.min(B,K[t]);else B=-1},rt=function(e){return a[e]+l[e]},st=function(e){return h[e]&I?d[e].getFinalValue(e,v,e*t)+l[e]:a[e]+l[e]
},ot=function(e,t){d[e]!==n$654?(l[e]=0,a[e]=t,Y(e,n$654)):(l[e]=0,a[e]=t,dt(e))},at=function(e,t){t&&(a[e]=t),Y(e,n$654)},lt=function(e,t,n,i,r,s){void 0===i&&(i=Number.MAX_VALUE),Y(e,n$656,t-l[e],n,i-l[e],r,s)},ut=function(e,t,n,i){Y(e,n$655,t,n,i)},ht=function(e,t,n,i,r,s,o){Y(e,n$657,t,n,i,r,s,o)},ct=function(e,t){var n=a[e];l[e]=t-n},dt=function(e){0>e&&n$11("Tried to request frame for a variable that doesn't exist.");var t=h[e];t&b||(f[e]=x,N[x++]=e,t|=b,h[e]=t,_t())},_t=function(){T||(n$130(e,0),T=!0)},gt=function(e){return o[e]},pt=function(){return F},ft=function(e){O[U++]=e},$t=function(e){R[k++]=e},vt={requestFrame:_t,requestFrameForVariable:dt,frame:e,allocVariable:G,setCallbackForVariable:X,clearCallbackForVariableIfNeeded:Z,triggerCallbackForVariableIfNeeded:J,freeVariable:q,beginAnimating:Y,beginDrag:ut,beginSmoothMoveTo:lt,beginBezier:ht,set:ot,rebaseCurrentValue:ct,get:rt,getFinalValue:st,reset:at,beginPausingVariablesBelowPriority:et,endPausingVariablesBelowPriority:tt,beginSkippingVariablesBelowPriority:nt,endSkippingVariablesBelowPriority:it,addPreFrameNode:ft,addPostFrameNode:$t,nodeForVariable:gt,getFPS:pt};n$658=vt}();
    
    
        
!function(){"use strict";var e,t={flushNode:function(e,t){n$66.getDataForNode(t)(),n$66.freeNode(t),e.removeUnfreedCallbackNode(t)},calculateValueForNode:n$23},n="_animation_idFor_",i={mixinDependencies:[n$10],_animatedVariables:null,_unfreedCallbackNodes:null,isAnimating:n$9(!1),init:function(){this._animatedVariables=[],this._unfreedCallbackNodes=[],this._animation_animationsInProgress=0,this.__s._4XmmmWkVmPA$Mx$init.apply(this,arguments)},dispose:function(){this.__s._4XmmmWkVmPA$Nl$dispose.call(this);var e,t=this._animatedVariables,n=t.length;for(e=0;n>e;e++)n$658.freeVariable(t[e]);for(e=0,n=this._unfreedCallbackNodes.length;n>e;e++)n$66.freeNode(this._unfreedCallbackNodes[e])},animate:function(e,i,r,s){var a,o=this._properties[e],l=o.adaptStartingLocationForTarget,d=this[n+e];l&&(a=l(this,e,n$658.get(d),i));var h=o.set;h&&(i=h(this,e,i));var u=this,c=n$66.allocNode(t,this,n$66.FLUSH);n$66.setDataForNode(function(){u._animation_animationDidEnd(),"function"==typeof s&&s()},c),this._unfreedCallbackNodes.push(c),this._animation_animationDidBegin(),n$658.beginSmoothMoveTo(d,i,r,a,this,function(){n$66.setNodeToDirtyFromParent(c)})},animateBezier:function(e,i,r,s,a,o){var l=this._properties[e],d=l.adaptTargetForStartingLocation,h=this[n+e];if(d){i[0]=d(this,e,n$658.get(h),i[0]);for(var u=1;u<i.length;u++)i[u]=d(this,e,i[u-1],i[u])}var c=l.set;c&&c(this,e,i[i.length-1]);var g=this,p=n$66.allocNode(t,!0);n$66.setDataForNode(function(){g._animation_animationDidEnd(),"function"==typeof o&&o()},p),this._unfreedCallbackNodes.push(p),n$658.beginBezier(h,i,r,s,a,this,function(){n$66.setNodeToDirtyFromParent(p)
}),this._animation_animationDidBegin()},removeUnfreedCallbackNode:function(e){var t=this._unfreedCallbackNodes.indexOf(e);0>t||n$321.spliceWithoutReturn(this._unfreedCallbackNodes,t,1)},_animation_animationDidBegin:function(){this._animation_animationsInProgress++,this.get("isAnimating")||this.set("isAnimating",!0)},_animation_animationDidEnd:function(){this._animation_animationsInProgress=Math.max(this._animation_animationsInProgress-1,0),0===this._animation_animationsInProgress&&this.set("isAnimating",!1)},beginDragAnimation:function(e,t){var i=this[n+e];n$658.beginDrag(i,t)},resetAnimation:function(e){var t=this._properties[e],i=t.get,r=t.set,s=this[n+e];if(i||r){var a=n$658.get(s);i&&(a=i.call(this,this,e,a)),r&&(a=r.call(this,this,e,a)),n$658.reset(s,a)}else n$658.reset(s)},getFinalValue:function(e){var t=this[n+e],i=n$658.getFinalValue(t),r=this._properties[e],s=r.get;return s&&(i=s.call(this,this,e,i)),i},rebaseCurrentValue:function(e,t){var i=this[n+e];n$658.rebaseCurrentValue(i,t)},__superMap:{_4XmmmWkVmPA$Mx$init:"init",_4XmmmWkVmPA$Nl$dispose:"dispose"}},r=n$67.create({}),s=n$66.allocNode(r,{},0);e=n$8.extend({init:function(e,t){this.defaultValue=e,this.priority=t,this.get||(this.usesBuiltinGet=!0),this.set||(this.usesBuiltinSet=!0),this.__s._4XmmmWkVmPA$2Eo$init.call(this,e)},initForObject:function(e,t){var i=n$658.allocVariable(this.defaultValue,0|this.priority),r=n$658.nodeForVariable(i);e.downstreamNodes[t]=r,e.upstreamNodes[t]=s,e[n+t]=i,e._animatedVariables.push(i)},setInitialValueForObject:function(){},wasRegistered:function(){this.finalGetForObject=this.usesBuiltinGet?this.getForObject:this.getForObjectWithGetter,this.finalSetForObject=this.usesBuiltinSet?this.setForObject:this.setForObjectWithSetter
},getForObjectWithGetter:function(e,t){var i=e[n+t];return this.get(e,t,n$658.get(i))},setForObjectWithSetter:function(e,t,i){var r=e[n+t];n$658.set(r,this.set(e,t,i))},getForObject:function(e,t){var i=e[n+t];return n$658.get(i)},setForObject:function(e,t,i){var r=e[n+t];n$658.set(r,i)},requiresSupport:i,__superMap:{_4XmmmWkVmPA$2Eo$init:"init"}});var a=function(t,n){return e.create(t,n)};n$960=e,n$659=i,n$660=a}();
    
    
        
!function(){"use strict";var e,t={mixinDependencies:[n$659],scale:n$660(1),opacity:n$660(1),translateX:n$660(0),translateY:n$660(0),_updateDOMForAnimation:n$7("scale","opacity","translateX","translateY",e=function(e,t,n,i){this.style.scale(e).translate(n,i).set("opacity",t)})};n$667=e,n$663=t}();
    
    
        
!function(){"use strict";var e=n$661.extend(n$364,{viewClass:n$559(function(e){return e.extend(n$416,n$663,{additionalClassNames:n$16(["photos-folder-list-view"])})}),actualSize:n$9(),desiredHeight:n$9({readOnly:!0,dependencies:["collection.length"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])*this.rowHeight}}),rowHeight:n$9({readOnly:!0,cacheable:!1,get:function(){return this.itemViewClass.rowHeight}}),itemViewClass:n$662.extend(n$364,{parentFolder:n$9(n$14("viewController.folder")),content:n$9(),folder:n$355({readOnly:!0,dependencies:["content","parentFolder","parentFolder.contentsDidChange"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);return s&&r>-1?s.itemAtIndex(r):null}}),actionDelay:1,action:"_buttonAction",_buttonAction:function(){this.sendEvent("folderWasSelected",this.folder)}}),folder:n$355({didChange:function(e){e&&e.load()}}),collection:n$355(n$84(n$158)),_maintainCollection:n$7("folder.itemCount","collection",function(e,t){if(t){var n=0|1+e,i=t.length;if(i!==n){var r=t._array;r.length=e;for(var s=i;n>s;s++)r[s]=s-1;i!==n&&t.contentsDidChange()}}}),_remeasureViewport:n$7("isAttached","actualSize.width","actualSize.height",function(e){e&&(this.retain(),n$357(function(){this.measureViewport(),this.release()}.bind(this)))})});n$669=e,e.__QUALIFIED_CLASS_NAME__="Photos.FolderListViewController"}();
    
    
        
!function(){"use strict";var e=n$5.extend({parentViewController:n$4(null),fromViewController:n$4(null),toViewController:n$4(null),fromView:n$4(null),toView:n$4(null),isRunning:n$4(!1),delegate:n$4(null),delegateContext:n$4(null),init:function(){this.__s._2Evt1XWODmv$Uq$init.apply(this,arguments);var e=this.get("fromViewController"),t=this.get("toViewController");e&&e.retain(this),t&&t.retain(this)},run:function(){var e,t=this.get("delegate");t&&(e=this.get("delegateContext")||t,t.transitionWillStart.call(e,this)),this.set("isRunning",!0);var n=this.get("parentViewController"),i=this.get("fromViewController"),r=this.get("toViewController"),s=this.get("fromView"),o=this.get("toView");n$63.info("Beginning transition from "+i+" to "+r),i!==r?(i&&i.willMoveToParentViewController(null,this),r&&(r.willMoveToParentViewController(n,this),r.get("parent")!==n&&n.addChildViewController(r)),s!==o?this.start():this.didFinish()):s!==o&&this.start()},start:function(){this.notifyDidMoveToViewController()},notifyDidMoveToViewController:function(){var e,t,n,i;e=this.get("parentViewController"),t=this.get("fromViewController"),n=this.get("toViewController"),i=this.get("toView"),i&&n&&t!==n&&n.didMoveToParentViewController(e,this)},stopTransitioningViewController:function(e){this.get("toViewController")===e&&(this.set("toViewController",null),this.set("toView",null)),this.get("fromViewController")===e&&(this.set("fromViewController",null),this.set("fromView",null))},didFinish:function(){var e=this.get("parentViewController"),t=this.get("fromViewController"),n=this.get("toViewController");t!==n&&t&&(e.removeChildViewController(t),t.didMoveToParentViewController(null,this)),this.set("isRunning",!1);
var i=this.get("delegate");if(i){var r=this.get("delegateContext")||i;i.transitionDidFinish.call(r,this)}t&&t.release(this),n&&n.release(this)},__superMap:{_2Evt1XWODmv$Uq$init:"init"}});n$664=e,e.__QUALIFIED_CLASS_NAME__="Photos.ViewControllerTransition"}();
    
    
        
!function(){"use strict";var t=n$664.extend({viewOutlet:null,start:function(){var t=this.get("parentViewController").get("view"),e=this.get("toView"),n=this.get("viewOutlet");n?t.set(n,e):n$11("ViewOutletViewControllerTransition expects a `viewOutlet` property"),this.__s._4grkMdJ6CF0$Ex$start.apply(this,arguments),this.didFinish()},__superMap:{_4grkMdJ6CF0$Ex$start:"start"}});n$665=t,t.__QUALIFIED_CLASS_NAME__="Photos.ViewOutletViewControllerTransition"}();
    
    
        
!function(){"use strict";var e=n$392.extend({transition:function(e,t,n,i,r){var s;(e!==n||t!==i)&&(s=r.createTransition.call(this,{parentViewController:this,fromViewController:e,toViewController:n,fromView:t,toView:i}),s.set("delegate",r),s.set("delegateContext",this),s.run())},createTransition:function(e){return e.viewOutlet=this.viewOutlet,n$665.create(e)},transitionWillStart:function(){},transitionDidFinish:function(){}});n$670=e,e.__QUALIFIED_CLASS_NAME__="Photos.ChildViewControllerProperty"}();
    
    
        
!function(){"use strict";var e=n$664.extend({viewsArray:n$4(),start:function(){var e=this.get("viewsArray"),t=this.get("fromView"),n=this.get("toView");t!==n?(n&&(e.add(n),this.__s._2Ce4kr_Boig$Db$start.apply(this,arguments)),this.startAnimation()):this.didFinish()},startAnimation:function(){this.animationDidFinish()},animationDidFinish:function(){if(!this.animationIsFinished){this.animationIsFinished=!0;var e,t=this.get("fromView");t&&(e=this.get("viewsArray"),e.remove(t)),this.didFinish()}},__superMap:{_2Ce4kr_Boig$Db$start:"start"}});n$666=e,e.__QUALIFIED_CLASS_NAME__="Photos.ViewsArrayViewControllerTransition"}();
    
    
        
!function(){"use strict";var t=n$5.extend({stateKeys:["scale","opacity","translateX","translateY"],scale:1,opacity:1,translateX:0,translateY:0,applyToView:function(t,e,n){for(var i=!1,r=this.stateKeys,a=!1,s=0;s<r.length;s++){var o=r[s];e?(t.animate(o,this[o],e,i?n:void 0),i=!0):(t.set(o,this[o]),a=!0)}e&&n&&!i&&n$357(n),a&&n$667.apply(t,r.map(this.get.bind(this)))}}),e=n$666.extend({staticMembers:{TransitionState:t},aheadState:n$84(t),neutralState:n$84(t),behindState:n$84(t),directionlessHiddenState:null,duration:n$211.directionalTransition_duration,direction:0,startAnimation:function(){var t=this.fromViewController,e=this.toViewController,n=this.fromView,i=this.toView,r=this.duration,a=this.direction;window.event&&window.event.shiftKey&&(r*=10);var s,o,l;a||!this.directionlessHiddenState?(s=a>=0?this.behindState:this.aheadState,o=a>=0?this.aheadState:this.behindState,l=this.neutralState):(s=this.directionlessHiddenState,o=this.directionlessHiddenState,l=this.neutralState),n&&(n._dt_transition&&n._dt_transition.stopTransitioningViewController(t),s.applyToView(n,r,function(){this.animationDidFinish()}.bind(this)),n._dt_transition=this),i&&(i._dt_transition&&i._dt_transition.stopTransitioningViewController(e),i.isAnimating||o.applyToView(i),l.applyToView(i,r,function(){this.animationDidFinish()}.bind(this)),i._dt_transition=this)},didFinish:function(){this.toView&&(this.toView._dt_transition=null),this.fromView&&(this.fromView._dt_transition=null),this.__s._2bD2Z3mAWCR$1cl$didFinish.apply(this,arguments)},__superMap:{_2bD2Z3mAWCR$1cl$didFinish:"didFinish"}});n$668=e,t.__QUALIFIED_CLASS_NAME__="Photos.TransitionState$529",e.__QUALIFIED_CLASS_NAME__="Photos.DirectionalTransition"
}();
    
    
        
!function(){"use strict";var e=n$668.extend({slideDistance:500,aheadState:n$84(n$668.TransitionState.extend({translateX:n$4({readOnly:!0,get:function(){return this.owner.slideDistance}})})),behindState:n$84(n$668.TransitionState.extend({translateX:n$4({readOnly:!0,get:function(){return-this.owner.slideDistance}})}))});n$671=e,e.__QUALIFIED_CLASS_NAME__="Photos.SlidingTransition"}();
    
    
        
!function(){"use strict";var e=36,t=n$194.extend(n$364,n$659,{owner:n$9(),viewClass:n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"_activeVCViews"}],classes:["photos-album-picker-active-vc-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_title",attributes:{signal:"___titleDidRender"}}],name:"_titleDiv",classes:["photos-album-picker-title"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_backButtonView"}],classes:["photos-album-picker-view"]}},__titleDidRender:n$170("___titleDidRender",function(){this._titleDidRender()}),_titleDidRender:n$12(!0),_positionTitle:n$170("isAttached","viewController.actualSize.width","_titleDidRender",function(e,t,n){if((n||e!==this._lastIsAttached||t!==this._lastContainerWidth)&&(this._lastIsAttached=e,this._lastContainerWidth=t,e)){this.style.set("width",1e3);var i=this._titleDiv;n$160(i).clear("width");var r=i.offsetWidth+2,s=this.getPath("_backButtonView.element"),a=s?s.offsetLeft+s.offsetWidth:0,o=a+7,l=t-7;r=Math.min(l-o,r);var d=Math.max(o,0|t/2-r/2);this.style.clear("width"),n$160(i).set("left",d).set("width",r)}})}),view:n$9({downstreamBindings:{_title:"(owner)._title",_backButtonView:"(owner)._backButtonView"}}),newAlbumDefaultBaseTitle:n$9(),actualSize:n$9(),_activeVCSize:n$9(n$84(n$556.extend({owner:n$9(),width:n$14("owner.actualSize.width"),height:n$9({readOnly:!0,dependencies:["owner.actualSize.height"],get:function(t,n,i,r){return r.internalGetPath(this,n[0+i])-e
}})}))),_nonAnimatedDesiredHeight:n$9({readOnly:!0,dependencies:["activeViewController.desiredHeight"],get:function(t,n,i,r){return r.internalGetPath(this,n[0+i])+e}}),_maintainDesiredHeight:n$7("_nonAnimatedDesiredHeight","isAttached",function(e,t){if(!t)return this.set("desiredHeight",0),void 0;var n=this.get("desiredHeight");n&&e?this.animate("desiredHeight",e,350):this.set("desiredHeight",e)}),desiredHeight:n$660(0),activeViewController:n$670.create({readOnly:!0,dependencies:["folder","isAttached"],get:function(e,t,i,r){if(!r.internalGetPath(this,t[1+i]))return null;var s=r.internalGetPath(this,t[0+i]);return s._albumPickerVC_isNewAlbum?n.create({defaultBaseTitle:this.bindingFor("newAlbumDefaultBaseTitle"),parentFolder:s.parentFolder,folder:s}):n$669.create({folder:s,actualSize:this.bindingFor("_activeVCSize")})},createTransition:function(e){e.viewsArray=this.view._activeVCViews;var t=e.toViewController,n=e.fromViewController,i=t&&t.folder,r=n&&n.folder;if(!i||!r)return n$666.create(e);e.direction=i.parentFolder===r?1:-1;var s=this.view.element.offsetWidth;return s&&(e.slideDistance=s),n$671.create(e)}}),folder:n$355({get:function(e){return e||n$370.create(n$370.TOP_LEVEL_USER_ID)},set:function(e){return e}}),_title:n$9({readOnly:!0,dependencies:["folder"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r._albumPickerVC_isNewAlbum?n$290("AlbumsPopover.NewAlbum"):r.title||n$290("AlbumsPopover.NavBar.Albums")}}),__backButtonView:n$84(n$400.extend({additionalClassNames:n$16(["photos-album-picker-back-button"]),title:n$290("AlbumsPopover.NavBar.Back"),action:"_buttonAction",_buttonAction:function(){var e=this.getPath("parent.viewController.folder.parentFolder");
e&&this.sendEvent("folderWasSelected",e)}})),_backButtonView:n$9({readOnly:!0,dependencies:["folder.parentFolder"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.__backButtonView:null}}),folderWasSelected:function(e){var t=e.context;return t?(t.isAlbum===!1?this.folder!==t&&(this.folder=t):t.isAlbum&&this.sendEvent("albumPickerDidPickAlbum",t),void 0):(t=n$370.create(n$261().toUpperCase()),t._albumPickerVC_isNewAlbum=!0,t.setPropertiesWithObject({type:n$370.ALBUM,parentFolder:this.folder}),this.folder=t,void 0)},submit:function(e){var t=this.folder;return delete t._albumPickerVC_isNewAlbum,t.title=t.parentFolder.getDedupedTitle(e.folderTitle,n$370.ALBUM),t.retain("AlbumPickerViewController#createAlbum"),this.sendEvent("albumPickerDidPickAlbum",t),t.saveToStore(),t.release("AlbumPickerViewController#createAlbum"),!0},reset:function(){this.folder=null}}),n=n$610.extend({viewClass:n$559(function(e){return e.extend(n$663)}),desiredHeight:n$9(111),shouldShowEditingViewTitle:!1});n$673=t,t.__QUALIFIED_CLASS_NAME__="Photos.AlbumPickerViewController",n.__QUALIFIED_CLASS_NAME__="Photos.CreateAlbumViewController$531"}();
    
    
        
!function(){"use strict";var e=n$569.extend({viewClass:n$16({additionalClassNames:n$16(["photos-album-picker-popover-view"])}),desiredSize:n$9({defaultValue:n$84(n$556,{width:259}),downstreamBindings:{height:"(owner).contentController.desiredHeight"}}),newAlbumDefaultBaseTitle:n$9(),contentController:n$9({defaultValue:n$84(n$673),downstreamBindings:{actualSize:"(owner).matchedLayout.layout",newAlbumDefaultBaseTitle:"(owner).newAlbumDefaultBaseTitle"}}),hide:function(){var e=this.__s._13fxOKBmf4E$HJ$hide.apply(this,arguments);return this.contentController.reset(),e},__superMap:{_13fxOKBmf4E$HJ$hide:"hide"}});n$687=e,e.__QUALIFIED_CLASS_NAME__="Photos.AlbumPickerPopoverViewController"}();
    
    
        
!function(){"use strict";var e=n$674.extend(n$364,{additionalClassNames:["photos-main-toolbar"],homeButton:n$684.extend(n$527,{marginRight:10,appName:n$290("Toolbar.Home")}),userButton:n$685.extend(n$527,{helpAnchor:"mmbc402b84",marginLeft:30,aggressiveMinimumWidth:64,widthForTargetWidth:function(e){var t=0,n=this.get("widthOptions");for(var i in n)if(n.hasOwnProperty(i)){var r=n[i].width;r>t&&e>=r&&(t=r)}return t},minimumWidth:n$9({readOnly:!0,dependencies:["widthOptions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=1e4;for(var o in r)r.hasOwnProperty(o)&&r[o].width<s&&(s=r[o].width);return s}}),preferredWidth:n$9({readOnly:!0,dependencies:["widthOptions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=0;for(var o in r)r.hasOwnProperty(o)&&r[o].width>s&&(s=r[o].width);return s}})}),applicationMode:n$9(),modeSwitcherSegments:n$9(),assetInfo:n$681,folderInfo:n$682,modeSwitcher:n$510.extend({marginLeft:30,marginRight:30,value:n$9(n$14("parent.applicationMode")),segments:n$9(n$14("parent.modeSwitcherSegments"))}),selectPhotosButton:n$538.extend({additionalClassNames:n$16(["photos-select-button"]),title:n$290("Toolbar.Select.Photos")}),selectVideosButton:n$538.extend({additionalClassNames:n$16(["photos-select-button"]),title:n$290("Toolbar.Select.Videos")}),expungeAllButton:n$538.extend({additionalClassNames:n$16(["expunge-all-button"]),title:n$290("RecentlyDeleted.Toolbar.Button.Delete.All")}),recentlyDeletedButton:n$538.extend({additionalClassNames:n$16(["photos-recently-deleted-button"]),title:n$9(n$14("configuration.title"))}),addAlbumButton:n$538.extend({additionalClassNames:n$16(["photos-add-album-button"]),title:n$290("Toolbar.NewAlbum"),configurationClass:n$680}),uploadButton:n$678.extend({additionalClassNames:n$16(["photos-upload-button"]),title:n$290("Toolbar.Upload"),event:"uploadFiles"}),drillButton:n$538.extend({additionalClassNames:n$16(["photos-debug-button"]),title:"DEBUG: Drill"}),infoButton:n$538.extend({additionalClassNames:n$16(["photos-info-button"]),title:n$290("Toolbar.Info")}),zoomSlider:n$675.extend({additionalClassNames:n$16(["photos-zoom-slider"]),tooltip:n$290("Toolbar.OneUp.ZoomSlider.Tooltip"),pointerPadding:{left:20,right:20}}),favoriteButton:n$676.extend({additionalClassNames:["photos-favorite-button"],tooltip:n$290("Toolbar.OneUp.Favorite.Tooltip"),configurationClass:n$679,isOn:n$14("configuration.asset.isFavorite")}),downloadButton:n$538.extend({additionalClassNames:["photos-download-button"],tooltip:n$290("Toolbar.OneUp.Download.Tooltip")}),emailButton:n$538.extend({additionalClassNames:["photos-email-button"],tooltip:n$290("Toolbar.OneUp.Email.Tooltip")}),shareButton:n$538.extend({additionalClassNames:["photos-share-button"],tooltip:n$290("Toolbar.OneUp.Share.Tooltip")}),deleteButton:n$538.extend({additionalClassNames:["photos-delete-button"]}),addToAlbumButton:n$538.extend({additionalClassNames:["photos-add-to-album-button"],tooltip:n$290("Toolbar.OneUp.AddTo.Tooltip"),configurationClass:n$679}),textualUndeleteButton:n$538.extend({title:n$290("Toolbar.OneUp.Button.Undelete.Title")}),textualDeleteButton:n$538.extend({title:n$290("Toolbar.OneUp.Button.Delete.Title")}),separator1:n$677,separator2:n$677,separator3:n$677,separator4:n$677,_albumCreationPopoverViewController:n$9({readOnly:!0,get:function(){return n$686.create({nextResponder:this,parentFolder:this.addAlbumButton.bindingFor("configuration.folder")}).retain()
}}),_albumPickerPopoverViewController:n$9({readOnly:!0,get:function(){return n$687.extend({nextResponder:this,asset:n$9(this.addToAlbumButton.bindingFor("configuration.asset")),albumPickerDidPickAlbum:function(e){var t=e.context,n=this.asset;n&&t&&(t.appendAssetsWithClientIds([n.clientId]),this.hide())},newAlbumDefaultBaseTitle:n$9({readOnly:!0,dependencies:["asset.createdDateObject"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$543.fmt(r):null}})}).create().retain()}}),dispose:function(){this.__s._1gqrmnk0pSz$2Mu$dispose.apply(this,arguments),this._albumCreationPopoverViewController.release(),this._albumPickerPopoverViewController.release()},showAlbumCreationPopover:function(){return this._albumCreationPopoverViewController.show(this.addAlbumButton),!0},showAlbumPickerPopover:function(){return this._albumPickerPopoverViewController.show(this.addToAlbumButton),!0},shareAsset:function(){return this.sendEvent("vendorSelectorToggled",this.shareButton),!0},_updatePopoverLayouts:function(){this.addAlbumButton.configuration&&this._albumCreationPopoverViewController.updateLayout(),this.addToAlbumButton.configuration&&this._albumPickerPopoverViewController.updateLayout()},didScrollInParent:function(){this._updatePopoverLayouts()},updateLayout:function(){this.__s._1gqrmnk0pSz$2ek$updateLayout.apply(this,arguments),this._updatePopoverLayouts(),this.folderInfo.isClass||this.folderInfo.updateLayout(),this.userButton.isClass||this.userButton.updateLayout()},__superMap:{_1gqrmnk0pSz$2Mu$dispose:"dispose",_1gqrmnk0pSz$2ek$updateLayout:"updateLayout"}});n$695=e,e.__QUALIFIED_CLASS_NAME__="Photos.MainToolbarView"
}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$404,n$416,{owner:n$9(),toolbarView:n$9(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"toolbarView"}],classes:["photos-toolbar-scroll-view"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:null,property:"height"}}}},width:n$9({binding:n$109.sharedInstance.window.bindingFor("width"),didChange:function(){this.validateScrollPosition(),this.showScrollIndicators()}}),height:n$14("toolbarView.height"),scrollMaxX:n$9({readOnly:!0,cacheable:!1,dependencies:[n$109.sharedInstance.window.bindingFor("width")],get:function(e,t,n,i){return Math.max(i.internalGetPath(this,t[0+n]),950)}}),_renderScroll:n$7("scrollX","toolbarView",function(e,t){t&&(t.style.translateDevicePixels(-e,0),t.didScrollInParent&&t.didScrollInParent())}),horizontalScrollIndicatorClass:n$564,verticalScrollIndicatorClass:n$565,init:function(){this.__s._2hS1UVMYA0e$yf$init.apply(this,arguments),n$107(this.element,"wheel",this.wheel.bind(this))},__superMap:{_2hS1UVMYA0e$yf$init:"init"}});n$696=e,e.__QUALIFIED_CLASS_NAME__="Photos.ToolbarScrollView"}();
    
    
        
!function(){"use strict";var t=function(t){return window.requestAnimationFrame(n$105(t))};n$444=t}();
    
    
        
!function(){"use strict";function e(e,t,n,i,r,s){s=Math.min(i/2,r/2,void 0===s?1/0:s),e.beginPath(),e.moveTo(t+s,n),e.arcTo(t+i,n,t+i,n+r,s),e.arcTo(t+i,n+r,t,n+r,s),e.arcTo(t,n+r,t,n,s),e.arcTo(t,n,t+i,n,s),e.closePath(),e.fill()}var t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"canvas",children:[],classes:["photos-spinner-view"],attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},tooltip:null,revolutionTime:600,tickCount:12,tickReach:.54375,tickWidth:(12-90/255)/64,isAnimating:n$9(n$14("isAttached")),_tickOpacities:{12:[0,25,61,89,117,145,158,173,189,199,204,212].map(function(e){return(255-e)/255})},init:function(){this.__s._1hAI4f_wVak$lK$init.apply(this,arguments),this._canvas=this.get("element"),this._context=this._canvas.getContext("2d")},dispose:function(){global.cancelAnimationFrame(this._animationFrameId),this.__s._1hAI4f_wVak$oh$dispose.apply(this,arguments)},_startOrStopAnimation:n$7("isAnimating",function(e){if(e){if(this._animStartTime)return;this._animStartTime=Date.now(),this._drawStep(0),this._tick()}else this._animStartTime=null,this.isInitialized&&this._drawStep(0)}),_tick:n$299(function(){if(this.get("isAnimating")){this._animationFrameId=n$444(this._tick);var e=this.tickCount,t=this.revolutionTime/e,n=Date.now()-this._animStartTime,i=(0|n/t)%e;i!==this._currentStep&&this._drawStep(i)}}),_animationFrameId:0,_drawStep:function(e){this._ensureStyleInfo();var t=this._usesImageBG,n=this._imageBG;if(this._hasStyleInfo&&(!t||n)){this._currentStep=e;var i=this._canvas,r=this._context,s=t?n.pixelRatio:n$522.get("devicePixelRatio"),a=this._visualSize*s;
a!==i.width||a!==i.height?i.width=i.height=a:r.clearRect(0,0,a,a),this._backingSize=a,r.save(),r.translate(a/2,a/2),r.rotate(2*e*Math.PI/this.tickCount),n$109.get("sharedInstance").isIE9OrLower&&r.rotate(2*Math.PI),this._usesImageBG?this._drawImageContent():this._drawGeneratedContent(),r.restore()}},_drawImageContent:function(){var e=this._imageBG,t=this._context,n=this._backingSize;e&&t.drawImage(e,-n/2,-n/2,n,n)},_drawGeneratedContent:function(){var e=this._context,t=this._backingSize,n=this.tickCount;e.fillStyle=this._color;for(var i=0;n>i;i++)e.globalAlpha=this._opacityForTickOfCount(i,n),this.drawTick(e,t),e.rotate(-2*Math.PI/n);e.globalAlpha=1},drawTick:function(t,n){var i=this.tickReach*n/2,r=this.tickWidth*n/2;e(t,-r/2,-n/2,r,i)},_opacityForTickOfCount:function(e,t){var n=this._tickOpacities[t];if(n)return n[e];var i=2/t,r=e/(t-1),s=Math.pow(r,.6),a=.5-.5*Math.cos(s*Math.PI),o=.7*a+.3*s;return o*i+1*(1-o)},_ensureStyleInfo:function(){if(!this._hasStyleInfo&&this.get("isAttached")&&this._canvas.parentNode){var e=this.get("style");this._visualSize=Math.round(parseFloat(e.get("width")));var t=this._usesImageBG="url("===(e.get("background-image")||"").slice(0,4);t&&(e.set("background",""),n$637(this.get("element"),!0).then(function(e){this._imageBG=e}.bind(this)),e.set("background","transparent")),t||(this._color=e.get("color")),this._visualSize&&(this._color||t)&&(this._hasStyleInfo=!0)}},__superMap:{_1hAI4f_wVak$lK$init:"init",_1hAI4f_wVak$oh$dispose:"dispose"}});n$690=t,t.__QUALIFIED_CLASS_NAME__="Photos.SpinnerView"}();
    
    
        
!function(){"use strict";var t=n$193.extend(n$639,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],name:"_fill",styles:{width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_percentage",attributes:{},unit:"%",property:"width"}}}],classes:["photos-progress-bar-view"]}},value:n$9(0),min:n$9(0),max:n$9(1),_previousPercentage:0,_percentage:n$9({readOnly:!0,dependencies:["value","min","max"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[1+n]),t=i.internalGetPath(this,e[0+n]),s=0;if(r!==a&&(s=100*((t-a)/(r-a))),s<this._previousPercentage){var o=this.get("_fill");n$160(o).set("transition-duration",0).forceRedraw().clear("transition-duration")}return this._previousPercentage=s,s}})});n$691=t,t.__QUALIFIED_CLASS_NAME__="Photos.ProgressBarView"}();
    
    
        
!function(){"use strict";var t=13,e=10,n=5,i=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinnerView"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_uploadingPhotos",attributes:{}}],classes:["photos-upload-bar-view-uploading-photos"],name:"_uploadingPhotosElement"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_progressBarView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_stopUploadButton"}],classes:["photos-upload-bar-view"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_height",attributes:{},unit:"px",property:"height"},bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_bottom",attributes:{},unit:"px",property:"bottom"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},uploadManager:n$9(),isVisible:n$9(!1),_height:n$9(n$211.bindingFor("uploadToolbarViewHeight")),_bottom:n$9(n$211.bindingFor("uploadToolbarViewBottom")),_uploadingPhotos:n$9({readOnly:!0,dependencies:["uploadManager.totalFileCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r>1?n$290("Upload.Bar.Uploading.MultipleItems",{total:r}):1===r?n$290("Upload.Bar.Uploading.SingleItem"):void 0}}),_progressStatus:n$9({readOnly:!0,dependencies:["uploadManager.completedFileCount","uploadManager.totalFileCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return n$290("Upload.Bar.Progress.Status",{completed:a,total:r})
}}),show:function(){var t=this.get("isVisible");t||(this.set("isVisible",!0),this._adjustLayout())},hide:function(){this.setIfChanged("isVisible",!1)},_adjustLayout:function(){var i=this.get("_stopUploadButton"),r=i.get("element").offsetWidth,a=this.get("_spinnerView"),s=a.get("element").offsetWidth,o=this.get("_uploadingPhotosWidth"),l=this.get("_progressBarView");l.get("style").set("right",r+t+e),l.get("style").set("left",o+s+t+e+n)},_uploadingPhotosWidth:n$9({readOnly:!0,dependencies:["uploadManager.totalFileCount"],get:function(t,e,n,i){i.internalGetPath(this,e[0+n]);var r=this.get("_uploadingPhotosElement"),a=r.offsetWidth;return a}}),_progressBarWidth:n$9({readOnly:!0,dependencies:["uploadManager.totalFileCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=this.get("_progressElement"),s=a.textContent;a.textContent=n$290("Upload.Bar.Progress.Status",{completed:r,total:r});var o=a.offsetWidth;return a.textContent=s,o}}),_stopUploadButton:n$424(n$400,{title:n$290("Upload.Bar.Stop.Upload"),event:"stopUpload"}),_spinnerView:n$424(n$690.extend({isAnimating:n$9({readOnly:!0,dependencies:["isAttached","parent.isVisible"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a&&r}})})),_percentComplete:n$9({readOnly:!0,dependencies:["uploadManager.totalFileCount","uploadManager.completedFileCount","uploadManager.progress.percentComplete"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[0+n]);return s===a?1:r*(1-n$211.get("uploadProgressProcessingFudge"))
}}),_progressBarView:n$424(n$691,{value:n$14("parent._percentComplete")}),_toolbarSeparator:n$424(n$677)});n$697=i,i.__QUALIFIED_CLASS_NAME__="Photos.UploadToolbarView"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$635,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"toolbarScrollView"},{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"contentViews"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"infoPanel"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"uploadToolbarView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"restartingOverlay"}],classes:["photos-main-view"]}},allowsDrop:!1,applicationMode:n$9(),modeSwitcherSegments:n$9(),toolbarView:n$9(n$14("toolbarScrollView.toolbarView")),toolbarScrollView:n$84(n$696.extend({toolbarView:n$84(n$695.extend({applicationMode:n$14("parent.parent.applicationMode"),modeSwitcherSegments:n$14("parent.parent.modeSwitcherSegments")}))})),uploadToolbarView:n$9(),restartingOverlay:n$424(n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinner"}],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"",falsevalue:"none",attributes:{},unit:null,property:"display"}},classes:["photos-restarting-overlay"]}},isVisible:n$9(n$14("parent.restartingOverlayIsVisible")),_spinner:n$424(n$690.extend({isAnimating:n$9(n$14("parent.isVisible"))}))})),restartingOverlayIsVisible:n$9(!1),transitionToToolbarConfiguration:function(e,t){this.get("toolbarView").transitionToConfiguration(e,t)},updateLayout:function(){this.get("toolbarView").updateLayout()}});n$886=e,e.__QUALIFIED_CLASS_NAME__="Photos.MainView"}();
    
    
        
!function(){"use strict";var e=n$668.extend({aheadState:n$84(n$668.TransitionState.extend({opacity:0,scale:n$4({readOnly:!0,get:function(){return n$211.littlePopInTransition_scale}})})),behindState:n$84(n$668.TransitionState.extend({opacity:0,scale:n$4({readOnly:!0,get:function(){return 1/n$211.littlePopInTransition_scale}})})),startAnimation:function(){this.__s._1Z3OUzhRDd_$HI$startAnimation.apply(this,arguments);var e=this.direction>0?this.toViewController:this.fromViewController;e&&e.instanceOf(n$698)&&e.get("useStickyHeaders")&&(this.maskView=n.create({viewportHeight:e.bindingFor("viewportHeight"),viewportScale:e.bindingFor("view.scale"),toolbarHeight:n$211.bindingFor("toolbarHeight")}).retain(this),this.get("viewsArray").add(this.maskView))},didFinish:function(){this.maskView&&(this.viewsArray.remove(this.maskView),this.maskView.release(this),this.maskView=null),this.fromView&&this.fromView.style.clear("transform").clear("opacity"),this.toView&&this.toView.style.clear("transform").clear("opacity"),n$109.sharedInstance.isChrome&&this.toView&&this.toView.style.forceRedraw(),this.__s._1Z3OUzhRDd_$iz$didFinish.apply(this,arguments)},__superMap:{_1Z3OUzhRDd_$HI$startAnimation:"startAnimation",_1Z3OUzhRDd_$iz$didFinish:"didFinish"}}),t=100,n=n$193.extend(n$659,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[],classes:["photos-collection-edge-mask","absolutely-positionable"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"toolbarHeight",attributes:{},unit:"px",property:"top"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"maskElementSize",attributes:{},unit:"px",property:"height"}}}},maskElementSize:n$9(t),viewportScale:n$9(1),viewportHeight:n$9(1e3),toolbarHeight:n$9(45),maskHeightInPixels:n$9({readOnly:!0,dependencies:["viewportHeight","viewportScale","toolbarHeight"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]),a=o*s,l=o/2-a/2,u=r*s,h=u+l,c=h-r;
return c+1}}),maskScale:n$9({readOnly:!0,dependencies:["maskHeightInPixels","maskElementSize"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return Math.max(s/r,0)}}),updateScale:n$7("maskScale",function(e){this.style.scaleY(e).layerBack().set("transform-origin","0 0")})});n$699=e,e.__QUALIFIED_CLASS_NAME__="Photos.LittlePopInTransition",n.__QUALIFIED_CLASS_NAME__="Photos.MaskView$540"}();
    
    
        
!function(){"use strict";var e=n$194.extend({_trackedViewControllers:n$305(Array),_trackedViewControllersByBookmark:n$305(Object),viewControllerClassesByBookmarkType:{},bookmark:n$9(null),returnTo:n$9(n$14("bookmark.returnTo")),views:n$305(n$158),activeViewController:n$670.create({cacheable:!0,readOnly:!0,dependencies:["bookmark"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.getViewControllerForBookmark(r)},createTransition:function(e){var t=e.fromViewController,n=e.toViewController,i=null,r=null,s=0;return t&&(i=t.get("bookmark")),n&&(r=n.get("bookmark")),i&&r&&(i.bookmarkReturnsTo(r)?s=-1:r.bookmarkReturnsTo(i)&&(s=1)),e.direction=s,e.fromBookmark=i,e.toBookmark=r,this.createTransition(e)},transitionWillStart:function(e){this.transitionWillStart(e)},transitionDidFinish:function(e){this.transitionDidFinish(e)}}),returnToViewController:n$9({cacheable:!0,readOnly:!0,dependencies:["returnTo"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.getViewControllerForBookmark(r)}}),getViewControllerForBookmark:function(e){if(!e)return null;var t=this._trackedViewControllersByBookmark,n=e.toString(),i=n$22(e),r=t[i]||t[n];return r?r:(r=this.createViewControllerForBookmark(e))?(r.retain(this),this.cacheViewController(t,r),this._trackedViewControllers.push(r),r):null},createViewControllerForBookmark:function(e){var t=this.viewControllerClassesByBookmarkType[e.get("type")];return t?t.create({bookmark:e,navigationManager:this}):null},cacheViewController:function(e,t){if(t){var n=t.get("bookmark");if(n){t.set("shouldBeCached",!0);var i=n$22(n);
e.hasOwnProperty(i)||(e[i]=t)}}},navigationStateDidChange:n$7("activeViewController","returnToViewController",function(){this.updateForNavigationStateChange()}),updateForNavigationStateChange:function(){var e={};this._trackedViewControllers.forEach(function(e){e.set("shouldBeCached",!1)},this),this.cacheViewControllers(e),this._trackedViewControllersByBookmark=e,this._pruneDetachedViewControllers(),this._updateReturnToViewControllerPointers(),n$66.pause(),this._trackedViewControllers.forEach(function(e){e.set("isActiveViewController",e===this.get("activeViewController"))},this),n$66.resume()},cacheViewControllers:function(e){this.cacheViewController(e,this.get("activeViewController")),this.cacheViewController(e,this.get("returnToViewController"));for(var t=this.get("bookmark");t;)this.cacheViewControllerForBookmark(e,t),t=t.get("returnTo")},cacheViewControllerForBookmark:function(e,t){if(t){var n=this._trackedViewControllersByBookmark,i=n[n$22(t)];i&&this.cacheViewController(e,i)}},reloadAllViewControllers:function(){this._pruneAllViewControllers(),n$66.pause(),this.propertyChanged("activeViewController"),this.propertyChanged("returnToViewController"),n$66.resume()},_pruneAllViewControllers:function(){for(var e=this._trackedViewControllers,t=e.length;t--;){var n=e[t];n.release(this)}this._trackedViewControllersByBookmark={},this._trackedViewControllers.length=0},_pruneDetachedViewControllers:function(){for(var e,t=this._trackedViewControllers,n=t.length;n--;)e=t[n],e.get("shouldBeCached")||(e.get("isAttached")?this.cacheViewController(this._trackedViewControllersByBookmark,e):(e.release(this),this._trackedViewControllers.splice(n,1)))
},_updateReturnToViewControllerPointers:function(){var e=this._trackedViewControllersByBookmark;this._trackedViewControllers.forEach(function(t){var n=t.get("bookmark");if(n){var i=n.get("returnTo");i&&t.set("returnToViewController",e[n$22(i)]||null)}},this)},createTransition:function(e){return e.viewsArray=this.get("views"),n$699.create(e)},transitionWillStart:function(e){var t,n;t=e.get("fromViewController"),n=e.get("toViewController"),t&&t.set("isTransitioning",!0),n&&n.set("isTransitioning",!0)},transitionDidFinish:function(e){var t,n;t=e.get("fromViewController"),n=e.get("toViewController"),t&&t.set("isTransitioning",!1),n&&n.set("isTransitioning",!1)}});n$887=e,e.__QUALIFIED_CLASS_NAME__="Photos.NavigationViewController"}();
    
    
        
!function(){"use strict";var t=n$193.extend(n$404,n$407,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"itemViews"}],classes:["cw-collection-view"]}},delegate:null,scrollBy:function(t,e){var n=this.get("delegate");n?n.didScroll(t,e):this.__s._2tNn76wyfeQ$Ep$scrollBy.apply(this,arguments)},__superMap:{_2tNn76wyfeQ$Ep$scrollBy:"scrollBy"}});n$704=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.CollectionView"}();
    
    
        
!function(){"use strict";var t=n$5.extend({left:0,top:0,right:0,bottom:0,width:0,height:0});n$700=t,t.__QUALIFIED_CLASS_NAME__="CW.SpaceAroundContent"}();
    
    
        
!function(){"use strict";var t=n$5.extend({item:null,x:-1,y:-1,width:-1,height:-1,scrollX:0,scrollY:0,isPositioned:!1,hasEntered:!1,isFirstItem:!1,isLastItem:!1,moveBy:function(t,e){this.x+=t,this.y+=e,this.scrollX+=t,this.scrollY+=e},copyInto:function(t){t.item=this.item,t.id=this.id,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.scrollX=this.scrollX,t.scrollY=this.scrollY,t.isPositioned=this.isPositioned}});n$701=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.PositionedItem"}();
    
    
        
!function(){"use strict";function e(){return i>0?n[--i]:n$701.create()}function t(e){e.item=null,e.id=null,e.x=-1,e.y=-1,e.width=-1,e.height=-1,e.scrollX=-1,e.scrollY=-1,e.hasEntered=!1,e.isPositioned=!1,n[i++]=e}var n=[],i=0,r=n$5.extend({provider:null,layoutDelegate:null,itemDelegate:null,anchor:null,viewportWidth:1024,viewportHeight:768,horizontalOverdraw:0,verticalOverdraw:0,verticalScan:1024,horizontalScan:1024,spaceAroundViewport:null,positionedItems:null,_positionedItemsSwap:null,_positionedItemsHash:null,_retainedItems:null,init:function(){this.positionedItems=[],this._positionedItemsSwap=[],this._positionedItemsHash={},this._retainedItems=[],this._tmp_itemsArray=[],this._tmp_itemDatasArray=[],this._tmp_positionedItemsArray=[],this.spaceAroundViewport=n$700.create(),this.__s._3hAs2mAkTtO$1ek$init.apply(this,arguments)},moveBy:function(e,t){var n=this.positionedItems,i=n.length,r=0;for(r=0;i>r;r++)n[r].moveBy(e,t);this.anchor=this.layoutDelegate.updateAnchorForMovement(this.provider,this.anchor,this.positionedItems,e,t,this.viewportWidth,this.viewportHeight)},update:function(){this._isUpdating&&n$11("LayoutManager cannot update while an update is already in progress."),this._isUpdating=!0;var n=this.anchor,i=e(),r=null,s=this.viewportWidth,o=this.viewportHeight,a=0-this.horizontalOverdraw,l=0-this.verticalOverdraw,u=s+this.horizontalOverdraw,h=o+this.verticalOverdraw,d=this.provider,c=this.layoutDelegate,_=this._positionedItemsSwap,p=this.positionedItems,g=this._retainedItems,f=0,$=0,m=null,v=null,y=null,I=null,w=null,b=0,S=0,C=0,A=0,E=null;for($=p.length,f=0;$>f;f++)E=p[f],E.isPositioned=!1,E.isFirstItem=!1,E.isLastItem=!1,d.retainItem(E.item),g.push(E.item);
if(r=i,r.item=null,n&&c.setUpPositionedItemForAnchor(d,r,n,p,s,o),null!==r.item&&d.itemHasBeenRemoved(r.item)&&(r.item=null),null===r.item&&c.setUpInitialPositionedItem(d,r,s,o),null!==r.item){if(r.x+r.width<a||r.x>u||r.y+r.height<l||r.y>h){var P=e(),D=a-r.x,F=l-r.y;this._setUpPositionedItemAtDistance(P,r,D,F),P.copyInto(r),t(P)}var L=this._positionedItemForItem(r.item);if(L.item!==r.item)throw"Mismatch between item and positionedItem";for(L.x=r.x,L.y=r.y,L.width=r.width,L.height=r.height,r=L,c.repositionItemIfNeeded(d,r,s,o),d.retainItem(r.item),g.push(r.item),y=null,_.length=0,m=r,v=null;m.x+m.width>a&&m.y+m.height>l;){if((m.x>u||m.y>h)&&v&&v.x<m.x&&v.y<m.y&&n$11("Positioned an item out of bounds, and further out of bounds than the previous item. Crashing as this likely will end with an infinite loop."),_.unshift(m),m.isPositioned=!0,b=Math.min(b,m.x),S=Math.max(S,m.x+m.width),A=Math.min(A,m.y),C=Math.max(C,m.y+m.height),y=d.getItemRelativeToItem(m.item,-1),(m.x+m.width<a||m.y+m.height<l)&&n$11("Positioned an item far out of bounds. Crashing as this likely will end with an infinite loop."),null===y||void 0===y){I=m;break}d.retainItem(y),g.push(y),v=m,m=this._positionedItemForItem(y),m.isPositioned&&n$11("LayoutManager already positioned item, but is trying to position it again. Crashing as this likely will end with an infinite loop."),c.positionAdjacentItem(d,m,v,-1,s,o)}for(m=r,v=null;m.x<u+1&&m.y<h+1;){if((m.x+m.width<a||m.y+m.height<l)&&v&&v.x>m.x&&v.y>m.y&&n$11("Positioned an item out of bounds, and further out of bounds than previous item"),m!==r&&(_.push(m),m.isPositioned=!0,b=Math.min(b,m.x),S=Math.max(S,m.x+m.width),A=Math.min(A,m.y),C=Math.max(C,m.y+m.height)),y=d.getItemRelativeToItem(m.item,1),null===y||void 0===y){w=m;
break}d.retainItem(y),g.push(y),v=m,m=this._positionedItemForItem(y),m.isPositioned&&n$11("LayoutManager already positioned item, but is trying to position it again"),c.positionAdjacentItem(d,m,v,1,s,o)}}for(I&&(I.isFirstItem=!0),w&&(w.isLastItem=!0),this._handleItemExits(p),p.length=0,this._handleItemEnters(_),this._handleItemMoves(_),$=g.length,f=0;$>f;f++)d.releaseItem(g[f]);g.length=0,this.positionedItems=_,this._positionedItemsSwap=p,n=c.anchorForNextCycle(d,n,_,s,o),this.anchor=n,this.computeSpaceAroundViewport(),t(i),this._isUpdating=!1},_handleItemExits:function(e){var t=this._tmp_itemsArray,n=this._tmp_itemDatasArray,i=this._tmp_positionedItemsArray,r=this.provider,s=this.itemDelegate,o=0,a=0,l=null,u=null,h=null;for(t.length=0,n.length=0,i.length=0,a=e.length,o=0;a>o;o++)l=e[o],l.isPositioned||(u=l.item,h=r.dataForItem(u),t.push(u),n.push(h),i.push(l));for(s.itemsWillExit(t,n,i),a=n.length,o=0;a>o;o++)u=t[o],h=n[o],l=i[o],s.itemDidExit(u,h,l),r.releaseItem(l.item);for(s.itemsDidExit(t,n,i),o=0;a>o;o++)this._releasePositionedItem(i[o])},_handleItemEnters:function(e){var t=this._tmp_itemsArray,n=this._tmp_itemDatasArray,i=this._tmp_positionedItemsArray,r=this.provider,s=this.itemDelegate,o=0,a=0,l=null,u=null,h=null;for(t.length=0,n.length=0,i.length=0,a=e.length,o=0;a>o;o++)l=e[o],l.hasEntered||(u=l.item,h=r.dataForItem(u),t.push(u),n.push(h),i.push(l));for(s.itemsWillEnter(t,n,i),a=n.length,o=0;a>o;o++)u=t[o],h=n[o],l=i[o],r.retainItem(u),s.itemDidEnter(u,h,l),l.hasEntered=!0;s.itemsDidEnter(t,n,i),t.length=0,n.length=0,i.length=0},_handleItemMoves:function(e){var t=this._tmp_itemsArray,n=this._tmp_itemDatasArray,i=this.provider,r=this.itemDelegate,s=0,o=0,a=null,l=null,u=null;
for(o=e.length,s=0;o>s;s++)a=e[s],l=a.item,u=i.dataForItem(l),t.push(l),n.push(u);for(r.itemsWillMove(t,n,e),o=e.length,s=0;o>s;s++)a=e[s],l=t[s],u=n[s],r.itemDidMove(l,u,a);r.itemsDidMove(t,n,e),t.length=0,n.length=0},_setUpPositionedItemAtDistance:function(n,i,r,s){var o=this.horizontalScan,a=this.verticalScan,l=this.provider,u=this.layoutDelegate,h=this.viewportWidth,d=this.viewportHeight;if(Math.abs(r)<o&&Math.abs(s)<a){var c=o>0?1:-1,_=a>0?1:-1,p=0;if(_>0)p=1;else if(0>_)p=-1;else if(c>0)p=1;else{if(!(0>c))return i.copyInto(n),void 0;p=-1}var g=i.item,f=null;i.copyInto(n);for(var $=e(),m=i.x+r,v=i.y+s;null!==(g=l.getItemRelativeToItem(g,p));){if(null!==f&&l.releaseItem(f),l.retainItem(g),$.item=g,u.positionAdjacentItem(l,$,n,p,h,d),$.copyInto(n),$.x<=m&&$.x+$.width>=m&&$.y<=v&&$.y+$.height>=v||0>p&&$.y<=v||p>0&&$.y>=v||$.y>d+a||$.x>h+o||$.y+$.height<-a||$.x+$.width<-o)return this._retainedItems.push(n.item),t($),void 0;f=g}t($)}else u.setUpPositionedItemAtDistance(l,n,i,r,s,h,d)},_positionedItemForItem:function(t){var n=this.provider,i=n.idForItem(t),r=this._positionedItemsHash[i];return r?r:(r=e(),r.item=t,r.scrollX=r.scrollY=0,r.hasEntered=!1,r.id=i,this._positionedItemsHash[i]=r,r)},_releasePositionedItem:function(e){var n=e.id;delete this._positionedItemsHash[n],t(e)},computeSpaceAroundViewport:function(){var e=this.spaceAroundViewport;0===this.positionedItems.length?(e.left=0,e.right=0,e.top=0,e.bottom=0):this.layoutDelegate.computeSpaceAroundViewport(this.provider,e,this.positionedItems,this.viewportWidth,this.viewportHeight),e.width=this.viewportWidth,e.height=this.viewportHeight
},__superMap:{_3hAs2mAkTtO$1ek$init:"init"}});n$705=r,r.__QUALIFIED_CLASS_NAME__="CW.Collections.LayoutManager"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$47],itemsWillEnter:function(){},itemDidEnter:n$48.create(),itemsDidEnter:function(){},itemsWillMove:function(){},itemDidMove:n$48.create(),itemsDidMove:function(){},itemsWillExit:function(){},itemDidExit:n$48.create(),itemsDidExit:function(){}};n$702=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],views:null,activeViews:null,init:function(){this.__s._1SAGf1EL0eD$Gm$init.apply(this,arguments),this._pools={},this._viewHash={},this._itemsHash={},this.views=n$158.create(),this.activeViews=n$158.create()},viewForItem:function(e,t){var n=n$22(e),i=this._viewHash[n];if(!i){if(!t)return null;i=this._getViewOfClass(t)}return this._viewHash[n]=i,this._itemsHash[n$22(i)]=e,i},itemForView:function(e){var t=this._itemsHash[n$22(e)];return void 0===t&&n$11("No item for view"),t},releaseViewForItem:function(e){var t=n$22(e),n=this._viewHash[t],i=n$22(n);n||n$11("No view for item"),this._releaseView(n),delete this._viewHash[t],delete this._itemsHash[i]},_getViewOfClass:function(e){var t=n$22(e),n=this._pools[t];n||(n=this._pools[t]=[]);var i;return n.length>0?i=n.pop():(i=this.viewForViewClass(e),this.views.push(i)),this.activeViews.push(i),i},viewForViewClass:function(e){return e.create()},_releaseView:function(e){var t=n$22(e.constructor),n=this._pools[t];n.push(e),this.activeViews.remove(e)},__superMap:{_1SAGf1EL0eD$Gm$init:"init"}},t=n$5.extend(e);n$961=e,n$703=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.ViewMap"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$702],itemViewClass:n$193,viewMap:n$4({readOnly:!0,defaultValue:function(){return e.create({itemViewSupport:this})}}),init:function(){this.__s._2VD7rDnRr4B$Jc$init.apply(this,arguments),this._viewMap=this.get("viewMap")},viewClassForItem:function(){return this.itemViewClass},viewForViewClass:function(t){return t.create()},itemDidEnter:function(t,e,n){var i=this._viewMap.viewForItem(t,this.viewClassForItem(t,n));this.itemViewDidEnter(i,t,e,n)},itemDidMove:function(t,e,n){var i=this._viewMap.viewForItem(t);i&&this.itemViewDidMove(i,t,e,n)},itemDidExit:function(t,e,n){var i=this._viewMap.viewForItem(t);this.itemViewDidExit(i,t,e,n),this._viewMap.releaseViewForItem(t)},itemViewDidEnter:function(){},itemViewDidMove:function(){},itemViewDidExit:function(){},__superMap:{_2VD7rDnRr4B$Jc$init:"init"}},e=n$703.extend({itemViewSupport:null,viewForViewClass:function(t){return this.itemViewSupport.viewForViewClass(t)}});n$706=t,e.__QUALIFIED_CLASS_NAME__="CW.Collections.ItemViewSupportViewMap$548"}();
    
    
        
!function(){"use strict";var e=n$194.extend(n$706,{viewClass:n$704,_viewportWidth:0,_viewportHeight:0,viewportWidth:n$9({get:function(){return this._viewportWidth}}),viewportHeight:n$9({get:function(){return this._viewportHeight}}),init:function(){this.__s._1YSEGBJg3tu$MF$init.apply(this,arguments),this.layoutManager=this.createCollectionLayoutManager()},viewDidLoad:function(e){this.setPath("viewMap.views",e.get("itemViews")),e.set("delegate",this)},didAttach:function(){this.__s._1YSEGBJg3tu$Sz$didAttach.apply(this,arguments);var e=this;this._measureFunc=function(){e.measureViewport(),e.update()},window.addEventListener("resize",this._measureFunc),this.measureViewport(),this.update()},didDetach:function(){this.__s._1YSEGBJg3tu$Z_$didDetach.apply(this,arguments),window.removeEventListener("resize",this._measureFunc)},createCollectionLayoutManager:function(){return n$705.create({provider:this,layoutDelegate:this,itemDelegate:this})},measureViewport:function(){if(this.get("isAttached")){var e=this.get("view");if(e){var t=e.get("element"),n=1,i=1;t&&(n=t.offsetWidth,i=t.offsetHeight),(this._viewportWidth!==n||this._viewportHeight!==i)&&(this._viewportWidth=n,this._viewportHeight=i,n$66.pause(),this.propertyChanged("viewportWidth"),this.propertyChanged("viewportHeight"),n$66.resume(),this.viewportSizeDidChange(n,i))}}},viewportSizeDidChange:function(e,t){var n=this.layoutManager;n.viewportWidth=e,n.viewportHeight=t},update:function(){if(this.get("isViewLoaded")&&this.get("isAttached")){var e=this.layoutManager.spaceAroundViewport,t=this._viewportWidth,n=this._viewportHeight;1>t||1>n||(this.layoutManager.update(),this.updateScrollBounds(e,t,n))
}},updateScrollBounds:function(e,t,n){var i=this.get("view");n$66.pause();var r=-e.left,s=e.right+t,a=-e.top,o=e.bottom+n;i.set("scrollMinX",r),i.set("scrollMaxX",s),i.set("scrollMinY",a),i.set("scrollMaxY",o),i.set("height",n),i.set("width",t),n$66.resume(),this.get("view").validateScrollPosition()},didScroll:function(e,t){this.layoutManager.moveBy(-e,-t),this.update()},__superMap:{_1YSEGBJg3tu$MF$init:"init",_1YSEGBJg3tu$Sz$didAttach:"didAttach",_1YSEGBJg3tu$Z_$didDetach:"didDetach"}});n$707=e,e.__QUALIFIED_CLASS_NAME__="CW.Collections.CollectionViewController"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$47],setUpInitialPositionedItem:n$48.create(),setUpPositionedItemAtDistance:n$48.create(),positionAdjacentItem:n$48.create(),repositionItemIfNeeded:function(){},computeSpaceAroundViewport:n$48.create(),anchorForNextCycle:n$48.create(),updateAnchorForMovement:function(t,e){return e},setUpPositionedItemForAnchor:function(t,e,n){n.copyInto(e)}};n$708=t}();
    
    
        
!function(){"use strict";var e="application.cloudOSState",t=n$707.extend(n$708,n$706,{viewClass:n$559(function(t){return t.extend(n$416,{init:function(){if(n$103.getPath(e)===n$427.LoadedActive&&(n=!0),this.scrollIndicatorsShouldFade=n,this.__s._48P80H53UHn$OE$init.apply(this,arguments),!n)var t=this.observe(n$103.bindingFor(e),function(e){e===n$427.LoadedActive&&(this.set("scrollIndicatorsShouldFade",!0),n=!0,t.disconnect())})},scrollIndicatorOptions:{thickness:15,minThumbSize:24,beginMargin:2,endMargin:2},__superMap:{_48P80H53UHn$OE$init:"init"}})})}),n=!1;n$714=t,t.__QUALIFIED_CLASS_NAME__="Photos.CollectionViewController"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$47],itemsInsertedAtIndex:n$17(n$48),itemsRemovedAtIndex:n$17(n$48)};n$709=t}();
    
    
        
!function(){"use strict";function t(t){if(v){var e=new t.constructor(m);return e.set(t),e}return t}function e(){m<<=1,$=t($),I=t(I),S=t(S),C=t(C),b=t(b)}function n(t){var n=-1;return y>0?n=$[--y]:(n=w++,n>=m&&e()),I[n]=void 0===t?0:t,S[n]=-1,C[n]=0,b[n]=0,n}function i(t){$[y++]=t}function r(t){var e={};return e.index=s(t),e.next=l(t),e.refCount=u(t),e.removed=c(t),e}function a(){return w}function s(t){var e=I[t];return e}function o(t,e){I[t]=e}function l(t){var e=S[t];return e}function h(t,e){S[t]=e}function u(t){var e=C[t];return e}function d(t,e){C[t]=e}function c(t){var e=b[t];return e=!!e}function _(t,e){e=e?1:0,b[t]=e}var g=window.Array,f=window.Int8Array||g,p=window.Int32Array||g,v=(window.Float32Array||g,!!window.Float32Array),m=1024,$=new p(1024),y=0,w=0,I=new p(1024),S=new p(1024),C=new p(1024),b=new f(1024),A={alloc:n,free:i,dump:r,_getStructCount:a,getIndex:s,setIndex:o,getNext:l,setNext:h,getRefCount:u,setRefCount:d,getRemoved:c,setRemoved:_};n$710=A}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$306,n$10,n$709],_ip_indexMap:null,itemCount:n$9(0),_ip_lastIndexListNode:-1,_ip_firstRemovedIndexListNode:-1,init:function(){this._ip_indexMap={},this.__s._4Z8Cr4oboEY$Yn$init.apply(this,arguments)},_ip_cleanupDereferencedItems:function(e){for(var t=e,n=-1,i=-1,r=this._ip_indexMap;t>=0;){var s=n$710.getRefCount(t);if(i=n$710.getNext(t),1>s){var a=n$710.getIndex(t);delete r[a],n$710.free(t),n>=0?n$710.setNext(n,i):e=i}else n=t;t=i}return e},retainItem:function(e){n$710.setRefCount(e,n$710.getRefCount(e)+1)},releaseItem:function(e){var t=n$710.getRefCount(e);t--,n$710.setRefCount(e,t),1>t&&(this._ip_firstRemovedIndexListNode=this._ip_cleanupDereferencedItems(this._ip_firstRemovedIndexListNode),this._ip_lastIndexListNode=this._ip_cleanupDereferencedItems(this._ip_lastIndexListNode))},itemHasBeenRemoved:function(e){return n$710.getRemoved(e)},getFirstItem:function(){return this.itemAtIndex(0)},getLastItem:function(){return this.itemAtIndex(this.get("itemCount")-1)},getItemRelativeToItem:function(e,t){var n=n$710.getIndex(e)+t;return n>=this.get("itemCount")?null:0>n?null:this.itemAtIndex(n)},getNumberOfItemsBefore:function(e){return n$710.getIndex(e)},getNumberOfItemsAfter:function(e){return this.get("itemCount")-n$710.getIndex(e)-1},dataForItem:function(e){return this.dataForIndex(n$710.getIndex(e))},indexOfItem:function(e){return n$710.getIndex(e)},dataForIndex:function(e){return e},idForItem:function(e){return e},itemAtIndex:function(e){var t=this._ip_indexMap,n=t[e];if(n>=0)return n;n=n$710.alloc(e);var i=this._ip_lastIndexListNode,r=i;
if(0>i||e>n$710.getIndex(i))n$710.setNext(n,i),this._ip_lastIndexListNode=n;else for(;;){var s=n$710.getNext(r);if(0>s||n$710.getIndex(s)<e){n$710.setNext(n,s),n$710.setNext(r,n);break}r=s}return t[e]=n,n},itemsInsertedAtIndex:function(e,t){for(var n=this._ip_lastIndexListNode,i=this._ip_indexMap;n>=0;){var r=n$710.getIndex(n);if(e>r)break;n$710.setIndex(n,r+t),delete i[r],i[r+t]=n,n=n$710.getNext(n)}var s=this.get("itemCount"),a=s+t;this.set("itemCount",a)},itemsRemovedAtIndex:function(e,t){for(var n=this._ip_lastIndexListNode,i=this._ip_indexMap,r=e+t-1,s=-1,a=-1,o=-1;n>=0&&(s=n$710.getIndex(n),!(r>=s));)n$710.setIndex(n,s-t),i[s]===n&&delete i[s],i[s-t]=n,a=n,n=n$710.getNext(n);for(;n>=0&&(s=n$710.getIndex(n),!(e>s));)o=n$710.getNext(n),-1===a?this._ip_lastIndexListNode=o:n$710.setNext(a,o),n$710.setNext(n,this._ip_firstRemovedIndexListNode),this._ip_firstRemovedIndexListNode=n,n$710.setRemoved(n,!0),i[s]===n&&delete i[s],n=o;var l=this.get("itemCount"),d=l-t;this.set("itemCount",d)},__superMap:{_4Z8Cr4oboEY$Yn$init:"init"}},t=n$5.extend(e);n$962=e,n$715=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.IndexedProvider"}();
    
    
        
!function(){"use strict";var e=n$5.extend({Type:window.Float64Array,items:null,init:function(e){this.__s._3fZGPFOaB1b$Bj$init.call(this),this.Type=e||this.Type||Array,this.items=new this.Type},ensureLength:function(e,t){var n,i=this.items;return i&&i.length>=e?i:(e=Math.max(128,2*e),this.Type===Array?(this.items.length=e,this.items):(this.items=n=new this.Type(e),t===!1?n:(i&&n.set(i),n)))},__superMap:{_3fZGPFOaB1b$Bj$init:"init"}});n$716=e,e.__QUALIFIED_CLASS_NAME__="Photos.FastManualTypedArray"}();
    
    
        
!function(){"use strict";var t=function(t,e,n,i,r,a){var s,o,l,h,u=!1,d=n,c=i;for(a||(a=0),r||(r=0);;){if(s=(c+d)/2,o=r?Math.round(s/r)*r:o,u)break;if((d>=o||o>=c)&&(u=!0),l=t.call(this,o),h=l-e,h>a)c=s;else{if(!(-a>h))break;d=s}}return Math.max(n,Math.min(i,o))};n$717=t}();
    
    
        
!function(){"use strict";function t(){return e.define.apply(e,arguments)}var e=n$8.extend({serializer:null,get:function(t,e,i,r){var a=r.dependencies,s=r.serializer,o=n.getInstance();if(a)for(var l,h=0;l=a[h];h++)o[l]=r.internalGet(this,e[h+i]);var u=s?s.encode(o):n$44(o);return n.disposeInstance(o),u},set:function(t,e,n,i,r){var a=r.writeDependencies,s=r.serializer,o=s?s.decode(t):t;if(a)for(var l,h=0;l=a[h];h++)n[h+i]=o?o[l]:void 0}}),n=[];n.getInstance=function(){return this.pop()||{}},n.disposeInstance=function(t){n$382(t),this.push(t)},n$963=e,n$711=t,e.__QUALIFIED_CLASS_NAME__="Photos.CompoundProperty"}();
    
    
        
!function(){"use strict";var e={state:n$711({dependencies:["focusedId"],serializer:n$208.sharedInstance}),focusedId:n$9({get:function(){return this._focusedId||null},set:function(e){this._focusedId=+e==e?+e:e}})},t={mixinDependencies:[e],state:n$711({dependencies:["focusedId","focusedIdOffset","focusedIdOffsetLandmark"],serializer:n$208.sharedInstance}),focusedIdOffset:n$9(),focusedIdOffsetLandmark:n$9()},n={mixinDependencies:[t],state:n$711({dependencies:["focusedId","focusedIdOffset","focusedIdOffsetLandmark","columnCount"],serializer:n$208.sharedInstance}),columnCount:n$9()};n$718=e,n$719=t,n$736=n}();
    
    
        
!function(){"use strict";var t=n$9.bind(void 0,{defaultValue:0,get:function(t){return+t||0}}),e=n$5.extend(n$10,{owner:n$9(),top:t(),bottom:t(),left:t(),right:t()});n$712=e,e.__QUALIFIED_CLASS_NAME__="Photos.Offsets"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10],offsets:n$9(n$84(n$712)),_offsetsDidChange:n$7("offsets.top","offsets.bottom","offsets.left","offsets.right",function(e,t,n,i){(e!==this._cos_lastTop||t!==this._cos_lastBottom||n!==this._cos_lastLeft||i!==this._cos_lastRight)&&(this._cos_lastTop=e,this._cos_lastBottom=t,this._cos_lastLeft=n,this._cos_lastRight=i,this.update())}),updateScrollBounds:function(e){var t=this.offsets;t&&(e.top+=+t.top,e.bottom+=+t.bottom,e.left+=+t.left,e.right+=+t.right),this.__s._2NM6ypUYEoF$Sk$updateScrollBounds.apply(this,arguments)},__superMap:{_2NM6ypUYEoF$Sk$updateScrollBounds:"updateScrollBounds"}};n$720=e}();
    
    
        
!function(){"use strict";var t=100,e=200,n=n$714.extend(n$47,n$359,n$720,{viewClass:n$559(function(t){var e=t.prototype.scrollIndicatorOptions.beginMargin,n=t.prototype.scrollIndicatorOptions.endMargin;return t.extend({additionalClassNames:n$16(["photos-grid-view"]),hasHorizontalScrollIndicator:!1,verticalScrollIndicatorClass:n$559(function(t){return t.extend({beginMargin:n$9({readOnly:!0,dependencies:["parent.viewController.offsets.top","parent.viewController.topInset"],get:function(t,n,i,r){return e+r.internalGetPath(this,n[0+i])+r.internalGetPath(this,n[1+i])}}),endMargin:n$9({readOnly:!0,dependencies:["parent.viewController.offsets.bottom"],get:function(t,e,i,r){return n+r.internalGetPath(this,e[0+i])}})})}),validateScrollPosition:function(){if(!this._isValidatingScrollPosition){this._isValidatingScrollPosition=!0;var t=this.__s._3LTHEwisROd$1_9$validateScrollPosition.apply(this,arguments);return this._isValidatingScrollPosition=!1,t}},__superMap:{_3LTHEwisROd$1_9$validateScrollPosition:"validateScrollPosition"}})}),startsAtBottom:!0,shouldPreloadItems:!0,leftForItemAtIndex:n$48.create(),widthForItemAtIndex:n$48.create(),topForItemAtIndex:n$48.create(),heightForItemAtIndex:n$48.create(),computeLayoutInfo:n$48.create(),decideLayoutMetricsForViewport:n$48.create(),layoutItemView:n$48.create(),bottomInset:-1,itemCountForLayout:0,_lastContentStateToken:0/0,_lastScrollDate:0/0,_lastScrollVelocity:0,scrollVelocityEMA:n$9(0),_lastScrollDirection:-1,scrollTop:n$9({defaultValue:0/0,didChange:function(t){var e=this._previousScrollTop||t,n=this._lastScrollDate,i=Date.now(),r=t-(e||t),a=i-n||1/0,s=1e3*(r/a);
this._previousScrollTop=t,this._lastScrollDirection=t>e?1:-1,this._lastScrollDate=i,this._lastScrollVelocity=s,this._runScrollAveragingFrame(0/0,!0)}}),topInset:n$9(n$211.bindingFor("toolbarHeight")),itemViewClass:null,provider:n$9(),contentChangeNotifier:n$9(n$14("provider")),bottomAnchor:n$514(function(){return{offset:0,inset:0}}),_scrollRoundingIncrement:1,_dpr:n$9(n$522.bindingFor("devicePixelRatio")),_chooseScrollRoundingIncrement:n$7("_dpr",function(t){if(this._scrollRoundingIncrement=1/t,this.isInitialized){var e=this.get("view");e&&e.scrollBy(0,0)}}),init:function(){this.__s._3LTHEwisROd$3mY$init.apply(this,arguments),this.layoutManager.provider=this.provider,this.layoutManager.verticalScan=this.layoutManager.horizontalScan=0},didScroll:function(){this.__s._3LTHEwisROd$3yx$didScroll.apply(this,arguments),this._resumeDerivativeCreationsTimeout?clearTimeout(this._resumeDerivativeCreationsTimeout):n$309.suspendDerivativeCreations(),this._resumeDerivativeCreationsTimeout=n$130(this._resumeDerivativeCreations,50)},_resumeDerivativeCreations:n$299(function(){this._resumeDerivativeCreationsTimeout=null,n$309.resumeDerivativeCreations()}),willMoveToParentViewController:function(t){this.__s._3LTHEwisROd$49p$willMoveToParentViewController.apply(this,arguments),t&&this._scrollToBookmarkFocusedId()},_scrollToBookmarkFocusedId:function(){if(this.provider.hasUniqueIds){var t=this.get("bookmark");t&&t.instanceOf(n$718)&&this.scrollToItem(this.provider.itemForUniqueId(t.get("focusedId")))}},_chooseNewFocusedIdAndOffset:function(){var t=this.get("bookmark");if(t&&t.instanceOf(n$719)){var e=this.get("scrollTop"),n=this.get("viewportHeight"),i=this.get("viewportWidth"),r=i/4>e,a=e+n>this._computeTotalHeight()-i/4,s=r===a,o=s?"center":r?"top":"bottom",l=s?e+n/2:r?e:e+n,h=this._findItemIndexNearTopPosition(l),d=this.provider.itemAtIndex(h);
d&&this.provider.hasUniqueIds&&(t.setIfChanged("focusedId",this.provider.uniqueIdForItem(d)),t.setIfChanged("focusedIdOffset",(this.topForItemAtIndex(h)-l)/i),t.setIfChanged("focusedIdOffsetLandmark",o))}},showAsset:function(t){this.sendEvent("navigateToAssetInFolder",{asset:t.get("context"),folder:this.provider})},_providerContentsWillChange:n$7("contentChangeNotifier.contentsWillChange",function(t){if(t){this._removeAnchorCandidateFallbackInfo();var e=this.provider,n=e.get("itemCount"),i=this._lastChosenAnchorUniqueId;if(!n||!e.hasUniqueIds||!i)return e.hasUniqueIds||n$63.warn("The IndexedModelProvider ("+e+") serving GridViewController ("+this+") lacks uniqueIds. Skipping selection of best remaining item after changeset."),void 0;if("bottom_anchor"===i)return this._anchorCandidateFallbackList="bottom_anchor",void 0;for(var r=this._anchorCandidateFallbackList=n$319.getInstance(),a=this._anchorCandidateFallbackTops=n$319.getInstance(),s=e.indexForUniqueId(i),o=s,l=1;o>=0;)r.push(e.uniqueIdForIndex(o)),a.push(this.topForItemAtIndex(o)),o+=l,o>=n&&(l=-1,o=s+l)}}),_removeAnchorCandidateFallbackInfo:n$299(function(){var t=this._anchorCandidateFallbackList;t="bottom_anchor"===t?null:t,t&&n$319.disposeInstance(t),this._anchorCandidateFallbackTops&&n$319.disposeInstance(this._anchorCandidateFallbackTops),this._anchorCandidateFallbackList=null,this._anchorCandidateFallbackTops=null}),_providerContentsDidChange:n$7("contentChangeNotifier.contentsDidChange",function(t){t&&(this.update(),this._removeAnchorCandidateFallbackInfo(),this._preloadItems())}),didAttach:function(){this.update(),this.__s._3LTHEwisROd$5wO$didAttach.apply(this,arguments)
},update:function(){if(this.isInitialized){var t=this.provider,e=t.get("contentStateToken");this._lastContentStateToken!==e&&(this._lastContentStateToken=e,this.itemCountForLayout=0|t.get("itemCount"),this.computeLayoutInfo()),this.__s._3LTHEwisROd$6B1$update.apply(this,arguments)}},invalidateComputedLayoutInfo:function(){this._lastContentStateToken=0/0},setUpInitialPositionedItem:function(t,e,n,i,r){if(0!==this.itemCountForLayout){var a,s=this._anchorCandidateFallbackList,o=this.startsAtBottom,l=0/0;if(s&&!isNaN(this.get("scrollTop"))&&!r)if(o="bottom_anchor"===s)a=t.getLastItem();else for(var h=0,d=s.length;d>h&&!a;h++){var u=t.indexForUniqueId(s[h]);-1!==u&&(a=t.itemAtIndex(u),l=h)}var c=!1,_=0/0;if(!a&&!r){var g=this.get("bookmark"),p=g.get("focusedId"),f=g.get("focusedIdOffset"),v=g.get("focusedIdOffsetLandmark");if(p&&(a=t.itemForUniqueId(p))){c=!0;var m=t.dataForItem(a),$=this.topForItemAtIndex(m);if(f!==+f||!v){var y=this._computeTotalHeight(),I=n/4>$,w=n/4>y-$,S=I===w;v=S?"center":I?"top":"bottom";var C=this.heightForItemAtIndex(m);f=(S?-C/2:I?0:-C)/n}_=0|("center"===v?$-i/2:"top"===v?$:$-i)-f*n}}a||(a=o?t.getLastItem():t.getFirstItem());var A,b=t.dataForItem(a);A=isNaN(l)?c?_:o?Math.max(0,this.bottomAnchor.inset+this.bottomInset+this.topForItemAtIndex(b)+this.heightForItemAtIndex(b)-i):0:this.topForItemAtIndex(b)+-this._anchorCandidateFallbackTops[l]+this.get("scrollTop"),e.item=a,this._setUpPositionedItemForIndexAndScrollTop(e,b,A)}},_setUpPositionedItemForBottomItemAtViewportBottom:function(t,e,n,i){return this.setUpInitialPositionedItem(t,e,n,i,!0)},setUpPositionedItemAtDistance:function(t,e,n,i,r){var a=t.dataForItem(n.item),s=this.topForItemAtIndex(a),o=this._findItemIndexNearTopPosition(s+r);
this.setUpPositionedItemForItemAtIndexRelativeToPositionedItem(t,e,o,n)},setUpPositionedItemForItemAtIndexRelativeToPositionedItem:function(t,e,n,i){var r=t.dataForItem(i.item);e.item=t.getItemRelativeToItem(i.item,n-r);var a=this._computeEffectiveScrollTop(t,i);this._setUpPositionedItemForIndexAndScrollTop(e,n,a)},setUpPositionedItemForItemRelativeToPositionedItem:function(t,e,n,i){var r=t.dataForItem(n);e.item=n;var a=this._computeEffectiveScrollTop(t,i);this._setUpPositionedItemForIndexAndScrollTop(e,r,a)},positionAdjacentItem:function(t,e,n){var i=t.dataForItem(e.item),r=this._computeEffectiveScrollTop(t,n);this._setUpPositionedItemForIndexAndScrollTop(e,i,r)},repositionItemIfNeeded:function(t,e){var n=t.dataForItem(e.item);this._setUpPositionedItemForIndexAndScrollTop(e,n)},computeSpaceAroundViewport:function(t,e,n,i,r){var a=this._computeEffectiveScrollTop(t,n[0]);e.left=e.right=0,e.top=a,e.bottom=this._computeTotalHeight()-a-r},viewportSizeDidChange:function(t,e){this.__s._3LTHEwisROd$9DN$viewportSizeDidChange.apply(this,arguments),this.decideLayoutMetricsForViewport(t,e)},anchorForNextCycle:function(e,n,r,a,s){var o=this.get("_scrollToAnchor");if(n$32(o,i)){if(o.get("isAnimating"))return o;this.set("_scrollToAnchor",null)}var l=r[r.length-1],h=null;if(l&&(this.startsAtBottom&&l.isLastItem&&l.y+l.height-s<t?(this.bottomAnchor.offset=l.y+this.bottomInset+l.height-s+this.bottomAnchor.inset,h=this.bottomAnchor):h=r[0]),e.hasUniqueIds)if(h===this.bottomAnchor)this._lastChosenAnchorUniqueId="bottom_anchor";else{var d=h&&h.item;this._lastChosenAnchorUniqueId=d&&e.uniqueIdForItem(d)
}return h||null},updateAnchorForMovement:function(e,n,i,r,a){return this.set("_scrollToAnchor",null),n===this.bottomAnchor&&(this.bottomAnchor.offset+=a,this.bottomAnchor.offset<t)?this.bottomAnchor:i.length>0?i[0]:null},setUpPositionedItemForAnchor:function(t,e,n,r,a,s){var o=this.get("_scrollToAnchor");if(n$32(o,i)&&(n=o),n$32(n,i)){var l=n.get("item");if(!l||t.itemHasBeenRemoved(l))return this._setUpPositionedItemForBottomItemAtViewportBottom(t,e,a,s);var h=t.dataForItem(l),d=n.get("y"),u=this._roundToScrollIncrement(this.topForItemAtIndex(h)-d);e.item=l,this._setUpPositionedItemForIndexAndScrollTop(e,h,u)}else this.startsAtBottom&&n===this.bottomAnchor?(this._setUpPositionedItemForBottomItemAtViewportBottom(t,e,a,s),e.y=s+n.offset-e.height-this.bottomInset-n.inset):n.copyInto(e)},itemsDidMove:function(t,e,n){if(n.length){this.setIfChanged("scrollTop",this._computeEffectiveScrollTop(this.provider,n[0]));var i=this.get("viewMap"),r=null,a=null,s=1===this._lastScrollDirection,o=n.length,l=this.topInset,h=this.bottomInset,d=this.viewportHeight;if(this.instanceOf(n$600))for(var u=this.get("loadPriorityBase"),c=0;o>c;c++)if(r=n[c],a=i.viewForItem(r.item)){var _=(s?o-c:c)/o;_=.5*_+.5*+(r.y<l||r.y+r.height>d-h),a.setIfChanged("priority",u+_)}this._preloadItems(t),this._chooseNewFocusedIdAndOffset()}},itemViewDidEnter:function(t,e,n){var i=this._getItemAtIndex(n);t.set("model",i),t._gvc_modelInstance=i},itemViewDidMove:function(t,e,n,i){this.__s._3LTHEwisROd$BMa$itemViewDidMove.apply(this,arguments),this.layoutItemView(t,n,i)},_preloadItems:function(t){if(this.shouldPreloadItems&&(t||(t=this.getPath("layoutManager.positionedItems")),t)){var e=t.length;
if(0!==e){for(var n=this.provider,i=1/0,r=0,a=0;e>a;a++){var s=t[a],o=n.indexOfItem(s);o>r&&(r=o),i>o&&(i=o)}this._preloadNearRangeThrottled(i,r)}}},_preloadNearRangeThrottled:n$358(function(){return this.preloadNearRange.apply(this,arguments)},50,!0),preloadNearRange:function(t,e){return this.provider.preloadModelsNearRange(t,e),!1},itemViewDidExit:function(t){var e=t._gvc_modelInstance;this._releaseItem(e),t._gvc_modelInstance=null,t.clearForReuse()},_getItemAtIndex:function(t){return this.provider.itemAtIndex(t).retain(this)},_releaseItem:function(t){t.release(this)},_computeEffectiveScrollTop:function(t,e){var n=t.dataForItem(e.item),i=this.topForItemAtIndex(n),r=i-e.y;return this._roundToScrollIncrement(r)},_roundToScrollIncrement:function(t){var e=this._scrollRoundingIncrement;return e?Math.ceil(t/e)*e:t},_computeTotalHeight:function(){var t=this.bottomInset,e=this.itemCountForLayout-1;return e>=0&&(t+=this.topForItemAtIndex(e)+this.heightForItemAtIndex(e)),this._roundToScrollIncrement(t)},_setUpPositionedItemForIndexAndScrollTop:function(t,e,n){t.width=this.widthForItemAtIndex(e),t.height=this.heightForItemAtIndex(e),t.x=this.leftForItemAtIndex(e),void 0!==n&&(t.y=this.topForItemAtIndex(e)-n)},_findItemIndexNearTopPosition:function(t,e,n){var i=this.itemCountForLayout;return n?(e=Math.max(0,e),n=Math.min(i-1,n)):(e=0,n=i-1),n$717.call(this,this.topForItemAtIndex,t,e,n,1)},_scrollToAnchor:n$9(null),scrollToItem:function(t,e){var n=this.itemDirectionOffScreen(t);if(1===n||-1===n){var i=-1===n?this.topForItemAtIndex(0):this.get("viewportHeight")-this.bottomInset-this.heightForItemAtIndex(this.provider.dataForItem(t));
this.scrollItemToPositionOnScreen(t,0,i,e)}},scrollToTop:function(t){var e=this.itemCountForLayout;0!==e&&this.scrollItemToPositionOnScreen(this.provider.itemAtIndex(0),0,this.topForItemAtIndex(0),t)},scrollToBottom:function(t){var e=this.itemCountForLayout,n=e-1;0!==e&&this.scrollItemToPositionOnScreen(this.provider.itemAtIndex(n),0,this.get("viewportHeight")-this.heightForItemAtIndex(n)-this.bottomInset-this.bottomAnchor.inset,t)},scrollBy:function(t,e){var n=this.itemCountForLayout;if(0!==n){var i=this.get("view"),r=i.get("scrollMinY"),a=i.get("scrollMaxY")-this.get("viewportHeight"),s=this.get("_scrollToAnchor");s&&(t-=s.getFinalValue("y")-s.get("y")),0>t&&r>t&&(t=r),t>0&&t>a&&(t=a);var o=this.topForItemAtIndex(0),l=this.get("scrollTop");void 0!==l&&(o-=l),this.scrollItemToPositionOnScreen(this.provider.itemAtIndex(0),0,o-t,e)}},pageDown:function(t){this.scrollBy(this.get("viewportHeight"),t)},pageUp:function(t){this.scrollBy(-this.get("viewportHeight"),t)},scrollItemToPositionOnScreen:function(t,n,r,a){if(t){var s=this._cachedScrollToAnchor;s||(s=this._cachedScrollToAnchor=i.create().retain(this));var o=this.provider.dataForItem(t);if(!(0>o)){this.set("_scrollToAnchor",null);var l=this.get("scrollTop"),h=n,d=this.topForItemAtIndex(o);if(void 0!==l&&(d-=l),s.rebaseCurrentValue("x",h),s.rebaseCurrentValue("y",d),n!==s.getFinalValue("x")||r!==s.getFinalValue("y")){if(a){var u=(0|a)*e;s.get("isAnimating")||(s.set("x",h),s.set("y",d),n$658.frame(),s.resetAnimation("x"),s.resetAnimation("y"),n$658.frame()),s.animate("x",n,u),s.animate("y",r,u),n$658.frame()}else s.set("x",n),s.set("y",r),n$658.frame();
n$66.pause(),s.set("item",t),this.set("_scrollToAnchor",s),n$66.resume()}}}},itemDirectionOffScreen:function(t){if(!t)return 0/0;var e=this.provider.dataForItem(t);if(0>e)return 0/0;var n=this.get("scrollTop"),i=this.topForItemAtIndex(e);return void 0!==n&&(i-=n),i<this.topForItemAtIndex(0)?-1:i+this.heightForItemAtIndex(e)>this.get("viewportHeight")-this.bottomInset?1:0},isItemOnScreen:function(t){return 0===this.itemDirectionOffScreen(t)},_scrollToAnchorPositionDidChange:n$7("_scrollToAnchor","_scrollToAnchor.item","_scrollToAnchor.x","_scrollToAnchor.y",function(t){t&&(this.update(),this.get("view").didScrollBy(0,1,null))}),dispose:function(){window.cancelAnimationFrame(this._scrollAveragingFrameId),this.__s._3LTHEwisROd$ExX$dispose.apply(this,arguments)},_scrollAveragingFrameId:0,_runScrollAveragingFrame:n$299(function(t,e){window.cancelAnimationFrame(this._scrollAveragingFrameId);var n=this._scrollVelocityEMA||0,i=e?this._lastScrollVelocity||n:0;this._scrollVelocityEMA=i=.7*n+.3*i,Math.abs(i)>3?(this.setIfChanged("scrollVelocityEMA",i),this._scrollAveragingFrameId=n$444(this._runScrollAveragingFrame)):this.setIfChanged("scrollVelocityEMA",0)}),_provideScrollVelocityToChildViews:n$7("scrollVelocityEMA",function(t){var e=this.getPath("viewMap.views");if(e)for(var n=e.get("length");n--;){var i=e.objectAt(n);i&&i.setIfChanged("velocity",t)}}),handleKeyDown:function(t){var e=t.shiftKey?10:1;switch(t.which){case 32:return t.shiftKey?this.pageUp(!0):this.pageDown(!0),!0;case n$126.PAGEUP:return this.pageUp(e),!0;case n$126.PAGEDOWN:return this.pageDown(e),!0;case n$126.UP:return this.scrollBy(-250,!0),!0;
case n$126.DOWN:return this.scrollBy(250,!0),!0;case n$126.END:return this.scrollToBottom(e),!0;case n$126.HOME:return this.scrollToTop(e),!0}return!1},_debug_profileScroll:function(t){var e="scroll test for "+new Date;t||console.profile(e);var n=this._computeTotalHeight()-this._viewportHeight,i=5e3,r=Date.now(),a=0,s=function(){var o=Math.min(1,(Date.now()-r)/i),l=o*n,h=l-a;a=l,this.get("view").scrollBy(0,-h),1>o?n$444(s):t||console.profileEnd(e)}.bind(this);n$444(s)},__superMap:{_3LTHEwisROd$3mY$init:"init",_3LTHEwisROd$3yx$didScroll:"didScroll",_3LTHEwisROd$49p$willMoveToParentViewController:"willMoveToParentViewController",_3LTHEwisROd$5wO$didAttach:"didAttach",_3LTHEwisROd$6B1$update:"update",_3LTHEwisROd$9DN$viewportSizeDidChange:"viewportSizeDidChange",_3LTHEwisROd$BMa$itemViewDidMove:"itemViewDidMove",_3LTHEwisROd$ExX$dispose:"dispose"}}),i=n$5.extend(n$10,n$659,n$364,{item:n$355(null),x:n$660(0),y:n$660(0)});Object.defineProperty(n$701.prototype,"item",{configurable:!0,enumerable:!0,set:function(t){var e=this._item;return n$33(e)&&e.release(this),n$33(t)&&t.retain(this),this._item=t,t},get:function(){return this._item}}),n$726=n,n.__QUALIFIED_CLASS_NAME__="Photos.GridViewController",i.__QUALIFIED_CLASS_NAME__="Photos.ScrollToAnchor$561"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],useStickyHeaders:!0,shouldPreloadGroups:!0,groupGap:0/0,groupPositionInGap:0/0,groupHeight:0/0,groupIndexForItemAtIndex:n$48.create(),groupViewClass:null,groupProvider:n$9(),_ggs_groupViews:n$305(Array),_ggs_groupViewsSwap:n$305(Array),_ggs_lastGroupContentStateToken:0/0,contentChangeNotifier:n$9({readOnly:!0,dependencies:["groupProvider","provider"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}}),hasGroups:n$4({readOnly:!0,get:function(){var e=this.groupProvider;return e&&e.get("itemCount")}}),update:function(){if(this.groupProvider){var e=this.groupProvider.get("contentStateToken");this._ggs_lastGroupContentStateToken!==e&&(this._ggs_lastGroupContentStateToken=e,this.invalidateComputedLayoutInfo())}if(this.__s._2UfuUrgGYzd$zv$update.apply(this,arguments),0===this.itemCountForLayout){var t,n=this._ggs_groupViews,i=n.length,r=this.get("viewMap");for(t=0;i>t;t++)n[t]._ggs_isPositioned=!1,this._ggs_releaseGroup(n[t]._ggs_group),n[t].clearForReuse(),r.releaseViewForItem(n[t]._ggs_group);n.length=0}},_ggs_groupsObserver:null,dispose:function(){var e=this._ggs_groupsObserver;e&&(e.disconnect(),e.release(this)),this.__s._2UfuUrgGYzd$1HP$dispose.apply(this,arguments)},itemsDidMove:function(e,t,n){if(this.__s._2UfuUrgGYzd$1Lr$itemsDidMove.apply(this,arguments),this.get("hasGroups")){var i=n[0],r=t[0],s=this._ggs_groupViews,a=this._ggs_groupViewsSwap,o=this.get("viewMap"),l=0,d=0,u=null,h=null,c=0,g=0;for(g=s.length,c=0;g>c;c++)s[c]._ggs_isPositioned=!1;for(a.length=0,g=t.length,c=0;g>c;c++)l=t[c],d=this.groupIndexForItemAtIndex(l),u=this._ggs_getGroupAtIndex(d),h=o.viewForItem(u),h||(h=o.viewForItem(u,this.groupViewClass),h._ggs_group=u,h.set("model",u)),h._ggs_groupIndex=d,h._ggs_isPositioned||(h._ggs_isPositioned=!0,a.push(h),this._ggs_computeGroupViewPosition(h,r,i),this._ggs_positionGroupViewAt(h,this._ggs_computedGroupViewPosition,this._ggs_computedGroupViewStickiness));
for(g=s.length,c=0;g>c;c++)s[c]._ggs_isPositioned||(this._ggs_releaseGroup(s[c]._ggs_group),s[c].clearForReuse(),o.releaseViewForItem(s[c]._ggs_group));s.length=0,this._ggs_groupViews=a,this._ggs_groupViewsSwap=s}},preloadNearRange:function(e,t){var n=this.__s._2UfuUrgGYzd$21A$preloadNearRange.apply(this,arguments);if(!this.shouldPreloadGroups||!this.get("hasGroups"))return n;var i=this.groupIndexForItemAtIndex(e),r=this.groupIndexForItemAtIndex(t);return this.groupProvider.preloadModelsNearRange(i,r),n},_ggs_getGroupAtIndex:function(e){return this.groupProvider.itemAtIndex(e).retain(this)},_ggs_releaseGroup:function(e){e.release(this)},_ggs_computeGroupViewPosition:function(e,t,n){var i=this._computeEffectiveScrollTop(this.provider,n),r=this.topPositionForGroupViewAtIndex(e._ggs_groupIndex,i)+this.groupHeight,s=!1;if(this.useStickyHeaders){var a=r;r=Math.max(r,this.groupHeight+this.topInset),r>a&&(s=!0);var o=this.groupProvider.childRangeEndForGroupAtIndex(e._ggs_groupIndex);o<this.itemCountForLayout&&(r=Math.min(r,this.topPositionForGroupViewAtIndex(e._ggs_groupIndex+1,i)))}this._ggs_computedGroupViewPosition=this._roundToScrollIncrement(r-this.groupHeight),this._ggs_computedGroupViewStickiness=s},topPositionForGroupViewAtIndex:function(e,t){var n=this.groupProvider;if(!n)return 0/0;var i=(this.groupGap-this.groupHeight)*(1-this.groupPositionInGap),r=void 0===t?this.scrollTop:t,s=n.childRangeStartForGroupAtIndex(e),a=this.topForItemAtIndex(s),o=a-i-this.groupHeight-r;return o},_ggs_positionGroupViewAt:function(e,t,n){e.doLayout(this.groupHeight,this.leftInset,t,this.itemCountForLayout,n)
},groupIndexForTopPosition:function(e){if(!this.groupProvider)return 0/0;for(var t=this.groupProvider,n=t.get("itemCount"),i=this._nonScrolledTopPositionForGroupViewAtIndex,r=n$717(i,e,0,n-1,3);n-1>r&&(i(r)<e||0===t.childCountForGroupAtIndex(r));)r++;for(;r>0&&(i(r)>e||0===t.childCountForGroupAtIndex(r));)r--;return r},_nonScrolledTopPositionForGroupViewAtIndex:n$299(function(e){return this.topPositionForGroupViewAtIndex(e,0)}),__superMap:{_2UfuUrgGYzd$zv$update:"update",_2UfuUrgGYzd$1HP$dispose:"dispose",_2UfuUrgGYzd$1Lr$itemsDidMove:"itemsDidMove",_2UfuUrgGYzd$21A$preloadNearRange:"preloadNearRange"}};n$698=e}();
    
    
        
!function(){"use strict";function e(e){return e.drawImage!==h?(e._preTiledAcceptanceDrawImage=e.drawImage,e.drawImage=h,e):void 0}function t(e,t,n,i,r,s,a,o){var l=e+n,u=t+i,h=r+a,c=s+o;return h>e&&l>r&&c>t&&u>s}function n(e,t,n){var i={};for(var r in n)n.hasOwnProperty(r)&&"value"!==r&&"writable"!==r&&(i[r]=n[r]);i.get=function(){return this.canvas._canvases[0]._tc_context[t]},i.set=function(e){return o._setContextProperty.call(this.canvas,t,e),e},Object.defineProperty(e,t,i)}function i(e,t){e[t]=function(){o._callContextMethod.call(this.canvas,t,arguments)}}var r=function(t){if(t||(t=document.createElement("div")),"CANVAS"===t.tagName)return t.setCSSSize=c,e(t.getContext("2d")),t;for(var n,i=a.length;i--;)n=a[i],s.hasOwnProperty(n)&&(t[n]=s[n]);return o._init.call(t),t},s={maximumTileSize:1920,tileOverlap:2,_backingWidth:300,_backingHeight:150,getContext:function(){return this._context?this._context:(this._context=new g(this),e(this._context),this._context)},toDataURL:function(){var e=this._canvases,t=e.length;if(1===t)return e[0].toDataURL.apply(e[0],arguments);var n=d.getInstance(),i=n._tc_context;n.width=this._backingWidth,n.height=this._backingHeight;var r,s;for(r=0;t>r;r++)s=e[r],i.drawImage(s,s._tc_left,s._tc_top);var a=n.toDataURL.apply(n,arguments);return d.disposeInstance(n),a},setCSSSize:function(e,t){e=e||0===e?Math.round(e):void 0,t=t||0===t?Math.round(t):void 0,this._cssWidth=e,this._cssHeight=t,o._doSubcanvasLayout.call(this)},_tc_drawIntoContext:function(e,t,n,i,r,s,a,l,u){switch(arguments.length){case 3:i=this._backingWidth,r=this._backingHeight,s=t,a=n,l=i,u=r,t=0,n=0;
break;case 5:s=t,a=n,l=i,u=r,t=0,n=0,i=this._backingWidth,r=this._backingHeight}if(e!==this._context||!o._drawIntoOwnContext.call(this,t,n,i,r,s,a,l,u)){var h,c,d,p,g,f,_,v,m,$,y,C,w,I,S,b,A=this._canvases,D=A.length;for(h=0;D>h;h++)c=A[h],d=c._tc_left,p=c._tc_top,g=c._tc_width,f=c._tc_height,_=Math.max(d,t),v=Math.max(p,n),m=Math.min(d+g,t+i)-_,$=Math.min(p+f,n+r)-v,S=l/i,b=u/r,y=s+(_-t)/i*l,C=a+(v-n)/r*u,w=m*S,I=$*b,_-=d,v-=p,_>=0&&v>=0&&m>0&&$>0&&_+m<=c._tc_width&&v+$<=c._tc_height&&e.drawImage(c,_,v,m,$,y,C,w,I)}}},a=Object.keys(s),o={_init:function(){this._canvases=[],this._transformStack=[],this._currentTransform=[1,0,0,1,0,0],this._isTransformed=!1,Object.defineProperty(this,"width",l),Object.defineProperty(this,"height",u),o._doSubcanvasLayout.call(this,!0)},_doSubcanvasLayout:function(e){if(!this._backingWidth||!this._backingHeight)return o._clearBackingStores.call(this),void 0;var t,n,i,r,s,a,l,u,h=this._backingWidth,c=this._backingHeight,p=void 0===this._cssWidth?h:this._cssWidth,g=void 0===this._cssHeight?c:this._cssHeight,f=p/h,_=g/c,v=this.maximumTileSize,m=this.tileOverlap,$=Math.ceil(h/(v-m-1)),y=Math.ceil(c/(v-m-1)),C=0|h/$+m,w=0|c/y+m,I=n$522.get("devicePixelRatio"),S=this._canvases,b=y*$;for(t=0;b>t;t++)n=S[t]||(S[t]=d.getInstanceAndAppendToElement(this)),s=0|t%$,a=0|t/$,l=s*(C-m),u=a*(w-m),i=$-1>s?C:h-l,(e||i!==n.width)&&(n.width=i),r=y-1>a?w:c-u,r!==n.height&&(n.height=r),n$160(n).set("width",i/I).set("height",r/I).translate(l*f,u*_).scale(f*I,_*I),n._tc_left=l,n._tc_top=u,n._tc_width=i,n._tc_height=r;for(t=b;t<S.length;t++)n=S[t],n&&d.disposeInstance(n);
S.length=b,o._applyCurrentTransformToContexts.call(this),n$160(this).set("width",p).set("height",g)},_clearBackingStores:function(){var e,t,n=this._canvases,i=n.length;for(e=0;i>e;e++)t=n[e],(t.width||t.height)&&(t.width=t.height=0)},_setContextProperty:function(e,t){var n,i=this._canvases,r=i.length;for(n=0;r>n;n++)i[n]._tc_context[e]=t},_callContextMethod:function(e,t){var n,i,r,s,a=this._canvases,o=a.length;for(n=0;o>n;n++)i=a[n]._tc_context,r=i[e].apply(i,t),n&&s!==r&&n$63.warn("Calling query method `key` on a context for a `TiledCanvas` instance, and the individual contexts are returning differing values."),s=r;return r},_takeContextDrawImage:function(e,n,i,r,s,a,o,l,u){switch(arguments.length){case 3:r=e.naturalWidth||e.width,s=e.naturalHeight||e.height,a=n,o=i,l=r,u=s,n=0,i=0;break;case 5:a=n,o=i,l=r,u=s,n=0,i=0,r=e.naturalWidth||e.width,s=e.naturalHeight||e.height}var h,c,d,p,g,f,_=this._canvases,v=_.length;for(h=0;v>h;h++)c=_[h],d=c._tc_left,p=c._tc_top,g=c._tc_width,f=c._tc_height,(t(d,p,g,f,a,o,l,u)||this._isTransformed)&&c._tc_context.drawImage(e,n,i,r,s,a,o,l,u)},_drawIntoOwnContext:function(e,n,i,s,a,o,l,u){if(!t(e,n,i,s,a,o,l,u)&&!this._isTransformed)return!1;if(1===this._canvases.length)return!1;var h=this._context,c=this._tiledTempBufferContext;c||(c=this._tiledTempBufferContext=(new r).getContext("2d"));var d=c.canvas,p=d.width=this._backingWidth,g=d.height=this._backingHeight;return c.setTransform.apply(c,this._currentTransform),c.drawImage(this,e,n,i,s,a,o,l,u),this._isTransformed?(h.save(),h.setTransform(1,0,0,1,0,0),h.drawImage(d,0,0),h.restore()):(a=Math.max(0,a),l=Math.min(l,p-a),o=Math.max(0,o),u=Math.min(u,g-o),h.drawImage(d,a,o,l,u,a,o,l,u)),d.width=d.height=0,!0
},_takeContextTransform:function(e,t,n,i,r,s){var a=this._currentTransform,l=a[0]*e+a[2]*t,u=a[1]*e+a[3]*t,h=a[0]*n+a[2]*i,c=a[1]*n+a[3]*i,d=a[0]*r+a[2]*s+a[4],p=a[1]*r+a[3]*s+a[5];a[0]=l,a[1]=u,a[2]=h,a[3]=c,a[4]=d,a[5]=p,o._applyCurrentTransformToContexts.call(this)},_takeContextSetTransform:function(e,t,n,i,r,s){var a=this._currentTransform;a[0]=e,a[1]=t,a[2]=n,a[3]=i,a[4]=r,a[5]=s;for(var l=this._transformStack;l.length;)p.disposeInstance(l.pop());o._applyCurrentTransformToContexts.call(this)},_takeContextSave:function(){var e=p.getInstanceForTransform(this._currentTransform);this._transformStack.push(e)},_takeContextRestore:function(){var e=this._transformStack.pop();e&&(p.disposeInstance(this._currentTransform),this._currentTransform=e,o._applyCurrentTransformToContexts.call(this))},_applyCurrentTransformToContexts:function(){var e=this._currentTransform;this._isTransformed=1!==e[0]||1!==e[3]||e[1]||e[2]||e[4]||e[5];var t,n,i,r=this._canvases,s=r.length;for(t=0;s>t;t++)n=r[t],i=n._tc_context,i.setTransform(1,0,0,1,0,0),i.translate(-n._tc_left,-n._tc_top),i.transform.apply(i,e)}},l={configurable:!1,enumerable:!0,get:function(){return this._backingWidth},set:function(e){this._backingWidth=0|e,o._doSubcanvasLayout.call(this,!0)}},u={configurable:!1,enumerable:!0,get:function(){return this._backingHeight},set:function(e){this._backingHeight=0|e,o._doSubcanvasLayout.call(this,!0)}},h=function(e){if("DIV"!==e.tagName)return this._preTiledAcceptanceDrawImage.apply(this,arguments);var t,n=e._tc_drawIntoContext;return n?(t=n$27(arguments),t[0]=this,n.apply(e,t)):void 0},c=function(e,t){n$160(this).set("width",e).set("height",t)
},d=n$437.extend({createInstance:function(){var e=document.createElement("canvas");return e._tc_context=e.getContext("2d"),e.className="absolutely-positionable",e},disposeInstance:function(e){this.__s._4EqNojNviKe$9dU$disposeInstance.apply(this,arguments),e.width=e.height=0,e._tc_context.setTransform(1,0,0,1,0,0);var t=e.parentNode;t&&t.removeChild(e)},getInstanceAndAppendToElement:function(e){var t=this.getInstance();return e.appendChild(t),t},__superMap:{_4EqNojNviKe$9dU$disposeInstance:"disposeInstance"}}).create(),p=n$437.extend({createInstance:function(){return new Array(6)},getInstanceForTransform:function(e,t,n,i,r,s){var a=this.getInstance();return 1===arguments.length&&(t=e[1],n=e[2],i=e[3],r=e[4],s=e[5],e=e[0]),a[0]=e,a[1]=t,a[2]=n,a[3]=i,a[4]=r,a[5]=s,a}}).create(),g=function(e){this.canvas=e};g.prototype={constructor:g,canvas:null,save:function(){o._takeContextSave.call(this.canvas)},restore:function(){o._takeContextRestore.call(this.canvas)},transform:function(e,t,n,i,r,s){void 0===s&&this._throwTypeError("transform",6),o._takeContextTransform.call(this.canvas,e,t,n,i,r,s)},setTransform:function(e,t,n,i,r,s){void 0===s&&this._throwTypeError("setTransform",6),o._takeContextSetTransform.call(this.canvas,e,t,n,i,r,s)},translate:function(e,t){void 0===t&&this._throwTypeError("translate",2),o._takeContextTransform.call(this.canvas,1,0,0,1,e,t)},scale:function(e,t){void 0===t&&this._throwTypeError("scale",2),o._takeContextTransform.call(this.canvas,e,0,0,t,0,0)},rotate:function(e){void 0===e&&this._throwTypeError("rotate",1);var t=Math.sin(e),n=Math.cos(e);o._takeContextTransform.call(this.canvas,n,t,-t,n,0,0)
},drawImage:function(){o._takeContextDrawImage.apply(this.canvas,arguments)},_throwTypeError:function(e,t){throw new TypeError("Failed to execute '"+e+"' on 'TiledCanvasContext': "+t+" argument"+(1===t?"":"s")+" required.")}},function(){var e,t,r,s=g.prototype,a=document.createElement("canvas").getContext("2d");for(t in a)s.hasOwnProperty(t)||(e=Object.getOwnPropertyDescriptor(a,t),r=a[t],!e||!e.writable||r instanceof Function||n(s,t,e),r instanceof Function&&i(s,t))}(),n$723=r}();
    
    
        
!function(){"use strict";function e(e,t,n,i){var r,s,o,a,l,h,d,c,_="grid"+e+"."+t+"."+n+"."+i,p=u,g=p[_];if(!g){for(g=p[_]=document.createElement("canvas"),r=g.getContext("2d"),s=e*n,o=t*n+i,h=Math.max(2,n/32),d=h/2,c=1;s/c>4096;)c*=2;for(g.width=s/c,g.height=o/c,r.scale(1/c,1/c),r.fillStyle="#eee",r.fillRect(0,0,s,o),r.fillStyle="#f4f4f4",a=0;e>=a;a++)r.fillRect(a*n-d,0,h,o);for(l=0;t>=l;l++)r.fillRect(0,l*n-d,s,h)}return g}var t=n$297.create(),n=null,i=function(e){e&&t.add(e),n||(n=n$444(r))},r=function(){n=null;for(var e=t.items,r=0;320>r&&t.length;){for(var s=e[0],o=1,a=t.length;a>o;o++)s._priority>e[o]._priority&&(s=e[o]);t.remove(s),r+=s._requestAllDerivativesNeedingBetterDerivative()}t.length&&i()},s=n$310.get("maxScrollingCanvasSize"),o=n$310.get("enableCanvasSplitting"),a=n$297.create(),l=n$297.create(),h=n$193.extend({staticMembers:{template:o?{type:"ELEMENT",tagname:"div",children:[]}:{type:"ELEMENT",tagname:"canvas",children:[]}},columnCount:-1,rowCount:-1,_bottomOverlapPixels:4,_tileBackingSize:0,_loadRefs:n$305(n$297),_assets:n$305(Array),_assetsNeedingBetterDerivative:n$305(n$297),_unflushedDerivativesSet:n$305(n$724),_layoutInfo:n$305(Object),init:function(){this.__s._1HO7vrVUqI8$1P1$init.call(this),this.get("element").classList.add("sprited-coalesced-item-view"),this.get("element").classList.add("absolutely-positionable"),this._maxScrollingTileBackingSize=Math.pow(2,Math.floor(Math.log(s/this.columnCount)/Math.log(2))),this._canvas=new n$723(this.get("element")),this._context=this._canvas.getContext("2d")},model:n$9(),_modelDidChange:n$7("model",function(e){if(e){this._startIndex=e.startIndex,this._endIndex=e.endIndex,this._length=this._endIndex-this._startIndex,this._bottomTileOverlapCount=Math.min(e.groupEndIndex-this._endIndex,this.columnCount);
for(var t=this._assets,n=this._startIndex,i=this._length,r=0;i>r;r++)t[r]=n$309.createWithIndex(r+n).retain();this._isBitmapSizeBounded=!0}}),clearForReuse:function(){this._unflushedDerivativesSet.clear(),this._assetsNeedingBetterDerivative.clear(),this._unscheduleDerivativeFlush(),t.remove(this),this._setTileBackingSize(0),this._unscheduleUnboundTileBackingSize(),this._cancelAllLoadRefs();for(var e=this._assets,n=this._length,i=0;n>i;i++)e[i].release(),e[i]=null;this._length=this._startIndex=this._endIndex=void 0,this._layoutInfo.isValid=!1,this.get("style").translate(-1e4,-1e4).scale(0).layerBackIf(!o)},doLayout:function(e,t,n,i){var r=this._layoutInfo;if(4!==arguments.length){if(!r.isValid)return;e=r.top,t=r.left,n=r.tileSize,i=r.zIndex}else r.isValid=!0,r.top=e,r.left=t,r.tileSize=n,r.zIndex=i;var s=n$522.get("devicePixelRatio"),a=Math.pow(2,Math.ceil(Math.log(n*s)/Math.log(2)));this._setTileBackingSize(a);var l=this.columnCount*n,h=this._canvas,u=0|h.width/s,d=0|h.height/s;this.get("style").set("z-index",i).translate(t,e).scale(l/u).layerBackIf(!o),this._canvas.setCSSSize(u,d),this._scheduleUnboundTileBackingSize()},setPriority:function(e){this._priority=e,!this._setPriorityTimeout&&this._loadRefs.length&&(this._setPriorityTimeout=n$130(this._flushPriority,100))},_cancelAllLoadRefs:function(){for(var e=this._loadRefs.items,t=this._loadRefs.length;t--;)e[t].cancel(!0),this._removeLoadRef(e[t])},_removeLoadRef:function(e){this._loadRefs.remove(e),e.release(),e._indexInItemView=void 0},_scheduleUnboundTileBackingSize:function(){var e=300;this._isBitmapSizeBounded&&(this._unboundTimeout&&this._unscheduleUnboundTileBackingSize(),this._unboundTimeout=n$130(this._unboundTileBackingSize,e))
},_unboundTileBackingSize:n$299(function(){this._unscheduleUnboundTileBackingSize(),this._isBitmapSizeBounded=!1,this.doLayout(),this._flushDerivatives()}),_unscheduleUnboundTileBackingSize:function(){clearTimeout(this._unboundTimeout),this._unboundTimeout=0},_setTileBackingSize:function(e){if(this._isBitmapSizeBounded&&(e=Math.min(this._maxScrollingTileBackingSize,e)),this._tileBackingSize!==e){this._tileBackingSize=e,this._unflushedDerivativesSet.clear(),this._assetsNeedingBetterDerivative.clear(),this._cancelAllLoadRefs();var t=this._canvas;if(t){if(!e)return t.width=t.width,void 0;t.width=e*this.columnCount,t.height=e*this.rowCount+this._bottomOverlapPixels,this._drawUnloadedState(),this._useImmediatelyAvailableDerivatives()}}},_drawUnloadedState:function(){var t=this._length,n=this.columnCount,i=this._bottomOverlapPixels,r=this._bottomTileOverlapCount,s=this._tileBackingSize,o=0|t/n,a=o*s,l=t-o*n,h=l*s,u=this._canvas,d=this._context,c=u.width,_=u.height,p=e(n,this.rowCount,s,this._bottomOverlapPixels),g=p.width/c,f=d.hasOwnProperty("webkitImageSmoothingEnabled");if(f&&(d.webkitImageSmoothingEnabled=!1),a&&d.drawImage(p,0,0,c*g,a*g,0,0,c,a),h&&d.drawImage(p,0,a*g,h*g,s*g,0,a,h,s),r&&i){var m=_-i,$=r*s;d.drawImage(p,0,m*g,$*g,i*g,0,m,$,i)}f&&(d.webkitImageSmoothingEnabled=!0)},_priority:0,_setPriorityTimeout:null,_flushPriority:n$299(function(){this._setPriorityTimeout=null;for(var e,t=this._loadRefs.items,n=this._loadRefs.length,i=this._length;n--;)e=t[n],e.priority=this._priority+e._indexInItemView/i}),_useImmediatelyAvailableDerivatives:function(){for(var e,t,n=this._tileBackingSize,r=this._length,s=this._assets,o=0;r>o;o++)e=s[o],t=e.bestLoadedDerivative(n,"squareImage"),t&&this._unflushedDerivativesSet.add(t),(!t||(0|t.getPath("info.geometricLength"))<this._tileBackingSize)&&(this._assetsNeedingBetterDerivative.add(e),i(this));
this._flushDerivatives()},_requestAllDerivativesNeedingBetterDerivative:n$299(function(){for(var e,t,n=this._assetsNeedingBetterDerivative.items,i=this._assetsNeedingBetterDerivative.length;i--;)e=n[i],t=e.requestDerivative(this._tileBackingSize,"squareImage"),t.retain(),t._indexInItemView=i,t.then(this._derivativeDidLoad,this._derivativeDidError),this._loadRefs.add(t);return this._assetsNeedingBetterDerivative.clear(),this._flushPriority(),this._loadRefs.length}),_derivativeDidLoad:n$299(function(e,t){this._unflushedDerivativesSet.add(e),this._scheduleDerivativeFlush(),this._removeLoadRef(t)}),_derivativeDidError:n$299(function(e,t){this._removeLoadRef(t)}),_scheduleDerivativeFlush:function(){this._derivativeFlushFrame||(this._derivativeFlushFrame=n$444(this._flushDerivatives))},_unscheduleDerivativeFlush:function(){this._derivativeFlushFrame&&window.cancelAnimationFrame(this._derivativeFlushFrame),this._derivativeFlushFrame=0},_flushDerivatives:n$299(function(){this._unscheduleDerivativeFlush();var e,t,n,i,r,s,o,h,u,d,c,_,p,g,f,m,$,v,y,I,w,b,S,C,A,E,D,P,F,L=this._context,T=this._canvas,N=T.height,M=this._tileBackingSize,x=this._startIndex,O=this.columnCount,U=this.rowCount,R=this._unflushedDerivativesSet,k=R.items,V=R.length,z=this._bottomTileOverlapCount*M,B=this._bottomOverlapPixels,W=N-B,H=!1;for(e=0;V>e;e++)t=k[e],b=t._sciv_element=t.get("element"),o=t.get("rectInElement"),S=t._sciv_rectX=o.x,C=t._sciv_rectY=o.y,A=t._sciv_rectWidth=o.width,E=t._sciv_rectHeight=o.height,D=t._sciv_indexInSprite=Math.round(S/E),P=b._sciv_derivativesByIndex,P||(P=b._sciv_derivativesByIndex=n$319.getInstance()),P[D]=t,l.add(b);
for(e=0;V>e;e++)if(t=k[e],!a.contains(t)){for(b=t.get("element"),o=t.get("rectInElement"),r=n$309.datastore.indexForClientId(t.get("asset").get("clientId"))-x,p=r%O,f=0|r/O,h=t._sciv_rectX,$=p*M,n=t;;){if(i=n,a.add(i),s=r,g=p,m=f,n=b._sciv_derivativesByIndex[i._sciv_indexInSprite+1],!n||!R.contains(n)||n._sciv_rectHeight<M)break;if(r=n$309.datastore.indexForClientId(n.get("asset").get("clientId"))-x,p=r%O,f=0|r/O,p!==g+1||f!==m)break}u=i._sciv_rectX+i._sciv_rectWidth,v=(g+1)*M,c=i._sciv_rectY,d=u-h,_=i._sciv_rectHeight,I=m*M,y=v-$,w=M,L.drawImage(b,h,c,d,_,$,I,y,w),m===U-1&&z>$&&(H=!0)}for(H&&L.drawImage(T,0,W-1,z,1,0,W,z,B),e=0;e<l.length;e++)F=l.items[e]._sciv_derivativesByIndex,l.items[e]._sciv_derivativesByIndex=null,n$319.disposeInstance(F);l.clear(),a.clear(),R.clear()}),pointerUp:function(e){var t=this._layoutInfo,n=e.clientX-t.left,i=e.clientY-t.top,r=this.columnCount,s=t.tileSize,o=Math.floor(n/s),a=Math.floor(i/s),l=r*a+o;l<this._length&&this.sendEvent("showAsset",this._assets[l])},__superMap:{_1HO7vrVUqI8$1P1$init:"init"}}),u={};n$727=h,h.__QUALIFIED_CLASS_NAME__="Photos.SpritedCoalescedItemView"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],classes:["photos-grid-group-header-title"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"subtitle",attributes:{}}],classes:["photos-grid-group-header-subtitle"]},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"dateRange",attributes:{}}],classes:["photos-grid-group-header-date"]}],name:"_contentElem",classes:["photos-grid-group-header-content"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"rightAccessoryView"}],name:"_rightAccessoryElem",classes:["photos-grid-group-header-right-accessory"]},{type:"ELEMENT",tagname:"div",children:[],name:"_separator",classes:["photos-grid-group-header-separator"]}],classes:["photos-grid-group-header-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"includesSeparator",truevalue:"photos-includes-separator",attributes:{}}]}},includesSeparator:n$9(!0),model:n$355(),sideInset:n$9(0),fontSize:n$9(0/0),title:"",subtitle:"",date:"",_group:n$9(n$14("model")),_groupDidChange:n$7("_group",function(e){e&&e.load()}),_setEmptyStrings:function(){this.set("title",""),this.set("subtitle",""),this.set("dateRange","")},_updateText:n$7("_group.title","_group.subtitle","_group.dateRange","_group.dateRange.contentsDidChange","_group.itemCount","_group.loadingStatus",n$543.bindingFor("dateOrTimezoneDidChange"),function(e,i,r,s,a,o){r&&(r=n$543.fmt(r.objectAt(0),r.objectAt(1))),e||i?(r&&(t.dateRange=r,r=n$290("Moments.Moment.Title.DateRange",t),r=r.replace(/^\\/,"")," "!==r[0]&&(r=" "+r)),e||(e=i,i="")):r?(e=r,r=""):o===n$353.LOADED&&(e=n$483(n,a)),this.set("title",e),this.set("subtitle",i),this.set("dateRange",r)
}),clearForReuse:function(){this.unsetAllStrongRefs(),this._setEmptyStrings(),this.positionOffScreen()},positionOffScreen:function(){this.get("style").translate(-1e4,-1e4).scale(0).layerBack()},doLayout:function(e,t,n,i,r){t=0|t;var s=n$522.get("devicePixelRatio"),a=0|e/2.5+1,o=!!this.get("includesSeparator"),l=r?0:t;this.set("sideInset",t),this.set("fontSize",a),this.get("style").set("height",0|e-5*o).set("z-index",i).set("line-height",0|e-3*o).set("font-size",a).translateY(Math.round(n*s)/s).layerBack();var d=this.getRightAccessoryWidth(),u=d+t;n$160(this.get("_contentElem")).set("padding-left",t).set("padding-right",t).set("right",u),n$160(this.get("_separator")).set("top",e-5).set("left",l).set("right",l),n$160(this.get("_rightAccessoryElem")).set("right",t).set("width",d)},getRightAccessoryWidth:function(){return 0|this.getPath("rightAccessoryView.element.offsetWidth")}}),t={dateRange:null},n=["","Moments.Moment.Title.AssetCount.1","Moments.Moment.Title.AssetCount.2","Moments.Moment.Title.AssetCount.More"];n$728=e,e.__QUALIFIED_CLASS_NAME__="Photos.GridGroupHeaderView"}();
    
    
        
!function(){"use strict";var e=0,t=1,n=2,i=n$726.extend(n$698,{shouldPreloadItems:!1,columnCount:-1,rowsPerCoalescedItem:-1,itemViewClass:n$514(function(){return n$727.extend({columnCount:this.columnCount,rowCount:this.rowsPerCoalescedItem})}),groupViewClass:n$728.extend({includesSeparator:!1}),inputItemModelProvider:n$514(function(){return this.itemModelProvider}),inputGroupModelProvider:n$514(function(){return this.groupModelProvider}),_itemLayoutInfo:n$305(n$716,window.Uint32Array),_createCoalescingProxiesAsNeeded:function(){if(!this.itemModelProvider.instanceOf(s)){this.itemModelProvider=s.create().retain();var e=a.extend({staticMembers:{datastore:this.itemModelProvider}});this.itemModelProvider.set("itemClass",e),this.groupModelProvider=r.create().retain(),this.groupModelProvider.set("itemClass",this.inputGroupModelProvider.get("itemClass"))}},_populateDatastoresFromInputDatastores:n$7("inputGroupModelProvider.contentsDidChange","inputItemModelProvider.contentsDidChange",function(e,t){if(e||t){this._createCoalescingProxiesAsNeeded();var n=this.inputGroupModelProvider,i=n.get("itemCount");if(i&&this.inputItemModelProvider.get("itemCount")){var r,s,a,o,l,d,u,h,c=this.itemModelProvider,g=this.groupModelProvider,p=c.data,_=g.data,f=this.columnCount,v=f*this.rowsPerCoalescedItem;for(c.clear(),g.clear(),h=0,r=0;i>r;r++){for(s=n.childRangeStartForGroupAtIndex(r),a=n.childRangeEndForGroupAtIndex(r),o=a-s,_.push(h),d=0,u=s;o;)l=Math.min(v,o),o-=l,p.push(u),u+=l,p.push(u),p.push(s),p.push(a),d++;h+=d,_.push(h),_.push(r)}n$66.pause(),c.contentsDidChange(),g.contentsDidChange(),n$66.resume()
}}}),computeLayoutInfo:function(){var i,r,s,a,o,l=this.columnCount,d=this.itemModelProvider,u=this.itemCountForLayout,h=this.groupModelProvider,c=h.get("itemCount"),g=this._itemLayoutInfo.ensureLength(u*n,!1),p=0,_=0;for(i=0;c>i;i++)for(s=h.childRangeEndForGroupAtIndex(i);s>p;p++)a=d.childCountForGroupAtIndex(p),o=Math.ceil(a/l),r=p*n,g[r+e]=_,g[r+t]=i,_+=o;this._totalRowCount=_},groupIndexForItemAtIndex:function(e){return this._itemLayoutInfo.items[n*e+t]},leftForItemAtIndex:function(){return this.leftInset},widthForItemAtIndex:function(){return this._tileSize*this.columnCount},topForItemAtIndex:function(i){var r=this._itemLayoutInfo.items,s=i*n,a=r[s+t]+1,o=r[s+e];return a*this.groupGap+o*this._tileSize+this.topInset+-(this.groupGap-this.groupHeight)},heightForItemAtIndex:function(e){var t=this.itemModelProvider.childCountForGroupAtIndex(e),n=Math.ceil(t/this.columnCount),i=n*this._tileSize;return i},decideLayoutMetricsForViewport:function(e){var t=this.columnCount,n=13,i=e-2*n,r=i/t,s=n,a=0|40*(.5*Math.min(1,e/600)+.5),o=0|(55-a)*Math.max(.1,Math.min(1,(e-300)/500))+a,l=1;this.leftInset=n,this._tileSize=r,this.bottomInset=s,this.groupHeight=a,this.groupGap=o,this.groupPositionInGap=l,this.layoutManager.verticalOverdraw=o},layoutItemView:function(e,t,n){e.doLayout(n.y,this.leftInset,this._tileSize,t)},showAsset:function(e){this.sendEvent("navigateToAssetInFolder",{asset:e.get("context"),folder:this.inputItemModelProvider})}}),r=n$453.extend({itemLength:3,preloadRange:function(e,t){this.get("itemClass").datastore.preloadRange(e,t)},itemAtIndex:function(e){return this.get("itemClass").createWithIndex(e)
}}),s=n$453.extend({itemLength:4}),a=n$5.extend(n$302,{staticMembers:{createWithIndex:function(e){return this.create(e)}},isCacheableInPool:!1,startIndex:-1,endIndex:-1,groupStartIndex:-1,groupEndIndex:-1,initFromPool:function(e){this.__s._42p9s1wwkYL$5Nv$initFromPool.apply(this,arguments);var t=this.constructor.datastore;this.startIndex=t.itemDatumAtIndexWithOffset(e,0),this.endIndex=t.itemDatumAtIndexWithOffset(e,1),this.groupStartIndex=t.itemDatumAtIndexWithOffset(e,2),this.groupEndIndex=t.itemDatumAtIndexWithOffset(e,3)},dispose:function(){this.startIndex=this.endIndex=-1,this.__s._42p9s1wwkYL$5Vl$dispose.apply(this,arguments)},__superMap:{_42p9s1wwkYL$5Nv$initFromPool:"initFromPool",_42p9s1wwkYL$5Vl$dispose:"dispose"}});n$732=i,i.__QUALIFIED_CLASS_NAME__="Photos.SpritedGridViewController",r.__QUALIFIED_CLASS_NAME__="Photos.CoalescedGroupsDatastore$566",s.__QUALIFIED_CLASS_NAME__="Photos.CoalescedItemsDatastore$566",a.__QUALIFIED_CLASS_NAME__="Photos.CoalescedItem$566"}();
    
    
        
!function(){"use strict";var e={isEmptyUIVisible:n$9(!1),isLoading:n$9(!1),hasError:n$9(!1),shouldButtonizeEmptyUIMessage:n$9(!1),emptyUIMessage:n$9(n$290("EmptyLibrary.Message")),emptyUIAdvice:n$9(n$290("EmptyLibrary.Advice")),viewClass:n$559(function(e){return e.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_eui_messageButton"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_eui_message",attributes:{}}],classes:["message"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_eui_advice",attributes:{}}],classes:["advice"]}]}],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_eui_shouldButtonizeMessage",truevalue:"should-buttonize-message",falsevalue:"",attributes:{}}]}],classes:["empty-ui"],styles:{display:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_eui_display",attributes:{},unit:null,property:"display"}}},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_eui_spinner"}],classes:["photos-view-loading-container"],styles:{display:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_eui_loading_display",attributes:{},unit:null,property:"display"}}}]}}},_eui_isVisible:n$9(),_eui_message:n$9(),_eui_shouldButtonizeMessage:n$9(),_eui_advice:n$9(),_eui_isLoading:n$9(),_eui_hasError:n$9(),_eui_messageButton:n$84(n$400,{additionalClassNames:["message-button"],title:n$14("parent._eui_message"),action:"emptyUIMessageButtonActivated"}),_eui_spinner:n$9(function(){return n$690.extend({additionalClassNames:["photos-spinner-view"],isAnimating:n$9(this.bindingFor("_eui_isLoading"))}).create()
}),_eui_display:n$9({readOnly:!0,dependencies:["_eui_isVisible"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?"":"none"}}),_eui_loading_display:n$9({readOnly:!0,dependencies:["_eui_isLoading","_eui_hasError"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return r?"none":s?"":"none"}})})}),createViewOptions:function(){return n$43(this.__s._3ha3Yj2ovzU$yt$createViewOptions.call(this),{_eui_isVisible:this.bindingFor("isEmptyUIVisible"),_eui_message:this.bindingFor("emptyUIMessage"),_eui_shouldButtonizeMessage:this.bindingFor("shouldButtonizeEmptyUIMessage"),_eui_advice:this.bindingFor("emptyUIAdvice"),_eui_isLoading:this.bindingFor("isLoading"),_eui_hasError:this.bindingFor("hasError")})},__superMap:{_3ha3Yj2ovzU$yt$createViewOptions:"createViewOptions"}},t={mixinDependencies:[e],isEmpty:n$9({readOnly:!0,dependencies:["provider.itemCount"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),isEmptyUIVisible:n$9({readOnly:!0,dependencies:["isEmpty","isLoading","hasError"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a&&!s||r}})};n$964=e,n$733=t}();
    
    
        
!function(){"use strict";function e(e,t){var n,i,r=e.length,s=t||(global.Uint8Array?new Uint8Array(r):new Array(r));for(s.length!==r&&(s.length=r),n=0;r>n;n++)i=e.charCodeAt(n),s[n]=i,i>255&&n$11("Only strings containing 8-bit character codes (<= 255) may be encoded as Base64.");return s}function t(e){var t,n="",i=e.length;for(t=0;i>t;t++)n+=String.fromCharCode(e[t]);return n}function n(e,t){var n,i,r,s,a=e.length,l="="===e[a-2]?2:"="===e[a-1]?1:0,d=Math.ceil(3*a/4)-l,u=t||(global.Uint8Array?new Uint8Array(d):new Array(d));if(u.length!==d&&(u.length=d),!e)return u;for(var h=0,c=0;a>c;c+=4)n=o[e.charAt(c)],i=o[e.charAt(c+1)],r=o[e.charAt(c+2)],s=o[e.charAt(c+3)],u[h++]=n<<2|i>>4,64!==r&&(u[h++]=(15&i)<<4|r>>2),64!==s&&(u[h++]=(3&r)<<6|s);return u}function i(e){var t,n,i,r="",s=e.length,o=8*s;for(t=0;s>t;t+=3)n=8*t,i=e[t]<<16|e[t+1]<<8|e[t+2],r+=a[i>>>18],r+=a[63&i>>>12],r+=o>=n+12?a[63&i>>>6]:"=",r+=o>=n+18?a[63&i>>>0]:"=";return r}var r=n$5.extend(n$10,{staticMembers:{hasNativeSupport:!!global.atob,decodeToBytes:function(t){return this.hasNativeSupport?e(global.atob(t)):this._jsDecodeToBytes(t)},encodeFromBytes:function(e){return this.hasNativeSupport?global.btoa(t(e)):this._jsEncodeFromBytes(e)},decodeToString:function(e){if(this.hasNativeSupport)return global.atob(e);var n=t(this._jsDecodeToBytes(e,s));return s.length=0,n},encodeFromString:function(t){if(this.hasNativeSupport)return global.btoa(t);var n=this._jsEncodeFromBytes(e(t,s));return s.length=0,n},_jsDecodeToBytes:n,_jsEncodeFromBytes:i}}),s=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=function(){for(var e={},t=0,n=a.length;n>t;t++)e[a[t]]=t;
return e}();n$730=r,r.__QUALIFIED_CLASS_NAME__="CW.Utils.Base64"}();
    
    
        
!function(){"use strict";function t(t,e){e=e||{};var n="",r="",a="",s="",o=t.lastIndexOf(i.BOOKMARK_DELIMITER);-1!==o&&(n=t.substring(0,o),t=t.substring(o+1));var l=(t.indexOf(i.RESOURCE_DELIMITER)+1||t.indexOf(i.STATE_DELIMITER)+1||t.length+1)-1;if(-1!==l&&(r=t.substring(0,l),t=t.substring(l)),t[0]===i.RESOURCE_DELIMITER){var h=(t.indexOf(i.STATE_DELIMITER)+1||t.length+1)-1;a=t.substring(1,h),t=t.substring(h)}if(t[0]===i.STATE_DELIMITER){var d=t.length;s=t.substring(1,d),t=t.substring(d)}return e.returnTo=n,e.type=r,e.resource=a,e.state=s,e}var e={},n="none",i=n$5.extend(n$10,n$302,{staticMembers:{registerBookmarkType:function(t,n){n||(n=this),e[t]=n},BOOKMARK_DELIMITER:"/",RESOURCE_DELIMITER:":",STATE_DELIMITER:";",getBookmark:function(n,i,r,a){var s=null;if(1===arguments.length){if(s=n,!s||n$32(s,this))return n||null;"string"==typeof s&&(s=t(s,n$307.getAutodisposingInstance())),i=s.type?s.type:this.type,r=s.resource,n=s.returnTo}var o=e[i];o||n$11("Bookmark type not registered: "+i);var l=o.create(i,r);if(l.retain(this),n$66.pause(),l.setIfChanged("returnTo",this.getBookmark(n)),s)for(var h in s)s.hasOwnProperty(h)&&"_"!==h[0]&&"type"!==h&&"returnTo"!==h&&"resource"!==h&&l.setIfChanged(h,s[h]);else l.setIfChanged("state",a);return n$66.resume(),l},computePoolingCacheKey:function(t,e){return e&&(e=i.RESOURCE_DELIMITER+e),(t||n)+(e||"")}},isCacheableInPool:!0,returnTo:n$9({set:function(t){t&&!n$32(t,this)&&(t=i.getBookmark(t)),this._returnTo=t},get:function(){return this._returnTo||null}}),type:n$4({readOnly:!0,get:function(){return this._type||n}}),resource:n$4({readOnly:!0,get:function(){return this._resource||""
}}),state:n$9(),toString:function(){var t=this.isInitialized,e=t&&this.get("returnTo")||"",r=t&&this.get("type")||"",a=t&&this.get("resource")||"",s=t&&this.get("state")||"";return e&&(e+=i.BOOKMARK_DELIMITER),a&&(a=i.RESOURCE_DELIMITER+a),s&&(s=i.STATE_DELIMITER+s),e+(r||n)+a+s},initFromPool:function(t,e){this.__s._2ZoaCY4tgp4$2gW$initFromPool.call(this),this._type=t,this._resource=e},bookmarkReturnsTo:function(t){for(var e=t.toString(),n=this;n;){if(n===t||n.toString()===e)return!0;n=n.get("returnTo")}return!1},getRoot:function(){for(var t,e=this;t=e.get("returnTo");)e=t;return e},prepareForVisit:function(){var t=this._thenable=this._thenable||n$434.create().retain(this),e=t.resolve.bind(t),n=t.reject.bind(t),i=this.get("returnTo");return i?i.prepareForVisit().thenSync(this.doVisitPrepWork.bind(this,e,n.bind(void 0,i)),n):this.doVisitPrepWork(e,n.bind(void 0,null)),t.rejectAfterTimeout(3e4,null),t},doVisitPrepWork:function(t){t()},dispose:function(){this._thenable&&(this._thenable=null,this._thenable.cancel(!0),this._thenable.release(this)),this.__s._2ZoaCY4tgp4$3Yj$dispose.apply(this,arguments)},__superMap:{_2ZoaCY4tgp4$2gW$initFromPool:"initFromPool",_2ZoaCY4tgp4$3Yj$dispose:"dispose"}});i.registerBookmarkType(n,i),n$731=i,i.__QUALIFIED_CLASS_NAME__="Photos.Bookmark"}();
    
    
        
!function(){"use strict";var e="years",t=n$731.extend({staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$734=e,n$965=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.Years"}();
    
    
        
!function(){"use strict";var e="collections",t=n$731.extend({staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$735=e,n$966=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.Collections"}();
    
    
        
!function(){"use strict";var e=n$732.extend(n$607,n$733,{staticMembers:{createBookmark:function(e){return n$731.getBookmark({type:n$731.YEARS_TYPE,state:e?e.get("clientId"):""})}},viewClass:n$559(function(e){return e.extend(n$663)}),columnCount:60,rowsPerCoalescedItem:5,groupModelProvider:n$454.datastore,itemModelProvider:n$309.datastore,title:n$9(n$290("Tab.Years")),toolbarConfiguration:n$608.extend({middleItem:"modeSwitcher",rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableUploads")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?["uploadButton","separator1","drillButton"]:["drillButton"]}}),drillButton:n$535.extend({event:"drillButtonClick"})}),drillButtonClick:function(){this.sendEvent({type:"userNavigationRequest",navigationTarget:n$731.getBookmark({returnTo:this.get("bookmark"),type:n$735})})}});n$737=e,e.__QUALIFIED_CLASS_NAME__="Photos.YearsViewController"}();
    
    
        
!function(){"use strict";var e="moments",t=n$731.extend(n$736,{staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$738=e,n$967=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.Moments"}();
    
    
        
!function(){"use strict";var e=n$732.extend(n$607,n$733,{staticMembers:{createBookmark:function(e){return n$731.getBookmark({returnTo:n$737.createBookmark(e),type:n$735,state:e&&e.get("clientId")})}},viewClass:n$559(function(e){return e.extend(n$663)}),columnCount:18,rowsPerCoalescedItem:1,groupModelProvider:n$459.datastore,itemModelProvider:n$309.datastore,title:n$9(n$290("Tab.Collections")),toolbarConfiguration:n$608.extend({middleItem:"modeSwitcher",rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableUploads")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?["uploadButton","separator1","drillButton"]:["drillButton"]}}),drillButton:n$535.extend({event:"drillButtonClick"})}),drillButtonClick:function(){this.sendEvent({type:"userNavigationRequest",navigationTarget:n$731.getBookmark({returnTo:this.get("bookmark"),type:n$731.MOMENTS_TYPE})})}});n$823=e,e.__QUALIFIED_CLASS_NAME__="Photos.CollectionsViewController"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{provider:null,isSelectionEnabled:n$9(!0),_isSelectionEnabled:!0,selection:null,selectionDelegate:null,pivot:n$4({get:function(){return(void 0===this._pivot||null===this._pivot)&&(this._pivot=this.selectionDelegate.pickInitialPivot(this.provider),this.provider.retainItem(this._pivot)),this._pivot},set:function(e){var t=this._pivot;if(e!==t)return null!==t&&void 0!==t&&this.provider.releaseItem(t),null!==e&&void 0!==e&&this.provider.retainItem(e),e}}),init:function(){this.__s._3VvV_jgUQQ9$S7$init.apply(this,arguments),this.selection.clearSelection()},_isSelectionEnabledDidChange:n$7("isSelectionEnabled",function(e){e?this._isSelectionEnabled=!0:(this._isSelectionEnabled=!1,this.clearSelection())}),itemIsSelected:function(e){if(!this._isSelectionEnabled)return!1;var t=this.selection.itemIsSelected(this.provider,e);return t?this.selectionDelegate.itemIsSelectable(this.provider,e):!1},selectItemInDirection:function(e,t){if(this._isSelectionEnabled){var n=this.provider,i=this.selectionDelegate,r=i.getSelectableItemInDirection(n,this.get("pivot"),e);r?this.selectItem(r,t):this.clearSelection()}},selectItem:function(e,t){if(this._isSelectionEnabled){var n=this.selectionDelegate,i=this.selection,r=this.provider;n.itemIsSelectable(r,e)&&(t===n$644?(i.itemIsSelected(r,e)?i.removeItemFromSelection(r,e):i.addItemToSelection(r,e),this.set("pivot",e)):t===n$645?i.selectRange(r,this.get("pivot"),e):(i.clearSelection(r),i.addItemToSelection(r,e),this.set("pivot",e)),n.selectionDidChange(r,this))}},selectAll:function(){var e=this.provider.getFirstItem();
if(e){this.selectItem(e,n$643);var t=this.provider.getLastItem();t!==e&&this.selectItem(t,n$645)}},selectionDidChange:function(){this.selectionDelegate.selectionDidChange(this.provider,this)},clearSelection:function(){this.selection.clearSelection(),this.set("pivot",null),this.selectionDelegate.selectionDidChange(this.provider,this)},__superMap:{_3VvV_jgUQQ9$S7$init:"init"}});n$810=e,e.__QUALIFIED_CLASS_NAME__="CW.Collections.SelectionManager"}();
    
    
        
!function(){"use strict";var e="up",t="down",n="left",i="right";n$739=e,n$740=t,n$741=n,n$742=i}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],itemIsSelectable:function(){return!0},pickInitialPivot:function(e){return e.getFirstItem()},getSelectableItemInDirection:function(e,t,n){return n===n$739||n===n$741?e.getItemRelativeToItem(t,-1):n===n$740||n===n$742?e.getItemRelativeToItem(t,1):void 0},selectionDidChange:function(){}};n$745=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],itemIsSelected:n$17(n$48),selectRange:n$17(n$48),addItemToSelection:n$17(n$48),removeItemFromSelection:n$17(n$48),clearSelection:n$17(n$48)};n$743=e}();
    
    
        
!function(){"use strict";function e(e,t,n){this.start=e,this.end=t,this.next=n}var t=n$5.extend(n$10,n$709,{init:function(){this._firstRange=null,this.__s._1tWzWT7QZd$8n$init.apply(this,arguments)},count:n$9({cacheable:!0,get:function(){for(var e=this._firstRange,t=0;e;)t+=e.end-e.start+1,e=e.next;return t}}),toArray:function(e){for(var t,n,i,r=e||[],s=this._firstRange;s;){for(n=s.start,i=s.end,t=n;i>=t;t++)r.push(t);s=s.next}return r},clear:function(){for(var e=this._firstRange,t=null;e;)t=e.next,e.next=null,e.start=e.end=-1,e=t;this._firstRange=null,this.propertyChanged("count")},add:function(e,t){this._add(e,t||e)},remove:function(e,t){this._remove(e,t||e)},contains:function(e,t){void 0===t&&(t=e);for(var n=this._firstRange;n;){if(n.start<=e&&n.end>=t)return!0;n=n.next}return!1},rangeStart:function(e){var t=this._rangeForIndex(e);return t?t.start:-1},rangeEnd:function(e){var t=this._rangeForIndex(e);return t?t.end:-1},lastIndexBefore:function(e){for(var t=this._firstRange,n=-1,i=e-1;t&&!(t.end>=i);)t=t.next;return t&&(n=Math.min(i,t.end)),n},firstIndexAfter:function(e){for(var t=this._firstRange,n=-1,i=e+1;t&&!(t.end>=i);)t=t.next;return t&&(n=Math.max(i,t.start)),n},itemsInsertedAtIndex:function(e,t){for(var n=this._firstRange;n;)this._updateRangeForInsertion(n,e,t),n=n.next;this._remove(e,e+t-1)},itemsRemovedAtIndex:function(e,t){for(var n=this._firstRange,i=null;n;)this._updateRangeForRemoval(n,e,t),n.end>=n.start?i&&i.end>=n.start-1&&(i.end=n.end,i.next=n.next):i?i.next=n.next:this._firstRange=n.next,i=n,n=n.next;this.propertyChanged("count")},_updateRangeForInsertion:function(e,t,n){e.start>=t&&(e.start+=n),e.end>=t&&(e.end+=n)
},_updateRangeForRemoval:function(e,t,n){var i=t+n-1;e.start>=t&&(e.start<=i?e.start=t:e.start-=n),e.end>=t&&(e.end<=i?e.end=t-1:e.end-=n)},_rangeForIndex:function(e){for(var t=this._firstRange;t;){if(t.start<=e&&t.end>=e)return t;t=t.next}return null},_add:function(t,n){for(var i=this._firstRange,r=null;i&&!(i.end>=t);)r=i,i=i.next;i&&i.start<=n?(i.start=Math.min(i.start,t),i.end=Math.max(i.end,n)):(i=new e(t,n,i?i:null),r?r.next=i:this._firstRange=i),r&&r.end>=i.start-1&&(r.end=i.end,r.next=i.next,i=r);var s=i;for(i=i.next;i&&i.start<=s.end+1;)s.end=Math.max(s.end,i.end),s.next=i.next,i=i.next;this.propertyChanged("count")},_remove:function(t,n){for(var i=this._firstRange,r=null;i&&!(i.start>n);){if(i.end>=t)if(i.start>=t&&i.end<=n)r?r.next=i.next:this._firstRange=i.next;else{var s,a,o=i.start,l=Math.min(i.end,t-1),d=Math.max(i.start,n+1),u=i.end,h=i.next;l-o>=0&&(s=new e(o,l,h),r?r.next=s:this._firstRange=s,r=i=s),u-d>=0&&(a=new e(d,u,h),r?r.next=a:this._firstRange=a,r=i=a)}r=i,i=i.next}this.propertyChanged("count")},__superMap:{_1tWzWT7QZd$8n$init:"init"}});n$744=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.IndexSet"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$743],_selectedIndices:null,selectedIndices:n$9({defaultValue:function(){return n$744.create()},get:function(){return this._selectedIndices},set:function(e){this._selectedIndices=e}}),itemIsSelected:function(e,t){return this._selectedIndices.contains(e.indexOfItem(t))},selectRange:function(e,t,n){var i=e.indexOfItem(t),r=e.indexOfItem(n),s=-1,o=this._selectedIndices;if(o.contains(i)||(i>r?s=this._selectedIndices.lastIndexBefore(i):r>i&&(s=this._selectedIndices.firstIndexAfter(i)),s>=0&&(i=s)),i>r){var a=i;i=r,r=a}var l=o.rangeStart(i);l>-1&&i>l&&o.remove(l,i-1);var u=o.rangeEnd(r);u>-1&&u>r&&o.remove(r+1,u),o.add(i,r)},addItemToSelection:function(e,t){var n=e.indexOfItem(t);this._selectedIndices.add(n,n)},removeItemFromSelection:function(e,t){var n=e.indexOfItem(t);this._selectedIndices.remove(n,n)},clearSelection:function(){this._selectedIndices.clear()}},t=n$5.extend(e);n$968=e,n$811=t,t.__QUALIFIED_CLASS_NAME__="CW.Collections.IndexedSelection"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$702,n$745],_iss_itemSelectionStates:null,selectionManager:null,layoutManager:null,init:function(){this.__s._IlzO4mzt7N$Lk$init.apply(this,arguments),this._iss_itemSelectionStates={}},itemDidEnter:function(e){this.__s._IlzO4mzt7N$P1$itemDidEnter.apply(this,arguments);var t=n$22(e),n=this.get("selectionManager").itemIsSelected(e);this._iss_itemSelectionStates[t]=n},itemDidExit:function(e){this.__s._IlzO4mzt7N$UN$itemDidExit.apply(this,arguments);var t=n$22(e);delete this._iss_itemSelectionStates[t]},selectionDidChange:function(e){this.__s._IlzO4mzt7N$X_$selectionDidChange.apply(this,arguments);var t,n,i,r,s,a=this.get("layoutManager"),o=this.get("selectionManager"),l=this._iss_itemSelectionStates,u=a.positionedItems,h=0,c=u.length;for(h=0;c>h;h++)t=u[h],n=t.item,i=n$22(n),r=o.itemIsSelected(n),s=l[i],r&&!s?this.itemDidSelect(n,e.dataForItem(n),t):!r&&s&&this.itemDidDeselect(n,e.dataForItem(n),t),l[i]=r},__superMap:{_IlzO4mzt7N$Lk$init:"init",_IlzO4mzt7N$P1$itemDidEnter:"itemDidEnter",_IlzO4mzt7N$UN$itemDidExit:"itemDidExit",_IlzO4mzt7N$X_$selectionDidChange:"selectionDidChange"}};n$746=e}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$706,n$746],itemViewDidSelect:function(){},itemViewDidDeselect:function(){},selectItemView:function(e,t){var n=this.get("viewMap").itemForView(e);this.get("selectionManager").selectItem(n,t)},itemDidSelect:function(e,t){var n=this.get("viewMap").viewForItem(e);n&&this.itemViewDidSelect(n,e,t)},itemDidDeselect:function(e,t){var n=this.get("viewMap").viewForItem(e);n&&this.itemViewDidDeselect(n,e,t)}};n$812=e}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$10,{owner:n$9(),toolbarViewController:n$9()});n$808=e,e.__QUALIFIED_CLASS_NAME__="Photos.ActionMode"}();
    
    
        
!function(){"use strict";var e=n$44(n$126,{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,EQUALS:187,MINUS:189,SPACE:32});n$748=e}();
    
    
        
!function(){"use strict";var e=13,t=n$674.extend({owner:n$9(),additionalClassNames:["photos-selection-toolbar"],selectedItemCount:n$9(0),isAnimating:n$9(!1),areActionsDisabled:n$9({readOnly:!0,dependencies:["selectedItemCount"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),isDownloadAllowed:n$9(!1),isEmailAllowed:n$9(!1),isAddToAlbumAllowed:n$9(!1),isUndeleteAllowed:n$9(!1),isDeleteAllowed:n$9(!1),removeType:n$9(),isDownloadActionDisabled:n$9({readOnly:!0,dependencies:["areActionsDisabled","isDownloadAllowed"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||!r}}),isDeleteActionDisabled:n$9({readOnly:!0,dependencies:["areActionsDisabled","isDeleteAllowed","removeType"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return r===n$366.EXPUNGE?!1:a||!s}}),isAddToAlbumActionDisabled:n$9({readOnly:!0,dependencies:["areActionsDisabled","isAddToAlbumAllowed"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||!r}}),isEmailActionDisabled:n$9(n$14("areActionsDisabled")),isShareActionDisabled:n$9(n$14("areActionsDisabled")),configuration:n$424(n$523.extend({items:["selectionLabel","actionButtons","cancelButton"],selectionLabel:n$424(n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"text",attributes:{}}],classes:["photos-select-photos-label"]}},text:n$9({readOnly:!0,dependencies:["parent.selectedItemCount"],get:function(e,t,n,i){return n$483(u,i.internalGetPath(this,t[0+n]))
}})})),actionButtons:n$424(n$193.extend({additionalClassNames:["photos-select-action-buttons"],staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"downloadButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"shareButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"addToAlbumButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"undeleteButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"deleteButton"}]}},downloadButton:n$9({defaultValue:function(){return i.create({isDisabled:n$14("parent.parent.isDownloadActionDisabled")})}}),emailButton:n$9({defaultValue:function(){return r.create({isVisible:n$14("parent.parent.isEmailAllowed"),isDisabled:n$14("parent.parent.isEmailActionDisabled")})}}),addToAlbumButton:n$9({defaultValue:function(){return s.create({isVisible:n$14("parent.parent.isAddToAlbumAllowed"),isDisabled:n$14("parent.parent.isAddToAlbumActionDisabled")})}}),undeleteButton:n$9({defaultValue:function(){return o.extend({isVisible:n$14("parent.parent.isUndeleteAllowed"),title:n$9({readOnly:!0,dependencies:["parent.parent.selectedItemCount","parent.parent.isAnimating"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(r&&this._lastTitle)return this._lastTitle;var a=s?n$290("Toolbars.Selection.UndeleteButton.Title"):n$290("Toolbars.Selection.UndeleteButton.Title.All");return this._lastTitle=a}})}).create()}}),deleteButton:n$9({defaultValue:function(){return a.extend({isVisible:n$9({dependencies:["parent.parent.isUndeleteAllowed"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);
return n$298.get("enableExpunge")||!r}}),isDisabled:n$14("parent.parent.isDeleteActionDisabled"),title:n$9({readOnly:!0,dependencies:["parent.parent.removeType","parent.parent.selectedItemCount","parent.parent.isAnimating",n$133.get("sharedInstance").bindingFor("activeKeys")],get:function(e,t,n,i){var r=n$133.sharedInstance.activeKeys,s=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);if(o===n$366.EXPUNGE){if(s&&this._lastTitle)return this._lastTitle;var l=a?n$290("Toolbars.Selection.ExpungeButton.Title"):n$290("Toolbars.Selection.ExpungeButton.Title.All");return this._lastTitle=l,l}return this._lastTitle=null,o===n$366.DELETE||r.contains(n$748.OPTION)?n$290("Toolbars.Selection.DeleteButton.Title"):n$290("Toolbars.Selection.RemoveButton.Title")}})}).create()}}),shareButton:n$9({defaultValue:function(){return l.create({isDisabled:n$14("parent.parent.isShareActionDisabled")})}}),toggleShareVendorSelection:function(){this.sendEvent("vendorSelectorToggled",this.shareButton)}})),cancelButton:n$424(n$538.extend({additionalClassNames:["photos-select-textonly-button"],title:n$290("Toolbars.Selection.CancelButton.Title"),event:"cancelSelection"})),layout:function(t){t.selectionLabel.left=e,t.cancelButton.right=t.width-e,t.actionButtons.centerHorizontally()}})),_albumPickerPopoverViewController:n$9({readOnly:!0,get:function(){return n$687.extend({nextResponder:this,assetClientIds:n$9(),albumPickerDidPickAlbum:function(e){var t=e.context;this.assetClientIds&&t&&(t.appendAssetsWithClientIds(this.assetClientIds),this.assetClientIds=null,this.sendEvent("cancelSelection"),this.hide())
},newAlbumDefaultBaseTitle:n$9({readOnly:!0,dependencies:["assetClientIds"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(!r)return null;var s=r.map(function(e){var t=n$309.create(e).retain("newAlbumDefaultBaseTitle search");t.linkToStore();var n=t.createdDate;return t.release(),n}).filter(n$56);return s.length?n$543.fmt(new Date(Math.min.apply(Math,s)),new Date(Math.max.apply(Math,s))):null}})}).create().retain()}}),dispose:function(){this.__s._3NjbK1krR5M$3BX$dispose.apply(this,arguments),this._albumPickerPopoverViewController.release()},showAlbumPickerPopover:function(e){return this._albumPickerPopoverViewController.assetClientIds=e.context,this._albumPickerPopoverViewController.show(this.configuration.actionButtons.addToAlbumButton),!0},_updatePopoverLayout:function(){this._albumPickerPopoverViewController&&this._albumPickerPopoverViewController.updateLayout()},didScrollInParent:function(){this._updatePopoverLayout()},updateLayout:function(){this.__s._3NjbK1krR5M$3Lb$updateLayout.apply(this,arguments),this._updatePopoverLayout()},__superMap:{_3NjbK1krR5M$3BX$dispose:"dispose",_3NjbK1krR5M$3Lb$updateLayout:"updateLayout"}}),n=n$400.extend(n$537,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"inline-block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}}},isVisible:!0}),i=n.extend({additionalClassNames:n$16(["photos-download-selection-button"]),title:n$290("Toolbars.Selection.DownloadButton.Title"),event:"downloadItems"}),r=n.extend({additionalClassNames:n$16(["photos-email-selection-button"]),title:n$290("Toolbars.Selection.EmailButton.Title"),event:"emailItems"}),s=n.extend({additionalClassNames:n$16(["photos-add-to-album-selection-button"]),title:n$290("Toolbars.Selection.AddToAlbumButton.Title"),action:"_buttonAction",_buttonAction:function(){this.sendEvent("addItemsToAlbum",function(e){this.sendEvent("showAlbumPickerPopover",e)
}.bind(this))}}),a=n.extend({additionalClassNames:n$16(["photos-delete-selection-button"]),title:n$290("Toolbars.Selection.DeleteButton.Title"),event:"deleteItems"}),o=n.extend({additionalClassNames:n$16(["photos-undelete-selection-button"]),title:n$290("Toolbars.Selection.UndeleteButton.Title"),event:"undeleteItems"}),l=n.extend({additionalClassNames:n$16(["photos-share-button"]),title:n$290("Toolbars.Selection.ShareButton.Title"),event:"toggleShareVendorSelection"}),u=["Toolbars.Selection.SelectItems.Title","Toolbars.Selection.SingleItemSelected.Title","Toolbars.Selection.MultipleItemsSelected.Title"];n$806=t,t.__QUALIFIED_CLASS_NAME__="Photos.SelectionToolbarView",n.__QUALIFIED_CLASS_NAME__="Photos.ActionButton$585",i.__QUALIFIED_CLASS_NAME__="Photos.DownloadButtonView$585",r.__QUALIFIED_CLASS_NAME__="Photos.EmailButtonView$585",s.__QUALIFIED_CLASS_NAME__="Photos.AddToAlbumButtonView$585",a.__QUALIFIED_CLASS_NAME__="Photos.DeleteButtonView$585",o.__QUALIFIED_CLASS_NAME__="Photos.UndeleteButtonView$585",l.__QUALIFIED_CLASS_NAME__="Photos.ShareButtonView$585"}();
    
    
        
!function(){"use strict";function t(){return r.pop()||e()}function e(){var t={};return t.workFunc=a,t.thisArg=null,t.args=[],t.callback=function(){t.args.push.apply(t.args,arguments),t.workFunc.apply(t.thisArg,t.args),n(t)},t}function n(t){t.args.length=0,t.thisArg=null,t.workFunc=a,r.push(t)}var i=function(e,n){var i=t();return i.workFunc=e||n$23,i.thisArg=n,n$26(i.args,arguments,0,2),i.callback},r=[],a=function(){n$11("Cannot call a single-use-bound function more than once.")};n$752=i}();
    
    
        
!function(){"use strict";function e(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&!e.isClass}n$749=e}();
    
    
        
!function(){"use strict";var t=n$5.extend({_desiredClass:null,_pool:null,_activeInstanceCount:0,init:function(t){this._pool=[],this.__s._1vI7WfbQm03$Md$init.call(this),this._desiredClass=t},getInstance:function(){var t=this._pool.pop()||this.createInstance();return t._cwPoolDisposed=!1,this._activeInstanceCount++,t},getAutodisposingInstance:function(){var t=this.getInstance();return this.autodispose(t),t},autodispose:function(t){t._cwAutodisposePoolOwner||(t._cwAutodisposePoolOwner=this,e.push(t),n||(n=n$130(i,0)))},createInstance:function(){var t=this._desiredClass;return t.isClass?t.create():new t},disposeInstance:function(t){t._cwAutodisposePoolOwner&&n$11("Manually disposing auto-disposing instance to pool: "+this),t._cwPoolDisposed&&n$11("Over-disposing to pool: "+this),t._cwPoolDisposed=!0,this._activeInstanceCount--,this._pool.push(t)},__superMap:{_1vI7WfbQm03$Md$init:"init"}}),e=[],n=null,i=function(){for(var t=e.length;t--;){var i=e[t],r=i._cwAutodisposePoolOwner;delete i._cwAutodisposePoolOwner,r.disposeInstance(i)}e.length=0,n=null},r=t.extend({createInstance:function(){return[]},getInstance:function(){var t=this.__s._1vI7WfbQm03$1Hw$getInstance.apply(this,arguments);return t.length&&n$11("ArrayPool#getInstance is returning an array of length > 0. This indicates usage of a disposed instance."),t},getWrapperInstance:function(t){var e=this.getInstance();return e[0]=t,e},getWrapperAutodisposingInstance:function(t){var e=this.getAutodisposingInstance();return e[0]=t,e},getInstanceFromSlice:function(t,e,n){var i=t.length;e=void 0===e?0:e,n=void 0===n?i:n,0>e&&(e=Math.max(i+e,0)),0>n&&(n=Math.max(i+n,0));
for(var r=this.getInstance(),a=e;n>a&&i>a;a++)r.push(t[a]);return r},disposeInstance:function(t){this.__s._1vI7WfbQm03$1Yt$disposeInstance.apply(this,arguments),t.length=0},__superMap:{_1vI7WfbQm03$1Hw$getInstance:"getInstance",_1vI7WfbQm03$1Yt$disposeInstance:"disposeInstance"}}),a=t.extend({createInstance:function(){return{}},disposeInstance:function(t){this.__s._1vI7WfbQm03$1hJ$disposeInstance.apply(this,arguments);for(var e in t)t.hasOwnProperty(e)&&delete t[e]},__superMap:{_1vI7WfbQm03$1hJ$disposeInstance:"disposeInstance"}}),s=t.extend({createInstance:function(){return new Image},disposeInstance:function(t){this.__s._1vI7WfbQm03$1nU$disposeInstance.apply(this,arguments),t.removeAttribute("src")},__superMap:{_1vI7WfbQm03$1nU$disposeInstance:"disposeInstance"}}),o=t.extend({createInstance:function(){return document.createElement("canvas")},disposeInstance:function(t){this.__s._1vI7WfbQm03$1_0$disposeInstance.apply(this,arguments),t.width=t.height=0},__superMap:{_1vI7WfbQm03$1_0$disposeInstance:"disposeInstance"}}),l=r.create(),h=a.create(),d=s.create(),u=o.create();n$751=t,n$969=r,n$970=a,n$971=s,n$972=o,n$768=l,n$769=h,n$973=d,n$974=u,t.__QUALIFIED_CLASS_NAME__="VSToCW.Utils.Pool",r.__QUALIFIED_CLASS_NAME__="VSToCW.Utils.ArrayPool",a.__QUALIFIED_CLASS_NAME__="VSToCW.Utils.ObjectPool",s.__QUALIFIED_CLASS_NAME__="VSToCW.Utils.ImagePool",o.__QUALIFIED_CLASS_NAME__="VSToCW.Utils.CanvasPool"}();
    
    
        
!function(){"use strict";function e(e){return n$4({defaultValue:e,get:function(e){return e},set:function(e){return n$31(e,u)?e.create():e}})}function t(e,t,n,s,l,u){var d={staticMembers:{mixinWasApplied:function(c){if(c===d){var _=this.prototype.validate;this.prototype.validate=function(d,c){if(!Array.isArray(d))return c.record(o,e+" data is not an array."),void 0;d.length<this[n]&&c.record(o,e+" array length is not at least "+this[s]+".",this[l]),d.length>this[s]&&c.record(o,e+" array length exceeds "+this[s]+".",this[u]);for(var g=[],p=[],f=0;f<d.length;f++){var m=h.getInstance();_.call(this,d[f],m),g.push(m.validity),p.push(m.report),h.disposeInstance(m)}var $=Math.min(this[t],d.length),v={},y=[];for(f=0;f<g.length;f++){var I=g[f],S=v[I]=(0|v[I])+1;1===S&&y.push(I)}for(y.sort(i),f=y.length-1;f>0;f--)v[y[f-1]]+=v[y[f]];var w=$?o:r;for(f=0;f<y.length;f++){var b=y[f];b>w&&v[b]>=$&&(w=b)}var A,C=v[w],E=a[w].toLowerCase();if($)if($<this[t])A=e+" array had all items which were "+E+" or better.";else{var D;C===$?(D=1===$?"item":"items",A=e+" array contained the required "+$+" "+E+"-or-better "+D+"."):(D=1===C?"item":"items",A=e+" array contained "+C+" "+E+"-or-better "+D+" (only "+$+" required).")}else A=e+" array had no items (e.g. nothing to force a validity downgrade).";A+="\n	"+p.map(function(t,n){return"	"+e+"["+n+"]: "+t.split("\n").join("\n		")}).join("\n	"),c.record(w,A.trim())}}}}};return t=t||"satisfactionCount",n=n||"minLength",s=s||"maxLength",l=l||"tooFewString",u=u||"tooManyString",d[t]=1/0,d[n]=0,d[s]=1/0,d[l]=void 0,d[u]=void 0,d}function n(e){for(var t=[Blob,ArrayBuffer,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],n=0,i=t.length;i>n;n++)if(e instanceof t[n])return!0;
return!1}function i(e,t){return e-t}var r=1/0,s=1,o=0,a={};a[o]="INCOMPATIBLE",a[s]="COMPATIBLE",a[r]="SUBMITTABLE";var l=n$5.extend({_results:n$84(Array),_notes:n$84(Array),incompatibleReasonStrings:n$84(Array),validity:n$4({readOnly:!0,get:function(){return Math.min(r,Math.min.apply(Math,this._results))}}),report:n$4({readOnly:!0,get:function(){var e=this.validity,t="Validation result: ";return t+=a[e],t+="\n	"+this._notes.join("\n	"),t.trim()}}),record:function(e,t,n){this._results.push(e);for(var i=a[e]+": ";i.length<14;)i+=" ";this._notes.push(i+t||"Unknown Reason"),n&&this.incompatibleReasonStrings.push(n)},reset:function(){this._results.length=this._notes.length=0}}),h=n$751.extend({createInstance:function(){return l.create()},disposeInstance:function(e){this.__s._2ZIXocW0GNg$fW$disposeInstance.apply(this,arguments),e.reset()},__superMap:{_2ZIXocW0GNg$fW$disposeInstance:"disposeInstance"}}).create(),u=n$5.extend(n$62,{staticMembers:{SUBMITTABLE:r,COMPATIBLE:s,INCOMPATIBLE:o},isOptional:!1,init:function(){var e=this.validate;this.validate=function(t,n){if(n){if((null===t||void 0===t)&&this.isOptional)return;return e.call(this,t,n)}return n=this.validationResultsForShareData(t),n.validity},this.__s._2ZIXocW0GNg$1A7$init.apply(this,arguments)},validationResultsForShareData:function(e){var t=l.create();return this.validate(e,t),t},validate:function(e,t){if(n$749(e))for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this[n];n$32(r,u)&&r.validate(i,t)}},__superMap:{_2ZIXocW0GNg$1A7$init:"init"}}),d=u.extend({maxLength:1/0,init:function(e){"number"==typeof e&&(e={maxLength:e}),this.__s._2ZIXocW0GNg$3Zt$init.call(this,e)
},validate:function(e,t){this.__s._2ZIXocW0GNg$3b0$validate.apply(this,arguments),"string"!=typeof e&&t.record(o,"Data that should be a string is not."),e&&e.length>this.maxLength&&t.record(o,"String length "+e.length+" exceeds "+this.maxLength+".")},__superMap:{_2ZIXocW0GNg$3Zt$init:"init",_2ZIXocW0GNg$3b0$validate:"validate"}}),c=d.extend({validate:function(e){var t=this.__s._2ZIXocW0GNg$3iJ$validate.apply(this,arguments);return e===n$750(e)?Math.min(t,r):o},__superMap:{_2ZIXocW0GNg$3iJ$validate:"validate"}}),_=u.extend({maxLength:1/0,init:function(e){"number"==typeof e&&(e={maxLength:e}),this.__s._2ZIXocW0GNg$3qM$init.call(this,e)},validate:function(e,t){this.__s._2ZIXocW0GNg$3rU$validate.apply(this,arguments),n(e)||t.record(o,"Data that should be binary is not."),e.length>this.maxLength&&t.record(o,"Data length "+e.length+" exceeds "+this.maxLength)},__superMap:{_2ZIXocW0GNg$3qM$init:"init",_2ZIXocW0GNg$3rU$validate:"validate"}}),g=u.extend({stringType:"Media",url:e(d.extend({isOptional:!0})),bytes:e(_.extend({isOptional:!0})),maxFileSize:1/0,allowedMimeTypes:[void 0,null,"image/png","image/jpeg","image/gif","image/tiff","video/mp4"],maxWidth:1/0,maxHeight:1/0,allowsGeo:!0,fileSizeOf:function(e){return e.fileSize||e.bytes&&e.bytes.length||0|.2*3*e.width*e.height},validate:function(e,t){return this.__s._2ZIXocW0GNg$46O$validate.apply(this,arguments),e?(e.url&&e.bytes&&t.record(o,this.stringType+" includes both bytes and a URL, which may contradict each other."),e.url||e.bytes||t.record(s,this.stringType+" includes neither a URL nor bytes."),e.bytes&&e.fileSize&&e.fileSize!==e.bytes.length&&t.record(o,this.stringType+" includes both bytes and a fileSize, but the sizes do not match."),e.url&&!e.fileSize&&t.record(r,this.stringType+" with only a URL lacks a fileSize. File size is unknown."),-1===this.allowedMimeTypes.indexOf(e.mimeType)&&t.record(o,this.stringType+" has disallowed mimeType "+e.mimeType+"."),this.fileSizeOf(e)>this.maxFileSize&&t.record(o,this.stringType+" file size "+this.fileSizeOf(e)+" exceeds "+this.maxFileSize+"."),(e.width>this.maxWidth||e.height>this.maxHeight)&&t.record(o,this.stringType+" dimensions "+e.width+"x"+e.height+" exceed "+this.maxWidth+"x"+this.maxHeight+"."),this.allowsGeo||e.hasGeo===!1||t.record(s,this.stringType+" does not confirm that it lacks GPS data."),void 0):(t.record(o,this.stringType+" is nonexistent."),void 0)
},__superMap:{_2ZIXocW0GNg$46O$validate:"validate"}}),p={mixinDependencies:[t("MultiResolution","resolutionSatisfactionCount","minResolutionCount","maxResolutionCount")],resolutionSatisfactionCount:1,minResolutionCount:1,maxResolutionCount:1/0,validate:function(){this.__s._2ZIXocW0GNg$54O$validate.apply(this,arguments)},__superMap:{_2ZIXocW0GNg$54O$validate:"validate"}},f=g.extend({stringType:"Image",allowedMimeTypes:g.prototype.allowedMimeTypes.filter(function(e){return!e||"image/"===e.slice(0,6)})}),m=f.extend(p),$=g.extend({stringType:"Video",allowedMimeTypes:g.prototype.allowedMimeTypes.filter(function(e){return!e||"video/"===e.slice(0,6)})}),v=$.extend(p),y=u.extend(n$10,{staticMembers:{Types:{String:d,HTML:c,Bytes:_,Image:f,Video:$,MultiResolutionImageValidator:m,MultiResolutionVideoValidator:v}},images:e(m.extend(t("Images"),{isOptional:!0,tooFewString:n$290("Share.Validation.NotEnoughPhotos"),tooManyString:n$290("Share.Validation.TooManyPhotos")})),videos:e(v.extend(t("Videos"),{isOptional:!0,tooFewString:n$290("Share.Validation.NotEnoughVideos"),tooManyString:n$290("Share.Validation.TooManyVideos")})),validate:function(e,t){n$749(e)||t.record(o,"The share data is not a hash."),this.__s._2ZIXocW0GNg$5ov$validate.apply(this,arguments)},__superMap:{_2ZIXocW0GNg$5ov$validate:"validate"}});n$975=u,n$756=e,n$757=t,n$976=d,n$977=_,n$758=g,n$978=f,n$979=m,n$980=$,n$981=v,n$753=y,l.__QUALIFIED_CLASS_NAME__="VendorSharing.ValidationResults$589",u.__QUALIFIED_CLASS_NAME__="VendorSharing.Validator",d.__QUALIFIED_CLASS_NAME__="VendorSharing.StringValidator",c.__QUALIFIED_CLASS_NAME__="VendorSharing.HTMLValidator$589",_.__QUALIFIED_CLASS_NAME__="VendorSharing.BytesValidator",g.__QUALIFIED_CLASS_NAME__="VendorSharing.MediaValidator",f.__QUALIFIED_CLASS_NAME__="VendorSharing.ImageValidator",m.__QUALIFIED_CLASS_NAME__="VendorSharing.MultiResolutionImageValidator",$.__QUALIFIED_CLASS_NAME__="VendorSharing.VideoValidator",v.__QUALIFIED_CLASS_NAME__="VendorSharing.MultiResolutionVideoValidator",y.__QUALIFIED_CLASS_NAME__="VendorSharing.ShareDataValidator"
}();
    
    
        
!function(){"use strict";function e(e){return function(){return e.apply(this,n(arguments,t,a))}}function t(e){return n$39(e)?n$105(e):e}function n(e,t,n){var i=e.length;n.length!==i&&(n.length=i);for(var r=0;i>r;r++)n[r]=t(e[r],r);return n}var i,r=["then","catch","finally"],s=n$247.extend(i={staticMembers:{mixinWasApplied:function(t){if(t===i)for(var n,s=0;n=r[s];s++)this.prototype[n]=e(this.prototype[n])}}}),a=[];n$754=s,s.__QUALIFIED_CLASS_NAME__="VendorSharing.Promise"}();
    
    
        
!function(){"use strict";function e(e){return e instanceof Image?e.src&&e.complete:e instanceof HTMLCanvasElement?!0:!1}function t(t){return t?e(t.imageExample):!1}var n=n$5.extend(n$10,{staticMembers:{displayName:null,vendorName:null,shareDataValidator:n$753,validateShareData:function(e){return this.shareDataValidator.sharedInstance.validate(e)},validationResultsForShareData:function(e){return this.shareDataValidator.sharedInstance.validationResultsForShareData(e)},isEnabledForBrowser:!0,notEnabledForBrowserString:n$290("Share.Validation.BrowserOutOfDate"),isEnabledForUser:!0,notEnabledForUserString:"",reasonsNotEnabledWithShareData:function(e){var t=null;this.isEnabledForUser||(t=t||[]).push(this.notEnabledForUserString),this.isEnabledForBrowser||(t=t||[]).push(this.notEnabledForBrowserString);var n=this.validationResultsForShareData(e);return n.validity||(t=t||[],n.incompatibleReasonStrings.length?t.push.apply(t,n.incompatibleReasonStrings):t.push(this.genericIncompatibleReasonString)),t},genericIncompatibleReasonString:"Some items can't be shared.",init:function(){!i||this.displayName&&this.vendorName||n$11("Must configure a UX-friendly `displayName` on all subclasses of VendorExtension."),i=!0,this.prototype.registerMetadata("canSubmit",n$9({readOnly:!0,dependencies:this.prototype.canSubmit_dependencies,get:this.prototype.canSubmit_getter})),this.__s._1AcF6IAQyox$1Tt$init.apply(this,arguments)},LOADING:"loading",READY:"ready",SUBMITTING:"submitting",FAILED:"failed",FINISHED:"finished",CANCELED:"canceled",getImage:function(t){if(!t||"video"===(t.mimeType+"").substring(0,5))return n$754.reject();
var n=n$754.create(),i=t.imageExample||(t.imageExample=new Image);return e(i)?n.resolve(i):(n$107(i,"load",n.resolve.bind(n,i)),n$107(i,"error",n.reject.bind(n,null)),i.src||(i.src=t.url)),n._shareData=i._shareData=t,n},getLoadedImage:function(e){if(!t(e))return null;var n=e.imageExample;return n&&(n._shareData=e),n},getLoadedMediaResForSize:function(e,n,i){return this.getMediaResForSize(e,n,i,t)},getSmallestMediaRes:function(e,t){return this.getMediaResForSize(e,0,0,t)},getLargestMediaRes:function(e,t){return this.getMediaResForSize(e,1/0,1/0,t)},getMediaResForSize:function(e,t,n,i){if(!e)return null;for(var r=e.length,s=null,a=0;r>a;a++){var o=e[a];!o||i&&!i(o)||(!s||s.width<t&&s.height<n&&o.width>s.width&&o.height>s.height||o.width>=t&&o.height>=n&&o.width<s.width&&o.height<s.height)&&(s=o)}return s},getImageForSize:function(e,t,n,i){return this.getImage(this.getMediaResForSize(e,t,n,i))},getLoadedImageForSize:function(e,t,n,i){return this.getLoadedImage(this.getLoadedMediaResForSize(e,t,n,i))},__superMap:{_1AcF6IAQyox$1Tt$init:"init"}},maximumAllowedLoadTime:1/0,shareData:n$9({get:function(e){return e||{}},set:n$192}),alertViewControllerClass:n$418,_alertViewControllerClass:n$4(function(){return this.alertViewControllerClass.extend({buttonWasPressed:function(e,t){this.__s._1AcF6IAQyox$3l2$buttonWasPressed.apply(this,arguments),t.immediateAction&&t.target[t.immediateAction]()},__superMap:{_1AcF6IAQyox$3l2$buttonWasPressed:"buttonWasPressed"}})}),errorAlertViewControllerClass:n$4({defaultValue:null,get:function(e){return e||this.alertViewControllerClass},set:function(e){return e
}}),_errorAlertViewControllerClass:n$4(function(){return this.errorAlertViewControllerClass.extend({buttonWasPressed:function(e,t){this.__s._1AcF6IAQyox$42L$buttonWasPressed.apply(this,arguments),t.immediateAction&&t.target[t.immediateAction]()},__superMap:{_1AcF6IAQyox$42L$buttonWasPressed:"buttonWasPressed"}})}),shareDataValidationResults:n$9({readOnly:!0,dependencies:["shareData"],get:function(e,t,n,i){return this.constructor.shareDataValidator.sharedInstance.validationResultsForShareData(i.internalGetPath(this,t[0+n]))}}),isShareDataSubmittable:n$9({readOnly:!0,dependencies:["shareDataValidity"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>=n$753.SUBMITTABLE}}),isShareDataCompatible:n$9({readOnly:!0,dependencies:["shareDataValidity"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])>=n$753.COMPATIBLE}}),shareDataValidity:n$9({readOnly:!0,dependencies:["shareDataValidationResults"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n]).validity}}),state:n$9({defaultValue:function(){return this.constructor.LOADING},didChange:function(e){n$63.info("Extension is "+e+".")}}),isSubmitting:n$9({readOnly:!0,dependencies:["state"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===this.constructor.SUBMITTING}}),isStateFinal:n$9({readOnly:!0,dependencies:["state"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.constructor.CANCELED||r===this.constructor.FAILED||r===this.constructor.FINISHED}}),init:function(){this.__s._1AcF6IAQyox$4qJ$init.apply(this,arguments),this.retain(),n$130(n$752(this._loadDependencies,this))
},_loadDependencies:function(){var e=!1,t=function(){e||(e=!0,this.loadingDidComplete())}.bind(this),n=function(){e||(e=!0,this.loadingDidFail())}.bind(this);this.maximumAllowedLoadTime<1/0&&n$130(n,this.maximumAllowedLoadTime),this.loadDependencies().then(t).catch(n)},loadDependencies:function(){return n$754.resolve()},loadingDidComplete:function(){this.state=this.constructor.READY},loadingDidFail:function(){this.terminate()},terminate:function(){this.state!==this.constructor.FINISHED&&this.state!==this.constructor.CANCELED&&(this.state=this.constructor.FAILED),n$130(this.autorelease.bind(this))},submit:function(){this.canSubmit||n$11("Can't submit while shareData is not yet suitable for submission."),this.state=this.constructor.SUBMITTING},canSubmit_getter:function(){return this.isShareDataSubmittable},canSubmit_dependencies:["isShareDataSubmittable"],_recordStats:function(e,t){var n=n$203.cloudOSService;n&&n.recordStat(e,t)},_showErrorAlertDialogWithStat:function(e,t){var n=this.constructor.vendorName+"ErrorAlertShown";this._recordStats(n,{errorType:n,errorTitle:e.message,errorDescription:e.description,errorData:t&&t.error?JSON.stringify(t.error):""}),this._showErrorAlertDialog(e)},_showErrorAlertDialog:function(e){this.__showAlertDialog(e,this._errorAlertViewControllerClass)},_showAlertDialog:function(e){this.__showAlertDialog(e,this._alertViewControllerClass)},__showAlertDialog:function(e,t){n$34(t)&&t.prototype.show||n$11("Invalid AlertViewController Class(es) set on VendorExtension");for(var n,i=Object.keys(e),r=0,s=i.length;s>r;r++)if(i[r].match(/\w+Button/)){n=!0;break
}n||(e.primaryButton={title:"OK"}),t.create(e).show()},__superMap:{_1AcF6IAQyox$4qJ$init:"init"}}),i=!1;n$760=n,n.__QUALIFIED_CLASS_NAME__="VendorSharing.VendorExtension"}();
    
    
        
!function(){"use strict";var t=n$400.extend({hasLeftIcon:!0,action:"_buttonAction",_buttonAction:function(){this.sendEvent("shareVendorWasSelected",this.vendorExtensionClass)},vendorExtensionClass:n$9(),reasonsNotEnabled:n$9(),isDisabled:n$9({readOnly:!0,dependencies:["reasonsNotEnabled"],get:function(t,e,n,i){return!!i.internalGetPath(this,e[0+n])}}),tooltip:n$9({readOnly:!0,dependencies:["reasonsNotEnabled","vendorExtensionClass"],get:function(t,e,r,a){return a.internalGetPath(this,e[0+r])?(i.vendorName=a.internalGetPath(this,e[1+r]).displayName,(n$290("Share.VendorButton.Disabled",i)+"\n  - "+(this.reasonsNotEnabled||n).join("\n  - ")).trim()):""}})}),e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"vendorViews",classes:["vendor-selection-list"]}],classes:["vendor-selection-view"]}},vendorExtensionClasses:n$9(),shareDataDisableReasons:n$9(),vendorViews:n$84(n$158),_extensionsAdded:n$7("vendorExtensionClasses","shareDataDisableReasons",function(){var e=this.vendorExtensionClasses||n,i=this.shareDataDisableReasons||n,r=this.vendorViews;r.beginBatchedChanges();for(var a=0;a<e.length;a++){var s=e[a];r.setIndex(a,t.create({title:s.vendorName,additionalClassNames:n$16([n$162(s.vendorName)+"-vendor-button"]),vendorExtensionClass:s,reasonsNotEnabled:i[a]}))}r.length=e.length,r.endBatchedChanges()})}),n=[],i={};n$755=e,t.__QUALIFIED_CLASS_NAME__="VendorSharing.VendorButton$592",e.__QUALIFIED_CLASS_NAME__="VendorSharing.VendorSelectionView"}();
    
    
        
!function(){"use strict";var t=n$194.extend({viewClass:n$755,vendorExtensionClasses:n$9(),shareData:n$9(),shareDataDisableReasons:n$9({readOnly:!0,dependencies:["vendorExtensionClasses","shareData"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]),a=i.internalGetPath(this,e[1+n]);return r?r.map(function(t){return t.reasonsNotEnabledWithShareData(a)}):null}}),view:n$9({downstreamBindings:{vendorExtensionClasses:"(owner).vendorExtensionClasses",shareDataDisableReasons:"(owner).shareDataDisableReasons"}})});n$800=t,t.__QUALIFIED_CLASS_NAME__="VendorSharing.VendorSelectionViewController"}();
    
    
        
!function(){"use strict";var e=1e6,t=function(e,t){var n="Only videos and images arrays are currently supported for EmailExtension. Received type "+t;return Array.isArray(e)||n$11(n),"images"===t?n$759.getLargestMediaRes(e):"videos"===t?n$759.getSmallestMediaRes(e,function(e){return"video"===(e.mimeType+"").substring(0,5)}):(n$11(n),void 0)},n=n$753.extend({totalAttachmentByteSizeLimit:20*e,validate:function(n,r){if(this.__s._2W0GBo1h5Ac$WM$validate.apply(this,arguments),n){var s,a,o,l=this.totalAttachmentByteSizeLimit,u=0,h=[];for(n.images&&(s=n.images.map(function(e){return t(e,"images")}),h.push.apply(h,s)),n.videos&&(a=n.videos.map(function(e){return t(e,"videos")}),h.push.apply(h,a)),o=0;o<h.length;o++){var c=h[o];if(!c)return r.record(this.constructor.INCOMPATIBLE,"Attached media has no suitable resolutions."),void 0;if(u+=c.fileSize,u>l){var d=this.totalAttachmentByteSizeLimit/e,p="Email attachments exceed the maximum size limit of "+d+" megabytes.";i.maxMegabytes=d;var g=n$290("Share.Validation.FileSizeLimitExceeded",i);return r.record(this.constructor.INCOMPATIBLE,p,g),void 0}}}},__superMap:{_2W0GBo1h5Ac$WM$validate:"validate"}}),i={};n$762=t,n$761=n,n.__QUALIFIED_CLASS_NAME__="VendorSharing.EmailShareDataValidator"}();
    
    
        
!function(){"use strict";var t=n$5.extend({init:function(){this._attachments=[],this.__s._jDyckxWE_C$5F$init.apply(this,arguments)},_windowInstanceId:null,openWindow:function(){return n$203.get("currentUser").isServiceActive("mail")?(this._windowInstanceId=n$233.openWindowApplication(this.get("_mailComposeURL"),"","width=810,height=677,status=no,toolbar=no"),void 0):(n$11("Trying to compose email for user without active mail service"),void 0)},closeWindow:function(){var t,e;this._windowInstanceId&&(t=n$233.windowApplications[this._windowInstanceId],t&&(e=t.window,e&&e.close()))},_mailComposeURL:n$4({readOnly:!0,get:function(){return"https://"+window.location.hostname+"/message/current/"+n$260()+"/#compose?willPM=true"}}),to:n$4(""),cc:n$4(""),bcc:n$4(""),subject:n$4(""),body:n$4(""),addAttachment:function(t,e,n,i){this.get("_attachments").push({fileName:t,type:e,size:n,url:i})},_attachments:null,addAttachments:function(t){this._attachments=this._attachments.concat(t)},populateFields:function(){this.get("hasValidAttachments")||n$11("You must supply property `type` (mime-type) for every attachment.");var t={to:this.get("to"),subject:this.get("subject"),body:this.get("body"),cc:this.get("cc"),bcc:this.get("bcc"),attachments:this._attachments};n$233.passWindowApplicationMessage(this._windowInstanceId,"populateFields",t)},hasValidAttachments:n$4({readOnly:!0,get:function(){var t=this._attachments;if(t)for(var e=0,n=t.length;n>e;e++)if(!t[e].type)return!1;return!0}}),__superMap:{_jDyckxWE_C$5F$init:"init"}});n$763=t,t.__QUALIFIED_CLASS_NAME__="COSK.ComposeEmailController"}();
    
    
        
!function(){"use strict";var e=n$760.extend({staticMembers:{vendorName:"Email",displayName:n$290("Share.DisplayNames.Email"),shareDataValidator:n$761,isEnabledForUser:n$4({get:function(){return!(!n$203.currentUser||!n$203.currentUser.isServiceActive("mail"))}}),notEnabledForUserString:n$290("Share.Validation.MailNotEnabled")},composeWindowIsOpen:n$9(!1),init:function(){this.__s._3p8U63SQTI6$Oo$init.apply(this,arguments),this.composeEmailController.openWindow(),this.composeWindowIsOpen=!0},composeEmailController:n$84(n$763.extend({body:n$4("<br><br>")})),shareDataDidChange:n$7("composeWindowIsOpen","isShareDataSubmittable","state",function(){this.composeWindowIsOpen&&this.isShareDataSubmittable&&this.state===this.constructor.READY&&this.submit()}),submit:function(){n$63.debug("Email Extension submitting data to compose window"),this.__s._3p8U63SQTI6$t1$submit.apply(this,arguments),n$105(this._populateComposeWindow).call(this),n$130(n$752(this._didPopulateComposeWindow,this),500)},_populateComposeWindow:function(){var e,t,n,i=this.composeEmailController,r=this.shareData,s=[];r.images&&(t=r.images.map(function(e){return n$762(e,"images")}),s.push.apply(s,t)),r.videos&&(n=r.videos.map(function(e){return n$762(e,"videos")}),s.push.apply(s,n)),e=s.map(function(e){return e?{fileName:e.fileName,url:e.url,type:e.mimeType,size:e.fileSize}:null}).filter(function(e){return!!e}),i.addAttachments(e),i.populateFields()},_didPopulateComposeWindow:function(){this.state=this.constructor.FINISHED,this.terminate()},terminate:function(){this.state!==this.constructor.FINISHED&&(this.composeEmailController.closeWindow(),this.composeWindowIsOpen=!1)
},__superMap:{_3p8U63SQTI6$Oo$init:"init",_3p8U63SQTI6$t1$submit:"submit"}});n$759=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.EmailExtension"}();
    
    
        
!function(){"use strict";var t=0,e=1,n=2,i={dispose:function(){this._throttledFunctionKeys.forEach(this._cleanUpThrottledFunctionForDispose,this),this.__s._1z3qfBIPpMz$8f$dispose.apply(this,arguments)},_throttledFunctionDataForKey:function(t){var e="_"+t+"_throttledFunctionData",n=this.hasOwnProperty(e)&&this[e];return n||(n=this[e]=new o(this[e])),n},_cleanUpThrottledFunctionForDispose:function(t){this._fireThrottledFunctionIfNeeded(t);var e=this._throttledFunctionDataForKey(t);clearTimeout(e.timeoutId)},_fireThrottledFunctionIfNeeded:function(i){var a=this._throttledFunctionDataForKey(i);clearTimeout(a.timeoutId);var s=a.status;if(s!==t)if(s===e)a.status=t;else if(s===n){a.status=e;var o=a.args;if(a.func.apply(this,o),a.status===e)for(var l=o.length,h=0;l>h;h++)o[h]=null;a.timeoutId=n$130(r,a.time,this,i)}},__superMap:{_1z3qfBIPpMz$8f$dispose:"dispose"}},r=function(t,e){t||n$11("ThrottledFunction lost its object.",arguments),t._fireThrottledFunctionIfNeeded(e)},a=n$28.extend({requiresSupport:i,func:null,throttleTime:100,shouldAlwaysDefer:!1,init:function(t,e,n){this.func=t,void 0!==e&&(this.throttleTime=e),void 0!==n&&(this.shouldAlwaysDefer=n),this.__s._1z3qfBIPpMz$10n$init.call(this)},initializeMember:function(i,a){i._throttledFunctionKeys=i._throttledFunctionKeys||[],i.hasOwnProperty("_throttledFunctionKeys")||(i._throttledFunctionKeys=i._throttledFunctionKeys.slice()),i._throttledFunctionKeys.push(a);var s=i._throttledFunctionDataForKey(a);s.time=this.throttleTime,s.shouldAlwaysDefer=this.shouldAlwaysDefer;var o=function(){var i=this._throttledFunctionDataForKey(a);(i.status!==t||(i.shouldAlwaysDefer||(i.status=e,i.func.apply(this,arguments)),i.timeoutId=n$130(r,i.time,this,a),i.shouldAlwaysDefer))&&(n$26(i.args,arguments,0,0),i.status=n)
},l=this.func;return s.func=function(){var t=l.apply(this,arguments);t&&o.apply(this,arguments)},o},__superMap:{_1z3qfBIPpMz$10n$init:"init"}}),s=function(){return a.create.apply(a,arguments)},o=function(t){this.args=[],t&&n$43(this,t)};o.prototype={status:t,args:null,timeoutId:0,time:-1,shouldAlwaysDefer:!1,func:null},n$791=i,n$792=s,a.__QUALIFIED_CLASS_NAME__="VSToCW.ThrottledFunction$597"}();
    
    
        
!function(){"use strict";function e(e,t,n){try{Object.defineProperty(e,t,n)}catch(i){Object.defineProperty(e,"_"+t,n)}}var t=n$754.RESOLVED.FULFILLED.name,n=n$754.RESOLVED.REJECTED.name,i={staticMembers:{isEnabledForBrowser:!!global.MessageChannel,url:n$9({set:function(e){return e},get:function(e){return!n$57(e)||/(\?|\&)env=/.test(e)?e:e+((-1===e.indexOf("?")?"?":"&")+"env="+location.host.split(".")[0])}}),domain:n$9({readOnly:!0,dependencies:["url"],get:function(e,t,n,i){return n$259.create(i.internalGetPath(this,t[0+n])).origin}}),capabilities:["allow-scripts","allow-forms","allow-popups","allow-same-origin"],proxiedMethods:{_loadSandboxDependencies:"loadSandboxDependencies"}},iframe:n$9(),_iframePointerEventsPort:n$9({didChange:function(e){var t=n$356(this._handleIframePointerEvent,this),n=this._ipep_lastPort;this._ipep_lastPort=e,n&&n$493(n,"message",t),e&&n$107(e,"message",t)}}),_handleIframePointerEvent:function(t){var n=this.iframePointerEventsTargetView,i=n.element,r={get:function(){return i}};e(t,"target",r),e(t,"currentTarget",r),e(t,"srcElement",r),n&&n.sendEvent(n$132.create({type:t.data,cwType:t.data,target:i,nativeEvent:t}))},iframePointerEventsTargetView:n$9(),loadDependencies:function(){var e=n$754.create(),t=this.iframe=document.createElement("iframe"),n=this.constructor.capabilities,i=this.constructor.url;return this._createProxyMethods(),n&&(t.sandbox=n.join(" ")),n$107(this.iframe,"load",this._iFrameDidLoad.bind(this,e)),n$107(this.iframe,"error",e.reject.bind(e)),t.classList.add("vendor-sandbox"),t.width=t.height=0,t.src=i,document.body.appendChild(t),n$754.all([this.__s._1go573Mo0_f$1gz$loadDependencies.apply(this,arguments),e])
},_iFrameDidLoad:function(e){var t=new MessageChannel;this._iframePointerEventsPort=t.port1,this._iframePointerEventsPort.start();var n=!1,i=function(){n||(n=!0,e.resolve())},r=function(){n||(n=!0,e.reject())};n$130(r,500),this._loadSandboxDependencies(t.port2).then(i).catch(r)},_createProxyMethods:function(){var e=this.constructor.proxiedMethods;for(var t in e)if(!Object.prototype.hasOwnProperty(t)){var n=e[t];this._createProxyMethod(t,n||t)}},_createProxyMethod:function(e,i){this[e]&&n$11(this.toString()+" already has "+e);var r=function(){var e=new MessageChannel,r=e.port1,s=this.iframe.contentWindow,a=this.constructor.domain,o=[e.port2],l=Array.prototype.map.call(arguments,function(e){return e instanceof MessagePort?(o.push(e),{_sandboxPortPlaceholder:o.length-1}):e}),u=n$754.create();u.retain();var c=function(e){var s=e&&e.data?e.data:null;switch((!s||!s.state||s.state!==t&&s.state!==n)&&(s={state:n,response:{error:{type:"app",message:"Invalid MessageChannel response from Sandbox received."}}}),s.state){case t:u.resolve(s.response),s.response&&!s.response.isRecordStatUnnecessary&&this._recordFulfilledPromise(i,s.response);break;case n:u.reject(s.response),s.response&&!s.response.isRecordStatUnnecessary&&this._recordRejectedPromise(i,s.response)}r.close(),u.release()};return n$107(r,"message",n$752(c,this),!0),r.start(),s.postMessage({targetMethod:i,arguments:l},a,o),u}.bind(this);this[e]=n$105(r)},_recordFulfilledPromise:function(e){var t=n$203.cloudOSService;if(t){var n=n$249(e)+"PromiseFulfilled";t.recordStat(n,{message:n+" from Sandboxed iframe via MessageChannel"})}},_recordRejectedPromise:function(e,t){var n=n$203.cloudOSService;
if(n){var i=n$249(e)+"PromiseRejected",r=t.error&&t.error.message?t.error.message:"No error message provided";n.recordStat(i,{errorType:i,errorTitle:r})}},terminate:function(){var e=this.iframe;e&&e.parentNode&&e.parentNode.removeChild(e),this.__s._1go573Mo0_f$3UG$terminate.apply(this,arguments)},__superMap:{_1go573Mo0_f$1gz$loadDependencies:"loadDependencies",_1go573Mo0_f$3UG$terminate:"terminate"}};n$793=i}();
    
    
        
!function(){"use strict";function e(e,t,n,i,r,s){s=Math.min(i/2,r/2,void 0===s?1/0:s),e.beginPath(),e.moveTo(t+s,n),e.arcTo(t+i,n,t+i,n+r,s),e.arcTo(t+i,n+r,t,n+r,s),e.arcTo(t,n+r,t,n,s),e.arcTo(t,n,t+i,n,s),e.closePath(),e.fill()}var t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"canvas",children:[],classes:["cw-spinner-view"],styles:{height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"height"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"size",attributes:{},unit:"px",property:"width"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"isVisible",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}},attributes:{title:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"tooltip",attributes:{},attribute:"title"}}}},size:n$9(32),color:"#000000",image:n$9({set:function(e){if("string"==typeof e){var t=new Image;return t.src=e,t}return e}}),tooltip:n$9(null),period:600,tickCount:12,tickReach:.54375,tickWidth:(12-90/255)/64,isVisible:n$9(!0),isAnimating:n$9({readOnly:!0,dependencies:["isVisible","isAttached"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])}}),drawStep:function(e){this._currentStep=e;var t=this._canvas,n=this._context,i=this.size*n$110.sharedInstance.devicePixelRatio;i!==t.width||i!==t.height?t.width=t.height=i:n.clearRect(0,0,i,i),this._backingSize=i,n.save(),n.translate(i/2,i/2),n.rotate(2*e*Math.PI/this.tickCount),this.image?this._drawImageContent():this._drawGeneratedContent(),n.restore()},drawTick:function(t,n){var i=this.tickReach*n/2,r=this.tickWidth*n/2;
e(t,-r/2,-n/2,r,i)},_tickOpacities:{12:[1,.90196,.76078,.65098,.54118,.43137,.38039,.32157,.25882,.21961,.2,.16863]},_animationFrameId:0,_backingSize:0,init:function(){this.__s._2fKcH6hKGX1$276$init.apply(this,arguments),this._canvas=this.element,this._context=this._canvas.getContext("2d")},dispose:function(){global.cancelAnimationFrame(this._animationFrameId),this.__s._2fKcH6hKGX1$2BM$dispose.apply(this,arguments)},_startOrStopAnimation:n$7("isAnimating",function(e){if(e){if(this._animStartTime)return;this._animStartTime=Date.now(),this.drawStep(0),this._tick()}else this._animStartTime=null,this.isInitialized&&this.drawStep(0)}),_tick:function(){if(this.isAnimating){this._animationFrameId=n$444(this._tick.bind(this));var e=this.tickCount,t=this.period/e,n=Date.now()-this._animStartTime,i=(0|n/t)%e;i!==this._currentStep&&this.drawStep(i)}},_drawImageContent:function(){var e=this.image,t=this._context,n=this._backingSize;t.drawImage(e,-n/2,-n/2,n,n)},_drawGeneratedContent:function(){var e=this._context,t=this._backingSize,n=this.tickCount;e.fillStyle=this.color;for(var i=0;n>i;i++)e.globalAlpha=this._opacityForTickOfCount(i,n),this.drawTick(e,t),e.rotate(-2*Math.PI/n);e.globalAlpha=1},_opacityForTickOfCount:function(e,t){var n=this._tickOpacities[t];if(n)return n[e];var i=2/t,r=e/(t-1),s=Math.pow(r,.6),a=.5-.5*Math.cos(s*Math.PI),o=.7*a+.3*s;return o*i+1*(1-o)},__superMap:{_2fKcH6hKGX1$276$init:"init",_2fKcH6hKGX1$2BM$dispose:"dispose"}});n$765=t,t.__QUALIFIED_CLASS_NAME__="CW.UI.SpinnerView"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$10,n$29],nextResponder:n$4(),sendEvent:function(){var e=n$27(arguments);return e.unshift(this),n$134.apply(void 0,e)},handleEvent:function(e){for(var t=!1,n=arguments.length,i=1,r=[];n>i;i++)r[i-1]=arguments[i];var s=this[e];if(s&&(t=s.apply(this,r)),!t){var o=this._specialEventHandlers;o&&(s=o[e])&&(t=s.apply(this,r))}return t},_registeredShortcuts:n$84(Object),registerShortcutKeyCombo:function(e,t,n){var i=n$129.create(e),r=i.toString(),s=this._registeredShortcuts;s[r]&&n$11("Shortcut already registered for `"+e+"` on "+this),t||n$11("Cannot register shortcut for `"+e+"`, because no action was provided");var o=typeof t;"function"!==o&&("string"===o?(t=this[t],"function"!=typeof t&&n$11("Cannot register shortcut for `"+e+"`, because the action is not a function")):n$11("Cannot register shortcut for `"+e+"`, because the action is not a function")),s[r]={action:t,context:n};var a=this._specialEventHandlers||(this._specialEventHandlers={});a.keyDown=this.triggerShortcutIfExists},triggerShortcutIfExists:function(){var e=n$133.get("sharedInstance"),t=this._registeredShortcuts,n=e.get("activeKeySequence"),i=n.toString(),r=t[i];return r?(n.clear(),r.action.call(this,r.context),!0):!1},getPointerCapture:function(e){return t[e]},setPointerCapture:function(e){t[e]=this},releasePointerCapture:function(e){t[e]===this&&delete t[e]},pointerOver:null,pointerDown:null,pointerMove:null,pointerUp:null,pointerOut:null,pointerEnter:null,pointerLeave:null,wheel:null},t={};n$766=e}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$766],_self:n$9(function(){return this}),canShowUI:n$9(!0),extensionViewController:n$9({downstreamBindings:{extension:"(owner)._self",nextResponder:"(owner)._self"}}),spinnerViewController:n$9(n$84(n$194.extend({viewClass:n$765.extend({color:"white",size:64})}))),show:function(){var t=this._popupVC;t.show.apply(t,arguments)},hide:function(){var t=this._popupVC;t.hide.apply(t,arguments)},isActiveInUI:n$9(n$14("_popupVC.isActivePane")),terminate:function(){this.hide(),this.__s._46vSmE3IbVA$dv$terminate.apply(this,arguments)},_popupVC:n$9(n$84(n$399.extend({owner:n$9(),viewClass:n$16({additionalClassNames:["vendor-extension-modal-root-view"]}),contentController:n$9({readOnly:!0,dependencies:["owner.canShowUI","owner.extensionViewController","owner.spinnerViewController"],get:function(t,e,n,i){return i.internalGetPath(this,e[0+n])?i.internalGetPath(this,e[1+n]):i.internalGetPath(this,e[2+n])}}),duration:200,show:function(){if(this._hideTimeout&&(clearTimeout(this._hideTimeout),this._hideTimeout=null,this.owner.release(),this.release()),!this.isAttached){var t=this.view.style;t.set("opacity",0).set("transition","opacity "+this.duration+"ms"),this.__s._46vSmE3IbVA$120$show.apply(this,arguments),n$444(function(){this._hideTimeout||this.view.style.set("opacity",1)}.bind(this))}},init:function(){this.hide=this._hideOverride.bind(this,this.hide),this.__s._46vSmE3IbVA$194$init.apply(this,arguments)},_hideOverride:function(t){!this._hideTimeout&&this.isAttached&&(this.view.style.set("opacity",0),this.retain(),this.owner.retain(),this._hideTimeout=n$130(function(e){t.apply(this,e),this._hideTimeout=null,this.owner.release(),this.release()
}.bind(this,arguments),this.duration))},__superMap:{_46vSmE3IbVA$120$show:"show",_46vSmE3IbVA$194$init:"init"}}))),__superMap:{_46vSmE3IbVA$dv$terminate:"terminate"}};n$794=t}();
    
    
        
!function(){"use strict";function e(e){e&&(Array.isArray(e)||n$32(e,n$99))||n$11("CW.Utils.appendArrays expects an array and got: "+e);for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t],r=e.length,s=i.length,o=0,a=r;if(n$32(i,n$99))for(;s>o;o++,a++)e.splice(a,0,i.objectAt(o));else for(;s>o;o++,a++)e.splice(a,0,i[o])}return e}n$767=e}();
    
    
        
!function(){"use strict";var e="not_asked",t="unknown",n="not_authorized",i="connected",r={APP_ALBUM_TYPE:"app",TIMELINE_ALBUM_TYPE:"timeline",EVERYONE_PRIVACY_TYPE:"EVERYONE",FRIENDS_PRIVACY_TYPE:"ALL_FRIENDS",ONLY_ME_PRIVACY_TYPE:"SELF",FRIENDS_EXCEPT_ACQUAINTANCES_PRIVACY_TYPE:"FRIENDS_EXCEPT_ACQUAINTANCES",EVERYONE_ALBUM_PRIVACY:"everyone",FRIENDS_ALBUM_PRIVACY:"friends",ONLY_ME_ALBUM_PRIVACY:"self",FRIENDS_EXCEPT_ACQUAINTANCES_ALBUM_PRIVACY:"friends_except_acquaintances",privacyTypeForAlbumPrivacy:function(e){return s[e]}},s={};s[r.EVERYONE_ALBUM_PRIVACY]=r.EVERYONE_PRIVACY_TYPE,s[r.FRIENDS_ALBUM_PRIVACY]=r.FRIENDS_PRIVACY_TYPE,s[r.ONLY_ME_ALBUM_PRIVACY]=r.ONLY_ME_PRIVACY_TYPE,s[r.FRIENDS_EXCEPT_ACQUAINTANCES_ALBUM_PRIVACY]=r.FRIENDS_EXCEPT_ACQUAINTANCES_PRIVACY_TYPE;var a=n$5.extend(n$10,{staticMembers:{REQUIRED_APP_PERMISSIONS:["public_profile","publish_actions"],ADDITIONAL_APP_PERMISSIONS:["read_custom_friendlists","user_photos"],ALL_APP_PERMISSIONS:n$4({readOnly:!0,defaultValue:function(){var e=[];return n$767(e,this.REQUIRED_APP_PERMISSIONS,this.ADDITIONAL_APP_PERMISSIONS),e}})},isLoginStateKnown:n$9({readOnly:!0,dependencies:["isLoggedOut","isLoggedIn","isLoggedInAndAuthorized"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])||i.internalGetPath(this,t[2+n])}}),isLoggedOut:n$9({readOnly:!0,dependencies:["_loginState"],get:function(e,n,i,r){return r.internalGetPath(this,n[0+i])===t}}),isLoggedIn:n$9({readOnly:!0,dependencies:["_loginState"],get:function(e,t,r,s){return s.internalGetPath(this,t[0+r])===n||s.internalGetPath(this,t[0+r])===i
}}),isLoggedInAndAuthorized:n$9({readOnly:!0,dependencies:["_loginState"],get:function(e,t,n,r){return r.internalGetPath(this,t[0+n])===i}}),hasRequiredAppPermissions:n$9({readOnly:!0,dependencies:["_grantedPermissions"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=this.constructor.REQUIRED_APP_PERMISSIONS,a=!0;return s.forEach(function(e){-1===r.indexOf(e)&&(a=!1)}),a}}),id:n$9(),displayName:n$9({get:function(e){return String(e||"")},set:n$192}),pictureURL:n$9(),appAlbum:n$9({readOnly:!0,dependencies:["albums"],get:function(){var e=this.albums.filter(function(e){return e.type===r.APP_ALBUM_TYPE});return e.length?e[0]:null}}),albums:n$9({get:function(e){return Array.isArray(e)?e:[]},set:n$192}),privacyOptions:n$9({get:function(e){return Array.isArray(e)?e:[]},set:n$192}),defaultPrivacyOption:n$9({readOnly:!0,dependencies:["privacyOptions"],get:function(){var e=this.privacyOptions.filter(function(e){return e.is_currently_selected});return e.length?e[0]:null}}),toString:function(){var e=[];return e.push("isLoggedOut: "+this.isLoggedOut),e.push("isLoggedIn: "+this.isLoggedIn),e.push("isLoggedInAndAuthorized: "+this.isLoggedInAndAuthorized),e.push("hasRequiredAppPermissions: "+this.hasRequiredAppPermissions),e.push("id: "+this.id),e.push("displayName: "+this.displayName),e.push("album count: "+this.albums.length),e.push("has app album: "+!!this.appAlbum),e.push("privacy options count: "+this.privacyOptions.length),e.join("\n")},_loginState:n$9(e),_grantedPermissions:n$9({readOnly:!0,dependencies:["_permissions"],get:function(){return this._permissions.filter(function(e){return"granted"===e.status
}).map(function(e){return e.permission})}}),_declinedPermissions:n$9({readOnly:!0,dependencies:["_permissions"],get:function(){return this._permissions.filter(function(e){return"declined"===e.status}).map(function(e){return e.permission})}}),_permissions:n$9(n$84(Array))});n$780=r,n$795=a,a.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUser"}();
    
    
        
!function(){"use strict";var e=n$753.extend({images:n$16({maxLength:50,allowsGeo:!1}),videos:n$16({maxLength:0,tooManyString:n$290("Share.Validation.VideoSharingDisabled"),allowsGeo:!1})});n$796=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookShareDataValidator"}();
    
    
        
!function(){"use strict";function t(){return n.define.apply(n,arguments)}function e(t,e,n){var i=t.length;n.length!==i&&(n.length=i);for(var r=0;i>r;r++)n[r]=e(t[r],r);return n}var n=n$8.extend({readOnly:!0,desiredOutputType:null,source:null,retainsInputs:!0,retainsOutputs:!0,outputForInput:function(t){return t},inputDidEnter:function(){},inputDidExit:function(){},outputDidEnter:function(){},outputDidExit:function(){},inputDidMutate:function(t,e,n,i){return this[i._key_lastReturnedValueWasObservableArray]?(this[i._key_lastReturnedValue].splice(n,1,e),void 0):(this.propertyChanged(i.key),void 0)},init:function(t){(t.dependencies||!t.source)&&n$11("Must include exactly one dependency binding at `source` on MappedArrayProperty."),t.dependencies=[t.source],delete t.source,this.__s._2BR4I4Y1vop$2Q6$init.apply(this,arguments)},wasRegistered:function(t,e){var n=n$24(t);this._inputRetainReasonName="input to MappedArrayProperty `"+e+"` on "+n,this._outputRetainReasonName="output from MappedArrayProperty `"+e+"` on "+n;var i="_mappedArrayProperty_at_"+e+"_";this._key_outputsByInputGuid=i+"outputsByInputGuid",this._key_inputsByInputGuid=i+"inputsByInputGuid",this._key_outputCountsByOutputGuid=i+"outputCountsByOutputGuid",this._key_lastReadInputGuids=i+"lastReadInputGuids",this._key_lastReturnedValue=i+"lastReturnedValue",this._key_lastReturnedValueWasObservableArray=i+"lastReturnedValueWasObservableArray",this._key_lastReadInputIndices=i+"lastReadInputIndices",this._key_notifyChangeFunc=i+"notifyChangeFunc",this.__s._2BR4I4Y1vop$2wp$wasRegistered.apply(this,arguments)},get:function(t,n,r,a){var s=a,o=s.internalGet(this,n[0+r]),l=Array.isArray(o)?Array:o?o.constructor:null,h=null;
if(n$33(o)){h=n$768.getInstance();for(var u=h.length=o.length;u--;)h[u]=o.objectAt(u);o=h}var d=this[s._key_lastReadInputGuids];d&&(this[s._key_lastReadInputGuids]=null);var c=this[s._key_lastReturnedValue];c&&(i.disposeInstance(c),this[s._key_lastReturnedValue]=c=null),this[s._key_lastReturnedValueWasObservableArray]=void 0;var _=this[s._key_lastReadInputIndices];_&&(n$769.disposeInstance(_),this[s._key_lastReadInputIndices]=_=null);var p=!1;o||(p=!0,o=n$768.getInstance());var g,f=e(o,n$22,n$768.getInstance()),v=s.desiredOutputType||l,m=i.getInstanceOf(v),$=this[s._key_outputsByInputGuid]||(this[s._key_outputsByInputGuid]={}),y=this[s._key_inputsByInputGuid]||(this[s._key_inputsByInputGuid]={}),I=this[s._key_outputCountsByOutputGuid]||(this[s._key_outputCountsByOutputGuid]={});I=I;var w=n$32(m,n$158);w&&m.beginBatchedChanges();for(var S=n$769.getInstance(),C=0;C<o.length;C++){g=f[C];var A;if($.hasOwnProperty(g))A=$[g];else{var b=y[g]=o[C];A=$[g]=s.outputForInput.call(this,b),s._inputMayHaveEntered.call(this,s,b),s._outputMayHaveEntered.call(this,s,A)}v===Array?m[C]=A:m.setIndex(C,A),S[g]=!0}if(w&&m.endBatchedChanges(),d){for(C=0;C<d.length;C++)g=d[C],S[g]||(s._outputMayHaveExited.call(this,s,$[g]),delete $[g],s._inputMayHaveExited.call(this,s,y[g]),delete y[g]);n$768.disposeInstance(d)}if(n$769.disposeInstance(S),h&&n$768.disposeInstance(h),p&&(n$768.disposeInstance(f),i.disposeInstance(m),f=m=null,n$768.disposeInstance(o),o=null),this[s._key_lastReadInputGuids]=f,this[s._key_lastReturnedValue]=m,m){this[s._key_lastReturnedValueWasObservableArray]=w;var D=this[s._key_lastReadInputIndices]=n$769.getInstance();
for(C=0;C<f.length;C++)D[f[C]]=C}return m},_inputDidMutate:function(t,e){var n=n$22(e),i=this[t._key_outputsByInputGuid],r=i[n],a=t.outputForInput.call(this,e);if(a!==r){var s=this[t._key_lastReadInputIndices][n];i[n]=a,t._outputMayHaveExited.call(this,t,r),t._outputMayHaveEntered.call(this,t,a),t.inputDidMutate.call(this,e,a,s,t)}},_inputMayHaveEntered:function(t,e){var n=this[t._key_notifyChangeFunc]||(this[t._key_notifyChangeFunc]=t._inputDidMutate.bind(this,t));t.retainsInputs&&n$33(e)&&e.retain(t._inputRetainReasonName),t.inputDidEnter.call(this,e,n)},_inputMayHaveExited:function(t,e){t.inputDidExit.call(this,e),t.retainsInputs&&n$33(e)&&e.release(t._inputRetainReasonName)},_outputMayHaveEntered:function(t,e){var n=this[t._key_outputCountsByOutputGuid],i=n$22(e),r=n[i]||0;n[i]=r+1,r>0||(t.retainsOutputs&&n$33(e)&&e.retain(t._outputRetainReasonName),t.outputDidEnter.call(this,e))},_outputMayHaveExited:function(t,e){var n=this[t._key_outputCountsByOutputGuid],i=n$22(e),r=n[i]||0;n[i]=r-1,1===r&&delete n[i],r||n$11("An output that was never in a mappedArrayProperty could not possibly have exited."),r>1||(t.outputDidExit.call(this,e),t.retainsOutputs&&n$33(e)&&e.release(t._outputRetainReasonName))},__superMap:{_2BR4I4Y1vop$2Q6$init:"init",_2BR4I4Y1vop$2wp$wasRegistered:"wasRegistered"}}),i={getInstanceOf:function(t){return this._getPoolForArrayClass(t).getInstance()},disposeInstance:function(t){var e=this._getPoolForArrayClass(t.constructor);n$32(t,n$158)?e.autodispose(t):e.disposeInstance(t)},_getPoolForArrayClass:function(t){if(!n$34(t))return n$768;var e=n$22(t);return this._arrayPools[e]||(this._arrayPools[e]=n$751.extend({createInstance:function(){return t.create()
},disposeInstance:function(t){t.clear(),this.__s._2BR4I4Y1vop$6w2$disposeInstance.apply(this,arguments)},__superMap:{_2BR4I4Y1vop$6w2$disposeInstance:"disposeInstance"}}).create())},_arrayPools:{}};n$982=n,n$770=t,n.__QUALIFIED_CLASS_NAME__="VSToCW.MappedArrayProperty"}();
    
    
        
!function(){"use strict";var e=n$8.extend({staticMembers:{create:function(e){return n$57(e)&&(e={viewsOutlet:e}),e.defaultValue||(e.defaultValue=n$84(n$158)),this.__s._4Nb299dp_Hy$HL$create.call(this,e)},__superMap:{_4Nb299dp_Hy$HL$create:"create"}},viewsOutlet:null,initializeMember:function(e,t){var n=this.__s._4Nb299dp_Hy$OL$initializeMember.apply(this,arguments),i="_multiChildViewControllerProperty_at_"+t+"_",r=i+"viewsArray",s="_parent"+i+"viewListener",o=i+"viewArrayObserver",a=i+"enteringChildVCs",l=i+"exitingChildVCs";e.registerMetadata(r,n$770({source:t,outputForInput:function(e){return e.view},inputDidEnter:function(e,t){e[s]=e.listen("view",t.bind(void 0,e)),(this[a]||(this[a]=n$768.getInstance())).push(e),e.willMoveToParentViewController(this)},inputDidExit:function(e){e[s].disconnect(),delete e[s],(this[l]||(this[l]=n$768.getInstance())).push(e),e.willMoveToParentViewController(null)}}));var h=this.viewsOutlet;return e.registerMetadata(o,n$7("view",r,r+".contentsDidChange",function(e,t){if(e){var n=t?t.length:0,i=this.view[h];i.beginBatchedChanges(),i.clear();for(var r=0;n>r;r++)i.setIndex(r,t.objectAt(r));i.endBatchedChanges();var s=this[a],o=this[l],u=s?s.length:0,d=o?o.length:0;for(r=0;u>r;r++){var c=s[r];this.addChildViewController(c),c.didMoveToParentViewController(this)}for(r=0;d>r;r++){var _=o[r];this.removeChildViewController(_),_.didMoveToParentViewController(null)}s&&n$768.disposeInstance(s),o&&n$768.disposeInstance(o),this[a]=this[l]=null}})),n},__superMap:{_4Nb299dp_Hy$OL$initializeMember:"initializeMember"}}),t=function(){return e.create.apply(e,arguments)
};n$983=e,n$775=t,e.__QUALIFIED_CLASS_NAME__="VSToCW.UI.MultiChildViewControllerProperty"}();
    
    
        
!function(){"use strict";var e={init:function(){var e=this._revertablePropertyValues={},t=this.getMetadataByType(n$3);for(var n in t){var i=t[n];i&&i.isRevertable&&(e[n]=this[n])}this.__s._3kcNiorwWQs$Gx$init.apply(this,arguments)},revertRevertableProperties:function(e){var t=this._revertablePropertyValues;for(var n in t)t.hasOwnProperty(n)&&(e&&e.hasOwnProperty(n)||(this[n]=t[n]))},__superMap:{_3kcNiorwWQs$Gx$init:"init"}};n$771=e}();
    
    
        
!function(){"use strict";var e=n$625.extend(n$771,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"label",attributes:{}}],classes:["cw-menu-item-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isHighlighted",truevalue:"cw-highlighted",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}],styles:{font:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"fontStyle",attributes:{},unit:null,property:"font"},"padding-top":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"verticalLabelOffset",attributes:{},unit:"px",property:"padding-top"},"box-sizing":"border-box"}}},content:n$9({didChange:function(e){if(e){this.revertRevertableProperties(e);for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}}}),label:n$9({isRevertable:!0}),value:n$9({isRevertable:!0}),isDisabled:n$9({defaultValue:!1,isRevertable:!0}),wantsHighlight:n$9({defaultValue:!1,isRevertable:!0}),isHighlighted:n$9({readOnly:!0,dependencies:["isDisabled","wantsHighlight"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])&&!i.internalGetPath(this,t[0+n])}})}),t=n$625.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[],classes:["cw-menu-separator-view"]}},isDisabled:n$9(!0)});n$772=e,n$773=t,e.__QUALIFIED_CLASS_NAME__="VSToCW.UI.MenuItemView",t.__QUALIFIED_CLASS_NAME__="VSToCW.UI.MenuSeparatorView"}();
    
    
        
!function(){"use strict";function e(e){if(a[e])return a[e];document.body.appendChild(s),o.set("font",e);var t=o.get("font-size");return document.body.removeChild(s),a[e]=parseInt(t)}function t(e,t){var n=n$22(e)+":"+t;if(a[n])return a[n];for(var i="",r=0;r<e.length;r++)r&&(i+="\n"),i+=e[r].label;document.body.appendChild(s),o.set("font",t),s.textContent=i;var l=Math.ceil(s.getBoundingClientRect().width);return s.innerHTML="",document.body.removeChild(s),a[n]=l}var n=n$661.extend({viewClass:n$16({additionalClassNames:n$16(["cw-submenu-view"]),hasHorizontalScrollIndicator:!1,hasVerticalScrollIndicator:!1,fontStyle:n$9(),verticalLabelOffsetInItemViews:n$9(),scrollBy:function(e,t){if(!this.viewController.isSelectionFinalized){if(!t||this._isAdjustingForScroll)return this.__s._jBKIDNqK6J$Ph$scrollBy.apply(this,arguments);this._isAdjustingForScroll=!0;var n=this.viewController._possiblyAdjustLayoutForScrollBy(t);if(this._isAdjustingForScroll=!1,!n)return this.__s._jBKIDNqK6J$Vm$scrollBy.apply(this,arguments)}},pointerUp:function(){return this.__s._jBKIDNqK6J$ep$pointerUp.apply(this,arguments),!1},pointerMove:function(){return this.__s._jBKIDNqK6J$mz$pointerMove.apply(this,arguments),!1},__superMap:{_jBKIDNqK6J$Ph$scrollBy:"scrollBy",_jBKIDNqK6J$Vm$scrollBy:"scrollBy",_jBKIDNqK6J$ep$pointerUp:"pointerUp",_jBKIDNqK6J$mz$pointerMove:"pointerMove"}}),view:n$9({downstreamBindings:{fontStyle:"(owner).fontStyle",verticalLabelOffsetInItemViews:"(owner).verticalLabelOffsetInItemViews"}}),isSelectionFinalized:n$9(!1),options:n$9(),shouldIgnorePointerUp:n$9(!1),finalLayout:n$9(n$84(n$106)),anchorLayout:n$9(),spaceLayout:n$9(n$109.sharedInstance.window),layoutModeToAnchor:n$9(),targetedOptionValue:n$9(),fontStyle:n$9(),requiredInset:n$9(15),menuItemHeight:n$9({get:function(t){return t||Math.ceil(1.5*e(this.fontStyle))
}}),verticalLabelOffsetInItemViews:n$9({readOnly:!0,dependencies:["menuItemHeight","anchorLayout.height"],get:function(e,t,n,i){return 0|i.internalGetPath(this,t[0+n])/2-i.internalGetPath(this,t[1+n])/2}}),totalVerticalOffset:n$9({readOnly:!0,dependencies:["verticalLabelOffsetInItemViews"],get:function(e,t,n,i){return top.it=this,-i.internalGetPath(this,t[0+n])}}),desiredSize:n$9(n$84(n$556.extend({owner:n$9(),width:n$9({readOnly:!0,dependencies:["owner.options","owner.fontStyle"],get:function(e,n,i,r){return t(r.internalGetPath(this,n[0+i]),r.internalGetPath(this,n[1+i]))}}),height:n$9({readOnly:!0,dependencies:["owner.menuItemHeight"],get:function(e,t,n,i){return this.owner.options.length*i.internalGetPath(this,t[0+n])}})}))),viewClassForItem:function(e){return e.isSeparator?r:i},collection:n$9({readOnly:!0,dependencies:["options"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return Array.isArray(r)?n$158.create(r):r}}),rowHeight:n$9({readOnly:!0,binding:"menuItemHeight"}),_doInitialLayout:n$7("options","desiredSize","spaceLayout","anchorLayout","layoutModeToAnchor","targetedOptionValue","requiredInset","isAttached",function(e,t,n,i,r,s,o,a){if(a){var l=0|parseFloat(this.view.style.get("padding-top")),h=0|parseFloat(this.view.style.get("padding-left")),u=0|parseFloat(this.view.style.get("padding-right")),d=0|parseFloat(this.view.style.get("padding-bottom")),c=o+l,_=o+d,g=e.map(function(e){return e.value}).indexOf(s),p=-1!==g,f=p?g:0,$=i.top-f*this.menuItemHeight+this.totalVerticalOffset-l;p||($+=this.menuItemHeight);var m=Math.max(c,$),v=(e.length-g)*this.menuItemHeight+(i.top-m-l)+d+l+this.totalVerticalOffset,y=Math.min(n.height-_-m,v),I=this.finalLayout;
n$275.begin().set(I,"x",i.left-h).set(I,"y",m).set(I,"width",t.width+h+u).set(I,"height",y).end(),this._firstCellItemIndex=f,this._firstCellTopPosition=f*this.menuItemHeight-(m-$),this._valueToAutohighlight=s,this._requiredTopInset=c,this._requiredBottomInset=_,this._paddingTop=l,this._paddingLeft=h,this._paddingRight=u,this._paddingBottom=d,this.measureViewport()}}),measureViewport:function(){var e=this.isAttached&&this.getPath("view.element");if(e){var t=e.offsetWidth,n=e.offsetHeight-(this._paddingTop+this._paddingBottom||0);(this.viewportWidth!==t||this.viewportHeight!==n)&&(n$275.begin().set(this,"viewportWidth",t).set(this,"viewportHeight",n).end(),this.update())}},_possiblyAdjustLayoutForScrollBy:function(e){var t=this.finalLayout.y,n=this.finalLayout.bottom,i=this._requiredTopInset,r=this.spaceLayout.height-this._requiredBottomInset;return t&&i&&n&&r?e>0&&t>i?(this.finalLayout.y=Math.max(i,t-e),this.finalLayout.height=n-Math.max(i,t-e),this.measureViewport(),!0):0>e&&r>n?(this.finalLayout.height=Math.min(r,n-e)-t,this.measureViewport(),!0):!1:!1},renderFinalLayout:n$7("finalLayout.top","finalLayout.left","finalLayout.width","finalLayout.height",function(e,t,n,i){this.view.style.set("top",e).set("left",t).set("width",n).set("height",i)}),update:function(){var e=this.__s._jBKIDNqK6J$4Uv$update.apply(this,arguments);return this._highlightHoveredItemView(),e},_pointerPosition:n$84(n$82.extend({subtractPoint:function(e){var t=this._reusablePoint||(this._reusablePoint=n$82.create());return t.x=this.x-e.x,t.y=this.y-e.y,t}})),pointerMoveAtCoords:function(e,t){this._savePointerPosition(e,t),this._highlightHoveredItemView()
},pointerUpAtCoords:function(e,t){if(this._savePointerPosition(e,t),!this.shouldIgnorePointerUp){var n=this._highlightHoveredItemView();n&&(n.isDisabled?this.sendEvent("dismiss"):this._finalizeSelectionWithView(n))}},_savePointerPosition:function(e,t){var n=this._pointerPosition;n.x=e,n.y=t},_highlightHoveredItemView:function(){if(!this.isSelectionFinalized){var e=this._pointerPosition.subtractPoint(this.finalLayout);e.y-=this._paddingTop;for(var t=this.layoutController.visibleCells,n=t.slice().map(this.layoutController.presenter.viewForCell.bind(this.layoutController.presenter)),i=null,r=0;r<n.length;r++){var s=n[r],o=t.objectAt(r),a=o.containsPoint(e);a!==s.wantsHighlight&&(s.wantsHighlight=a),a&&(i=s)}return i}},_finalizeSelectionWithView:function(e){this.isSelectionFinalized||(this.isSelectionFinalized=!0,e.wantsHighlight=!1,n$130(n$752(this._blinkOfViewDidFinish,this,e),1e3*(5/60)))},_blinkOfViewDidFinish:function(e){e.wantsHighlight=!0,n$130(n$752(this.sendEvent,this,"userDidSelectMenuItem",e.value),1e3*(4/60))},layoutDelegate:n$9({downstreamBindings:{rowHeight:"(owner).rowHeight"},defaultValue:n$16({setUpFirstCell:n$103.isOldPhotosCW?function(e,t){if(void 0===this.owner._firstCellItemIndex)return null;if(!t)return null;var n=t.createIteratorAt(this.owner._firstCellItemIndex||0).retain();if(!n.get("isValid"))return n.release(),null;var i=e.cellForIterator(n).retain();return n.release(),i.set("x",0),i.set("y",this.owner._firstCellTopPosition||0),i.set("width",this.widthForCell(e,i)),i.set("height",this.heightForCell(e,i)),i}:function(e,t){if(void 0===this.owner._firstCellItemIndex)return null;
if(!t)return null;var n=t.createIteratorAt(this.owner._firstCellItemIndex||0).retain();if(!n.isValid)return n.release(),null;var i=e.cellForIterator(n).retain();return n.release(),this.layOutCellInDirection(e,i,1,this.owner._firstCellTopPosition||0),i.autorelease()}})}),presenter:n$84(n$624.extend({cellDidMove:function(e){var t=this.__s._jBKIDNqK6J$6aQ$cellDidMove.apply(this,arguments);if(!this.owner._valueToAutohighlight)return t;var n=this.viewForCell(e);return n?(n.value===this.owner._valueToAutohighlight&&(this.owner._valueToAutohighlight=null,this.owner._pointerPosition.x=0|e.x+e.width/2+this.owner.finalLayout.x,this.owner._pointerPosition.y=0|e.y+e.height/2+this.owner.finalLayout.y),t):t},itemViewClassForItem:function(e){return this.owner.viewClassForItem(e.iterator.value)},__superMap:{_jBKIDNqK6J$6aQ$cellDidMove:"cellDidMove"}})),__superMap:{_jBKIDNqK6J$4Uv$update:"update"}}),i=n$772.extend({fontStyle:n$14("parent.fontStyle"),verticalLabelOffset:n$14("parent.verticalLabelOffsetInItemViews")}),r=n$773,s=document.createElement("div"),o=n$160(s),a={};o.set("position","absolute").set("white-space","pre"),n$776=n,n.__QUALIFIED_CLASS_NAME__="VSToCW.UI.SubmenuViewController",i.__QUALIFIED_CLASS_NAME__="VSToCW.UI._MenuItemView$609"}();
    
    
        
!function(){"use strict";var e=n$74("MENU_LAYOUT",function(e){e("PULLDOWN"),e("SUBMENU"),e("TARGET_OPTION")}),t=n$399.extend({viewClass:n$16({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"MULTIVIEWOUTLET",tagname:"views",children:[],name:"submenuViews"}],classes:["cw-menu-view"]}}},fadeOut:function(e){this._isFadingOut||(this._isFadingOut=!0,this.style.set("opacity",1).set("transition","opacity 300ms"),n$130(n$752(this.style.set,this.style,"opacity",0)),n$130(e,300))},wheel:function(e){e&&e.nativeEvent&&e.nativeEvent.preventDefault()}}),submenuViewControllers:n$775("submenuViews"),submenuRects:n$770({desiredOutputType:Array,source:"submenuViewControllers",outputForInput:function(e){return e.finalLayout},inputDidEnter:function(e,t){e._menuViewController_submenuRects_rectListener=e.listen("finalLayout",t.bind(void 0,e)).retain()},inputDidExit:function(e){e._menuViewController_submenuRects_rectListener.disconnect(),e._menuViewController_submenuRects_rectListener.release()}}),options:n$9(),anchorView:n$9(),anchorLayout:n$9({dependencies:["_anchorLayoutMeasurer.targetLayout"],get:function(e,t,n,i){return e||i.internalGetPath(this,t[0+n])},writeDependencies:[],set:n$192}),layoutModeToAnchor:n$4(e.PULLDOWN),targetedOptionValue:n$4(),fontStyle:n$4(),_createInitialMenu:n$7("options",function(e){e||n$11("Must provide `options` with a CW.UI.MenuViewController"),this.submenuViewControllers.splice(0,this.submenuViewControllers.length,n$776.create({options:this.options,anchorLayout:this.anchorLayout,layoutModeToAnchor:this.layoutModeToAnchor,targetedOptionValue:this.targetedOptionValue,fontStyle:this.fontStyle,shouldIgnorePointerUp:this.bindingFor("shouldIgnorePointerUp")})),this.propertyChanged("submenuViewControllers")
}),_anchorLayoutMeasurer:n$9(n$84(n$554.extend({owner:n$9(),target:n$14("owner.anchorView")}))),shouldIgnorePointerUp:n$9(!0),init:function(){this.__s._3ThZ0IPaUUL$2Ch$init.apply(this,arguments),n$130(this.stopIgnoringPointerUp.bind(this),n$109.sharedInstance.isIE?2e3:333)},stopIgnoringPointerUp:function(){this.isDisposed||(this.shouldIgnorePointerUp=!1)},pointerMove:function(e){return this._pointerMoveCount=(this._pointerMoveCount||0)+1,this._pointerMoveCount===(n$109.sharedInstance.isIE?7:3)&&(this.shouldIgnorePointerUp=!1),this._invokeOnArrayItems(this.submenuViewControllers,"pointerMoveAtCoords",e.clientX,e.clientY),!0},pointerUp:function(e){if(this._invokeOnArrayItems(this.submenuViewControllers,"pointerUpAtCoords",e.clientX,e.clientY),!this.shouldIgnorePointerUp){var t=n$82.create();t.x=e.clientX,t.y=e.clientY,this.submenuRects.some(function(e){return e.containsPoint(t)})||this.dismiss()}return!0},pointerDown:function(){return!0},pointerLeave:function(){return!0},_invokeOnArrayItems:function(e,t){for(var n=n$27(arguments,0,2),i=e.length,r=!Array.isArray(e),s=0;i>s;s++){var a=r?e.objectAt(s):e[s];a[t].apply(a,n)}},dismiss:function(){this.view.fadeOut(n$752(this.hide,this))},userDidSelectMenuItem:function(){return this.dismiss(),!1},__superMap:{_3ThZ0IPaUUL$2Ch$init:"init"}});n$984=e,n$778=t,t.__QUALIFIED_CLASS_NAME__="VSToCW.UI.MenuViewController"}();
    
    
        
!function(){"use strict";function e(t,n){if(!t)return null;for(var i=0,r=t.length;r>i;i++){var s=t[i];if(s.hasOwnProperty("value")&&s.value==n)return s;if(s.hasOwnProperty("options")){var a=e(s.options,n);if(a)return a}}return null}var t=n$193.extend({owner:n$9(),staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"displayLabel",attributes:{}}],classes:["cw-select-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}}]}},isDisabled:n$9(!1),noSelectionPlaceholderLabel:n$9(""),value:n$9(),defaultValue:n$9({dependencies:["options"],writeDependencies:[],get:function(e,t,n,i){if(e)return e;var r=i.internalGetPath(this,t[0+n]);return r&&r.length?this.pickDefaultValueInOptions(r):null},set:function(e){return e}}),pickDefaultValueInOptions:function(e){return e[0].value},options:n$9({didChange:function(t){e(t,this.value)||(this.value=this.defaultValue,this.didChangeValueForNewOptions())}}),didChangeValueForNewOptions:n$12(),selectedOption:n$9({dependencies:["value","options"],get:function(t,n,i,r){return e(r.internalGetPath(this,n[1+i]),r.internalGetPath(this,n[0+i]))},writeDependencies:["value"],set:function(e,t,n,i){n[0+i]=e?e.value:null},writeDependencySetPathMap:[!1]}),displayLabel:n$9({readOnly:!0,dependencies:["selectedOption","noSelectionPlaceholderLabel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.label:i.internalGetPath(this,t[1+n])}}),pointerDown:function(){return this.isDisabled?void 0:(this.showPopupMenu(),!0)},showPopupMenu:function(){n$778.create({options:this.options,fontStyle:this.style.get("font"),anchorView:this,targetedOptionValue:this.value,nextResponder:this}).show()
},userDidSelectMenuItem:function(e){var t=n$32(e,n$132)?e.context:e;this.value=t}});n$779=t,t.__QUALIFIED_CLASS_NAME__="VSToCW.UI.SelectView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"privacySelectionView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["fbex-fb-logo",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isStandardDPR",truevalue:"fbex-standard-dpr",falsevalue:"fbex-nonstandard-dpr",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"Facebook"}],classes:["fbex-title"]}],classes:["fbex-title-container"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"albumSelectionView"}],classes:["fbex-toolbar-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isPrivacyKnowable",truevalue:"",falsevalue:"fbex-hide-privacy",attributes:{}}]}},extension:n$9(),privacyOptions:n$9(),albumOptions:n$9(),selectedPrivacyId:n$9(n$14("privacySelectionView.value")),selectedAlbumId:n$9(n$14("albumSelectionView.value")),selectedAlbumOption:n$9(n$14("albumSelectionView.selectedOption")),isPrivacySelectable:n$9({readOnly:!0,dependencies:["selectedAlbumOption"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.type===n$780.APP_ALBUM_TYPE||r.type===n$780.TIMELINE_ALBUM_TYPE:!1}}),selectedAlbumDefaultPrivacySearchCriteria:n$9({readOnly:!0,dependencies:["selectedAlbumOption"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(!r)return null;if(r.type===n$780.APP_ALBUM_TYPE||r.type===n$780.TIMELINE_ALBUM_TYPE)return[{is_currently_selected:!0},{type:n$780.FRIENDS_PRIVACY_TYPE},{type:n$780.ONLY_ME_PRIVACY_TYPE}];
var s=n$780.privacyTypeForAlbumPrivacy(r.privacy);return s?[{type:s},{type:n$780.FRIENDS_PRIVACY_TYPE},{type:n$780.ONLY_ME_PRIVACY_TYPE}]:[{type:n$780.ONLY_ME_PRIVACY_TYPE}]}}),isPrivacyKnowable:n$9({readOnly:!0,dependencies:["isPrivacySelectable","selectedAlbumOption"],get:function(e,t,n,i){if(i.internalGetPath(this,t[0+n]))return!0;var r=i.internalGetPath(this,t[1+n]);return r&&n$780.privacyTypeForAlbumPrivacy(r.privacy)?!0:!1}}),choosePrivacyOptionWhenSelectedAlbumChanges:n$7("privacySelectionView.didChangeValueForNewOptions","selectedAlbumDefaultPrivacySearchCriteria","selectedAlbumId",function(e,t,n){var i=this.privacySelectionView.options;if(i&&i.length&&t){var r=this.privacySelectionView.value;if(this._lastSelectedAlbumId!==(this._lastSelectedAlbumId=n)&&(r=null),!r){for(var s=0;s<t.length;s++)for(var a=t[s],o=0;o<i.length;o++){var l=i[o],u=!0;for(var c in a)if(a.hasOwnProperty(c)&&l[c]!==a[c]){u=!1;break}if(u)return this.privacySelectionView.selectedOption=l,void 0}this.privacySelectionView.selectedOption=i[1]||i[0]||null}}}),privacySelectionView:n$84(n$779.extend({additionalClassNames:n$16(["fbex-privacy-selection"]),noSelectionPlaceholderLabel:n$290("Toolbar.Privacy"),isDisabled:n$9({readOnly:!0,dependencies:["parent.isPrivacySelectable","parent.extension.isSubmitting"],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}}),options:n$9({readOnly:!0,dependencies:["parent.privacyOptions"],get:function(){var e=(this.getPath("parent.privacyOptions")||[]).map(function(e){return{value:e.id,label:e.description,type:e.type,is_currently_selected:e.is_currently_selected}
});return e}}),pickDefaultValueInOptions:function(){return null}})),albumSelectionView:n$84(n$779.extend({additionalClassNames:n$16(["fbex-album-selection"]),noSelectionPlaceholderLabel:n$290("Toolbar.Album"),isDisabled:n$14("parent.extension.isSubmitting"),options:n$9({readOnly:!0,dependencies:["parent.albumOptions"],get:function(){return(this.getPath("parent.albumOptions")||[]).map(function(e){return{isDisabled:!e.can_upload,value:e.id,label:e.name,type:e.type,privacy:e.privacy}})}})})),_isStandardDPR:n$9({readOnly:!0,dependencies:[n$110.sharedInstance.bindingFor("devicePixelRatio")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 1===r||2===r}})});n$786=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUIToolbarView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"textarea",children:[],name:"textContainer",classes:["fbex-text-container"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"placeholderText",attributes:{}}],classes:["fbex-text-container","fbex-placeholder-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"characterLimitWarningText",attributes:{}}],classes:["fbex-character-limit-warning"]}],classes:["fbex-text-entry-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isDisabled",truevalue:"cw-disabled",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"userMessage",truevalue:"fbex-has-message",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isFocused",truevalue:"cw-focused",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"characterLimitWarningText",truevalue:"fbex-has-character-limit-warning",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isOverCharacterLimit",truevalue:"fbex-over-character-limit",attributes:{}}]}},userMessage:n$9({readOnly:!0,get:function(){return this.textContainer.value}}),isDisabled:n$9(),isFocused:n$9(),maxLength:n$9(),placeholderText:n$290("Facebook.MessagePlaceholder"),characterLimitVisibilityFactor:n$9(.8),isOverCharacterLimit:n$9({readOnly:!0,dependencies:["maxLength","userMessage"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n]).length>i.internalGetPath(this,t[0+n])}}),characterLimitWarningText:n$9({readOnly:!0,dependencies:["maxLength","userMessage","characterLimitVisibilityFactor"],get:function(e,n,i,r){return t.maxLength=r.internalGetPath(this,n[0+i]),t.length=r.internalGetPath(this,n[1+i]).length,t.length/t.maxLength<r.internalGetPath(this,n[2+i])?"":n$290("Facebook.CharacterLimitWarning",t)
}}),focus:function(){this.textContainer.focus()},init:function(){this.__s._4EBA6xctd2W$nu$init.apply(this,arguments);var e=n$782;n$57(e.previousUserTextLostToError)&&(this.textContainer.value=e.previousUserTextLostToError,e.previousUserTextLostToError=null),n$107(this.textContainer,"input",this.propertyChanged.bind(this,"userMessage")),n$107(this.textContainer,"valuechange",this.propertyChanged.bind(this,"userMessage")),n$107(this.textContainer,"focus",this.set.bind(this,"isFocused",!0)),n$107(this.textContainer,"blur",this.set.bind(this,"isFocused",!1))},__superMap:{_4EBA6xctd2W$nu$init:"init"}}),t={};n$787=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUITextEntryView"}();
    
    
        
!function(){"use strict";function t(t,e,n,i,r,a,s){"fit"===t&&(t=!1),"cover"===t&&(t=!0),t=!!t;var o=arguments.length;6!==o&&(s=o-1);var l,h,u,d,c;2===s||3===s?(h=e.height,l=e.width,d=n.height,u=n.width,c=i):(l=e,h=n,u=i,d=r,c=a);var _=l/h,p=u/d,g=t?p>_:_>p;return c=c||{},c.width=g?u:d*_,c.height=g?u/_:d,c}function e(e,n,i,r,a){return t(!1,e,n,i,r,a,arguments.length)}function n(e,n,i,r,a){return t(!0,e,n,i,r,a,arguments.length)}n$985=t,n$783=e,n$986=n}();
    
    
        
!function(){"use strict";var e=n$106.extend({extensionClass:n$760,multiResImageData:n$9(),image:n$9({readOnly:!0,dependencies:["_image"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?(this._savedImage=r,r):this._savedImage}}),_image:n$9(),_maintainImage:n$7("multiResImageData","width","height",n$110.sharedInstance.bindingFor("devicePixelRatio"),function(e,t,n,i){if(!e)return this._image&&(this._image=null),this._imagePromise&&(this._imagePromise=null),void 0;var r=this.extensionClass.getMediaResForSize(e,t*i,n*i);if(r){var s=this._image;if(!s||s._shareData!==r){var a=this.extensionClass.getLoadedImageForSize(e,t*i,n*i);s!==a&&(this._image=a);var o=this._imagePromise;if(!o||o._shareData!==r){var l=this._imagePromise=this.extensionClass.getImage(r);l.finally(function(e){l===this._imagePromise&&(this._imagePromise=null,this._image=e||null)}.bind(this))}}}}),dispose:function(){this._imagePromise=null,this.__s._37sPsQkqKD6$rW$dispose.apply(this,arguments)},__superMap:{_37sPsQkqKD6$rW$dispose:"dispose"}});n$784=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.ShareDataImageLoaderRect"}();
    
    
        
!function(){"use strict";var t=n$193.extend({additionalClassNames:n$16(["fbex-thumbnail-view"]),maxImageCount:n$9(3),verticalOffsetFraction:n$9(1/15),shrinkageFactor:n$9(.85),paddingTop:n$9(0),paddingLeft:n$9(0),paddingRight:n$9(0),paddingBottom:n$9(0),availableWidth:n$9(),availableHeight:n$9(),availableImages:n$9(),usedImages:n$9({readOnly:!0,dependencies:["availableImages","maxImageCount"],get:function(t,e,n,i){return(this.availableImages||[]).slice(0,i.internalGetPath(this,e[1+n]))}}),actualWidth:n$9(),actualHeight:n$9(),imageRects:n$9(),loadedImages:n$770({source:"imageRects",outputForInput:function(t){return t.image},inputDidEnter:function(t,e){t._thumbnailView_imageListener=t.listen("image",e.bind(void 0,t)),t._thumbnailView_imageListener.retain()},inputDidExit:function(t){t._thumbnailView_imageListener.disconnect(),t._thumbnailView_imageListener.release(),t._thumbnailView_imageListener=null},outputDidEnter:function(t){t&&this.element.appendChild(t)},outputDidExit:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},retainsInputs:!1,retainsOutputs:!1}),_firstLoadedImagesHole:n$9({readOnly:!0,dependencies:["loadedImages"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);if(!r)return 0/0;for(var a=0;;a++)if(!r[a])return a}}),_render:n$7("loadedImages","imageRects","paddingTop","paddingLeft","paddingRight","paddingBottom","actualWidth","actualHeight",n$110.sharedInstance.bindingFor("devicePixelRatio"),function(){var t,e=n$110.sharedInstance.devicePixelRatio;if(this.loadedImages&&this.imageRects)for(t=this.loadedImages.length-1;t>=0;t--){var n=this.imageRects[t],i=this.loadedImages[t];
n&&i&&n$160(i).set("pointer-events","none").set("position","absolute").set("transform-origin","0 0").set("z-index",100+10*(this.loadedImages.length-t)).set("display",t>=this._firstLoadedImagesHole?"none":"block").translateDevicePixels(n.x+this.paddingLeft,n.y+this.paddingTop).scale(Math.round(n.width*e)/e/i.width,Math.round(n.height*e)/e/i.height)}var r=this._firstLoadedImagesHole;if(r>=2){this._distanceMask||(this._distanceMask=document.createElement("canvas")),this._distanceMask.parentNode||this.element.appendChild(this._distanceMask);var a=this._distanceMask;a.width=(this.actualWidth-this.paddingRight-this.paddingLeft)*e,a.height=(this.actualHeight-this.paddingBottom-this.paddingTop)*e;var o=a.getContext("2d");for(t=this.imageRects.length-1;t>=0;t--){var l=this.imageRects[t],h=this.imageRects[t-1],d=l.y*e,u=l.x*e,c=l.width*e,_=(t?h.y-l.y:l.height)*e,g=1;o.fillStyle="rgba(0, 0, 0, "+Math.min(1,e/6)+")",o.fillRect(u+g,d,c-2*g,g),o.fillRect(u,d,g,_),o.fillRect(u+c-g,d,g,_),t||o.fillRect(u+g,d+_-g,c-2*g,g),t&&(o.fillStyle="white",o.globalAlpha=.8*Math.pow(t/this.imageRects.length,.75),o.fillRect(u,d,c,_),o.globalAlpha=1,o.drawImage(s,u,d,c,_))}n$160(a).set("pointer-events","none").set("position","absolute").set("transform-origin","0 0").set("z-index",100+10*(this.loadedImages.length+1)).translateDevicePixels(this.paddingLeft,this.paddingTop).scale(1/e,1/e)}else this._distanceMask&&this._distanceMask.parentNode&&this._distanceMask.parentNode.removeChild(this._distanceMask);this.style.set("width",this.actualWidth).set("height",this.actualHeight)}),_doLayout:n$7("usedImages","shrinkageFactor","verticalOffsetFraction","paddingTop","paddingLeft","paddingRight","paddingBottom","availableWidth","availableHeight",n$110.sharedInstance.bindingFor("devicePixelRatio"),function(){if(!(this.usedImages&&this.usedImages.length&&this.availableWidth&&this.availableHeight))return this.imageRects&&(this.imageRects.length=0),n$275.begin().set(this,"imageRects",I).setIfChanged(this,"actualWidth",0).setIfChanged(this,"actualHeight",0).end(),void 0;
var t=this.usedImages.length;e.length=n.length=i.length=r.length=t;for(var s=this.usedImages[0],o=s?s[s.length-1]:null,l=0,h=o?o.width:1,d=o?o.height:1,u=0;t>u;u++)r[u]=l,i[u]=-h/2,n[u]=i[u]+h,e[u]=r[u]+d,h*=this.shrinkageFactor,d*=this.shrinkageFactor,l-=Math.max(d,h)*this.verticalOffsetFraction;var c=Math.max.apply(Math,n)-Math.min.apply(Math,i),_=Math.max.apply(Math,e)-Math.min.apply(Math,r),g=n$783(c,_,this.availableWidth-(this.paddingLeft+this.paddingRight),this.availableHeight-(this.paddingTop+this.paddingBottom),a),p=g.width/c;for(u=0;t>u;u++)r[u]*=p,i[u]*=p,n[u]*=p,e[u]*=p;var f=Math.min.apply(Math,r),v=Math.min.apply(Math,i);for(u=0;t>u;u++)r[u]-=f,i[u]-=v,n[u]-=v,e[u]-=f;var m=n$110.sharedInstance.devicePixelRatio;for(u=0;t>u;u++)r[u]=Math.floor(r[u]*m)/m,i[u]=Math.floor(i[u]*m)/m,n[u]=Math.ceil(n[u]*m)/m,e[u]=Math.ceil(e[u]*m)/m;var $=n$275.begin(),I=this.imageRects||[];for(I.length=t,u=0;t>u;u++){var y=I[u];y||(y=I[u]=n$784.create()),$.setIfChanged(y,"multiResImageData",this.usedImages[u]),$.setIfChanged(y,"x",i[u]),$.setIfChanged(y,"y",r[u]),$.setIfChanged(y,"width",n[u]-i[u]),$.setIfChanged(y,"height",e[u]-r[u])}$.setIfChanged(this,"actualWidth",Math.max.apply(Math,n)+(this.paddingLeft+this.paddingRight)),$.setIfChanged(this,"actualHeight",Math.max.apply(Math,e)+(this.paddingTop+this.paddingBottom)),$.set(this,"imageRects",I),$.end()})}),e=[],n=[],i=[],r=[],a={},s=function(){var t=document.createElement("canvas");t.width=1,t.height=32;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,0,t.height);return n.addColorStop(0,"rgba(255, 255, 255, 0)"),n.addColorStop(.85,"rgba(255, 255, 255, 0.35)"),n.addColorStop(.95,"rgba(255, 255, 255, 0.675)"),n.addColorStop(1,"rgba(255, 255, 255, 1)"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),t
}();n$788=t,t.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUIThumbnailView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"userView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"cancelButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"continueSubmitButton"}],classes:["fbex-footer-view"]}},user:n$9(),extension:n$9(),isInAuthMode:n$9(),userView:n$84(n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["fbex-user-picture"],styles:{"background-image":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"userPicture",attributes:{},unit:null,property:"background-image"},display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"userPicture",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"userName",attributes:{}}],classes:["fbex-user-name"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"changeUserButton"}],classes:["fbex-user-view"],styles:{display:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"userName",truevalue:"block",falsevalue:"none",attributes:{},unit:null,property:"display"}}}},changeUserButton:n$84(n$400.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"spinner"}]}}},additionalClassNames:n$16(["fbex-button","fbex-change-user-button"]),isDisabled:n$9({readOnly:!0,dependencies:["parent.parent.extension.isSubmitting","parent.parent.extension.isLoggingOut"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])
}}),title:n$290("Button.Not.You"),action:"displayLogoutDialog",_spinner:n$9(n$84(n$765.extend({size:12,color:"rgba(0, 0, 0, 0.75)"}))),spinner:n$9({readOnly:!0,dependencies:["parent.parent.extension.isLoggingOut","_spinner"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[1+n]):null}})})),userName:n$9(n$14("parent.user.displayName")),userPicture:n$9({readOnly:!0,dependencies:["parent.user.pictureURL"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?"url("+r+")":""}})})),cancelButton:n$9({readOnly:!0,dependencies:["parent.extension.isSubmitting","_cancelButton"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?null:i.internalGetPath(this,t[1+n])}}),continueSubmitButton:n$9({readOnly:!0,dependencies:["isInAuthMode","parent.extension.isSubmitting","_submitButton","_continueButton","_submitSpinner"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[4+n]):i.internalGetPath(this,t[0+n])?i.internalGetPath(this,t[3+n]):i.internalGetPath(this,t[2+n])}}),_cancelButton:n$9(n$84(n$400.extend({additionalClassNames:n$16(["fbex-button","fbex-cancel-button"]),isDisabled:n$14("parent.extension.isSubmitting"),title:"Cancel",action:"terminatePendingUserConfirmation"}))),_continueButton:n$9(n$84(n$400.extend({additionalClassNames:n$16(["fbex-button","fbex-submit-button"]),isDisabled:n$9({readOnly:!0,dependencies:["parent.extension.isSubmitting","parent.extension.isExpectingLoginPopupResponse"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||i.internalGetPath(this,t[1+n])}}),title:n$290("Button.Continue"),action:"beginExpectingLoginPopupResponse"}))),_submitButton:n$9(n$84(n$400.extend({isDisabled:n$9({readOnly:!0,dependencies:["parent.extension.isSubmitting","parent.extension.canSubmit"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])||!i.internalGetPath(this,t[1+n])
}}),additionalClassNames:n$16(["fbex-button","fbex-submit-button"]),title:n$290("Button.Post"),action:"submit"}))),_submitSpinner:n$9(n$84(n$765.extend({additionalClassNames:["fbex-submit-spinner"],size:32,color:"rgba(0, 0, 0, 0.5)"})))});n$789=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUIFooterView"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"toolbarView"},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"textEntryView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"thumbnailView"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"authMessage",attributes:{signal:"authMessageDidRender"}}],name:"authMessageContainer",classes:["fbex-auth-message"]}],name:"mainContainer",classes:["fbex-main-container"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"footerView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"spinnerView"}],classes:["fbex-ui-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInAuthMode",truevalue:"fbex-auth-mode",falsevalue:"fbex-post-mode",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isInSpinnerMode",truevalue:"fbex-spinner-mode",attributes:{}}]}},extension:n$9(),user:n$9(n$14("extension.user")),shareData:n$9(n$14("extension.shareData")),userMessage:n$9(n$14("textEntryView.userMessage")),selectedPrivacyId:n$9(n$14("toolbarView.selectedPrivacyId")),selectedAlbumId:n$9(n$14("toolbarView.selectedAlbumId")),isInAuthMode:n$9(!0),isInSpinnerMode:n$9({readOnly:!0,dependencies:["extension.isUIMostlyStable"],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])}}),generalSpacing:n$9(15),authMessage:n$9({readOnly:!0,dependencies:["isInAuthMode","user.isLoggedIn","shareData"],get:function(e,i,r,s){if(!s.internalGetPath(this,i[0+r]))return"";
if(s.internalGetPath(this,i[1+r]))return n$290("Facebook.iCloudPermissions");var a=s.internalGetPath(this,i[2+r])||n,o=(a.images||t).length,l=(a.videos||t).length;return o&&!l?1===o?n$290("Facebook.Login.Photos.1"):n$290("Facebook.Login.Photos.More"):!o&&l?1===l?n$290("Facebook.Login.Videos.1"):n$290("Facebook.Login.Videos.More"):1===o&&1===l?n$290("Facebook.Login.Photos.1.Videos.1"):1===o&&l>1?n$290("Facebook.Login.Photos.1.Videos.More"):o>1&&1===l?n$290("Facebook.Login.Photos.More.Videos.1"):o>1&&l>1?n$290("Facebook.Login.Photos.More.Videos.More"):n$290("Facebook.Login")}}),toolbarView:n$84(n$786.extend({extension:n$14("parent.extension"),privacyOptions:n$14("parent.user.privacyOptions"),albumOptions:n$14("parent.user.albums")})),textEntryView:n$84(n$787.extend({maxLength:n$14("parent.extension.maximumUserMessageLength"),isDisabled:n$14("parent.extension.isSubmitting"),_focusOnAppear:n$7("parent.isInAuthMode","parent.isInSpinnerMode","isDisabled",function(){this.getPath("parent.isInAuthMode")||this.getPath("parent.isInSpinnerMode")||this.isDisabled||(this.focus(),n$130(n$356(this.focus,this)))})})),thumbnailView:n$84(n$788.extend({availableWidth:n$9({readOnly:!0,dependencies:["parent.layout.width","parent.isInAuthMode"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):.25*i.internalGetPath(this,t[0+n])+75}}),availableHeight:n$9({readOnly:!0,dependencies:["isAttached","parent.isInAuthMode","parent.authMessageContainerHeight"],writeDependencies:[],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?0|this.parent.mainContainer.offsetHeight-i.internalGetPath(this,t[1+n])*i.internalGetPath(this,t[2+n]):0
}}),availableImages:n$9({readOnly:!0,dependencies:["parent.shareData"],get:function(e,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?(s.videos||t).concat(s.images||t):t}}),paddingTop:n$14("parent.generalSpacing"),paddingLeft:n$14("parent.generalSpacing"),paddingRight:n$14("parent.generalSpacing"),paddingBottom:n$9({readOnly:!0,dependencies:["parent.isInAuthMode","parent.generalSpacing"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])?0:i.internalGetPath(this,t[1+n])}})})),footerView:n$84(n$789.extend({user:n$14("parent.user"),extension:n$14("parent.extension"),isInAuthMode:n$14("parent.isInAuthMode")})),_spinnerView:n$9(n$84(n$765.extend({size:48,color:"rgba(0, 0, 0, 0.5)",additionalClassNames:n$16(["fbex-main-spinner"])}))),spinnerView:n$9({readOnly:!0,dependencies:["_spinnerView","isInSpinnerMode"],get:function(e,t,n,i){return i.internalGetPath(this,t[1+n])?i.internalGetPath(this,t[0+n]):null}}),layout:n$9(n$84(n$106.extend({windowSize:n$9(n$109.sharedInstance.window),width:n$9({readOnly:!0,dependencies:["windowSize.width"],get:function(e,t,n,i){return 0|Math.min(500,Math.max(350,.9*i.internalGetPath(this,t[0+n])))}}),height:n$9({readOnly:!0,dependencies:["windowSize.height"],get:function(e,t,n,i){return 0|Math.min(300,Math.max(200,.8*i.internalGetPath(this,t[0+n])))}}),x:n$9({readOnly:!0,dependencies:["windowSize.width","width"],get:function(e,t,n,i){return Math.ceil(Math.max(10,i.internalGetPath(this,t[0+n])/2-i.internalGetPath(this,t[1+n])/2))}}),y:n$9({readOnly:!0,dependencies:["windowSize.height","height"],get:function(e,t,n,i){return Math.ceil(Math.max(10,i.internalGetPath(this,t[0+n])/2-i.internalGetPath(this,t[1+n])/2))
}})}))),_maintainAuthMessageContainerHeight:n$170("authMessageDidRender",function(){this.propertyChanged("authMessageContainerHeight")}),authMessageContainerHeight:n$9({readOnly:!0,get:function(){return this.authMessageContainer?this.authMessageContainer.offsetHeight:0}}),_renderLayout:n$7("layout.x","layout.y","layout.width","layout.height",function(e,t,n,i){this.style.set("left",e).set("top",t).set("width",n).set("height",i),this.propertyChanged("authMessageContainerHeight")}),_maintainIFrameLayout:n$7("isAttached","_renderLayout","isInAuthMode","extension.iframe",function(){if(this.isAttached&&this.getPath("extension.iframe")){var e=this.isInAuthMode?this.footerView.continueSubmitButton.element.getBoundingClientRect():i;n$160(this.extension.iframe).set("top",0|e.top).set("left",0|e.left).set("width",Math.ceil(e.width)).set("height",Math.ceil(e.height)).set("position","fixed").set("z-index",1e3).set("opacity",0).set("border","none")}}),_renderThumbnailAndTextFieldLayout:n$7("thumbnailView.availableWidth","thumbnailView.availableHeight","thumbnailView.actualWidth","thumbnailView.actualHeight","isInAuthMode","isAttached",function(){if(this.isAttached){var e=this.textEntryView,t=this.thumbnailView;if(e&&t){var n=this.isInAuthMode;e.style.set("display",n?"none":"block").set("right",0|t.actualWidth+(0|parseFloat(e.style.get("padding-right")))),t.style.set("right",n?t.availableWidth/2-t.actualWidth/2:0).set("top",n?t.availableHeight/2-t.actualHeight/2:0)}}}),_animateOut:n$7("extension.state",function(){var e=this.getPath("extension.state"),t=this.extension&&this.extension.constructor;
!this._isAnimatingOut&&t&&e&&this.getPath("extension.isStateFinal")&&(this._isAnimatingOut=!0,this.style.set("transition","transform 200ms ease-in").translate(0,0),this.retain(),n$444(function(){e===t.FINISHED?this.style.translate(0,-this.layout.top-this.layout.height):this.style.scale(.8),n$130(function(){this.style.clear("transition"),this._isAnimatingOut=!1,this.release()}.bind(this),200)}.bind(this)))})}),t=[],n={},i={top:-1e4,left:-1e4,width:1,height:1};n$790=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUIView"}();
    
    
        
!function(){"use strict";var e=n$194.extend({extension:n$9(),nextResponder:n$9(),view:n$9({downstreamBindings:{extension:"(owner).extension",isInAuthMode:"(owner).isInAuthMode"}}),viewClass:n$790,userMessage:n$9(n$14("view.userMessage")),selectedAlbumId:n$9(n$14("view.selectedAlbumId")),selectedPrivacyId:n$9(n$14("view.selectedPrivacyId")),isInAuthMode:n$9({readOnly:!0,dependencies:["extension.user.isLoggedInAndAuthorized","extension.user.hasRequiredAppPermissions"],get:function(e,t,n,i){return!(i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n]))}})});n$797=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookUIViewController"}();
    
    
        
!function(){"use strict";var e=n$760.extend(n$793,n$794,{staticMembers:{vendorName:"Facebook",displayName:n$290("Share.DisplayNames.Facebook"),url:"https://facebook.icloud-sandbox.com/sandbox/facebook/current/",proxiedMethods:n$16({openLoginWindowOnClick:"",getLoginStatus:"",getPermissions:"",getUserProfile:"",getUserPicture:"",getAlbums:"",getPrivacyOptions:"",createAlbum:"",postToAlbum:"",_logout:"logout"}),capabilities:null,shareDataValidator:n$796,previousUserTextLostToError:null},maximumAllowedLoadTime:1e4,maximumUserMessageLength:n$9(5e4),extensionViewController:n$84(n$797),user:n$9(n$84(n$795)),userMessage:n$9(n$14("extensionViewController.userMessage")),selectedAlbumId:n$9(n$14("extensionViewController.selectedAlbumId")),selectedPrivacyId:n$9(n$14("extensionViewController.selectedPrivacyId")),userMessageCharsRemaining:n$9({readOnly:!0,dependencies:["maximumUserMessageLength","userMessage"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])-i.internalGetPath(this,t[1+n]).length}}),isLoggingOut:n$9(!1),iframePointerEventsTargetView:n$14("extensionViewController.view.footerView.continueSubmitButton"),isUIMostlyStable:n$9({readOnly:!0,dependencies:["user.isLoginStateKnown","_hasPopulatedUserOrPreparedButton"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])&&i.internalGetPath(this,t[1+n])}}),isExpectingLoginPopupResponse:n$9(!1),_hasPopulatedUserOrPreparedButton:n$9(!1),init:function(){this.__s._4U2e2e2oaHf$1Va$init.apply(this,arguments),n$130(n$752(this.show,this),0),this._loginStatusTimer.retain()},show:function(){this.__s._4U2e2e2oaHf$1bL$show.apply(this,arguments),n$107(document,"keydown",n$356(this.handleKeyDown,this))
},hide:function(){n$493(document,"keydown",n$356(this.handleKeyDown,this)),this.__s._4U2e2e2oaHf$1gN$hide.apply(this,arguments)},handleKeyDown:function(e){this.isActiveInUI&&this.state===this.constructor.READY&&e.which===n$126.ESC&&this.terminatePendingUserConfirmation()},loadingDidFail:function(){this._showErrorAlertDialogWithStat({message:n$290("Facebook.Cannot.Connect.Message"),description:n$290("Facebook.Cannot.Connect.Description")}),this.__s._4U2e2e2oaHf$1qa$loadingDidFail.apply(this,arguments)},canSubmit_getter:function(){return this.__s._4U2e2e2oaHf$1sp$canSubmit_getter.apply(this,arguments)&&this.userMessageCharsRemaining>=0},canSubmit_dependencies:n$16(["userMessageCharsRemaining"]),submit:function(){this.__s._4U2e2e2oaHf$1zV$submit.apply(this,arguments);var e=+new Date,t=function(e){var t=n$290("Facebook.PostToAlbum.Upload.InProgress");return e.returnValue=t,t};n$107(window,"beforeunload",t);var n=this.postToAlbum(this.selectedAlbumId,this.selectedPrivacyId,this.userMessage,this.shareData.images.map(function(e){return this.constructor.getLargestMediaRes(e,function(e){return!!e.url&&e.hasGeo===!1&&"image"===(e.mimeType+"").substring(0,5)}).url}.bind(this)));n.then(function(t){this._recordStats("FacebookPostToAlbumSuccess",{duration:+new Date-e,numImages:t.successes.length}),this._markAsFinishedAndTerminate()}.bind(this)),n.catch(function(t){t=t||{};var n,i="FacebookPostToAlbumFailure",r="Facebook.PostToAlbum.Failed.Message",s=n$231(t.failures);s.forEach(function(e){e.url="REDACTED"}),this._recordStats(i,{errorType:i,errorTitle:i,errorData:JSON.stringify(s),numImagesSuccess:t.successes?t.successes.length:0,numImagesFailure:t.failures?t.failures.length:0,duration:+new Date-e}),n=1===this.shareData.images.length?"Facebook.PostToAlbum.1.Failed":t.successes&&t.successes.length?"Facebook.PostToAlbum.Some.Failed":"Facebook.PostToAlbum.All.Failed",this._showErrorAlertDialogWithStat({message:n$290(r),description:n$290(n)}),this.state=this.constructor.READY
}.bind(this)),n.finally(function(){n$493(window,"beforeunload",t)}.bind(this))},terminatePendingUserConfirmation:function(){return this.userMessage?(this._showErrorAlertDialog({message:n$290("Facebook.ConfirmCancel.Message"),description:n$290("Facebook.ConfirmCancel.Description"),primaryButton:{title:n$290("Facebook.ConfirmCancel.Cancel"),target:this,action:"_markAsCanceledAndTerminate"},alternateButton:{title:n$290("Facebook.ConfirmCancel.Continue")}}),void 0):(this._markAsCanceledAndTerminate(),void 0)},beginExpectingLoginPopupResponse:function(){this.isExpectingLoginPopupResponse||(this.isExpectingLoginPopupResponse=!0)},logout:function(){return this.isLoggingOut?void 0:(this.isLoggingOut=!0,this._populatingUserToken=void 0,this._logout().finally(function(e){this.user._loginState=e&&e.status||"unknown",this.isLoggingOut=!1,this.user.isLoggedInAndAuthorized?this._showErrorAlertDialogWithStat({message:n$290("Facebook.Cannot.Logout.Message"),description:n$290("Facebook.Cannot.Logout.Description")}):this._prepareContinueButton()}.bind(this)))},displayLogoutDialog:function(){this._showAlertDialog({message:n$290("Facebook.ExplainLogout.Message"),description:n$290("Facebook.ExplainLogout.Description"),primaryButton:{title:n$290("Facebook.ExplainLogout.OpenFacebook"),immediateAction:"_openFacebookPopupForLogout"},alternateButton:{title:n$290("Facebook.ExplainLogout.Cancel")},showsError:!1,_openFacebookPopupForLogout:function(){var e=.8*window.outerWidth;1080>e&&(e=Math.min(window.outerWidth-40,1080));var t=.7*window.outerHeight;640>t&&(t=Math.min(window.outerHeight-40,640));var n=0|window.screenX+window.outerWidth/2-e/2,i=0|window.screenY+window.outerHeight/2-t/2;
this._closeFacebookLogoutPopup(),this._facebookLogoutPopup=window.open("https://www.facebook.com/",null,"width="+e+",height="+t+",left="+n+",top="+i),this._frequentCheckLoginStatus(!0)}.bind(this)})},_closeFacebookLogoutPopupWhenLoggedOut:n$7("user.isLoggedOut",function(e){e&&this._closeFacebookLogoutPopup()}),_closeFacebookLogoutPopup:function(){this._facebookLogoutPopup&&(this._facebookLogoutPopup.close(),this._facebookLogoutPopup=null)},_didBecomeReady:n$7("state",function(){this.state===this.constructor.READY&&this._loginStatusTimer._restartDueToActivity()}),_loginStatusTimer:n$84(n$411.extend(n$791,{delays:[0,.25,.5,1,2,4,8,15,30,60,720,1440,1/0].map(function(e){return 6e4*e}),action:"_checkLoginStatus",start:function(){this.owner.state===this.owner.constructor.READY&&(this._setUpListenersIfNeeded(),this.__s._4U2e2e2oaHf$4nE$start.apply(this,arguments))},_setUpListenersIfNeeded:function(){this._hasOutstandingListeners||(this._hasOutstandingListeners=!0,this._restartDueToActivity=this._restartDueToActivity.bind(this),n$107(document,"mousemove",this._restartDueToActivity),n$107(document,"pointerdown",this._restartDueToActivity),n$107(document,"keypress",this._restartDueToActivity),n$107(window,"resize",this._restartDueToActivity))},dispose:function(){this._hasOutstandingListeners&&(n$493(document,"mousemove",this._restartDueToActivity),n$493(document,"pointerdown",this._restartDueToActivity),n$493(document,"keypress",this._restartDueToActivity),n$493(window,"resize",this._restartDueToActivity)),this.__s._4U2e2e2oaHf$53p$dispose.apply(this,arguments)},callAction:function(){this.__s._4U2e2e2oaHf$54r$callAction.apply(this,arguments),this._restartDueToActivity(!0)
},_restartDueToActivity:n$792(function(e){e!==!0&&this.restart()},15e3),__superMap:{_4U2e2e2oaHf$4nE$start:"start",_4U2e2e2oaHf$53p$dispose:"dispose",_4U2e2e2oaHf$54r$callAction:"callAction"}})),_maintainUserInfo:n$7("user.hasRequiredAppPermissions","user.isLoggedInAndAuthorized",function(e,t){var n=e&&t;this._lastNUI!==n&&(this._lastNUI=n,n?this._populateUser():this._depopulateUser())}),_checkLoginStatus:function(){this.state===this.constructor.READY&&(this._isCheckingLoginStatus||(this._isCheckingLoginStatus=!0,n$63.info("Checking Facebook for user login status. Time is "+new Date+"."),this.getLoginStatus().finally(function(e){e&&e.status&&(this.user._loginState=e.status),this.user.isLoggedInAndAuthorized?this.getPermissions().finally(function(e){e&&e.data&&(this.user._permissions=e.data),this.user.hasRequiredAppPermissions||this._prepareContinueButton(),this._isCheckingLoginStatus=!1}.bind(this)):(this._prepareContinueButton(),this._isCheckingLoginStatus=!1)}.bind(this))))},_frequentCheckLoginStatus:function(e){e||this._checkLoginStatus();var t=2e3,n=30;clearTimeout(this._frequentCheckTimeout),this._frequentCheckTimeout=null,this._frequentCheckLoginStatusCount=e?0:this._frequentCheckLoginStatusCount+1,this._frequentCheckLoginStatusCount<n&&(this._frequentCheckTimeout=n$130(n$356(this._frequentCheckLoginStatus,this),t))},_prepareContinueButton:function(){if(n$63.info("User is not logged in to Facebook or has not approved the required app permissions."),!this.isExpectingLoginPopupResponse){var e=function(t){t&&t.error&&"Sandbox button was never pressed"===t.error.message||(this.isExpectingLoginPopupResponse&&(this.isExpectingLoginPopupResponse=!1),t&&t.status&&(this.user._loginState=t.status,t.authResponse&&t.authResponse.grantedScopes&&(this.user._permissions=t.authResponse.grantedScopes.split(",").map(function(e){return{permission:e,status:"granted"}
}))),this.user.isLoggedInAndAuthorized&&this.user.hasRequiredAppPermissions||this.openLoginWindowOnClick(this.user.constructor.ALL_APP_PERMISSIONS).finally(e))}.bind(this);this.openLoginWindowOnClick(this.user.constructor.ALL_APP_PERMISSIONS).finally(e),this._hasPopulatedUserOrPreparedButton||(this._hasPopulatedUserOrPreparedButton=!0)}},_populateUser:function(){n$63.info("User is logged in with proper app permissions. Starting load of user data.");var e=function(e){return function(){return this._populatingUserToken===s?e.apply(this,arguments):void 0}.bind(this)}.bind(this),t=e(function(e){return e&&e.id&&e.name?(o.id=e.id,o.displayName=n$290("Facebook.UserName",{firstName:e.first_name,lastName:e.last_name}),void 0):(this._showLoginErrorAlert(e),this.terminate(),void 0)}),n=e(function(e){e&&e.data&&e.data.url&&(o.pictureURL=e.data.url)}),i=e(function(e){e||(e={}),e.data||(e.data=[]),e.data.unshift({id:"me",name:n$290("Facebook.Timeline"),type:"timeline",can_upload:!0,privacy:"friends"}),o.albums=e.data.filter(function(e){return e.can_upload})}),r=e(function(e){return e&&e.data?(o.privacyOptions=e.data,void 0):(this._showLoginErrorAlert(e),this.terminate(),void 0)}),s=this._populatingUserToken=(Math.random()+"").substring(2),o=this.user;n$754.all([this.getAlbums().finally(i),this.getUserProfile().finally(t),this.getUserPicture().finally(n),this.getPrivacyOptions().finally(r)]).then(function(){this._populatingUserToken=void 0,this._hasPopulatedUserOrPreparedButton||(this._hasPopulatedUserOrPreparedButton=!0),n$63.info("Loading of user data from Facebook complete.")}.bind(this))
},_depopulateUser:function(){this._populatingUserToken=void 0;var e=this.user;e.id=null,e.displayName=null,e.pictureURL=null,e.albums=null,e.privacyOptions=null},_showLoginErrorAlert:function(e){this._showErrorAlertDialogWithStat({message:n$290("Facebook.Cannot.Login.Message"),description:n$290("Facebook.Cannot.Login.Description")},e)},_showGenericErrorAlert:function(){this._showErrorAlertDialogWithStat({message:n$290("Facebook.Error.Message"),description:n$290("Facebook.Error.Description")})},_findMinURLExpiryInAssetsArray:function(e){for(var t,n,i=1/0,r=0;r<e.length;r++)if(t=e[r],t&&t.length)for(var s=0;s<t.length;s++)n=t[s],!n.hasGeo&&n.urlExpiry&&(i=Math.min(i,n.urlExpiry));return i},_findMinURLExpiryInShareData:n$7("shareData",function(e){var t,n,i,r,s,o;if(this._expiryTimeout&&clearInterval(this._expiryTimeout),e&&(r=e.images||[],s=e.videos||[],t=Math.min(this._findMinURLExpiryInAssetsArray(r),this._findMinURLExpiryInAssetsArray(s)),1/0!==t)){if(n=+Date.now(),i=t-n,n>=t)return;n$63.info("URL EXPIRY: Setting timeout for asset expiration to "+i),o=function(){this._recordStats("FacebookNonGeoURLExpiration",{errorType:"FacebookNonGeoURLExpiration",errorTitle:"One or more URL's have expired"}),this._showGenericErrorAlert(),this.terminate()}.bind(this),this._expiryTimeout=n$130(o,i)}}),_markAsFinishedAndTerminate:function(){this.state=this.constructor.FINISHED,this.terminate()},_markAsCanceledAndTerminate:function(){this.state=this.constructor.CANCELED,this.terminate()},terminate:function(){this.__s._4U2e2e2oaHf$95Z$terminate.apply(this,arguments),this._expiryTimeout&&clearInterval(this._expiryTimeout),this.state===this.constructor.FAILED&&(this.constructor.previousUserTextLostToError=this.userMessage||"")
},dispose:function(){this._loginStatusTimer.release(),clearTimeout(this._frequentCheckTimeout),this.__s._4U2e2e2oaHf$9Jt$dispose.apply(this,arguments)},__superMap:{_4U2e2e2oaHf$1Va$init:"init",_4U2e2e2oaHf$1bL$show:"show",_4U2e2e2oaHf$1gN$hide:"hide",_4U2e2e2oaHf$1qa$loadingDidFail:"loadingDidFail",_4U2e2e2oaHf$1sp$canSubmit_getter:"canSubmit_getter",_4U2e2e2oaHf$1zV$submit:"submit",_4U2e2e2oaHf$95Z$terminate:"terminate",_4U2e2e2oaHf$9Jt$dispose:"dispose"}});n$782=e,e.__QUALIFIED_CLASS_NAME__="VendorSharing.FacebookExtension"}();
    
    
        
!function(){"use strict";var e=n$161,t=n$557.extend({allowedLayouts:[n$558],arrowLength:26,desiredSize:n$9({readOnly:!0,dependencies:["isAttached"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);if(s){var a=this.contentController.view,o=a.vendorViews,l=100,u=10;return o.forEach(function(t){var n=e(t.element);n.width>l&&(l=n.width),u+=n.height}),n$556.create({width:l,height:u})}return n$556.create({width:100,height:100})}}),minimumSize:n$14("desiredSize"),createView:function(){var e=this.__s._3goPtcoJnms$UI$createView.apply(this,arguments);return n.create({popoverView:e})},vendorExtensionClasses:n$9([n$759,n$782]),alertViewControllerClass:n$418,errorAlertViewControllerClass:null,shareData:n$9(null),contentController:n$9({defaultValue:n$84(n$800),downstreamBindings:{vendorExtensionClasses:"(owner).vendorExtensionClasses",shareData:"(owner).shareData"}}),modalTap:function(){this.hide()},shareVendorWasSelected:function(e){var t=n$103.isOldPhotosCW?e.context:e,n=t.create({shareData:this.bindingFor("shareData"),alertViewControllerClass:this.alertViewControllerClass,errorAlertViewControllerClass:this.errorAlertViewControllerClass});this.vendorWasSelected(n),this.hide()},vendorWasSelected:n$12(),__superMap:{_3goPtcoJnms$UI$createView:"createView"}}),n=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"popoverView"}],classes:["vendor-select-modal"]}},layout:n$9(),anchorLayout:n$9(),arrowLength:n$9(),arrowWidth:n$9(),popoverView:n$9({downstreamBindings:{layout:"(owner).layout",anchorLayout:"(owner).anchorLayout",arrowLength:"(owner).arrowLength",arrowWidth:"(owner).arrowWidth"}}),contentView:n$9(n$14("popoverView.contentView")),pointerDown:function(){return this.sendEvent("modalTap"),!0
}});n$804=t,t.__QUALIFIED_CLASS_NAME__="VendorSharing.VendorSelectionPopoverViewController",n.__QUALIFIED_CLASS_NAME__="VendorSharing.ModalView$621"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$387],staticMembers:{requestLoggingLevel:n$209.LOG_LEVEL_DEBUG},shouldReportFailure:n$4({get:function(e){return"boolean"==typeof e?e:421!==this.getPath("response.status")}}),URLClass:n$384,specialResponseStatuses:[401,421,423],finalize:function(){this.__s._17a56IioQwJ$UY$finalize.apply(this,arguments);var e=this.get("response");if(e){var t=e.get("status"),n=-1!==this.specialResponseStatuses.indexOf(t);n&&this._specialResponseWasReceived()}},_specialResponseWasReceived:function(){var e=this.get("response"),t=e.get("status"),n=e.get("body"),i=JSON.stringify(n),r=n$203.get("cloudOSService");r.didReceiveSpecialResponse(t,i)},url:n$9({defaultValue:function(){return this.URLClass.create()}}),__superMap:{_17a56IioQwJ$UY$finalize:"finalize"}};n$801=e}();
    
    
        
!function(){"use strict";var t=n$291.extend(n$801);n$802=t,t.__QUALIFIED_CLASS_NAME__="COSK.Network.Request"}();
    
    
        
!function(){"use strict";function t(t,i){var a,s=t.substr(0,7),o="http://"===s||"https:/"===s,l=i.method||"GET",h=i.headers||{},d=i.body||"";switch(i.credentials=i.credentials||"omit",i.credentials){case"omit":a=!1;break;case"include":a=!0;break;case"same-origin":a=o?-1===t.indexOf(window.location.host):!0}var u,c={useCredentialsIfCrossOrigin:a,method:l,headers:h,body:d,shouldReportSuccess:!0,shouldReportFailure:!1,reportingPathname:null};o?(c.url=t,u=n$291.create(c)):(u=n$802.create(c),u.setPath("url.serviceName",r),u.setPath("url.pathname",t)),u.retain();var _=n$247.create();return u.didSucceed=e.bind(this,_),u.didFail=n.bind(this,_),u.send(),_}function e(t,e){var n=e.get("response"),r=n.get("headers"),s={status:n.get("status"),type:a,headers:i(r),url:e.get("url").toString(),text:function(){var t=n$247.create(),e=n.encodedBody;return t.resolve(e),t},json:function(){var t=n$247.create(),e=JSON.parse(n.encodedBody);return t.resolve(e),t}};t.resolve(s),e.autorelease()}function n(t,n){var i=n.get("response");if(i&&i.status)return e(t,n);var r=i.encodedBody,a=new TypeError(r);t.reject(a),n.autorelease()}function i(t){for(var e={},n=t.split("\n"),i=0;i<n.length;i++)if(!(n[i].length<1)){var r=n[i].split(": "),a=r.shift(),s=r.join(":");e[a]=s}return e}var r="ckdatabasews",a="default";n$803=t}();
    
    
        
!function(){"use strict";function e(e){var t=e.itemType.value,n=n$203.getPath("environment.iCloudEnvironment"),i=_[n];return function(r){var s=e["resJPEG"+r+"Res"].value.downloadURL;return i&&(s=s.replace(p,i),n$63.debug("In "+n+' using geo stripped url: "'+s+'"')),{width:e["resJPEG"+r+"Width"].value,height:e["resJPEG"+r+"Height"].value,fileSize:e["resJPEG"+r+"FileSize"].value,sizeName:r,url:s.replace("${f}",t),fileName:t,mimeType:"image/jpeg",hasGeo:!1,urlExpiry:e.urlExpiry,recordName:e.recordName}}}function t(e){var t=[],n=!1,i=n$247.create();i.pipe=function(e){return t.push(e),l(),i};var s=global.performance||Date,a=s.now();n$63.debug("retrieving %{numURLs} geo-stripped url(s)",{numURLs:e.length});var o=function(){if(0===t.length){var n=s.now()-a;n$63.debug("retrieved in %{millseconds} ms",{millseconds:n.toFixed(3)}),i.resolve(e)}else l()},l=function(){if(!n){n=!0;var s=t.shift();try{s(e).then(function(t){return t.hasErrors?(i.reject(t.errors),void 0):(t.records.forEach(r(e)),n=!1,o(),void 0)}).catch(i.reject.bind(i))}catch(a){i.reject(a)}}};return i}function n(){if(o)return o;l||n$11("CloudKit.js is missing");var e=l.BUILD_VERSION,t="CloudKit.js build: "+e;n$63.info(t);var n=i(),r={containers:[{environment:d,containerIdentifier:u,publicDatabasePartition:"",privateDatabasePartition:"https://p"+n+"-ckdatabasews.icloud.com"}],services:{fetch:n$803}};l.configure(r);var s=l.getContainer(u);return o=s.privateCloudDatabase}function i(){var e=n$310.isRunningInsideCloudOS,t=0;if(e){var n=n$203.cloudOSService,i=n.getPath("environment.authBag"),r=i.getServiceUrlFor("ckdatabasews",!1);
t=parseInt(r.split("/")[2].split("-")[0].substr(1))}return 10>t?"0"+t:t.toString()}function r(e){var t=e.length,n=function(n){for(var i=[],r=n.recordName,s=0;t>s;s++){var a=e[s];r===a.recordName&&i.push(a),a.masterRef&&r===a.masterRef.value.recordName&&i.push(a)}return i},i=function(e){var t=e.fields;return function(e){c.forEach(function(n){t[n]&&!e[n]&&(e[n]=t[n])})}};return function(e){return n(e).forEach(i(e))}}function s(e){var t=n(),i=e.map(function(e){return e.recordName});return t.lookupRecords(i,{zoneID:h,desiredKeys:c,assetPrivacyMaskType:"NONE"})}function a(e){var t=n(),i=e.map(function(e){return e.masterRef.value.recordName});return t.lookupRecords(i,{zoneID:h,desiredKeys:c,assetPrivacyMaskType:"NONE"})}var o,l=global.CloudKit,u="com.apple.photos.cloud",d="production",h="PrimarySync",c=["itemType","masterRef","resJPEGThumbRes","resJPEGThumbWidth","resJPEGThumbHeight","resJPEGThumbFileSize","resJPEGMedRes","resJPEGMedWidth","resJPEGMedHeight","resJPEGMedFileSize","resJPEGLargeRes","resJPEGLargeWidth","resJPEGLargeHeight","resJPEGLargeFileSize","resJPEGFullRes","resJPEGFullWidth","resJPEGFullHeight","resJPEGFullFileSize"],g=144e5,p="cvws.icloud-content.com",_={ICLOUD1:"cvws-ic1.icloud-content.com",ICLOUD2:"cvws-ic2.icloud-content.com",ICLOUD3:"cvws-ic3.icloud-content.com",ICLOUD4:"cvws-ic4.icloud-content.com"},f=n$5.extend(n$10,{init:function(){this.__s._4PVBZW0OcuJ$PK$init.apply(this,arguments),this._startTime=Date.now()},recordName:n$4(),masterRef:n$4(),itemType:n$4(),resJPEGThumbRes:n$4(),resJPEGThumbWidth:n$4(),resJPEGThumbHeight:n$4(),resJPEGThumbFileSize:n$4(),resJPEGMedRes:n$4(),resJPEGMedWidth:n$4(),resJPEGMedHeight:n$4(),resJPEGMedFileSize:n$4(),resJPEGLargeRes:n$4(),resJPEGLargeWidth:n$4(),resJPEGLargeHeight:n$4(),resJPEGLargeFileSize:n$4(),resJPEGFullRes:n$4(),resJPEGFullWidth:n$4(),resJPEGFullHeight:n$4(),resJPEGFullFileSize:n$4(),shareData:n$4({get:function(){var t=[],n=e(this);
return this.resJPEGThumbRes&&t.push(n("Thumb")),this.resJPEGMedRes&&t.push(n("Med")),this.resJPEGLargeRes&&t.push(n("Large")),this.resJPEGFullRes&&t.push(n("Full")),t}}),_startTime:0,ttl:n$4({get:function(){return g-(Date.now()-this._startTime)}}),urlExpiry:n$4({get:function(){return this._startTime+g}}),hasExpired:n$9({get:function(){return this.ttl<0}}),__superMap:{_4PVBZW0OcuJ$PK$init:"init"}}),v=n$5.extend({staticMembers:{fetch:function(e){Array.isArray(e)||(e=[e]);var n=e.map(function(e){return f.create({recordName:e})});return t(n).pipe(s).pipe(a)}}});n$805=v,f.__QUALIFIED_CLASS_NAME__="Photos.MediaRecord$625",v.__QUALIFIED_CLASS_NAME__="Photos.GeoStrippedURLs"}();
    
    
        
!function(){"use strict";function t(t){return o[t]||(o[t]=function(e){return e&&e[0]&&e[0]._assetGenericType===t})}function e(t){return function(e){var r,a,s,o,l,h=t.allMultiResMedias,d={};for(r=0;s=h[r];r++)if(l=s[0]&&s[0].recordName)for(d[l]=s,a=0,o;o=s[a];a++)d[n(o)]=o;var u=e.map(i);for(r=0;s=u[r];r++)for(a=0;o=s[a];a++){var c=d[n(o)];if(c){var _=c.fileName;n$43(c,o);var p=c.fileName;!_||p&&"public.jpeg"!==p&&"public.jpg"!==p||(c.fileName=_)}else{var g=d[o.recordName];g&&g.push(o)}}t.propertyChanged("allMultiResMedias")}}function n(t){return t.recordName+":"+t.sizeName+":"+t.width+":"+t.height+":"+t.mimeType}function i(t){return t.shareData}function r(t){return function(e){var n;n=Array.isArray(e)?n$290("Alert.Share.RecordFailure"):e.isServerError?n$290("Alert.Share.NetworkError"):n$290("Alert.Share.GeneralError"),n$368.sharedInstance.showSimpleAlert(n$290("Alert.Share.ErrorTitle"),n),t.terminate()}}var a={thumb:"Thumb",medium:"Med",large:"Large",full:"Full"},s={selectedAssets:n$9(),vendorSelectorVC:n$9({defaultValue:function(){return n$804.extend({alertViewControllerClass:n$420.extend({iconNames:["photos-icon"]}),errorAlertViewControllerClass:n$420.extend({iconNames:["photos-icon","error"]}),init:function(){this.__s._lK0QZDMFQ9$Rt$init.apply(this,arguments),n$107(window,"resize",n$357.bind(void 0,this.propertyChanged.bind(this,"anchor")))},__superMap:{_lK0QZDMFQ9$Rt$init:"init"}}).create().retain()},downstreamBindings:{shareData:"(owner).shareData"}}),vendorSelectorToggled:function(t){var e=t.context||t;this.vendorSelectorVC.toggle(e)},allMultiResMedias:n$770({source:"selectedAssets",retainsInputs:!0,retainsOutputs:!1,outputForInput:function(t){if(!t.serverId)return null;
for(var e=[],n=t.renderableDerivativeInfos,i=n.length,r=0;i>r;r++){var s=n[r],o={url:s.url,width:s.width,height:s.height,mimeType:s.mimeType,fileSize:s.byteSize,fileName:s.fileName,hasGeo:!0,recordName:t.serverId,sizeName:a[s.derivativeId],urlExpiry:s.urlExpiry,_assetGenericType:t.genericType,_assetClientId:t.clientId,_derivativeClientId:s.clientId};Object.defineProperty(o,"imageExample",this._imageExampleDescriptor),e.push(o)}return e},inputDidEnter:function(t,e){if(!t.serverId){var n="_sharingSupport_serverIdObserver_for_"+n$22(this),i=!1;t[n]=t.listen("serverId",function(){!i&&t.serverId&&(i=!0,e(t))}).retain()}},inputDidExit:function(t){var e="_sharingSupport_serverIdObserver_for_"+n$22(this),n=t[e];n&&(n.disconnect(),n.release(),t[e]=null)},inputDidMutate:function(){this._allMultiResMedias_invalidation||(this._allMultiResMedias_invalidation=n$130(n$356(this._invalidateAllMultiResMedias,this)))}}),_imageExampleDescriptor:{get:function(){if(this._imageExample)return this._imageExample;var t=n$309.create(this._assetClientId).retain("mediaRes").autorelease("mediaRes").getLoadedDerivative(this._derivativeClientId),e=t&&t.retain("mediaRes").autorelease("mediaRes").toCanvas();return this._imageExample!==e&&(this._imageExample=e),e},set:function(t){this._imageExample=t}},_invalidateAllMultiResMedias:function(){this._allMultiResMedias_invalidation=null,this.propertyChanged("allMultiResMedias")},shareData:n$9({readOnly:!0,dependencies:["allMultiResMedias"],get:function(e,n,i,r){var a=r.internalGetPath(this,n[0+i]);if(!a||!a.every(n$41))return null;var s={},o=a.filter(t("image")),l=a.filter(t("video"));
return o.length&&(s.images=o),l.length&&(s.videos=l),s}}),_vendorWasSelected:n$7("vendorSelectorVC.vendorWasSelected",function(t){if(t&&this.selectedAssets){var n=t.observe("state",function(e){e===t.constructor.FINISHED&&(this.sendEvent("vendorExtensionDidFinish"),n.disconnect(),n.release())}.bind(this)).retain(),i=this.selectedAssets.map(function(t){return t.serverId});n$805.fetch(i).then(e(this)).catch(r(t))}})},o={};n$807=s}();
    
    
        
!function(){"use strict";var e=n$194.extend(n$807,{owner:n$9(),viewClass:n$696.extend(n$659,{toolbarView:n$14("owner.toolbarView"),additionalClassNames:n$16(["photos-selection-toolbar-scroll-view"]),top:n$660(-n$211.get("toolbarHeight")),topDidChange:n$7("top",function(e){this.get("style").translateY(e)})}),toolbarView:n$9(n$84(n$806.extend({isAnimating:n$14("owner.view.isAnimating"),selectedItemCount:n$14("owner.selectedItemCount"),removeType:n$14("owner.removeType"),isDownloadAllowed:n$14("owner.isDownloadAllowed"),isUndeleteAllowed:n$14("owner.isUndeleteAllowed"),isDeleteAllowed:n$14("owner.isDeleteAllowed"),isEmailAllowed:n$14("owner.isEmailAllowed"),isAddToAlbumAllowed:n$14("owner.isAddToAlbumAllowed"),nextResponder:n$9(n$14("owner.view"))}))),selectedItemCount:n$9(),removeType:n$9(),isDownloadAllowed:n$9(),isAddToAlbumAllowed:n$9(),isUndeleteAllowed:n$9(),isDeleteAllowed:n$9(),isEmailAllowed:n$9(),nextResponder:n$4(null),createViewOptions:function(){var e=this.__s._28SKsie2GPH$m5$createViewOptions.apply(this,arguments);return e.owner=this,e},__superMap:{_28SKsie2GPH$m5$createViewOptions:"createViewOptions"}});n$809=e,e.__QUALIFIED_CLASS_NAME__="Photos.SelectionToolbarViewController"}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$598,n$364],selectedItemCount:n$9(0),selectionToolbar:n$9(),removeType:n$9(),isDeleteAllowed:n$9(),isUndeleteAllowed:n$9(),isDownloadAllowed:n$9(n$103.bindingFor("application.isDownloadAllowed")),isEmailAllowed:n$9(n$103.bindingFor("application.isEmailAllowed")),isAddToAlbumAllowed:n$9(n$103.bindingFor("application.isUpdateAllowed")),selectionMode:n$355({defaultValue:function(){return t.create({selectedItemCount:this.bindingFor("selectedItemCount"),selectedAssets:this.bindingFor("selectedAssets"),removeType:this.bindingFor("removeType"),toolbar:this.get("selectionToolbar"),isDeleteAllowed:this.bindingFor("isDeleteAllowed"),isUndeleteAllowed:this.bindingFor("isUndeleteAllowed"),isEmailAllowed:this.bindingFor("isEmailAllowed"),isDownloadAllowed:this.bindingFor("isDownloadAllowed"),isAddToAlbumAllowed:this.bindingFor("isAddToAlbumAllowed")})}}),isInSelectionMode:n$9({readOnly:!0,dependencies:["actionMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===this.get("selectionMode")}}),isSelectionEnabled:n$9(n$14("isInSelectionMode")),_addSelectionModeClass:n$7("view.element","isInSelectionMode",function(e,t){e&&(t?e.classList.add("photos-selection-mode"):e.classList.remove("photos-selection-mode"))}),cancelSelection:function(){this.get("isSelectionEnabled")&&this.set("actionMode",null)},handleKeyDown:function(e){var t=e.keyCode;switch(t){case n$748.ESC:this.cancelSelection();break;case n$748.D:this.get("isDownloadAllowed")&&this.get("isSelectionEnabled")&&this.sendEvent("downloadItems");break;case n$748.E:this.get("isEmailAllowed")&&this.get("isSelectionEnabled")&&this.sendEvent("emailItems");
break;case n$748.DELETE:case n$748.BACKSPACE:this.get("isDeleteAllowed")&&this.get("isSelectionEnabled")&&this.sendEvent("deleteItems"),e.preventDefault();break;case 65:if(e.ctrlKey||e.metaKey)return n$211.enableSelectAll&&(this.enterSelectionMode(),this.selectionManager.selectAll()),e.preventDefault(),!0}return this.__s._1CFd9voIWGO$16l$handleKeyDown.apply(this,arguments)},_cancelSelectionForAppRestart:n$7(n$103.bindingFor("application.isRestarting"),function(e){e&&this.cancelSelection()}),enterSelectionMode:function(){this.get("actionMode")!==this.get("selectionMode")&&this.set("actionMode",this.get("selectionMode"))},__superMap:{_1CFd9voIWGO$16l$handleKeyDown:"handleKeyDown"}},t=n$808.extend(n$364,{selectedItemCount:n$9(),selectedAssets:n$9(),removeType:n$9(),isDownloadAllowed:n$9(),isUndeleteAllowed:n$9(),isDeleteAllowed:n$9(),isEmailAllowed:n$9(),isAddToAlbumAllowed:n$9(),toolbarViewController:n$355({readOnly:!0,defaultValue:function(){return n$809.create({selectedItemCount:this.bindingFor("selectedItemCount"),selectedAssets:this.bindingFor("selectedAssets"),removeType:this.bindingFor("removeType"),isUndeleteAllowed:this.bindingFor("isUndeleteAllowed"),isDeleteAllowed:this.bindingFor("isDeleteAllowed"),isEmailAllowed:this.bindingFor("isEmailAllowed"),isDownloadAllowed:this.bindingFor("isDownloadAllowed"),isAddToAlbumAllowed:this.bindingFor("isAddToAlbumAllowed")})}})});n$813=e,n$987=t,t.__QUALIFIED_CLASS_NAME__="Photos.SelectionActionMode"}();
    
    
        
!function(){"use strict";var e=0,t=1,n=2,i=3,r=4,s=5,a=0,o=1,l=2,u=3,d=n$726.extend(n$812,n$745,n$813,{sharedPrefsName:n$9("fgvc"),initialSharedPrefs:{preferredColumnCount:6},_sharedPrefs:n$9({readOnly:!0,dependencies:["sharedPrefsName"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=h[r]=h[r]||c.create(this.get("initialSharedPrefs")).retain();return s}}),preferredColumnCount:n$9({dependencies:["bookmark.columnCount","_sharedPrefs.preferredColumnCount"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||r},set:function(e){this.setPath("bookmark.columnCount",e),this.setPath("_sharedPrefs.preferredColumnCount",e)}}),minimumColumnCount:n$9({readOnly:!0,dependencies:["viewportWidth",n$211.bindingFor("minimumColumnCountOverride")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);return s?s:Math.min(4,Math.max(1,Math.ceil(r/200)))}}),maximumColumnCount:n$9({readOnly:!0,dependencies:["viewportWidth","minimumColumnCount",n$211.bindingFor("maximumColumnCountOverride")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]);if(a)return a;var o=Math.max(s,0|r/n$211.minFGVCColumnWidth);return Math.min(o,10)}}),actualColumnCount:n$9({readOnly:!0,dependencies:["preferredColumnCount","minimumColumnCount","maximumColumnCount"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return Math.min(r,Math.max(s,+a||0|r/2+s/2))}}),columnCount:n$9(0/0),leftInset:n$9(0/0),columnSpacing:n$9(0/0),columnWidth:n$9(0/0),rowSpacing:n$9(0/0),bottomInset:n$9(0/0),groupHeight:n$9(0/0),groupGap:n$9(0/0),groupPositionInGap:n$9(0/0),topCompensation:n$9(0/0),itemViewClass:n$652,areItemsModifiable:n$9(n$14("provider.areItemsModifiable")),init:function(){this.__s._1M788zB9UCY$2aX$init.apply(this,arguments),this.selectionManager=n$810.create({provider:this.get("provider"),selection:this.get("selection"),selectionDelegate:this,isSelectionEnabled:this.bindingFor("isSelectionEnabled")})
},_updateSharedPrefsColumnCountFromBookmark:n$170("bookmark.columnCount",function(e){if(Math.round(e)===e){var t=this.get("_sharedPrefs");t.setIfChanged("preferredColumnCount",e)}}),_updateBookmarkColumnCountFromSharedPrefs:n$170("_sharedPrefs.preferredColumnCount",function(e){if(Math.round(e)===e){var t=this.get("bookmark");t.setIfChanged("columnCount",e)}}),selection:n$424(n$811),selectedIndexes:n$9(n$14("selection.selectedIndices")),selectionManager:null,selectedItemCount:n$9(n$14("selectedIndexes.count")),selectedAssets:n$9(null),_selectionChangesSinceEnteredSelectionMode:0,_selectedItemCountDidChange:n$7("selectedItemCount",function(e){this._selectionChangesSinceEnteredSelectionMode++,!e&&this.get("isInSelectionMode")&&this.get("shouldCancelSelectionUponEmptySelection")?this.cancelSelection():this._selectionChangesSinceEnteredSelectionMode>1&&this.set("shouldCancelSelectionUponEmptySelection",!1)}),_isInSelectionModeDidChange:n$7("isInSelectionMode",function(e){e&&(this._selectionChangesSinceEnteredSelectionMode=0)}),shouldCancelSelectionUponEmptySelection:n$4(!1),_handleUserSelectionEvent:function(e){e.enableShouldCancelSelectionUponEmptySelection&&!this.get("isInSelectionMode")&&this.set("shouldCancelSelectionUponEmptySelection",!0),this.enterSelectionMode()},userSelectionRequest:function(e){this._handleUserSelectionEvent(e),this.selectItemView(e.view,e.operation)},userDirectionalSelectionRequest:function(e){this._handleUserSelectionEvent(e),this.selectionManager.selectItemInDirection(e.direction)},userRangeSelectionRequest:function(e){this._handleUserSelectionEvent(e);
var t=e.rangeStart,n=e.rangeEnd-1,i=this.get("selectedIndexes");i.contains(t,n)?i.remove(t,n):i.add(t,n),this.selectionManager.set("pivot",this.get("provider").itemAtIndex(t)),this.selectionManager.selectionDidChange()},itemViewDidSelect:function(e){e.set("isSelected",!0)},itemViewDidDeselect:function(e){e.set("isSelected",!1)},cancelSelection:function(){this.__s._1M788zB9UCY$487$cancelSelection.apply(this,arguments),this.get("selectedIndexes").clear()},itemViewDidEnter:function(e,t){this.__s._1M788zB9UCY$4AM$itemViewDidEnter.apply(this,arguments),e.set("isSelected",this.selectionManager.itemIsSelected(t))},vendorExtensionDidFinish:function(){this.cancelSelection()},viewForViewClass:function(e){return e===this.groupViewClass?this.__s._1M788zB9UCY$4Fc$viewForViewClass.apply(this,arguments):e.create(this.viewOptionsForViewClass(e))},viewOptionsForViewClass:function(){return{isSelectionEnabled:this.bindingFor("isSelectionEnabled"),isFavoritingAllowed:this.bindingFor("areItemsModifiable")}},_rowLayoutInfo:n$305(n$716,window.Float64Array),_groupOffsets:n$305(n$716,window.Uint32Array),_itemLayoutInfo:n$305(n$716,window.Uint32Array),computeLayoutInfo:function(){if(this.columnCount){var d,h,c,g,p,_,f,m,v,$,y,I,C,b,A,S,E,w,D,T,L,P=Date.now(),x=this.columnCount,F=this.groupProvider,M=!!F,O=M?F.get("itemCount"):1,N=this.provider,R=this.itemCountForLayout,V=this._groupOffsets,U=this._itemLayoutInfo,k=this._rowLayoutInfo,G=3;for(h=0,V=V.ensureLength(O,!1),p=0;O>p;p++)d=h,h=M?F.childRangeEndForGroupAtIndex(p):R,V[p]=d;for(V[p]=R,g=Math.ceil(R/Math.ceil(x/G)),k=k.ensureLength(g*s,!1),U=U.ensureLength(R*u,!1),b=0,f=0,C=0,D=+!!M,p=0;O>p;p++)for(c=V[p+1]-V[p],v=0,$=0,y=0,I=0;;){if(T=v>=x,L=$>=c,T||L){if(A=b*s,k[A+e]=D,k[A+t]=b,k[A+n]=C,k[A+i]=f,k[A+r]=I,C+=I,M&&L&&c>0&&D++,v>x){var B=f-1;
if(S=U[B*u+l],S===x-1)for(E=B;;){if(E--,0>E)break;if(w=E*u,U[w+o]!==b)break;var W=U[w+l];if(S-G>=W){for(var z=E+1;B>=z;z++)U[z*u+l]--;break}S=W}}if(v&&(b++,y++),I=0,v=0,$>=c)break}m=f*u,U[m+a]=p,U[m+o]=b,U[m+l]=v,_=N.aspectRatioEstimateForItemAtIndex(f),1>=_?_=1:(2===_||_>=3)&&(v+=Math.ceil(Math.min(2,_-1)),_=1.5),1/_>I&&(I=Math.min(1,1/_)),v++,$++,f++}this._totalRowCount=b,P=Date.now()-P}},groupIndexForItemAtIndex:function(e){return e>=this.itemCountForLayout?0/0:this._itemLayoutInfo.items[u*e+a]},leftForItemAtIndex:function(e){return e>=this.itemCountForLayout?0/0:this._itemLayoutInfo.items[e*u+l]},widthForItemAtIndex:function(){return 1},topForItemAtIndex:function(i){if(i>=this.itemCountForLayout)return 0/0;var r=this._rowLayoutInfo.items,a=this._itemLayoutInfo.items[i*u+o],l=a*s,d=this.groupGap;return r[l+e]*d+r[l+t]*this.rowSpacing+r[l+n]*this.columnWidth+this.topInset+this.topCompensation},heightForItemAtIndex:function(e){if(e>=this.itemCountForLayout)return 0/0;var t=this._itemLayoutInfo.items[e*u+o];return this._rowLayoutInfo.items[t*s+r]*this.columnWidth},_updateForColumnCount:n$7("actualColumnCount","viewportWidth","viewportHeight",function(e,t,n){this.isInitialized&&this.columnCount!==e&&(this.columnCount=e,this.decideLayoutMetricsForViewport(t,n),this.invalidateComputedLayoutInfo(),this.update())}),decideLayoutMetricsForViewport:function(e){var t=this.columnCount,n=13,i=17/1368*e*Math.min(1,6/t),r=(e-2*n-(t-1)*i)/t,s=i,a=n,o=0|40*(.5*Math.min(1,e/600)+.5),l=0|(66-o)*(s/17)+o-s,u=.4,d=this.groupProvider?o-l:n;this.leftInset=n,this.columnSpacing=i,this.columnWidth=r,this.rowSpacing=s,this.bottomInset=a,this.groupHeight=o,this.groupGap=l,this.groupPositionInGap=u,this.topCompensation=d,this.layoutManager.verticalOverdraw=l+1
},startingColumnForItemAtIndex:function(e){return e>=this.itemCountForLayout?0/0:this._itemLayoutInfo.items[e*u+l]},columnSpanForItemAtIndex:function(e){if(e>=this.itemCountForLayout)return 0/0;var t=this.startingColumnForItemAtIndex(e),n=(this.startingColumnForItemAtIndex(e+1)||this.columnCount)-t,i=Math.max(1,Math.floor(this.provider.aspectRatioEstimateForItemAtIndex(e)));return Math.min(n,i)},layoutItemView:function(e,t,n){var i=this.leftInset+this.startingColumnForItemAtIndex(t)*(this.columnWidth+this.columnSpacing),r=n.y,s=this.columnSpanForItemAtIndex(t)*(this.columnWidth+this.columnSpacing)-this.columnSpacing,a=n.height,o=this.columnWidth,l=t;e.doLayout(i,r,s,a,o,l)},_saveSelectionBeforeContentsChange:n$7("contentChangeNotifier.contentsWillChange",function(e){if(e){this._removeSelectedUniqueIdList();var t=this.get("selectedIndexes"),n=this.provider;if(!t||!n.hasUniqueIds)return n.hasUniqueIds||n$63.warn("The IndexedModelProvider ("+n+") serving FlexibleGridViewController ("+this+") lacks uniqueIds. Skipping attempt to preserve currently selected items."),void 0;for(var i=t.toArray(n$319.getInstance()),r=i.length,s=0;r>s;s++)i[s]=n.uniqueIdForIndex(i[s]);this._selectedUniqueIds=i,n$130(this._removeSelectedUniqueIdList,0)}}),_removeSelectedUniqueIdList:n$299(function(){this._selectedUniqueIds&&n$319.dispose(this._selectedUniqueIds),this._selectedUniqueIds=null}),_restoreSelectionAfterContentsChange:n$7("contentChangeNotifier.contentsDidChange",function(e){if(e){var t=this.get("selectedIndexes"),n=this._selectedUniqueIds;if(n&&t){var i=this.provider;n$66.pause(),t.clear();
for(var r=0,s=n.length;s>r;r++){var a=n[r],o=i.indexForUniqueId(a);-1!==o&&t.add(o)}n$66.resume(),this._removeSelectedUniqueIdList()}}}),__superMap:{_1M788zB9UCY$2aX$init:"init",_1M788zB9UCY$487$cancelSelection:"cancelSelection",_1M788zB9UCY$4AM$itemViewDidEnter:"itemViewDidEnter",_1M788zB9UCY$4Fc$viewForViewClass:"viewForViewClass"}}),h={},c=n$5.extend(n$10,{preferredColumnCount:n$9()});n$818=d,d.__QUALIFIED_CLASS_NAME__="Photos.FlexibleGridViewController",c.__QUALIFIED_CLASS_NAME__="Photos.SharedPrefs$629"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$10,n$720],footerView:n$9(),updateFooterView:n$7("footerView",function(t){var e=this._cfs_lastFooterView,n=this.getPath("view.itemViews");this._cfs_lastFooterView=t,t!==e&&(e&&n.remove(e),t&&n.add(t))}),_footerViewHeightDidChange:n$7("footerView.isAttached","footerView.height",function(t,e){(this._cfs_lastAttached!==t||this._cfs_lastHeight!==e)&&(this._cfs_lastAttached=t,this._cfs_lastHeight=e,t&&this.footerViewHeightDidChange(e))}),footerViewHeightDidChange:function(){this.update()},updateScrollBounds:function(t,e,n){var i=n+t.bottom,r=this.get("footerView");r&&(r.style.translateDevicePixels(e/2-r.width/2,i),t.bottom+=r.height||0),this.__s._2MEr5lCJYwm$S4$updateScrollBounds.apply(this,arguments)},__superMap:{_2MEr5lCJYwm$S4$updateScrollBounds:"updateScrollBounds"}};n$816=t}();
    
    
        
!function(){"use strict";var e={mixinDependencies:[n$47],height:n$17(n$81),width:n$17(n$81)};n$814=e}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$814,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_itemsText",attributes:{}}],classes:["photos-update-footer-items-text"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinnerView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_updateButton"}],classes:["photos-update-footer-updating-block"]}],classes:["photos-update-footer",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"isUpdating",truevalue:"photos-update-footer-updating",attributes:{}}]}},isUpdating:n$9(!1),dateUpdated:n$9({defaultValue:function(){return new Date}}),numberOfItems:n$9(0),performUpdate:n$23,_itemsText:n$9({readOnly:!0,dependencies:["numberOfItems"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 1===r?n$290("Grid.Footer.SingleItem.Text"):n$290("Grid.Footer.NumberOfItems.Text",{numberOfItems:r})}}),_updateButton:n$9({defaultValue:function(){return t.create()}}),_spinnerView:n$84(n$690.extend({isAnimating:n$9({readOnly:!0,dependencies:["isAttached","parent.isUpdating"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&r}})})),height:n$9({readOnly:!0,cacheable:!0,dependencies:["isAttached"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.element.offsetHeight:0}}),width:n$9({readOnly:!0,cacheable:!0,dependencies:["isAttached"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?this.element.offsetWidth:0
}})}),t=n$400.extend({additionalClassNames:["photos-update-footer-updating-text"],isDisabled:n$9({readOnly:!0,dependencies:["isAttached","parent.isUpdating"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&r}}),action:"performUpdate",title:n$9({readOnly:!0,dependencies:["isAttached","isBeingHovered","parent.isUpdating","parent.dateUpdated",n$211.bindingFor("showFullUpdatedTimestamp")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[4+n]),s=i.internalGetPath(this,t[3+n]),a=i.internalGetPath(this,t[2+n]),o=i.internalGetPath(this,t[1+n]),l=i.internalGetPath(this,t[0+n]);return l?a?n$290("Grid.Footer.Updating.Text"):o?n$290("Grid.Footer.UpdateNow.Text"):r?n$19("%{dateUpdated:h}:%{dateUpdated:mm}:%{dateUpdated:ss} %{dateUpdated:a}",{dateUpdated:s,dateUpdatedFormatter:n$542}):n$290("Grid.Footer.UpdatedAt.Text",{dateUpdated:s,dateUpdatedFormatter:n$542}):void 0}}),_minWidth:0,_preserveMinWidth:n$7("titleDidRender","parent.isUpdating","isAttached",function(e,t,n){if(n){var i=this.get("element");this._minWidth=Math.max(this._minWidth,i.offsetWidth),this.get("style").set("min-width",t?void 0:this._minWidth)}})});n$817=e,e.__QUALIFIED_CLASS_NAME__="Photos.CollectionLastUpdatedFooterView",t.__QUALIFIED_CLASS_NAME__="Photos.CollectionFooterUpdateButton$632"}();
    
    
        
!function(){"use strict";var t={mixinDependencies:[n$816],footerView:n$9({readOnly:!0,cacheable:!0,dependencies:["provider.itemCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);if(0===r)return null;var a=this._lastUpdatedFooterView;return a||(a=this._lastUpdatedFooterView=n$817.create({numberOfItems:this.bindingFor("provider.itemCount"),isUpdating:n$330.bindingFor("dataManager.isSyncing"),dateUpdated:n$103.bindingFor("application.dateUpdated"),performUpdate:function(){n$326().fetchChangeset()}})),a}}),footerViewHeightDidChange:function(t){t&&(this.bottomAnchor.inset=t),this.update()}};n$819=t}();
    
    
        
!function(){"use strict";var t;n$298.observe("gridDerivativePreloadingWindowRowCount",function(e){t=e});var e={_dpl_currentStartIndex:0,_dpl_currentEndIndex:0,preloadNearRange:function(e,n){var i=this.__s._3qy8qq72XKw$Hx$preloadNearRange.apply(this,arguments),r=this.provider.itemCount,a=this.actualColumnCount*t/2;e=Math.min(Math.max(e-a,0),r),n=Math.min(Math.max(n+a+1,0),r);var s=this._dpl_multipleImageDerivativeLoader.assets;if(s||(s=this._dpl_multipleImageDerivativeLoader.assets=[]),e>=this._dpl_currentStartIndex&&n<=this._dpl_currentEndIndex)return i;s.length=0;for(var o=Math.abs(this.scrollVelocityEMA),l=o>3e3?0:o>0?1:1/0,h=e;n>h;h++){if(h<this._dpl_currentStartIndex||h>=this._dpl_currentEndIndex){if(!l)continue;if(this._dpl_currentStartIndex-h>l)continue;l--}var d=this.provider.itemAtIndex(h).retain(this).autorelease(this);s.push(d)}return this._dpl_multipleImageDerivativeLoader.propertyChanged("assets"),s.length?(this._dpl_currentStartIndex=this.provider.indexOfItem(s[0]),this._dpl_currentEndIndex=this.provider.indexOfItem(s[s.length-1])+1):(this._dpl_currentStartIndex=0,this._dpl_currentEndIndex=0),i||s.length!==n-e},_dpl_multipleImageDerivativeLoader:n$9(n$84(n$636.extend({width:1,height:1,priority:n$9({readOnly:!0,dependencies:["owner.loadPriorityBase"],get:function(t){return t+this.getPath("owner.preloadPriorityOffset")}})}))),__superMap:{_3qy8qq72XKw$Hx$preloadNearRange:"preloadNearRange"}};n$820=e}();
    
    
        
!function(){"use strict";var t=200,e=n$818.extend(n$607,n$733,n$819,n$820,{addItemsToAlbum:function(t){var e=t.context;return e(this.provider.clientIdsForIndexes(this.selectedIndexes.toArray())),!0},itemsDidMove:function(){this.__s._1jULZ3gjU51$Go$itemsDidMove.apply(this,arguments);var t=this.getPath("footerView.style");t&&t.set("z-index",this.getPath("provider.itemCount")+1)},selectedAssets:n$9({readOnly:!0,dependencies:["isAttached","selectedIndexes","selectedItemCount"],get:function(e,n,i,r){return r.internalGetPath(this,n[0+i])?this.provider.clientIdsForIndexes?r.internalGetPath(this,n[2+i])>t?null:this.provider.clientIdsForIndexes(this.selectedIndexes.toArray()).map(function(t){return n$309.create(t)}):null:null}}),__superMap:{_1jULZ3gjU51$Go$itemsDidMove:"itemsDidMove"}});n$821=e,e.__QUALIFIED_CLASS_NAME__="Photos.AssetGridViewController"}();
    
    
        
!function(){"use strict";var e=n$763.extend(n$10,{body:n$4("<br><br>"),_totalAttachmentSize:0,_numOfFilesToAttach:0,_files:n$84(Array),_sizeLimit:n$9({readOnly:!0,cacheable:!0,dependencies:[n$298.bindingFor("maxEmailAttachmentSizeInMB")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return 1e6*r}}),_openEmailDidSucceed:null,_openEmailDidFail:null,openComposeWindowWithClientIds:function(e,t,n){if(!e.length)return n&&n(),void 0;this._openEmailDidSucceed=t,this._openEmailDidFail=n,this._numOfFilesToAttach=e.length;var i=this._numOfFilesToAttach;this.openWindow(),e.forEach(function(e){var t=n$309.create(e).retain(this);t.fetchDerivativeInfo(function(){return t.get("preferredEmailDerivativeInfo")}).then(this._addAsset.bind(this,t),this._loadFailed.bind(this,t)).then(function(){--i||this._hasFailed||this._allReady(t),t.release(this)}.bind(this))},this)},openComposeWindowWithModelProvider:function(e,t,n,i){for(var r=[],s=0,a=t.length;a>s;s++){var o=e.itemAtIndex(t[s]).retain(this);r.push(o.get("clientId")),o.release(this)}this.openComposeWindowWithClientIds(r,n,i)},openComposeWindowWithAsset:function(e,t,n){this.openComposeWindowWithClientIds([e.get("clientId")],t,n)},_addAsset:function(e,t){var n,i;n$298.get("useCVWSForDerivatives")?(n=t.url,i=t.fileName):(i=e.getPath("details.filename"),n=n$494.create(),n$461.setQueryParamForAsset(n,e),n.setQueryParameter("derivativeId",t.derivativeId),n.setQueryParameter("isEdited",+t.isEdited||0),n=n.toString());var r=t.byteSize;this._files.push({fileName:i,type:t.mimeType,size:r,url:n}),this._totalAttachmentSize+=r},_hasFailed:!1,_loadFailed:function(e,t){if(n$63.error("Could not get email URL for %{0}: %{1}",[e.get("clientId"),t]),!this._hasFailed){this.closeWindow(),this._hasFailed=!0;
var n=n$368.get("sharedInstance");n.showEmailAlert({itemCount:this._numOfFilesToAttach,genericAssetType:e.get("genericType")}),this._openEmailDidFail&&this._openEmailDidFail(),n$103.setPath("application.areKeyboardShortcutsDisabled",!1)}},_allReady:function(e){var t=this.get("_sizeLimit");if(t&&this._totalAttachmentSize>t){var n=n$368.get("sharedInstance");return n.showEmailAlert({itemCount:this._numOfFilesToAttach,genericAssetType:e.get("genericType"),maxFileSizeInMB:n$298.get("maxEmailAttachmentSizeInMB"),failure:n$368.OVER_SIZE_LIMIT}),this.closeWindow(),this._openEmailDidFail&&this._openEmailDidFail(),void 0}this._addEmailContents(),n$103.setPath("application.areKeyboardShortcutsDisabled",!1)},_addEmailContents:function(){this.addAttachments(this._files),this.populateFields(),this._openEmailDidSucceed&&this._openEmailDidSucceed()}});n$825=e,e.__QUALIFIED_CLASS_NAME__="Photos.ComposeEmailController"}();
    
    
        
!function(){"use strict";var t=n$821.extend(n$698,n$359,{staticMembers:{createBookmark:function(t){var e=null;return n$298.get("enableUnreleasedFeatures")&&(e=n$823.createBookmark(t)),n$731.getBookmark({returnTo:e,type:n$738,focusedId:t&&t.clientId})}},viewClass:n$559(function(t){return t.extend(n$635,n$663)}),initialSharedPrefs:{preferredColumnCount:n$211.moments_defaultColumnCount},groupViewClass:n$514(function(){return n.extend({owner:this})}),groupProvider:n$457.datastore,provider:n$309.datastore,title:n$9(n$290("Tab.Moments")),toolbarConfiguration:n$608.extend({leftItems:["zoomSlider"],middleItem:"modeSwitcher",rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableUploads")],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r?["selectPhotosButton","separator1","uploadButton"]:["selectPhotosButton"]}}),isReturnToAllowed:n$9({readOnly:!0,dependencies:["owner.isEmptyUIVisible"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r}}),zoomSlider:n$822.extend({gridViewController:n$14("owner.owner")}),selectPhotosButton:n$535.extend({isDisabled:n$14("owner.owner.isSelectionButtonDisabled"),event:"enterSelectionMode"})}),removeType:n$9(n$14("provider.removeType")),isDeleteAllowed:n$9(n$14("provider.isRemoveAllowed")),isSelectionButtonDisabled:n$9({readOnly:!0,dependencies:["provider.itemCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r}}),downloadItems:function(){var t=this.get("selectedItemCount");if(50>t)return t&&this._performDownload(),void 0;var e=n$368.get("sharedInstance");e.showDownloadAlert({itemCount:t,type:null,target:this,action:"_performDownload"})
},_performDownload:function(){for(var t=n$518.get("sharedInstance"),e=this.get("selectedIndexes").toArray(),n=0,i=e.length;i>n;n++){var r=this.get("provider").itemAtIndex(e[n]).retain(this);t.download(r),r.release(this)}this.cancelSelection(),n$203.get("cloudOSService").recordStat("DownloadStat",{count:e.length,location:"MomentsViewController"})},emailItems:function(){var t=n$825.create();t.openComposeWindowWithModelProvider(this.get("provider"),this.get("selectedIndexes").toArray(),this._openEmailDidSucceed)},_openEmailDidSucceed:n$299(function(){this.cancelSelection()}),deleteItems:function(){if(this.get("selectedItemCount")){var t=n$368.get("sharedInstance");t.showRemoveAlert({modelProvider:this.get("provider"),itemCount:this.get("selectedItemCount"),type:null,target:this,action:"_performItemDelete"})}},_performItemDelete:function(){this.provider.removeItemsAtIndexesAndWriteToServer(this.get("selectedIndexes").toArray()),this.cancelSelection()},hoveredGroupIndex:n$9(-1),_computeHoveredGroupIndex:n$358(function(){var t=this._groupHoverMouseY||-1,e=-1===t?-1:this.groupIndexForTopPosition(t+this.scrollTop);this._setHoveredGroupIndex(e)},50),_removeHoveredGroupIndex:n$299(function(){var t=this._groupHoverMouseY=-1;this._setHoveredGroupIndex(t)}),_setHoveredGroupIndex:function(t){this.get("hoveredGroupIndex")!==t&&this.set("hoveredGroupIndex",t)},itemsDidMove:function(){this.__s._yqM8amBTgc$22H$itemsDidMove.apply(this,arguments);var t=Date.now();this._dateFirstScrollSinceLastMouseMove||(this._dateFirstScrollSinceLastMouseMove=t),this._dateFirstScrollSinceLastMouseMove<t-300&&this._removeHoveredGroupIndex()
},pointerOut:function(){this._clearPointerOutHoverRemovalTimeout(),this._pointerOutHoverRemovalTimeout=n$130(this._removeHoveredGroupIndex,50)},_clearPointerOutHoverRemovalTimeout:function(){this._pointerOutHoverRemovalTimeout&&(clearTimeout(this._pointerOutHoverRemovalTimeout),this._pointerOutHoverRemovalTimeout=null)},pointerMove:function(t){this._dateFirstScrollSinceLastMouseMove=0/0,this._clearPointerOutHoverRemovalTimeout(),this._groupHoverMouseY=t&&t.clientY||-1,this._computeHoveredGroupIndex()},dispose:function(){this._clearPointerOutHoverRemovalTimeout(),this.__s._yqM8amBTgc$2dt$dispose.apply(this,arguments)},__superMap:{_yqM8amBTgc$22H$itemsDidMove:"itemsDidMove",_yqM8amBTgc$2dt$dispose:"dispose"}}),e=n$400.extend({staticMembers:{_knownWidths:[],templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],styles:{"min-width":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"minWidth",attributes:{},unit:null,property:"min-width"},"font-size":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"fontSize",attributes:{},unit:null,property:"font-size"}}}}},additionalClassNames:n$16(["select-moment-button"]),action:"_didSelectMoment",title:n$9({readOnly:!0,dependencies:["parent","parent.model","parent.owner.selectedIndexes.count","_title"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[3+n]),a=i.internalGetPath(this,e[2+n]),s=i.internalGetPath(this,e[1+n]),o=i.internalGetPath(this,e[0+n]);if(r)return r;if(!o||!s)return"";var l=o.getPath("owner.selectedIndexes"),h=a>=s.get("itemCount")&&l.contains(s.get("assetStartIndex"),s.get("assetEndIndex")-1);return h?n$290("Moments.DeselectMomentButton.Title"):n$290("Moments.SelectMomentButton.Title")
}}),_title:n$9(),_isHovered:n$9({readOnly:!0,dependencies:["parent.owner.hoveredGroupIndex","parent","isBeingHovered"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[0+n]);return r||s===(a&&a._ggs_groupIndex)}}),_addHoveredClassName:n$7("_isHovered",function(t){this.get("element").classList.toggle("moment-is-hovered",t)}),fontSize:n$9(n$14("parent.fontSize")),minWidth:n$9({readOnly:!0,cacheable:!1,dependencies:["fontSize"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);if(!r)return 0;var a=this.constructor._knownWidths[r];if(!a){var s=this.get("style"),o=s.getInline("font-size"),l=s.getInline("min-width");s.set("font-size",r).clear("min-width"),this.set("_title",n$290("Moments.DeselectMomentButton.Title"));var h=this.get("element").offsetWidth;this.set("_title",n$290("Moments.SelectMomentButton.Title"));var d=this.get("element").offsetWidth,u=Math.max(h,d);a=u,u&&(this.constructor._knownWidths[r]=a),this.set("_title",null),s.set("min-width",l).set("font-size",o)}return a||0}})}),n=n$728.extend({rightAccessoryView:n$424(e),owner:n$9(),rightAccessoryWidth:function(){return this.getPath("rightAccessoryView.minWidth")},_didSelectMoment:function(){var t=this.get("model");this.sendEvent({type:"userRangeSelectionRequest",rangeStart:t.get("assetStartIndex"),rangeEnd:t.get("assetEndIndex"),enableShouldCancelSelectionUponEmptySelection:!0})}});n$831=t,t.__QUALIFIED_CLASS_NAME__="Photos.MomentsViewController",e.__QUALIFIED_CLASS_NAME__="Photos.SelectMomentButton$637",n.__QUALIFIED_CLASS_NAME__="Photos.MomentsGridGroupHeaderView$637"
}();
    
    
        
!function(){"use strict";var e="album-contents-selection",t=n$731.extend(n$736,{staticMembers:{type:e},state:n$711({dependencies:["focusedId","focusedIdOffset","focusedIdOffsetLandmark","columnCount","destinationFolderId"],serializer:n$208.sharedInstance}),destinationFolderId:n$9(),doVisitPrepWork:function(e,t){var n=this.destinationFolderId;return n?(n$370.create(n).load().then(e,t),void 0):(t(),void 0)}});n$731.registerBookmarkType(e,t),n$832=e,n$988=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.AlbumContentsSelection"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"title",attributes:{}}],name:"_titleElement",classes:["photos-grid-group-header-title"]},{type:"ELEMENT",tagname:"div",children:[],name:"_separator",classes:["photos-grid-group-header-separator"]}],classes:["photos-grid-group-header-view","photos-root-folder-group-header-view","absolutely-positionable",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"includesSeparator",truevalue:"photos-includes-separator",attributes:{}}]}},model:n$355(),title:n$9({readOnly:!0,dependencies:["model.clientId"],isCacheable:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===n$370.TOP_LEVEL_USER_ID?n$290("Folder.My.Albums.Header"):""}}),includesSeparator:n$9({dependencies:["title"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!!r}}),clearForReuse:function(){this.unsetAllStrongRefs(),this.positionOffScreen()},positionOffScreen:function(){this.get("style").translate(-1e4,-1e4).scale(0).layerBack()},doLayout:function(e,t,n,i){t=0|t/2.5;var r=n$522.get("devicePixelRatio"),s=this.get("includesSeparator");this.get("style").set("height",0|e-5*s).set("z-index",i).set("line-height",0|e-3*s).set("font-size",0|e/2.5+1).translateY(Math.round(n*r)/r).layerBack(),n$160(this.get("_separator")).set("top",e-5).set("left",t).set("right",t),n$160(this.get("_titleElement")).set("padding-left",t)}});n$827=e,e.__QUALIFIED_CLASS_NAME__="Photos.RootFolderGridHeaderView"
}();
    
    
        
!function(){"use strict";var e=n$818.extend(n$698,{startsAtBottom:!1,useStickyHeaders:!1,shouldPreloadGroups:!1,groupViewClass:n$827,decideLayoutMetricsForViewport:function(e){var t=this.columnCount,n=30,i=40/1368*e*Math.min(1,6/t),r=(e-2*n-(t-1)*i)/t,s=i+20,o=0|.75*s,a=0|40*(.5*Math.min(1,e/600)+.5),l=0|(66-a)*(s/17)+a-s,u=.21,h=n-+!!this.groupProvider*l;this.columnCount=t,this.leftInset=n,this.columnSpacing=i,this.columnWidth=r,this.rowSpacing=s,this.bottomInset=o,this.groupHeight=a,this.groupGap=l,this.groupPositionInGap=u,this.topCompensation=h,this.layoutManager.verticalOverdraw=l+1}});n$828=e,e.__QUALIFIED_CLASS_NAME__="Photos.FoldersGridViewController"}();
    
    
        
!function(){"use strict";var e="folders",t=n$731.extend(n$736,{staticMembers:{type:e},subfolderId:n$9(n$14("focusedId")),doVisitPrepWork:function(e,t){return this.resource===n$611.clientId?(e(),void 0):(n$370.create(this.resource).load().then(e,t),void 0)},_readColumnCountFromReturnTo:n$170("returnTo.columnCount",function(e){e&&this.setIfChanged("columnCount",e)}),_pushColumnCountToReturnTo:n$170("columnCount",function(e){var t=this.returnTo;t&&e&&t.setIfChanged("columnCount",e)})});n$731.registerBookmarkType(e,t),n$830=e,n$989=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.Folders"}();
    
    
        
!function(){"use strict";var e=n$828.extend(n$607,n$733,n$364,{staticMembers:{createBookmark:function(t,n){var i=t.get("clientId");(i===n$370.TOP_LEVEL_GENERATED_ID||i===n$370.TOP_LEVEL_USER_ID)&&(t=n$611);var r=null;if(t!==n$611){var s=t.get("parentFolder").retain(this);r=e.createBookmark(s,t),s.release(this)}return n$731.getBookmark({returnTo:r,type:n$830,resource:t.get("clientId"),subfolderId:n&&n.get("clientId")})}},_isShowingRootFolder:n$9({readOnly:!0,dependencies:["provider"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===n$611}}),viewClass:n$559(function(e){return e.extend(n$663,{additionalClassNames:n$16(["photos-folders-grid-view"])})}),footerView:n$9(null),isLoading:n$9({readOnly:!0,dependencies:["provider.loadingStatus"],get:function(e,t,n,i){for(var r=i.internalGetPath(this,t[0+n]),s=n$611.groupProvider.itemCount,o=!!s;s--&&o;)n$611.groupProvider.itemAtIndex(s).itemCount||(o=!1);return o?!1:r!==n$329.LOADED}}),hasError:n$9({readOnly:!0,dependencies:["provider.loadingStatus"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===n$329.ERRORED||r===n$329.CANCELLED}}),emptyUIMessage:n$9({readOnly:!0,dependencies:["_isShowingRootFolder","hasError"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);return s?n$290("Albums.Error.LoadFailed.Title"):r?n$290("EmptyLibrary.Message"):n$290("EmptyFolder.Message")}}),emptyUIAdvice:n$9({readOnly:!0,dependencies:["_isShowingRootFolder","hasError"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]);return s?n$290("Albums.Error.LoadFailed.Action"):r?n$290("EmptyLibrary.Advice"):n$290("EmptyFolder.Advice")
}}),sharedPrefsName:"folders",initialSharedPrefs:{preferredColumnCount:n$211.folders_defaultColumnCount},isAddAlbumDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isCreateAllowed")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),provider:null,groupProvider:null,init:function(e){var t=e.bookmark,n=t.get("resource"),i=t.get("subfolderId");this.provider=n$372.modelProviderForBookmarkId(n).retain(this),this.groupProvider=this.provider.groupProvider||null,this.provider.load(),this._scrollToItemId=i,this.__s._1cNSw8NV6AV$1x_$init.apply(this,arguments)},title:n$9({readOnly:!0,get:function(){var e=this.provider;return e?e.get("title"):""}}),toolbarConfiguration:n$608.extend({leftItems:["zoomSlider"],middleItem:n$9({readOnly:!0,dependencies:["owner.provider"],get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])===n$611?["modeSwitcher"]:["folderInfo"]}}),folderInfo:n$573.extend({folder:n$14("owner.owner.provider")}),rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableUploads")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=[];return s.push("addAlbumButton"),r&&(s.length&&s.push("separator1"),s.push("uploadButton")),s}}),zoomSlider:n$822.extend({gridViewController:n$14("owner.owner")}),addAlbumButton:n$680.extend({folder:n$14("owner.owner.provider"),event:"showAlbumCreationPopover",isDisabled:n$14("owner.owner.isAddAlbumDisabled")})}),_folderLoadingStatusDidChange:n$7("provider.loadingStatus",function(e){e===n$370.ERRORED&&this.provider.isAlbum!==!1&&this.navigateToReturnToIfActive()}),_returnToParentFolderIfNeeded:n$7("provider.isGone",function(e){e&&this.navigateToReturnToIfActive()
}),__superMap:{_1cNSw8NV6AV$1x_$init:"init"}});n$833=e,e.__QUALIFIED_CLASS_NAME__="Photos.FoldersViewController"}();
    
    
        
!function(){"use strict";var e=13,t=n$674.extend({owner:n$9(),additionalClassNames:["photos-selection-toolbar"],selectedItemCount:n$9(0),destinationFolder:n$9(),configuration:n$84(n$523.extend({items:["selectionLabel","cancelButton","separator","continueButton"],selectionLabel:n$9(n$84(n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"text",attributes:{escape:"false",signal:"_recenter"}}],classes:["photos-select-photos-label"]}},owner:n$9(),text:n$9({readOnly:!0,dependencies:["owner.owner.selectedItemCount","owner.owner.destinationFolder.title"],get:function(e,t,s,a){n.count=a.internalGetPath(this,t[0+s]);var o=n.albumName="<span style='font-weight: bold;'>"+n$750(a.internalGetPath(this,t[1+s]))+"</span>";return n$483(o?i:r,n)}}),_updateOnTextChange:n$170("isAttached","_recenter",function(e){e&&this.owner.owner.update()})}))),cancelButton:n$9(n$84(n$538.extend({owner:n$9(),additionalClassNames:["photos-select-textonly-button","photos-light"],title:n$290("Toolbars.AlbumContentsSelection.CancelButton.Title"),event:"cancelSelection"}))),separator:n$677,continueButton:n$9(n$84(n$538.extend({owner:n$9(),additionalClassNames:["photos-select-textonly-button"],title:n$290("Toolbars.AlbumContentsSelection.ContinueButton.Title"),event:"finishSelection"}))),layout:function(t){t.continueButton.right=t.width-e,t.separator.left=t.continueButton.left-e,t.cancelButton.right=t.separator.left-e,t.selectionLabel.centerHorizontally(),t.selectionLabel.moveSoThatRight("<=",t.cancelButton.left-e),t.selectionLabel.resizeSoThatLeft(">=",e),t.selectionLabel.width>.7*t.width&&(t.selectionLabel.left=e)
}}))}),n={},i=["Toolbars.AlbumContentsSelection.SelectItems.Title","Toolbars.AlbumContentsSelection.SingleItemSelected.Title","Toolbars.AlbumContentsSelection.MultipleItemsSelected.Title"],r=["Toolbars.Selection.SelectItems.Title","Toolbars.Selection.SingleItemSelected.Title","Toolbars.Selection.MultipleItemsSelected.Title"];n$834=t,t.__QUALIFIED_CLASS_NAME__="Photos.AlbumContentsSelectionToolbarView"}();
    
    
        
!function(){"use strict";var e=n$831.extend({staticMembers:{createBookmark:function(e,t,n){return n$731.getBookmark({returnTo:e||n$833.createBookmark(n$611),type:n$832,destinationFolderId:t&&t.clientId,focusedId:n&&n.clientId})}},destinationFolder:n$355({dependencies:["bookmark.destinationFolderId"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$370.create(r):null},set:function(e,t,n,i){var r=e?e.clientId:null,s=this.bookmark;s&&s.destinationFolderId!==r&&(n[0+i]=r)},writeDependencySetPathMap:[!0]}),actionMode:n$9({readOnly:!0,binding:n$14("selectionMode")}),selectionMode:n$84(n$808.extend(n$364,{toolbarViewController:n$355(n$84(n$809.extend({toolbarView:n$84(n$834.extend({topVC:n$9(n$14("owner.owner.owner")),selectedItemCount:n$14("topVC.selectedItemCount"),destinationFolder:n$14("topVC.destinationFolder"),nextResponder:n$9(n$14("owner.view"))}))})))})),toolbarConfiguration:n$608,cancelSelection:function(){this.selectionManager.clearSelection(),this.sendEvent("userReturnRequest")},finishSelection:n$299(function(){var e=this.destinationFolder;e.appendAssetsWithClientIds(this.provider.clientIdsForIndexes(this.selectedIndexes.toArray())),e.isStoreModel||e.saveToStore(),this.selectionManager.clearSelection(),this.sendEvent("navigateToFolder",e)}),handleKeyDown:function(e){return e.keyCode===n$126.ENTER?(this.finishSelection(),!0):this.__s._3ZYXN9NbG_j$1PW$handleKeyDown.apply(this,arguments)},__superMap:{_3ZYXN9NbG_j$1PW$handleKeyDown:"handleKeyDown"}});n$888=e,e.__QUALIFIED_CLASS_NAME__="Photos.AlbumContentsSelectionViewController"}();
    
    
        
!function(){"use strict";var t="folder",e=n$731.extend(n$736,{staticMembers:{type:t},doVisitPrepWork:function(t,e){n$370.create(this.resource).load().then(t,e)}});n$731.registerBookmarkType(t,e),n$835=t,n$838=e,e.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.Folder"}();
    
    
        
!function(){"use strict";var t=function(t,e){var n=t.get("removeType");return n$133.getPath("sharedInstance.activeKeys").contains(n$748.OPTION)&&n===n$366.REMOVE&&t.itemClass.kindOf(n$309)&&(n=n$366.DELETE,e&&e(n)),n};n$837=t}();
    
    
        
!function(){"use strict";var t=n$821.extend({staticMembers:{createBookmark:function(t,e,n){var i=n||n$835;return n$731.getBookmark({returnTo:n$833.createBookmark(t.get("parentFolder"),t),type:i,resource:t.get("clientId"),focusedId:e&&e.get("clientId")})}},viewClass:n$559(function(t){return t.extend(n$635,n$663)}),createViewOptions:function(){var t=this.__s._2MyzqyVlYI9$aG$createViewOptions.apply(this,arguments);return n$43(t,{allowsDrop:this.bindingFor("isUploadAllowed")})},startsAtBottom:!1,initialSharedPrefs:{preferredColumnCount:n$211.albums_defaultColumnCount},shouldButtonizeEmptyUIMessage:n$9({readOnly:!0,dependencies:["provider.isServerGenerated"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r}}),emptyUIMessage:n$9({readOnly:!0,dependencies:["provider.isUserCreatedSmartAlbum","provider.title"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a?n$290("Album.SmartAlbumUnsupported.Message",{albumTitle:r}):n$290("EmptyAlbum.Message.Button.Title")}}),emptyUIAdvice:n$9({readOnly:!0,dependencies:["provider.isUserCreatedSmartAlbum"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r?n$290("Album.SmartAlbumUnsupported.Advice"):n$290("EmptyAlbum.Advice")}}),emptyUIMessageButtonActivated:function(){this.sendEvent("navigateToAlbumContentsSelection",this.provider)},_folder:n$355(),init:function(t){var e=t.bookmark,n=e.get("resource"),i=+e.get("focusedId");(n===n$370.ALL_PHOTOS_ID||n===n$370.RECENTLY_ADDED_ID)&&(this.startsAtBottom=!0);var r=this.provider=n$370.create(n).retain(this).autorelease(this);
r.load(),this._scrollToItemId=i,this.__s._2MyzqyVlYI9$1N4$init.apply(this,arguments),this.set("_folder",r)},_folderLoadingStatusDidChange:n$7("_folder.loadingStatus",function(t){t===n$370.ERRORED&&(this._folder.isAlbum||this.navigateToReturnToIfActive())}),_returnToParentFolderIfNeeded:n$7("provider.isGone",function(t){t&&this.navigateToReturnToIfActive()}),toolbarConfiguration:n$608.extend({leftItems:["zoomSlider"],middleItem:"folderInfo",folderInfo:n$573.extend({folder:n$14("owner.owner.provider")}),zoomSlider:n$822.extend({gridViewController:n$14("owner.owner")}),selectPhotosButton:n$535.extend({isDisabled:n$14("owner.owner.isSelectionButtonDisabled"),event:"enterSelectionMode"}),selectVideosButton:n$535.extend({isDisabled:n$14("owner.owner.isSelectionButtonDisabled"),event:"enterSelectionMode"}),rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableUploads"),"owner.provider.clientId","owner.isUploadAllowed"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[2+n]),a=i.internalGetPath(this,e[1+n]),s=i.internalGetPath(this,e[0+n]),o=[],l=a===n$370.VIDEOS_ID?"selectVideosButton":"selectPhotosButton";return l&&o.push(l),s&&r&&(o.length&&o.push("separator1"),o.push("uploadButton")),o}})}),title:n$9(n$14("provider.title")),isSelectionButtonDisabled:n$9({readOnly:!0,dependencies:["provider.itemCount"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r}}),removeType:n$9(n$14("provider.removeType")),isDeleteAllowed:n$9(n$14("provider.isRemoveAllowed")),isUploadAllowed:n$9(n$14("provider.isUploadAllowedInUI")),uploadFiles:function(t){return t.folderId=this.provider.clientId,!1
},downloadItems:function(){var t=this.get("selectedItemCount");if(50>t)return t&&this._performDownload(),void 0;var e=n$368.get("sharedInstance");e.showDownloadAlert({itemCount:t,target:this,action:"_performDownload"})},_performDownload:function(){for(var t=n$518.get("sharedInstance"),e=this.get("selectedIndexes").toArray(),n=0,i=e.length;i>n;n++){var r=this.get("provider").itemAtIndex(e[n]).retain(this);t.download(r),r.release(this)}this.cancelSelection(),n$203.get("cloudOSService").recordStat("DownloadStat",{count:e.length,location:"FolderViewController"})},emailItems:function(){var t=n$825.create();t.openComposeWindowWithModelProvider(this.get("provider"),this.get("selectedIndexes").toArray(),this._openEmailDidSucceed)},_openEmailDidSucceed:n$299(function(){this.cancelSelection()}),deleteItems:function(){if(this.get("selectedItemCount")){var t,e=this.get("provider"),n=n$837(e,function(e){t=e}),i=n$368.get("sharedInstance");i.showRemoveAlert({modelProvider:e,itemCount:this.get("selectedItemCount"),target:this,action:"_performItemDelete",removeType:n,context:t})}},_performItemDelete:function(t){var e=this.get("provider"),n=this.get("selectedIndexes").toArray();return t===n$366.DELETE?n$309.deleteAssetsWithClientIds(e.clientIdsForIndexes(n)):e.removeItemsAtIndexesAndWriteToServer(n),this.cancelSelection(),!0},__superMap:{_2MyzqyVlYI9$aG$createViewOptions:"createViewOptions",_2MyzqyVlYI9$1N4$init:"init"}});n$839=t,t.__QUALIFIED_CLASS_NAME__="Photos.FolderViewController"}();
    
    
        
!function(){"use strict";var e="recently-deleted-folder",t=n$838.extend({staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$840=e,n$990=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.RecentlyDeletedFolder"}();
    
    
        
!function(){"use strict";var e=25,t=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_explanation",attributes:{}}],classes:["recently-deleted-blurb-bar"],styles:{top:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_top",attributes:{},unit:"px",property:"top"}}}},measuredHeight:n$9(),_explanation:n$290("RecentlyDeleted.Explanation"),_top:n$211.bindingFor("toolbarHeight"),init:function(){this.__s._2vcmqJiNyk6$JW$init.apply(this,arguments),n$107(window,"resize",this._measureWhenNecessary.bind(this))},_measureWhenNecessary:n$7("isAttached",function(e){e&&this.setIfChanged("measuredHeight",0|this.getPath("element.offsetHeight"))}),__superMap:{_2vcmqJiNyk6$JW$init:"init"}}),n=n$839.extend({staticMembers:{createBookmark:function(e,t){return this.__s._2vcmqJiNyk6$Tm$createBookmark.call(this,e,t,n$840)},__superMap:{_2vcmqJiNyk6$Tm$createBookmark:"createBookmark"}},isEmailAllowed:!1,isAddToAlbumAllowed:!1,isUndeleteAllowed:!0,_blurbBarHeight:n$9({readOnly:!0,dependencies:["view._rd_blurbBarView.measuredHeight"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return+r||1e4}}),_updateToBlurbBarHeight:n$7("_blurbBarHeight",function(e){e&&this.update()}),decideLayoutMetricsForViewport:function(){this.__s._2vcmqJiNyk6$jA$decideLayoutMetricsForViewport.apply(this,arguments),this.rowSpacing+=e,this.bottomInset+=e,this.topCompensation+=0|this.get("_blurbBarHeight")},viewClass:n$559(function(e){return e.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_rd_blurbBarView"}]}}},_rd_blurbBarView:n$84(t)})
}),viewOptionsForViewClass:function(){var e=this.__s._2vcmqJiNyk6$zL$viewOptionsForViewClass.apply(this,arguments);return e.isTimeRemainingTextAllowed=!0,e},deleteItems:function(){this.get("selectedItemCount")?this.__s._2vcmqJiNyk6$12i$deleteItems.apply(this,arguments):this._expungeAllItems()},undeleteItems:function(){this.get("selectedItemCount")?this._undeleteSelectedItems():this._undeleteAllItems()},_undeleteSelectedItems:function(){if(this.get("selectedItemCount")){var e=this.provider.clientIdsForIndexes(this.get("selectedIndexes").toArray());n$309.undeleteAssetsWithClientIds(e),this.cancelSelection()}},_undeleteAllItems:function(){n$309.undeleteAssetsWithClientIds(this.provider.get("allClientIds")),this.cancelSelection()},_expungeAllItems:function(){var e=this.provider;e.get("itemCount")&&n$368.get("sharedInstance").showRemoveAlert({modelProvider:e,itemCount:e.get("itemCount"),target:this,action:"_performExpungeAll"})},_performExpungeAll:function(){n$309.expungeAssetsWithClientIds(this.provider.get("allClientIds")),this.cancelSelection()},toolbarConfiguration:n$559(function(e){return e.extend({expungeAllButton:n$535.extend({event:"_expungeAllItems"}),rightItems:n$9({readOnly:!0,dependencies:[n$298.bindingFor("enableExpunge")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=["selectPhotosButton"];return r&&s.push("separator1","expungeAllButton"),s}})})}),__superMap:{_2vcmqJiNyk6$jA$decideLayoutMetricsForViewport:"decideLayoutMetricsForViewport",_2vcmqJiNyk6$zL$viewOptionsForViewClass:"viewOptionsForViewClass",_2vcmqJiNyk6$12i$deleteItems:"deleteItems"}});n$874=n,t.__QUALIFIED_CLASS_NAME__="Photos.BlurbBarView$649",n.__QUALIFIED_CLASS_NAME__="Photos.RecentlyDeletedFolderViewController"
}();
    
    
        
!function(){"use strict";var e="item",t=n$731.extend({staticMembers:{type:e},state:n$711({dependencies:["providerId","assetId"],serializer:n$208.sharedInstance}),providerId:n$9(),assetId:n$9(),_updateFocusedIdOnReturnToIfNeeded:n$7("returnTo","assetId",function(e,t){e&&e.instanceOf(n$718)&&e.setIfChanged("focusedId",t)}),doVisitPrepWork:function(e,t){var n=this.get("providerId"),i=this.get("assetId"),r=n&&n$372.modelProviderForBookmarkId(n),s=i&&n$309.create(i);if(!r||!s)return t(),void 0;var a=!1,o=!1;r&&(r.retain(this).autorelease(this),r.instanceOf(n$370)?r.load().then(function(){a=!0,o&&e()},t):a=!0),s.retain(this).autorelease(this),s.load().then(function(){o=!0,a&&e()},t)}});n$731.registerBookmarkType(e,t),n$872=e,n$991=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.OneUp"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["photos-error-icon"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"errorTitle",attributes:{}}],classes:["photos-error-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"errorSubtitle",attributes:{}}],classes:["photos-error-subtitle"]}],classes:["photos-error","selectable"]}}});n$844=e,e.__QUALIFIED_CLASS_NAME__="Photos.ErrorView"}();
    
    
        
!function(){"use strict";var e={_mls_loadRefs:n$84(n$439),createLoadRef:function(e,t){var n=(t||n$441.create(this)).retain(this).autorelease(this);return e?n.resolve():(n._didCancel=n._willDispose=n$440(this._loadRefCancelledOrDisposed,this,n),this._mls_loadRefs.add(n)),n},claimLoadRef:function(e,t){return n$31(e,n$441)||n$11("Object of type "+n$24(this)+" is attempting to claim a loadRef of the wrong type."),this.createLoadRef(t,e)},didLoad:function(){this._mls_clearWithMethod("resolve")},didError:function(e){this._mls_clearWithMethod("reject",e)},shouldCancel:function(e){this._mls_clearWithMethod("cancel",e)},cancelLoad:null,_mls_clearWithMethod:function(e,t){for(var n=this._mls_loadRefs.length;n--;){var i=this._mls_loadRefs.items[n];i[e](t)}this._mls_loadRefs.clear()},_loadRefCancelledOrDisposed:function(e){e._didCancel=null,e._willDispose=null,this._mls_loadRefs.remove(e),!this._mls_loadRefs.length&&this.cancelLoad&&this.cancelLoad()},dispose:function(){this.shouldCancel(!0),this.__s._4e4sGmAL2Cd$xj$dispose.apply(this,arguments)},__superMap:{_4e4sGmAL2Cd$xj$dispose:"dispose"}};n$843=e}();
    
    
        
!function(){"use strict";function e(t){t||(t=e.ERROR_UNKNOWN);var n=Error.apply(this,arguments);this.stack=n.stack,this.message=this.reason=t,this._originalError=null}var t=n$442.extend(n$843,{staticMembers:{maxCacheLength:1},genericAssetType:n$4(n$309.VIDEO),element:n$9(),isDisplayable:n$9(!1),isLoaded:n$9(!1),_tryingToLoad:!1,dispose:function(){this._cleanUp(),this.__s._2fYuOmc_F7_$OE$dispose.apply(this,arguments)},pause:function(){var e=this.get("element");e.readyState>0&&!e.paused&&e.pause(),e.autoplay=!1},play:function(){var e=this.get("element");e.readyState>=4&&e.paused&&e.play(),e.autoplay=!0},isPlaying:n$4({get:function(){var e=this.element;return e.readyState>0&&!e.paused}}),stop:function(){var e=this.get("element");e.readyState>0&&(e.currentTime=0),this.pause()},init:function(){var e=document.createElement("video");e.controls="controls",e.classList.add("photos-video"),this.element=e,this.__s._2fYuOmc_F7_$oq$init.apply(this,arguments)},_shardNumber:null,resetForChangeset:function(){this.shouldCancel(),this.__s._2fYuOmc_F7_$sh$resetForChangeset.apply(this,arguments)},_tryToLoad:n$299(function(e){if(!this.get("isLoaded")&&this._tryingToLoad){var t=this.get("_shardNumber");if(!t){if(!n$505.get("hasAvailableShard"))return n$505.onAvailableShard(this._tryToLoad),void 0;t=n$505.allocNextShard(),this.set("_shardNumber",t)}var n,i=this.get("asset");if(n$298.get("useCVWSForDerivatives")){if(!e)return i.fetchDerivativeInfo(function(e){var t=e.renderableVideoDerivativeInfos;return t&&t[0]}).then(this._tryToLoad,this._videoError),void 0;n=n$495.create(e.url)}else n=n$494.create(),n.setQueryParameter("preserveFormat",1),n.setQueryParameter("boundingBox",this.get("geometricLength")),n$461.setQueryParamForAsset(n,i);
n.set("shardNumber",t);var r=this.get("element");r.addEventListener("error",this._videoError),r.addEventListener("canplay",this._videoDisplayable),r.addEventListener("loadeddata",this._videoLoaded),r.addEventListener("progress",this._videoProgress),r.addEventListener("suspend",this._videoProgress),r.src=""+n,r.load()}}),_cleanUp:function(){this._tryingToLoad=!1;var e=this.get("element");e.removeEventListener("error",this._videoError),e.removeEventListener("canplay",this._videoDisplayable),e.removeEventListener("loadeddata",this._videoLoaded),e.removeEventListener("progress",this._videoProgress),e.removeEventListener("suspend",this._videoProgress),e.src="",this._cleanUpShard(),this.set("isLoaded",!1),this.set("isDisplayable",!1),this.get("element").autoplay=!1;var t=this._intervalHandle;null!==t&&(clearInterval(t),this._intervalHandle=null)},_cleanUpShard:function(){n$505.cancelCallback(this._tryToLoad);var e=this.get("_shardNumber");e&&(n$505.deallocShard(e),this.set("_shardNumber",null))},cancelLoad:function(){this.get("isLoaded")||this._cleanUp()},_videoProgress:n$528(function(){var e=this.get("element"),t=e.duration,n=e.buffered;if(n){var i=1/0;if(0!==n.length){var r=n.end(0)-n.start(0);i=r-t}var s=this._intervalHandle;Math.abs(i)<.1?(this._cleanUpShard(),null!==s&&(clearInterval(s),this._intervalHandle=null)):null===s&&(this._intervalHandle=setInterval(this._videoProgress,1e3))}}),_intervalHandle:null,_videoLoaded:n$528(function(){this.set("isLoaded",!0),this.didLoad()}),_videoDisplayable:n$528(function(){this.set("isDisplayable",!0)}),_videoError:n$528(function(t){if(!this.get("isLoaded")&&this._tryingToLoad){var n,i=t instanceof Error,r=i?t:t.target.error;
if(r)switch(r.code){case r.MEDIA_ERR_ABORTED:n=e.ERROR_ABORTED;break;case r.MEDIA_ERR_NETWORK:n=e.ERROR_NETWORK;break;case r.MEDIA_ERR_DECODE:n=e.ERROR_DECODE;break;case r.MEDIA_ERR_SRC_NOT_SUPPORTED:var s=this.get("element").canPlayType('video/mp4; codecs="avc1.640028, mp4a.40.2"');n="probably"===s?e.ERROR_REQUEST_FAILED:e.ERROR_UNSUPPORTED_FORMAT;break;default:n=e.ERROR_UNKNOWN}i&&this.getPath("asset.loadingStatus")===n$329.LOADED?(n$63.error("Could not get derivative info for %{0}.",[this]),n$203.get("cloudOSService").recordStat("VideoDerivative",{errorType:"server",errorTitle:"Could not get derivative info."})):(n$63.error("Video failed to load for %{0}.",[this]),n$203.get("cloudOSService").recordStat("VideoDerivative",{errorType:"VideoDerivative",errorTitle:"Could not load video.",reason:n}));var a=new e(n);a._originalError=r,this.didError(a),this._cleanUp()}}),_load:function(e){var t=e?this.claimLoadRef(e,this.isLoaded):this.createLoadRef(this.isLoaded);return this._tryingToLoad||(this._tryingToLoad=!0,this._tryToLoad()),t},__superMap:{_2fYuOmc_F7_$OE$dispose:"dispose",_2fYuOmc_F7_$oq$init:"init",_2fYuOmc_F7_$sh$resetForChangeset:"resetForChangeset"}}),n=e.prototype=Object.create(Error.prototype);n.name="VideoDerivativeError",n.constructor=e,e.ERROR_UNKNOWN="ERROR_UNKNOWN",e.ERROR_UNSUPPORTED_FORMAT="ERROR_UNSUPPORTED_FORMAT",e.ERROR_ABORTED="ERROR_ABORTED",e.ERROR_DECODE="ERROR_DECODE",e.ERROR_NETWORK="ERROR_NETWORK",e.ERROR_REQUEST_FAILED="ERROR_REQUEST_FAILED",n$490=t,n$845=e,t.__QUALIFIED_CLASS_NAME__="Photos.VideoDerivative"}();
    
    
        
!function(){"use strict";var t=n$844.extend(n$302,n$364,{staticMembers:{computePoolingCacheKey:function(t,e){return t.get("clientId")+":"+e.reason},maxCacheLength:1},isCacheableInPool:!0,asset:n$355(),error:n$9(),errorTitle:n$9({readOnly:!0,dependencies:["asset.genericType","asset.type"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return r===n$309.BURST?n$290("OneUp.Error.LoadFailed.Burst"):a===n$309.IMAGE?n$290("OneUp.Error.LoadFailed.Photo"):a===n$309.VIDEO?n$290("OneUp.Error.LoadFailed.Video"):n$290("OneUp.Error.LoadFailed.Generic")}}),errorSubtitle:n$9({readOnly:!0,dependencies:["error"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r?r.reason===n$845.ERROR_UNSUPPORTED_FORMAT?n$290("OneUp.Error.LoadFailed.Video.Format"):"":""}}),initFromPool:function(t,e){this.set("asset",t),this.set("error",e),this.__s._1hk18GTv7hR$bj$initFromPool.apply(this,arguments)},__superMap:{_1hk18GTv7hR$bj$initFromPool:"initFromPool"}});n$847=t,t.__QUALIFIED_CLASS_NAME__="Photos.AssetErrorView"}();
    
    
        
!function(){"use strict";var e=320,t=n$193.extend(n$302,n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"contentView"}],classes:["photos-asset-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"contentView",truevalue:"photos-has-content",attributes:{}}]}},loadPriority:n$9(0),loadingErrorViewClass:n$847,derivativeViewClassForAssetType:function(e,t){if(t)return null;var n=n$309.genericTypeForType(e);return this.derivativeViewClassForAssetType(n,!0)},error:n$9(),_unsetErrorForAssetChange:n$7("asset",function(){this.error=null}),_assetLoadingStatusDidChange:n$7("asset.loadingStatus",function(e){e===n$309.ERRORED&&(this.error=new Error("Could not load asset metadata."))}),contentView:n$9({readOnly:!0,dependencies:["errorView","derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s||r}}),errorView:n$355({readOnly:!0,dependencies:["asset","error"],cacheable:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(r&&s){var o=this.loadingErrorViewClass;return o.create(s,r)}}}),derivativeView:n$355({readOnly:!0,cacheable:!0,dependencies:["imageDerivativeLoader.derivative","asset.cannotHaveImageDerivative","asset.type","asset","error","loadPriority"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[5+n]),s=i.internalGetPath(this,t[4+n]),o=i.internalGetPath(this,t[3+n]),a=i.internalGetPath(this,t[2+n]),l=i.internalGetPath(this,t[1+n]),h=i.internalGetPath(this,t[0+n]);if(!s&&o){if(!a)return this.getPath("asset.loadingStatus")===n$309.NOT_LOADED&&(n$66.pause(),o.load(),n$66.resume()),void 0;
if(h||l){var u=this.derivativeViewClassForAssetType(a);u||n$11("No derivativeViewClass provided for asset type: "+a);var d=u.create(o,this,this.get("desiredSizeForDerivative"));return n$239(d,"loadPriority",r),d}}}}),width:n$9({readOnly:!0,dependencies:["asset.aspectRatioEstimate","asset.dimensions","asset.genericType","desiredSize.height","desiredSize.width",n$522.bindingFor("devicePixelRatio"),"error"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[6+i]),o=r.internalGetPath(this,n[5+i]),a=r.internalGetPath(this,n[4+i]),l=r.internalGetPath(this,n[3+i]),h=r.internalGetPath(this,n[2+i]),u=r.internalGetPath(this,n[1+i]),d=r.internalGetPath(this,n[0+i]),c=a;if(!d||s)return c;var _=a/l;_>=d&&(c=l*d);var p=u?u.objectAt(0):c,g=p/Math.min(o,1);h===n$309.VIDEO&&(g=Math.max(g,e));var f=a-c;return c+=f%2,Math.ceil(Math.min(c,g))}}),height:n$9({readOnly:!0,dependencies:["asset.aspectRatioEstimate","asset.dimensions","asset.genericType","desiredSize.height","desiredSize.width",n$522.bindingFor("devicePixelRatio"),"error"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[6+i]),o=r.internalGetPath(this,n[5+i]),a=r.internalGetPath(this,n[4+i]),l=r.internalGetPath(this,n[3+i]),h=r.internalGetPath(this,n[2+i]),u=r.internalGetPath(this,n[1+i]),d=r.internalGetPath(this,n[0+i]),c=l;if(!d||s)return c;var _=a/l;d>=_&&(c=a/d);var p=u?u.objectAt(1):c,g=p/Math.min(o,1);h===n$309.VIDEO&&(g=Math.max(g,e/d));var f=l-c;return c+=f%2,Math.ceil(Math.min(c,g))}}),desiredSize:n$355(),asset:n$355(),imageDerivativeLoader:n$84(n$630.extend({asset:n$14("owner.asset"),allowsShrinking:!1,shouldCorrectForDevicePixelRatio:!0,areRequestsAllowed:n$9({readOnly:!0,dependencies:["derivative","owner.asset.cannotHaveImageDerivative","owner.asset.type"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);
return!o&&!s&&!!this.get("owner").derivativeViewClassForAssetType(r)}}),priority:n$14("owner.loadPriority"),width:n$14("owner.desiredSizeForDerivative.width"),height:n$14("owner.desiredSizeForDerivative.height")})),desiredSizeForDerivative:n$9(n$14("desiredSize")),handleLoadingError:function(e){return this._isHandlingLoadingError!==(this._isHandlingLoadingError=!0)?(this.error=e.context,this._isHandlingLoadingError=!1,!0):void 0},_setErrorForIDLError:n$7("imageDerivativeLoader.error",function(e){e&&(this.error=e)}),initFromPool:function(e,t){this.__s._4IvTeo1cpX1$2am$initFromPool.apply(this,arguments),n$66.pause(),this.set("asset",e),this.set("desiredSize",t),n$66.resume()},dispose:function(){this.error=null,this.__s._4IvTeo1cpX1$2eF$dispose.apply(this,arguments),this._previousSpinnerView=null},__superMap:{_4IvTeo1cpX1$2am$initFromPool:"initFromPool",_4IvTeo1cpX1$2eF$dispose:"dispose"}});n$857=t,t.__QUALIFIED_CLASS_NAME__="Photos.AssetView"}();
    
    
        
!function(){"use strict";var e=n$193.extend(n$302,n$364,{staticMembers:{computePoolingCacheKey:function(e,t){return e.get("clientId")+":"+n$22(t)},maxCacheLength:1},isCacheableInPool:!0,loadPriority:n$9(0),asset:n$355(),size:n$9(),imageDerivative:n$9(),initFromPool:function(e,t){this.__s._2EapgntHDV2$F2$initFromPool.apply(this,arguments),this.set("asset",e),this.set("size",t)},__superMap:{_2EapgntHDV2$F2$initFromPool:"initFromPool"}});n$848=e,e.__QUALIFIED_CLASS_NAME__="Photos.DerivativeView"}();
    
    
        
!function(){"use strict";var t=n$848.extend(n$364,{_sizeForDerivative:n$9(),initFromPool:function(t,e,n){this.__s._4UPCvLvJdgi$7S$initFromPool.apply(this,arguments),this.set("_sizeForDerivative",n||e)},imageDerivativeLoader:n$84(n$630.extend({asset:n$14("owner.asset"),priority:n$14("owner.loadPriority"),width:n$14("owner._sizeForDerivative.width"),height:n$14("owner._sizeForDerivative.height"),allowsShrinking:!1,shouldCorrectForDevicePixelRatio:!0})),imageDerivative:n$9(n$14("imageDerivativeLoader.derivative")),bubbleError:n$7("imageDerivativeLoader.error",function(t){t&&this.sendEvent("handleLoadingError",t)}),resetViewOnDetach:n$7("isAttached",function(t){t||this.resetView()}),resetView:function(){},__superMap:{_4UPCvLvJdgi$7S$initFromPool:"initFromPool"}});n$849=t,t.__QUALIFIED_CLASS_NAME__="Photos.ImageDerivativeView"}();
    
    
        
!function(){"use strict";var e=n$849.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["main-canvas"],name:"_tiledCanvasElement"}],classes:["photos-image-view"]}}},forceActualSize:n$9(!1),_maintainLayout:n$7("size.width","size.height","imageDerivative.rectInElement","forceActualSize",function(e,t,n,i){if(n&&this._canvas&&this.isInitialized){var r=i?1:e/n.width,s=i?1:t/n.height;this._canvas.setCSSSize(n.width,n.height),this._canvasStyle.layerBack().scale(r,s)}}),drawDerivativeToCanvas:n$7("imageDerivative","imageDerivative.rectInElement",function(e,t){var n=this._canvas;if(n){var i=n.getContext("2d"),r=!1,s=e?e.get("clientId")+":"+e.physicalGeometricLength:null;if(s!==this._drawDerivativeToCanvas_lastDrawToken&&(this._drawDerivativeToCanvas_lastDrawToken=s,r=!0),!e||!t)return r&&i.clearRect(0,0,n.width,n.height),void 0;(n.width!==t.width||n.height!==t.height)&&(n.width=t.width,n.height=t.height,r=!0),r&&e.drawIntoCanvas(n,0,0,t.width,t.height,"cover")}}),_canvas:null,_context:null,init:function(){this.__s._2_7svGqb5C_$fp$init.apply(this,arguments),this._canvas=new n$723(this._tiledCanvasElement),this._canvasStyle=n$160(this._canvas),this._context=this._canvas.getContext("2d")},__superMap:{_2_7svGqb5C_$fp$init:"init"}});n$851=e,e.__QUALIFIED_CLASS_NAME__="Photos.OneUpImageDerivativeView"}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$163,n$178,{isAttached:n$9(n$14("parent.isAttached"))});n$853=t,t.__QUALIFIED_CLASS_NAME__="Photos.ElementView"}();
    
    
        
!function(){"use strict";var t=n$5.extend(n$10,n$364,{asset:n$9(),owner:n$9(),desiredSize:n$355(),genericType:n$309.IMAGE,derivativeSubset:n$4({readOnly:!0,get:function(){return this.genericType===n$309.IMAGE?"renderableImage":"renderableVideo"}}),error:n$9(),shouldRequest:n$9(!0),_allowRequest:n$9({readOnly:!0,dependencies:["shouldRequest","derivative","error","perfectGeometricLength"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[3+n]),a=i.internalGetPath(this,e[2+n]),s=i.internalGetPath(this,e[1+n]),o=i.internalGetPath(this,e[0+n]);return o&&!a&&r&&(!s||(0|s.geometricLength)<r)}}),priority:n$9(0),_updateLoadRefPriority:n$7("priority",function(t){var e=this.get("_loadRef");e&&(e.priority=t)}),isLoading:n$9({readOnly:!0,dependencies:["_loadRef"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!!r}}),perfectGeometricLength:n$9({readOnly:!0,dependencies:["asset","desiredSize.height","desiredSize.width",n$522.bindingFor("devicePixelRatio")],get:function(t,e,n,i){var r=i.internalGetPath(this,e[3+n]),a=i.internalGetPath(this,e[2+n]),s=i.internalGetPath(this,e[1+n]),o=i.internalGetPath(this,e[0+n]);return o&&s&&a?Math.max(s,a)*r:null}}),derivative:n$355({readOnly:!0,dependencies:["asset","perfectGeometricLength","asset.derivativeDidLoad"],cacheable:!0,get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a?a.bestLoadedDerivative(r,this.get("derivativeSubset")):void 0}}),reset:function(){n$239(this,"error",null)},_isRequestingDerivative:!1,_requestDerivative:n$7("_allowRequest","asset","perfectGeometricLength",function(t,e,n){if(!this._isRequestingDerivative){this._isRequestingDerivative=!0;
var i=this.get("_loadRef");i&&(!t||i._requestDerivative_asset!==e||i._requestDerivative_perfectGeometricLength<n)&&(i.cancel(),i=null),t&&!i&&(i=e.requestDerivative(n,this.get("derivativeSubset")),i._requestDerivative_asset=e,i._requestDerivative_perfectGeometricLength=n,i.priority=this.get("priority"),i.then(function(t,e){this.get("_loadRef")===e&&(this.propertyChanged("derivative"),this.set("_loadRef",null))}.bind(this),function(t,e){this.get("_loadRef")===e&&(e.get("cancelled")||this.set("error",t),this.set("_loadRef",null))}.bind(this))),this.set("_loadRef",i),this._isRequestingDerivative=!1}}),_loadRef:n$355(),_derivativeDidBecomeOutdated:n$170("derivative.didBecomeOutdated",function(t){if(t&&!this._isOutdatingDerivative){this._isOutdatingDerivative=!0;var e=this.get("_loadRef");e&&e.cancel(),this.set("_loadRef",null),this.propertyChanged("derivative"),this._isOutdatingDerivative=!1}}),_resetOnAssetChange:n$7("asset",function(){this.reset()}),dispose:function(){var t=this.get("_loadRef");t&&t.cancel(),this.__s._4Cyu93Ifyu9$2QH$dispose.apply(this,arguments)},__superMap:{_4Cyu93Ifyu9$2QH$dispose:"dispose"}});n$854=t,t.__QUALIFIED_CLASS_NAME__="Photos.DerivativeLoader"}();
    
    
        
!function(){"use strict";var e=n$109.get("sharedInstance").isChrome,t=n$109.get("sharedInstance").isSafari?400:0,n=n$851.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_playButton"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"asset.durationString",attributes:{}}],classes:["photos-video-duration"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_videoView"}],classes:["photos-video-placeholder-view"],attributes:{"data-type":{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"asset.type",attributes:{},attribute:"data-type"}}}}},isInVideoPlaybackMode:n$9(!1),showSpinner:n$9(!1),_playButton:n$355({readOnly:!0,dependencies:["showSpinner"],cacheable:!0,get:function(e,t,n,i){var s=i.internalGetPath(this,t[0+n]);return s?n$690.create({additionalClassNames:["photos-video-spinner"]}):r.create()}}),_videoView:n$355({readOnly:!0,dependencies:["videoDerivative","isInVideoPlaybackMode"],cacheable:!0,get:function(e,t,n,r){var s=r.internalGetPath(this,t[1+n]),a=r.internalGetPath(this,t[0+n]);return a&&s?i.create(a):null}}),resetView:function(){this._delayShowingVideoElementTimer.stop(),this._playVideoWhenReadyTimer.stop(),this.set("showSpinner",!1);var t=this.get("videoDerivative");e&&t&&t.set("isDisplayable",!1),t&&t.stop(),this.videoDerivativeLoader.reset(),this.set("isInVideoPlaybackMode",!1);var n=this.get("_placeholderView");n&&n.set("showSpinner",!1),this.set("_isWaitingToRender",!0),this._hasAutoPlayed=!1,this.__s._3YeLH1fsGBb$19d$resetView.apply(this,arguments)
},resetViewOnAssetChange:n$7("asset.clientId",function(e){e!==this._previousAssetClientId&&(this._previousAssetClientId=e,this.resetView())}),_previousAssetClientId:null,playVideo:function(){return this.set("showSpinner",!0),this.set("isInVideoPlaybackMode",!0),this.sendEvent("videoPlaying"),!0},imageDerivativeLoader:n$84(n$630.extend({asset:n$14("owner.asset"),areRequestsAllowed:n$9({readOnly:!0,dependencies:["owner.isInVideoPlaybackMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),priority:n$14("owner.loadPriority"),shouldCorrectForDevicePixelRatio:!0,width:n$14("owner.size.width"),height:n$14("owner.size.height")})),videoDerivativeLoader:n$84(n$854.extend({asset:n$14("owner.asset"),shouldRequest:n$9({readOnly:!0,dependencies:["derivative","owner.isInVideoPlaybackMode"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!s&&r}}),priority:n$14("owner.loadPriority"),genericType:n$309.VIDEO,desiredSize:n$14("owner.size")})),videoDerivative:n$9(n$14("videoDerivativeLoader.derivative")),bubbleError:n$7("imageDerivativeLoader.error","videoDerivativeLoader.error",function(e,t){var n=t||e;n&&this.sendEvent("handleLoadingError",n)}),_appStateObserver:n$7(n$103.bindingFor("application.cloudOSState"),function(e){if(e!==n$427.LoadedActive){var t=this.get("videoDerivative");t?t.pause():this.resetView()}}),_isWaitingToRender:n$9(!0),_delayShowingVideoElement:n$7("videoDerivative.isDisplayable",function(e){e?t>0?this._delayShowingVideoElementTimer.start():this._delayFinished():this._delayShowingVideoElementTimer.stop()
}),_delayShowingVideoElementTimer:n$84(n$411,{delay:t,action:"_delayFinished"}),_delayFinished:function(){this.set("_isWaitingToRender",!1)},_hasAutoPlayed:!1,playVideoWhenReady:n$7("_videoView.element","_videoView.isAttached","videoDerivative.isDisplayable","isInVideoPlaybackMode","_isWaitingToRender",function(e,t,n,i,r){i&&!r&&!this._hasAutoPlayed&&e&&t&&n&&(this._playVideoWhenReadyTimer.start(),this._hasAutoPlayed=!0)}),_playVideoWhenReadyTimer:n$84(n$411,{delay:100,action:"_actuallyPlayVideoWhenReady"}),_actuallyPlayVideoWhenReady:function(){var e=this.get("videoDerivative");e&&e.play()},dispose:function(){this.resetView(),this.__s._3YeLH1fsGBb$2nv$dispose.apply(this,arguments)},__superMap:{_3YeLH1fsGBb$19d$resetView:"resetView",_3YeLH1fsGBb$2nv$dispose:"dispose"}}),i=n$853.extend(n$302,{staticMembers:{computePoolingCacheKey:function(e){return n$22(e)},maxCacheLength:1},isCacheableInPool:!0,element:n$9(n$14("videoDerivative.element")),videoDerivative:n$9(),dispose:function(){this.set("videoDerivative",null),this.__s._3YeLH1fsGBb$2vo$dispose.apply(this,arguments)},initFromPool:function(e){this.__s._3YeLH1fsGBb$2ww$initFromPool.apply(this,arguments),this.set("videoDerivative",e)},__superMap:{_3YeLH1fsGBb$2vo$dispose:"dispose",_3YeLH1fsGBb$2ww$initFromPool:"initFromPool"}}),r=n$400.extend(n$302,{additionalClassNames:["photos-video-play-button"],action:"playVideo"});n$858=n,n.__QUALIFIED_CLASS_NAME__="Photos.OneUpVideoDerivativeView",i.__QUALIFIED_CLASS_NAME__="Photos.VideoView$661",r.__QUALIFIED_CLASS_NAME__="Photos.PlayButton$661"}();
    
    
        
!function(){"use strict";var e=n$848.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"ELEMENT",tagname:"img",children:[],attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"_imgSrc",attributes:{},attribute:"src"},alt:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"_imgAlt",attributes:{},attribute:"alt"}}},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_text",attributes:{}}]}],classes:["photos-audio-view"]}}},_text:n$9({readOnly:!0,dependencies:["asset.durationString"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$290("OneUp.AudioLabel",{duration:r}):""}}),_imgSrc:__CW_PATH_PREFIX+n$856,_imgAlt:""});n$859=e,e.__QUALIFIED_CLASS_NAME__="Photos.AudioDerivativeView"}();
    
    
        
!function(){"use strict";var e=n$857.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinnerView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_burstButton"}]}}},zoomLevel:n$9(1),fractionalScrollX:n$9(.5),fractionalScrollY:n$9(.5),derivativeViewClassForAssetType:function(e){switch(e){case n$309.IMAGE:return n$851;case n$309.VIDEO:return n$858;case n$309.AUDIO:return n$859}return this.__s._109vrZoVSAv$Nw$derivativeViewClassForAssetType.apply(this,arguments)},layoutDidChange:n$7(n$522.bindingFor("devicePixelRatio"),"desiredSize.width","desiredSize.height","width","height","_derivativeWidth","_derivativeHeight","zoomLevel","fractionalScrollX","fractionalScrollY",function(e,t,n,i,r,s,a,o,l,u){if(t&&n&&i&&r){var d=1!==o,h=d?s/i||1:1,c=d?a/r||1:1,p=i*o,g=r*o,f=t>p,_=n>g,v=(t-p)*(f?.5:l),m=(n-g)*(_?.5:u);this.get("style").set("transform-origin","0 0").translate(f?Math.round(v*e)/e:v,_?Math.round(m*e)/e:m).scale(o/h,o/c).set("width",i*h).set("height",r*c);var $=this.get("derivativeView");$&&$.instanceOf(n$851)&&$.setPath("forceActualSize",d)}}),_derivativeWidth:n$9({readOnly:!0,dependencies:["derivativeView.imageDerivative.rectInElement"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.width:0/0}}),_derivativeHeight:n$9({readOnly:!0,dependencies:["derivativeView.imageDerivative.rectInElement"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.height:0/0}}),totalHorizontalPanTravel:n$9({dependencies:["zoomLevel","width","desiredSize.width"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);
return Math.max(0,a*s-r)}}),totalVerticalPanTravel:n$9({dependencies:["zoomLevel","height","desiredSize.height"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return Math.max(0,a*s-r)}}),_spinnerView:n$355(),_loadingObserver:n$7("asset.loadingStatus","imageDerivativeLoader.isLoading","derivativeView",function(e,t,n){var i=this.get("_spinnerTimer");e===n$309.LOADING||t?n?i.restart():this._showSpinner():this._hideSpinner()}),_spinnerTimer:n$84(n$411,{delay:5e3,action:"_showSpinner"}),videoPlaying:function(){this._hideSpinner()},_hideSpinner:function(){this.get("_spinnerTimer").stop(),this.set("_spinnerView",null)},_showSpinner:function(){this.get("_spinnerView")||this.set("_spinnerView",n$690.create({additionalClassNames:["photos-loading-derivative"]}))},shouldShowBurstButton:n$9(!1),isBurstStripVisible:n$9(!1),_cachedBurstButton:null,_burstButton:n$355({readOnly:!0,dependencies:["shouldShowBurstButton","derivativeView"],get:function(e,n,i,r){var s=r.internalGetPath(this,n[1+i]),a=r.internalGetPath(this,n[0+i]),o=this._cachedBurstButton;return a&&s?o||(o=t.extend({isOn:this.bindingFor("isBurstStripVisible")}).create()):o=null,this._cachedBurstButton=o,o}}),dispose:function(){this.__s._109vrZoVSAv$2Jw$dispose.apply(this,arguments),this._cachedBurstButton=null},_hideBurstOnError:n$7("error",function(e){var t=this.viewController;!t||t.isDisposing||t.isDisposed||e&&this.sendEvent("hideBurstSelector")}),desiredSizeForDerivative:n$836(function(){return n.create({zoomLevel:this.bindingFor("zoomLevel"),baseSize:this.bindingFor("desiredSize")})
}),__superMap:{_109vrZoVSAv$Nw$derivativeViewClassForAssetType:"derivativeViewClassForAssetType",_109vrZoVSAv$2Jw$dispose:"dispose"}}),t=n$508.extend(n$302,{additionalClassNames:["photos-toggle-burst-button"],title:n$9({readOnly:!0,dependencies:["isOn"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$290("OneUp.CloseBurst"):n$290("OneUp.ExpandBurst")}})}),n=n$556.extend({baseSize:n$9(),zoomLevel:n$9(1),width:n$9({dependencies:["baseSize.width","zoomLevel"],readOnly:!0,get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])*i.internalGetPath(this,t[1+n])}}),height:n$9({dependencies:["baseSize.height","zoomLevel"],readOnly:!0,get:function(e,t,n,i){return i.internalGetPath(this,t[0+n])*i.internalGetPath(this,t[1+n])}})});n$860=e,e.__QUALIFIED_CLASS_NAME__="Photos.OneUpAssetView",t.__QUALIFIED_CLASS_NAME__="Photos.BurstButton$663",n.__QUALIFIED_CLASS_NAME__="Photos.ZoomedSize$663"}();
    
    
        
!function(){"use strict";var e=2,t=n$193.extend(n$364,n$663,n$395,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[],classes:["photos-one-up-button-blocker"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"assetView"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_previousButton"},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_nextButton"}],name:"assetContainer",classes:["photos-one-up-asset-container"],styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"burstBottomOffset",attributes:{},unit:"px",property:"bottom"}}},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_burstThumbnailStrip"}],classes:["photos-one-up-view",{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isPannable",truevalue:"pannable",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isZoomed",truevalue:"zoomed",attributes:{}}],styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"bottomOffset",attributes:{},unit:"px",property:"bottom"},cursor:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"_compatibleCursorStyle",attributes:{},unit:null,property:"cursor"}}}},loadPriority:n$9(0),asset:n$9(),fractionalScrollX:n$9(.5),fractionalScrollY:n$9(.5),horizontalPanTravel:n$9(n$14("assetView.totalHorizontalPanTravel")),verticalPanTravel:n$9(n$14("assetView.totalVerticalPanTravel")),zoomLevel:n$9(1),minZoomLevel:n$9(1),maxZoomLevel:n$9(1),isZoomDisabled:n$9(!0),isOptionOrShiftDown:n$9({readOnly:!0,dependencies:[n$133.get("sharedInstance").bindingFor("activeKeys")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);
return r.contains(n$748.OPTION)||r.contains(n$748.SHIFT)}}),_isZoomed:n$9({readOnly:!0,dependencies:["zoomLevel","minZoomLevel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s>r}}),_isPannable:n$9({readOnly:!0,dependencies:["horizontalPanTravel","verticalPanTravel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!(!s&&!r)}}),hasNextButton:n$9(),hasPreviousButton:n$9(),disableNextButton:n$9({readOnly:!0,dependencies:["hasNextButton"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),disablePreviousButton:n$9({readOnly:!0,dependencies:["hasPreviousButton"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),burstBottomOffset:n$9(),bottomOffset:n$9(),shouldShowBurstButton:n$9(),isBurstStripVisible:n$9(!1),_nextButton:n$355(n$84(n$400,{additionalClassNames:["photos-next-photo-button"],isDisabled:n$14("parent.disableNextButton"),event:"goToNextAsset"})),_previousButton:n$355(n$84(n$400,{additionalClassNames:["photos-previous-photo-button"],isDisabled:n$14("parent.disablePreviousButton"),event:"goToPreviousAsset"})),containerSize:n$355({readOnly:!0,dependencies:["assetContainer"],get:function(e,t,n,i){return n$563.create(i.internalGetPath(this,t[0+n]))}}),_invalidateContainerSize:n$7("bottomOffset","burstBottomOffset",function(){this.get("containerSize").recomputeLayoutIfNecessary()}),_cachedAssetView:null,assetView:n$355({readOnly:!0,dependencies:["asset","loadPriority","containerSize"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]),a=this._cachedAssetView;
return o?a?o!==a.get("asset")&&a.set("asset",o):a=n$860.extend({zoomLevel:this.bindingFor("zoomLevel"),fractionalScrollX:this.bindingFor("fractionalScrollX"),fractionalScrollY:this.bindingFor("fractionalScrollY"),isBurstStripVisible:this.bindingFor("isBurstStripVisible")}).create(o,r):a=null,a&&(a.set("shouldShowBurstButton",this.get("shouldShowBurstButton")),n$239(a,"loadPriority",s)),this._cachedAssetView=a,a}}),wheel:function(e){if(e.preventDefault(),!this.get("isZoomDisabled")){if(e.altKey||e.shiftKey){var t=(e.deltaY+e.deltaY)/2;n$109.getPath("sharedInstance.isMac")&&(t=-t),this._zoomImageBy(t)}else this._panZoomedImageBy(-e.deltaX,-e.deltaY);return!0}},pointerDown:function(e){return this.__s._2aaC2Ntb2kN$2cf$pointerDown.apply(this,arguments),this.__isBeingDraggedToPan=!(e.altKey||e.shiftKey),this.__isBeingDraggedToZoom=!this.__isBeingDraggedToPan,this.propertyChanged("_isBeingDraggedToPan"),this.propertyChanged("_isBeingDraggedToZoom"),this._dragFirstX=e.clientX,this._dragFirstY=e.clientY,this.__isBeingDraggedToPan&&this._dragPanStarted(e.clientX,e.clientY),this.__isBeingDraggedToZoom&&this._dragZoomStarted(e.clientX,e.clientY),!0},pointerMove:function(t){return this.__s._2aaC2Ntb2kN$2vL$pointerMove.apply(this,arguments),(Math.abs(t.clientX-this._dragFirstX)>e||Math.abs(t.clientY-this._dragFirstY)>e)&&(this.__isBeingDraggedToPan||this.__isBeingDraggedToZoom)&&(this._dragHasMoved=!0),this._dragHasMoved&&(this.__isBeingDraggedToPan&&this._dragPanMoved(t.clientX,t.clientY),this.__isBeingDraggedToZoom&&this._dragZoomMoved(t.clientX,t.clientY)),!0},pointerUp:function(e){return this.__s._2aaC2Ntb2kN$3CP$pointerUp.apply(this,arguments),this.__isBeingDraggedToPan&&this._dragPanEnded(e.clientX,e.clientY),this.__isBeingDraggedToZoom&&this._dragZoomEnded(e.clientX,e.clientY),this.__isBeingDraggedToPan=this.__isBeingDraggedToZoom=this._dragHasMoved=!1,this.propertyChanged("_isBeingDraggedToPan"),this.propertyChanged("_isBeingDraggedToZoom"),this._dragFirstX=this._dragFirstY=0/0,!0
},_dragPanStarted:function(){this._dragFirstFractionalScrollX=this.get("fractionalScrollX"),this._dragFirstFractionalScrollY=this.get("fractionalScrollY")},_dragPanMoved:function(e,t){this._panZoomedImageBy(e-this._dragFirstX,t-this._dragFirstY,this._dragFirstFractionalScrollX,this._dragFirstFractionalScrollY)},_dragPanEnded:function(){this._dragFirstFractionalScrollX=this._dragFirstFractionalScrollY=0/0},_dragZoomStarted:function(){this._dragFirstZoomLevel=this.get("zoomLevel")},_dragZoomMoved:function(e,t){this._zoomImageBy(-(t-this._dragFirstY),this._dragFirstZoomLevel)},_dragZoomEnded:function(){this._dragFirstZoomLevel=0/0},_panZoomedImageBy:function(e,t,n,i){var r=this.get("horizontalPanTravel"),s=this.get("verticalPanTravel"),o=r?-e/r:0,a=s?-t/s:0;n=isNaN(n)?this.get("fractionalScrollX"):n,i=isNaN(i)?this.get("fractionalScrollY"):i,this.set("fractionalScrollX",Math.max(0,Math.min(1,n+o))),this.set("fractionalScrollY",Math.max(0,Math.min(1,i+a)))},_zoomImageBy:function(e,t){t=isNaN(t)?this.get("zoomLevel"):t;var n=t*Math.pow(1.005,e);n=Math.max(this.get("minZoomLevel"),Math.min(this.get("maxZoomLevel"),n)),this.setIfChanged("zoomLevel",n)},_isBeingDraggedToPan:n$9({readOnly:!0,get:function(){return this.__isBeingDraggedToPan}}),_isBeingDraggedToZoom:n$9({readOnly:!0,get:function(){return this.__isBeingDraggedToZoom}}),_cursorStyle:n$9({readOnly:!0,dependencies:["isOptionOrShiftDown","zoomLevel","minZoomLevel","maxZoomLevel","_isPannable","_isBeingDraggedToPan","_isBeingDraggedToZoom"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[6+n]),s=i.internalGetPath(this,t[5+n]),o=i.internalGetPath(this,t[4+n]),a=i.internalGetPath(this,t[0+n]);
return s||!a&&!r?o?s?"grabbing":"grab":"default":"default"}}),_compatibleCursorStyle:n$9({dependencies:["_cursorStyle","horizontalPanTravel","verticalPanTravel"],readOnly:!0,get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);return-1===o.indexOf("grab")?o:n$109.getPath("sharedInstance.isWebKit")?"-webkit-"+o:n$109.getPath("sharedInstance.isMozilla")?"-moz-"+o:s&&r?"move":s?"ew-resize":r?"ns-resize":void 0}}),dispose:function(){this.__s._2aaC2Ntb2kN$4s8$dispose.apply(this,arguments),this._cachedAssetView=null,this._cachedNextButton=null,this._cachedPreviousButton=null},__superMap:{_2aaC2Ntb2kN$2cf$pointerDown:"pointerDown",_2aaC2Ntb2kN$2vL$pointerMove:"pointerMove",_2aaC2Ntb2kN$3CP$pointerUp:"pointerUp",_2aaC2Ntb2kN$4s8$dispose:"dispose"}});n$873=t,t.__QUALIFIED_CLASS_NAME__="Photos.OneUpView"}();
    
    
        
!function(){"use strict";var t=n$193.extend(n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"burstCollection"}],classes:["photos-burst-thumbnail-strip"],styles:{bottom:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripOffset",attributes:{},unit:"px",property:"bottom"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"stripHeight",attributes:{},unit:"px",property:"height"},visibility:{type:"STYLEOUTLET",bindingtype:"IFBINDING",name:"_isVisible",truevalue:"",falsevalue:"hidden",attributes:{},unit:null,property:"visibility"}}}},stripOffset:n$9(),stripHeight:n$9(),_isVisible:n$9({readOnly:!0,dependencies:["stripOffset","stripHeight"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a>-r}}),pointerDown:function(){return!0}});n$869=t,t.__QUALIFIED_CLASS_NAME__="Photos.BurstThumbnailStripView"}();
    
    
        
!function(){"use strict";var t=n$714.extend({loadPriorityBase:n$9(0),_isLayoutCurrent:!1,computeSpaceAroundViewport:function(t,e,n,i,r){var a=this._computeEffectiveScrollLeft(t,n[0],i,r);a=Math.max(a,0),e.left=a,e.right=Math.max(this._computeTotalWidth()-a-i,0),e.bottom=e.top=0},_computeEffectiveScrollLeft:function(t,e){var n=t.dataForItem(e.item),i=this.leftForItemAtIndex(n),r=i-e.x;return this._roundToScrollIncrement(r)},_computeTotalWidth:function(){var t=this.itemModelProvider.get("itemCount")-1,e=this.leftForItemAtIndex(t)+this.widthForItemAtIndex(t);return this._roundToScrollIncrement(e)},computeLayoutInfo:function(){var t=this.itemModelProvider,e=t.get("itemCount");this.provider.set("itemCount",e)},leftForItemAtIndex:function(t){return t},widthForItemAtIndex:function(){return 1},topForItemAtIndex:function(){return 0},heightForItemAtIndex:function(){return 1},layoutItemView:function(t){t.doLayout()},itemViewClass:null,itemModelProvider:null,provider:n$305(n$715),_scrollRoundingIncrement:1,_dpr:n$9(n$522.bindingFor("devicePixelRatio")),_chooseScrollRoundingIncrement:n$7("_dpr",function(t){if(this._scrollRoundingIncrement=1/t,this.isInitialized){var e=this.get("view");e&&e.scrollBy(0,0)}}),init:function(){this.__s._4cOyhO9jz6_$1XZ$init.apply(this,arguments),this.layoutManager.provider=this.provider},viewDidLoad:function(t){t.get("element").classList.add("photos-strip-view"),this.__s._4cOyhO9jz6_$1eN$viewDidLoad.apply(this,arguments)},_providerContentsDidChange:n$7("itemModelProvider.contentsDidChange",function(t){t&&(this._isLayoutCurrent=!1,this.updateToProviderContents())
}),didAttach:function(){this._isLayoutCurrent=!1,this.updateToProviderContents(),this.__s._4cOyhO9jz6_$1n9$didAttach.apply(this,arguments)},updateToProviderContents:n$12(),_updateToProviderContents:n$7("updateToProviderContents",function(){this.isInitialized&&(this._isLayoutCurrent||this.computeLayoutInfo(),this.update(),this._isLayoutCurrent=!0)}),setUpInitialPositionedItem:function(t,e,n,i){if(0!==t.get("itemCount")){var r=t.getFirstItem(),a=t.dataForItem(r);e.item=r;var s=this._computeStartingScrollLeft(t,n,i);this._previousStartScroll=s,this._setUpPositionedItemForIndexAndScrollLeft(e,a,s)}},_computeStartingScrollLeft:function(){return 0},setUpPositionedItemAtDistance:function(t,e,n,i,r,a,s){var o=t.dataForItem(n.item),l=this.leftForItemAtIndex(o),h=this._findItemIndexNearLeftPosition(l+i);e.item=t.getItemRelativeToItem(n.item,h-o);var d=this._computeEffectiveScrollLeft(t,n,a,s);this._setUpPositionedItemForIndexAndScrollLeft(e,h,d)},positionAdjacentItem:function(t,e,n,i,r,a){var s=t.dataForItem(e.item),o=this._computeEffectiveScrollLeft(t,n,r,a);this._setUpPositionedItemForIndexAndScrollLeft(e,s,o)},_previousStartScroll:0,repositionItemIfNeeded:function(t,e,n,i){var r=t.dataForItem(e.item),a=this._computeEffectiveScrollLeft(t,e,n,i),s=this._computeStartingScrollLeft(t,n,i),o=this._previousStartScroll-s,l=a-o;this._previousStartScroll=s,this._setUpPositionedItemForIndexAndScrollLeft(e,r,l)},anchorForNextCycle:function(t,e,n){return n.length>0?n[0]:null},updateAnchorForMovement:function(t,e,n){return n.length>0?n[0]:null},setUpPositionedItemForAnchor:function(t,e,n){n.copyInto(e)
},itemsDidMove:function(t,e,n){var i=this.get("viewMap"),r=null,a=null,s=0,o=0,l=this.get("loadPriorityBase");for(o=n.length,s=0;o>s;s++)r=n[s],a=i.viewForItem(r.item),a&&a.set("loadPriority",l+s)},itemViewDidEnter:function(t,e,n){var i=this._getItemAtIndex(n);i.retain(this),t.set("model",i),t._scc_asset=i},itemViewDidMove:function(t,e,n,i){this.__s._4cOyhO9jz6_$3pT$itemViewDidMove.apply(this,arguments),this.layoutItemView(t,n,i)},itemViewDidExit:function(t){var e=t._scc_asset;e.release(this),t._scc_asset=null,t.clearForReuse()},_getItemAtIndex:function(t){return this.itemModelProvider.itemAtIndex(t)},_roundToScrollIncrement:function(t){var e=this._scrollRoundingIncrement;return e?Math.ceil(t/e)*e:t},_setUpPositionedItemForIndexAndScrollLeft:function(t,e,n){t.width=this.widthForItemAtIndex(e),t.height=this.heightForItemAtIndex(e),void 0!==n&&(t.x=this.leftForItemAtIndex(e)-n),t.y=this.topForItemAtIndex(e)},_findItemIndexNearLeftPosition:function(t,e,n){var i=this.itemModelProvider.get("itemCount");return n?(e=Math.max(0,e),n=Math.min(i-1,n)):(e=0,n=i-1),n$717.call(this,this.leftForItemAtIndex,t,e,n,1)},__superMap:{_4cOyhO9jz6_$1XZ$init:"init",_4cOyhO9jz6_$1eN$viewDidLoad:"viewDidLoad",_4cOyhO9jz6_$1n9$didAttach:"didAttach",_4cOyhO9jz6_$3pT$itemViewDidMove:"itemViewDidMove"}});n$864=t,t.__QUALIFIED_CLASS_NAME__="Photos.StripCollectionViewController"}();
    
    
        
!function(){"use strict";var e=n$864.extend({viewClass:n$559(function(e){return e.extend({mayUseVerticalScrollingAsHorizontal:!0})}),_aspectRatio:n$9(n$14("mainAsset.aspectRatio")),_aspectRatioObserver:n$7("_aspectRatio",function(){this.computeLayoutInfo(),this.update()}),itemSpacing:10,_itemWidths:n$305(n$716,window.Uint32Array),_totalWidth:0,mainAsset:n$9(),activeAsset:n$9(),leftOffset:5,_computeEffectiveScrollLeft:function(e,t){var n=e.dataForItem(t.item),i=this.leftForItemAtIndex(n),r=i-t.x;return this._roundToScrollIncrement(r)},_computeStartingScrollLeft:function(e,t){var n=this.leftForItemAtIndex(0);return n+=this._totalWidth/2,n-=t/2+this.leftOffset,this._roundToScrollIncrement(n)},_computeTotalWidth:function(){return this._totalWidth},leftForItemAtIndex:function(e){for(var t=this.leftOffset,n=0;e>n;n++)t+=this._itemWidths.items[n]+this.itemSpacing;return t},widthForItemAtIndex:function(e){return this._itemWidths.items[e]},topForItemAtIndex:function(){return 0},heightForItemAtIndex:function(){return 1},computeLayoutInfo:function(){var e=this.itemModelProvider,t=e.get("itemCount"),n=this._itemWidths,i=this.get("_aspectRatio"),r=0;n=n.ensureLength(1*t,!1);for(var s=0;t>s;s++){var a=e.aspectRatioEstimateForItemAtIndex(s);1>a&&(n[s]=Math.ceil(46*i)),a>1&&(n[s]=Math.ceil(40*i)),r+=n[s]+this.itemSpacing}t>0&&(r-=this.itemSpacing),r+=2*this.leftOffset,this._totalWidth=r,this.__s._3PRe8ndErJx$1Nt$computeLayoutInfo.apply(this,arguments)},layoutItemView:function(e,t,n){e.doLayout(n.x,t)},itemViewDidEnter:function(e,t,n){this.__s._3PRe8ndErJx$1TW$itemViewDidEnter.apply(this,arguments),e.set("owner",this),e.set("burstIndex",n)
},__superMap:{_3PRe8ndErJx$1Nt$computeLayoutInfo:"computeLayoutInfo",_3PRe8ndErJx$1TW$itemViewDidEnter:"itemViewDidEnter"}});n$870=e,e.__QUALIFIED_CLASS_NAME__="Photos.ThumbnailStripCollectionViewController"}();
    
    
        
!function(){"use strict";var e=n$193.extend({staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[],classes:["photos-thumbnail-load-error"]}},init:function(){return this.__s._3Tm2hrczbcq$6r$init.call(this)},__superMap:{_3Tm2hrczbcq$6r$init:"init"}});n$867=e,e.__QUALIFIED_CLASS_NAME__="Photos.BurstThumbnailErrorView"}();
    
    
        
!function(){"use strict";var e=n$849.extend({staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"canvas",children:[],name:"_canvasElement"}],classes:["photos-image-view"]}}},drawDerivativeToCanvas:n$7("imageDerivative","size.width","size.height",n$522.bindingFor("devicePixelRatio"),function(e,t,n,i){var r=this._canvas;if(r){if(!e)return r.width=r.width,void 0;r.width=Math.ceil(t*i),r.height=Math.ceil(n*i),r.style.width=t+"px",r.style.height=n+"px",e.drawIntoCanvas(r,0,0,r.width,r.height,"cover")}}),_canvas:null,_context:null,init:function(){this.__s._4P2whWUOrrd$MK$init.apply(this,arguments);var e=this._canvas=this.get("_canvasElement");this._canvasStyle=n$160(e),this._context=this._canvas.getContext("2d")},__superMap:{_4P2whWUOrrd$MK$init:"init"}});n$868=e,e.__QUALIFIED_CLASS_NAME__="Photos.ThumbnailDerivativeView"}();
    
    
        
!function(){"use strict";var t=n$857.extend(n$395,{staticMembers:{templateExtensions:{root:{type:"ELEMENT",tagname:"ext",children:[],classes:[{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isSelected",truevalue:"photos-burst-thumbnail-asset-view-selected",attributes:{}},{type:"CLASSNAMEOUTLET",bindingtype:"IFBINDING",name:"_isLoading",truevalue:"photos-burst-thumbnail-asset-view-not-loaded",attributes:{}},"photos-burst-thumbnail-asset-view"],styles:{"margin-top":{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"marginTop",attributes:{},unit:"px",property:"margin-top"},width:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"width",attributes:{},unit:"px",property:"width"},height:{type:"STYLEOUTLET",bindingtype:"DIRECTBINDING",name:"height",attributes:{},unit:"px",property:"height"}}}}},initFromPool:function(t){this.set("owner",t),this.__s._Uwe1x3N0YU$EV$initFromPool.call(this)},loadingErrorViewClass:n$867,derivativeViewClassForAssetType:function(t){return t===n$309.IMAGE?n$868:this.__s._Uwe1x3N0YU$JW$derivativeViewClassForAssetType.apply(this,arguments)},model:n$9(),burstIndex:n$9(),asset:n$14("model"),desiredSize:n$14("thumbnailSize"),_isSelected:n$9({readOnly:!0,dependencies:["activeAsset","asset"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a===r}}),activeAsset:n$9(n$14("owner.activeAsset")),owner:n$9(),_isLoading:n$9({readOnly:!0,dependencies:["asset.loadingStatus","imageDerivativeLoader.isLoading"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return a===n$309.LOADING||r
}}),_cachedSize:null,thumbnailSize:n$355({dependencies:["asset"],writeDependencies:[],get:function(t,n,i,r){var a=r.internalGetPath(this,n[0+i]);if(!a)return this._cachedSize=null,null;var s=this._cachedSize;return s&&s.get("asset")===a||(this._cachedSize=s=e.create({asset:this.bindingFor("asset")})),s},set:function(){}}),marginTop:n$9({readOnly:!0,dependencies:[n$522.bindingFor("devicePixelRatio"),"height"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return Math.round(-(r/2)*a)/a}}),clearForReuse:function(){this.set("asset",null),this.set("owner",null),this.get("style").translate(-1e4,-1e4).scale(0).layerBack()},doLayout:function(t){var e=n$522.get("devicePixelRatio"),n=t,i=0;n-=n%(1/e),this.get("style").layerBack().translate(n,i)},action:"buttonAction",buttonAction:function(){var t=this.get("burstIndex");this.sendEvent("selectBurstAsset",t)},__superMap:{_Uwe1x3N0YU$EV$initFromPool:"initFromPool",_Uwe1x3N0YU$JW$derivativeViewClassForAssetType:"derivativeViewClassForAssetType"}}),e=n$5.extend(n$10,{width:n$9({readOnly:!0,dependencies:["asset.aspectRatio"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);r||(r=1);var a=this.get("height");return Math.ceil(r*a)}}),height:n$9({readOnly:!0,dependencies:["asset.aspectRatio"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return!r||r>=1?40:46}}),recomputeLayoutIfNecessary:function(){},asset:n$9()});n$871=t,t.__QUALIFIED_CLASS_NAME__="Photos.BurstThumbnailAssetView",e.__QUALIFIED_CLASS_NAME__="Photos.ThumbnailSize$670"}();
    
    
        
!function(){"use strict";var e=57,t=-e,n=n$194.extend(n$364,n$659,{loadPriorityBase:n$9(0),viewClass:n$869,height:n$660(e),offset:n$660(t),_asset:n$355(n$14("owner.asset")),_mainAsset:n$355(n$14("owner.mainAsset")),owner:n$9(),init:function(e){this.__s._317CbM8lYOJ$Gw$init.call(this),this.set("owner",e)},createViewOptions:function(){return n$43(this.__s._317CbM8lYOJ$Ip$createViewOptions.call(this),{stripOffset:this.bindingFor("offset"),stripHeight:this.bindingFor("height")})},_cachedCollectionViewController:n$355({didChange:function(e){e!==this._ccvc_currentValue&&(this._ccvc_lastValue=this._ccvc_currentValue,this._ccvc_currentValue=e)}}),_ccvc_currentValue:n$355(),_ccvc_lastValue:n$355(),collectionViewController:n$392.create({readOnly:!0,viewOutlet:"burstCollection",dependencies:["_mainAsset","_mainAsset.burstAssetModelProvider","_asset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[2+n]);if(a&&s){var o=this.get("_cachedCollectionViewController");return o&&o.get("mainAsset")===r||(o=n$870.create({itemViewClass:n$871,itemModelProvider:s,itemSpacing:10,activeAsset:this.bindingFor("_asset"),mainAsset:r,loadPriorityBase:this.bindingFor("loadPriorityBase")}),this.set("_cachedCollectionViewController",o)),o}}}),isVisible:!1,showPanel:function(){var e=250;window.event&&window.event.shiftKey&&(e*=10),this.get("collectionViewController"),this.animate("offset",0,e),this.isVisible=!0},hidePanel:function(){var e=250;window.event&&window.event.shiftKey&&(e*=10),this.animate("offset",-this.get("height"),e),this.isVisible=!1
},__superMap:{_317CbM8lYOJ$Gw$init:"init",_317CbM8lYOJ$Ip$createViewOptions:"createViewOptions"}});n$875=n,n.__QUALIFIED_CLASS_NAME__="Photos.BurstThumbnailStripController"}();
    
    
        
!function(){"use strict";var e=n$5.extend(n$364,{_cachedModelProvider:null,modelProvider:n$355(),preloadCount:n$9(),shouldWrap:n$9(!1),loadPriorityBase:n$9(0),_lastUsedDesiredSize:0,desiredSize:n$9(),currentIndex:n$9(),_loadRefs:n$84(Object),_currentPreloadId:0,_modelProviderObserver:n$7("modelProvider",function(e){this._cachedModelProvider&&this._cachedModelProvider!==e&&this._cancelOutstandingPreloads(),this._cachedModelProvider=e}),_desiredSizeObserver:n$7("desiredSize",function(e){this._lastUsedDesiredSize!==e&&(this._cancelOutstandingPreloads(),this._preloadDerivatives())}),_currentIndexObserver:n$7("currentIndex",function(){this._preloadDerivatives()}),_preloadDerivatives:function(){if(this.get("modelProvider")){var e=this._lastUsedDesiredSize=this.get("desiredSize");if(!isNaN(e)){var t=this.get("currentIndex"),n=this.get("preloadCount")/2;this._currentPreloadId++,this.get("shouldWrap")?this._preloadRangeBeforeAndAfterIndexWithWrapping(t,n):this._preloadRangeBeforeAndAfterIndex(t,n),this._cancelOldPreloads()}}},_preloadRangeBeforeAndAfterIndex:function(e,t){for(var n=this.get("loadPriorityBase"),i=1;t+1>i;i++)this._preloadDerivativeAtIndex(e+i,n+i),this._preloadDerivativeAtIndex(e-i,n+i)},_preloadRangeBeforeAndAfterIndexWithWrapping:function(e,t){for(var n=this.get("loadPriorityBase"),i=1;t+1>i;i++)this._preloadDerivativeAtIndexWithWrapping(e+i,n+i),this._preloadDerivativeAtIndexWithWrapping(e-i,n+i)},_preloadDerivativeAtIndexWithWrapping:function(e,t){var n=this.get("modelProvider"),i=n.get("itemCount");i&&(e%=i,0>e&&(e+=i),this._loadDerivativeAtIndex(e,t))},_preloadDerivativeAtIndex:function(e,t){var n=this.get("modelProvider"),i=n.get("itemCount");
0>e||e>=i||this._loadDerivativeAtIndex(e,t)},_loadDerivativeAtIndex:function(e,t){var n=this.get("modelProvider"),i=n.itemAtIndex(e);i.retain(this);var r=i.get("clientId"),s=this._loadRefs[r];if(s)return s.priority=t,s._preloadId=this._currentPreloadId,i.release(this),void 0;if(i.load(),i.get("cannotHaveImageDerivative"))return i.release(this),void 0;var o=this.get("desiredSize"),a=i.requestDerivative(o,"renderableImage");a.priority=t,a._preloadId=this._currentPreloadId,this._loadRefs[r]=a;var l=i.observe("cannotHaveImageDerivative",function(e){e&&a.cancel()}),h=function(e,t){this._loadRefs[r]===t&&delete this._loadRefs[r],l.disconnect(),i.release(this)}.bind(this);a.then(h,h)},_cancelOutstandingPreloads:function(){for(var e in this._loadRefs)if(this._loadRefs.hasOwnProperty(e)){var t=this._loadRefs[e];t.cancel(),delete this._loadRefs[e]}},_cancelOldPreloads:function(){for(var e in this._loadRefs)if(this._loadRefs.hasOwnProperty(e)){var t=this._loadRefs[e];t._preloadId!==this._currentPreloadId&&(t.cancel(),delete this._loadRefs[e])}},dispose:function(){this._cancelOutstandingPreloads(),this.__s._41H_GxxWdWs$1hg$dispose.apply(this,arguments)},__superMap:{_41H_GxxWdWs$1hg$dispose:"dispose"}});n$876=e,e.__QUALIFIED_CLASS_NAME__="Photos.OneUpDerivativePreloader"}();
    
    
        
!function(){"use strict";var e=n$298.get("oneUpPreloadCount"),t=n$194.extend(n$659,n$607,n$364,n$807,{staticMembers:{createBookmark:function(e,t){e||n$11("Cannot create a ONE_UP bookmark without an asset."),t?this._lastBookmarkedProvider=t:t=this._lastBookmarkedProvider;var n;n=t===n$309.datastore?n$831.createBookmark(e):n$32(t,n$370)&&t.get("isRecentlyDeleted")?n$874.createBookmark(t,e):n$839.createBookmark(t,e);var i=n$372.bookmarkIdForModelProvider(t);return n$731.getBookmark({returnTo:n,type:n$872,provider:i,providerId:i,assetId:e.get("clientId")})},getAssetFromBookmark:function(e){if(!e)return null;var t=e.get("type");if(t!==n$872)return null;var n=e.get("assetId");return n?n$309.create(n):null},getProviderFromBookmark:function(e){if(!e)return null;var t=e.get("type");if(t!==n$872)return null;var n=e.get("providerId");return n?n$372.modelProviderForBookmarkId(n):null}},viewClass:n$873,_burstIndex:n$9(),_previousAsset:null,burstIndex:n$9({dependencies:["mainAsset","_isBurst","burstAssetModelProvider","_burstIndex"],writeDependencies:["_burstIndex"],get:function(e,t,n,i){var e=i.internalGetPath(this,t[3+n]),r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a!==this._previousAsset&&(this._previousAsset=a,e=0/0),isNaN(e)&&(s?(r||n$11("OneUpViewController is viewing a burst, but lacks access to its burstAssetModelProvider."),e=r.indexOfItem(a)):e=0/0),e},set:function(e){this.set("_burstIndex",e)}}),_resetBurstIndex:function(){this.set("burstIndex",0/0)},isBurstStripVisible:n$9({defaultValue:!1,didChange:function(e){var t=this._burstThumbnailStrip;
e?t&&t.showPanel():(t&&t.hidePanel(),this._resetBurstIndex())}}),isDeleteDisabled:n$9({readOnly:!0,dependencies:["isBurstStripVisible","modelProvider.isRemoveAllowed","view.assetView.derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a||!s||!r}}),isFavoritingDisabled:n$9({readOnly:!0,dependencies:["isBurstStripVisible","modelProvider.areItemsModifiable","mainAsset.loadingStatus","view.assetView.derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),s=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);return o||!a||s!==n$329.LOADED||!r}}),isDownloadDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isDownloadAllowed"),"view.assetView.derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!s||!r}}),isEmailDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isEmailAllowed"),"view.assetView.derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!s||!r}}),isShareDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isSharingAllowed"),"view.assetView.derivativeView"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return!s||!r}}),isAddToDisabled:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isUpdateAllowed"),"view.assetView.derivativeView"],get:function(e,t,n,i){return!i.internalGetPath(this,t[0+n])||!i.internalGetPath(this,t[1+n])
}}),_folderDeletedNavigator:n$7("modelProvider.isGone",function(e){this.get("isActiveViewController")&&e&&this.navigateTo(this.get("bookmark").get("returnTo").get("returnTo"))}),asset:n$355({cacheable:!0,readOnly:!0,dependencies:["mainAsset","_isBurst","burstIndex","burstAssetModelProvider"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),s=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]),o=i.internalGetPath(this,t[0+n]);if(o){if(!a)return o;if(r)return r.itemAtIndex(s)}}}),mainAsset:n$355({dependencies:["bookmark","bookmark.providerId","bookmark.assetId"],writeDependencies:["bookmark.providerId","bookmark.assetId"],get:function(e,t,n,i){return this.constructor.getAssetFromBookmark(i.internalGetPath(this,t[0+n]))},set:function(e){var t=this.get("bookmark"),n=this.get("modelProvider");if(t&&e&&n){var i=n$372.bookmarkIdForModelProvider(n),r=e.get("clientId");t.set("providerId",i),t.set("assetId",r)}return e}}),_mainAssetDidChange:n$7("mainAsset",function(){this.selectedAssets=[this.mainAsset]}),_derivativePreloader:n$355(),_burstDerivativePreloader:n$355(),_preloadPriorityBase:n$9({readOnly:!0,dependencies:["_burstPreloadPriorityBase"],get:function(t,n,i,r){return r.internalGetPath(this,n[0+i])+e}}),_burstPreloadPriorityBase:n$9({readOnly:!0,dependencies:["loadPriorityBase"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r+this.get("preloadPriorityOffset")}}),_createPreloaders:function(){this.set("_derivativePreloader",n$876.create({modelProvider:this.bindingFor("modelProvider"),loadPriorityBase:this.bindingFor("_preloadPriorityBase"),desiredSize:this.bindingFor("_maxDerivativeSize"),currentIndex:this.bindingFor("assetIndexInProvider"),preloadCount:e,shouldWrap:!1})),this.set("_burstDerivativePreloader",n$876.create({modelProvider:this.bindingFor("burstAssetModelProvider"),loadPriorityBase:this.bindingFor("_burstPreloadPriorityBase"),desiredSize:this.bindingFor("_maxDerivativeSize"),currentIndex:this.bindingFor("burstIndex"),preloadCount:e,shouldWrap:!0}))
},_desiredAssetSize:n$9(n$14("view.assetView.desiredSize")),_maxDerivativeSize:n$9({readOnly:!0,dependencies:["_desiredAssetSize.height","_desiredAssetSize.width",n$522.bindingFor("devicePixelRatio")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]),o=Math.min(Math.max(a,s))*r;return o}}),_isBurst:n$9({readOnly:!0,dependencies:["mainAsset.type"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r===n$309.BURST}}),_returnToIfNeeded:n$7("assetIndexInProvider","isActiveViewController",function(e){-1===e&&this.navigateToReturnToIfActive()}),_shouldShowBurstButton:n$9(n$14("_isBurst")),title:n$9(n$14("asset.title")),zoomLevel:n$9(1),_minimumAllowedZoomLevel:n$9(1),_maximumAllowedZoomLevel:n$9({readOnly:!0,dependencies:["asset.dimensions","_assetViewWidth"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s?4*s.objectAt(0)/r:0}}),_actualAssetPixelsZoomLevel:n$9({readOnly:!0,dependencies:["asset.dimensions","_assetViewWidth"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s?s.objectAt(0)/r:0}}),_assetViewWidth:n$9(0/0),_maintainAssetViewWidth:n$7("view.assetView",function(e){return e?(this._lastAssetView!==e&&this._assetViewWidthObserver&&(this._assetViewWidthObserver.disconnect(),this._assetViewWidthObserver.release(this),this._assetViewWidthObserver=null),this._lastAssetView=e,e&&!this._assetViewWidthObserver&&(this._assetViewWidthObserver=e.observe("width",function(){this.setIfChanged("_assetViewWidth",e.get("width")||0/0)
}.bind(this)).retain(this),this._assetViewWidthObserver.connect()),this.setIfChanged("_assetViewWidth",e.get("width")),void 0):this.setIfChanged("_assetViewWidth",0/0)}),_isZoomAllowed:n$9({readOnly:!0,dependencies:["view.assetView.derivativeView","asset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return r&&r.get("genericType")===r.constructor.IMAGE?!!s:!1}}),_isZoomDisabled:n$9({readOnly:!0,dependencies:["_isZoomAllowed"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return!r}}),toolbarConfiguration:n$608.extend({leftItems:["zoomSlider"],middleItem:"assetInfo",rightItems:n$9({readOnly:!0,dependencies:[n$103.bindingFor("application.isEmailAllowed"),n$298.bindingFor("enableUnreleasedFeatures"),"owner.modelProvider",n$298.bindingFor("enableExpunge")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[3+n]),s=i.internalGetPath(this,t[2+n]),a=i.internalGetPath(this,t[1+n]);i.internalGetPath(this,t[0+n]);var o=a?["infoButton"]:[];return n$32(s,n$370)&&s.get("isRecentlyDeleted")?(o.push("favoriteButton","downloadButton","textualUndeleteButton"),r&&o.push("separator1","textualDeleteButton")):o.push("favoriteButton","downloadButton","addToAlbumButton","shareButton","deleteButton"),o}}),zoomSlider:n$9(n$533.extend({value:n$14("owner.owner.zoomLevel"),isDisabled:n$14("owner.owner._isZoomDisabled"),minValue:n$14("owner.owner._minimumAllowedZoomLevel"),maxValue:n$14("owner.owner._maximumAllowedZoomLevel"),actualPixelsValue:n$9(n$14("owner.owner._actualAssetPixelsZoomLevel")),notchValues:n$9({readOnly:!0,cacheable:!0,dependencies:["actualPixelsValue"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);
return[.5,1,2,4].map(function(e){return e*r})}}),handlePositionTween:n$9({defaultValue:function(){return function(e){return Math.pow(2,Math.pow(e+.1,2))}}})})),assetInfo:n$546.extend({asset:n$14("owner.owner.mainAsset")}),infoButton:n$535.extend({event:"toggleInfoPanel"}),favoriteButton:n$679.extend({asset:n$14("owner.owner.mainAsset"),isDisabled:n$14("owner.owner.isFavoritingDisabled")}),downloadButton:n$535.extend({event:"downloadAsset",isDisabled:n$14("owner.owner.isDownloadDisabled")}),addToAlbumButton:n$679.extend({asset:n$14("owner.owner.mainAsset"),event:"showAlbumPickerPopover",isDisabled:n$14("owner.owner.isAddToDisabled")}),emailButton:n$535.extend({event:"emailAsset",isDisabled:n$14("owner.owner.isEmailDisabled")}),shareButton:n$535.extend({event:"shareAsset",isDisabled:n$14("owner.owner.isShareDisabled")}),deleteButton:n$535.extend({event:"confirmDelete",tooltip:n$9({readOnly:!0,dependencies:["owner.owner.modelProvider",n$133.get("sharedInstance").bindingFor("activeKeys")],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);if(r){var s=n$837(r);return s===n$366.DELETE?n$290("Toolbar.OneUp.Delete.Tooltip"):n$290("Toolbar.OneUp.Remove.Tooltip")}}}),isDisabled:n$14("owner.owner.isDeleteDisabled")}),textualUndeleteButton:n$535.extend({event:"undelete"}),textualDeleteButton:n$535.extend({event:"confirmDelete"})}),undelete:function(){var e=this.getPath("mainAsset.clientId");n$41(e)&&n$309.undeleteAssetsWithClientIds([e])},confirmDelete:function(){var e,t=this.get("burstAssetModelProvider")?this.get("burstAssetModelProvider").get("itemCount"):void 0,n=this.get("modelProvider"),i=n$837(n,function(t){e=t
}),r=n$368.get("sharedInstance");r.showRemoveAlert({modelProvider:n,itemCount:1,type:this.get("mainAsset").get("type"),target:this,action:"_deleteAsset",burstItemCount:t,removeType:i,context:e})},_deleteAsset:function(e){var t=this.get("modelProvider"),n=[this.get("assetIndexInProvider")];return e===n$366.DELETE?n$309.deleteAssetsWithClientIds(t.clientIdsForIndexes(n)):t.removeItemsAtIndexesAndWriteToServer(n),!0},downloadAsset:function(){var e=n$518.get("sharedInstance");return e.download(this.get("asset")),n$203.get("cloudOSService").recordStat("DownloadStat",{count:1,location:"OneUpViewController"}),!0},emailAsset:function(){var e=n$825.create();e.openComposeWindowWithAsset(this.get("asset"))},offsets:n$9(),view:n$9({downstreamBindings:{asset:"(owner).asset",zoomLevel:"(owner).zoomLevel",minZoomLevel:"(owner)._minimumAllowedZoomLevel",maxZoomLevel:"(owner)._maximumAllowedZoomLevel",isZoomDisabled:"(owner)._isZoomDisabled",hasNextButton:"(owner).hasNextButton",hasPreviousButton:"(owner).hasPreviousButton",shouldShowBurstButton:"(owner)._shouldShowBurstButton",loadPriority:"(owner).loadPriorityBase",bottomOffset:"(owner).offsets.bottom",isBurstStripVisible:"(owner).isBurstStripVisible"}}),modelProvider:n$355({readOnly:!0,cacheable:!0,dependencies:["bookmark"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.constructor.getProviderFromBookmark(r)}}),burstAssetModelProvider:n$355(n$14("mainAsset.burstAssetModelProvider")),_activeModelProvider:n$9({readOnly:!0,dependencies:["modelProvider","burstAssetModelProvider","isBurstStripVisible"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);
return r?s:a}}),assetIndexInProvider:n$9({cacheable:!0,readOnly:!0,dependencies:["modelProvider","mainAsset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&r?s.indexOfItem(r):-1}}),hasNextButton:n$9({readOnly:!0,dependencies:["_isBurst","isBurstStripVisible","nextAsset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a&&s?!0:r}}),hasPreviousButton:n$9({readOnly:!0,dependencies:["_isBurst","isBurstStripVisible","previousAsset"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a&&s?!0:r}}),_modelProviderContentsWillChange:n$7("modelProvider.contentsWillChange",function(e){if(e){this._removeMainCandidateFallbackInfo();var t=this.get("modelProvider"),n=t&&t.get("itemCount"),i=this.get("mainAsset");if(!n||!t.hasUniqueIds||!i)return t.hasUniqueIds||n$63.warn("The IndexedModelProvider ("+t+") serving OneUpViewController lacks uniqueIds. Skipping selection of best remaining item after changeset."),void 0;for(var r=this._mainCandidateFallbackList=n$319.getInstance(),s=t.indexOfItem(i),a=s,o=1;a>=0;)r.push(t.uniqueIdForIndex(a)),a+=o,a>=n&&(o=-1,a=s+o)}}),_removeMainCandidateFallbackInfo:n$299(function(){this._mainCandidateFallbackList&&(n$319.disposeInstance(this._mainCandidateFallbackList),this._mainCandidateFallbackList=null)}),_modelProviderContentsDidChange:n$7("modelProvider.contentsDidChange",function(e){if(e){var t=this.get("modelProvider"),n=this.get("mainAsset");
if(!t.get("itemCount")||n&&-1!==t.indexOfItem(n))return this.propertyChanged("assetIndexInProvider"),void 0;n=null;var i=this._mainCandidateFallbackList;if(i)for(var r=0,s=i.length;s>r&&!n;r++)n=t.itemForUniqueId(i[r]);n||(n=t.getFirstItem()),n$239(this,"mainAsset",n),this._removeMainCandidateFallbackInfo(),this._preloadAssets()}}),nextAsset:n$355({cacheable:!0,readOnly:!0,dependencies:["modelProvider","assetIndexInProvider","modelProvider.itemCount"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);return a&&r&&-1!==s?r-1>s?a.itemAtIndex(s+1)||null:void 0:null}}),previousAsset:n$355({cacheable:!0,readOnly:!0,dependencies:["modelProvider","assetIndexInProvider"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s&&-1!==r?r>0?s.itemAtIndex(r-1)||null:void 0:null}}),_isFullScreen:n$4({readOnly:!0,get:function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e}}),goToNextAsset:function(){if(this.get("hasNextButton")&&!this.get("_isFullScreen")){var e=this.get("isBurstStripVisible");if(e){var t=this.get("nextBurstIndex");this.set("burstIndex",t)}else{var n=this.get("nextAsset");this.set("mainAsset",n)}this._recordNavStat("next")}},goToPreviousAsset:function(){if(this.get("hasPreviousButton")&&!this.get("_isFullScreen")){var e=this.get("isBurstStripVisible");if(e){var t=this.get("previousBurstIndex");this.set("burstIndex",t)}else{var n=this.get("previousAsset");this.set("mainAsset",n)
}this._recordNavStat("previous")}},_recordNavStat:function(e){var t,n="none";if(this.get("isBurstStripVisible"))t=n$24(this.get("mainAsset"));else{t=n$24(this.get("modelProvider"));var i=this.get("modelProvider").instanceOf(n$370)&&this.getPath("modelProvider.isServerCreated");i&&(n=this.getPath("modelProvider.serverId"))}n$203.get("cloudOSService").recordStat("OneUpNav",{direction:e,contextType:t,subContext:n,locale:n$214.get("sharedInstance").get("locale")})},nextBurstIndex:n$9({readOnly:!0,dependencies:["burstIndex","maxBurstIndex"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s++,s>r&&(s=0),s}}),previousBurstIndex:n$9({readOnly:!0,dependencies:["burstIndex","maxBurstIndex"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return s--,0>s&&(s=r),s}}),maxBurstIndex:n$9({readOnly:!0,dependencies:["burstAssetModelProvider"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r.get("itemCount")-1:0}}),handleKeyDown:function(e){switch(e.keyCode){case n$748.LEFT:this.goToPreviousAsset();break;case n$748.RIGHT:this.goToNextAsset();break;case n$748.D:this.get("isDownloadDisabled")||this.downloadAsset();break;case n$748.E:this.get("isEmailDisabled")||this.emailAsset();break;case n$748.F:if(!this.get("isFavoritingDisabled")){var t=this.get("asset"),n=t.get("isFavorite");t.set("isFavorite",!n)}break;case n$748.ESC:var i=this.isBurstStripVisible;i?this.isBurstStripVisible=!1:this.userReturnRequest();break;case n$748.SPACE:this._toggleVideoPlayback();break;case n$748.DELETE:case n$748.BACKSPACE:this.get("isDeleteDisabled")||this.confirmDelete(),e.preventDefault();
break;case n$748.EQUALS:this._zoomInIfPossible();break;case n$748.MINUS:this._zoomOutIfPossible()}},_toggleVideoPlayback:function(){var e=this.asset;if(e&&e.genericType===n$309.VIDEO){var t=this.getPath("view.assetView.derivativeView");if(!t)return;if(t.isInVideoPlaybackMode){var n=t.videoDerivative;n.isPlaying?n.pause():n.play()}else t.playVideo()}},_zoomInIfPossible:function(){var e=this.get("_nextHigherZoomLevel");e&&this.set("_targetZoomLevel",e)},_zoomOutIfPossible:function(){var e=this.get("_nextLowerZoomLevel");e&&this.set("_targetZoomLevel",e)},_animatedZoomLevel:n$660(0),_targetZoomLevel:n$9(0),_animateZoomLevel:n$7("_targetZoomLevel",function(e){var t=this.get("_animatedZoomLevel");e!==t&&this.animate("_animatedZoomLevel",e,200)}),_writeZoomLevel:n$7("_animatedZoomLevel",function(e){e&&(this._isWritingZoomLevel=!0,this.setIfChanged("zoomLevel",e),this._isWritingZoomLevel=!1)}),_readZoomLevel:n$7("zoomLevel",function(e){this._isWritingZoomLevel||(this.setIfChanged("_targetZoomLevel",e),this.setIfChanged("_animatedZoomLevel",e))}),_zoomSteps:n$9({cacheable:!0,readOnly:!0,dependencies:["_actualAssetPixelsZoomLevel","_minimumAllowedZoomLevel","_maximumAllowedZoomLevel","_isZoomAllowed"],get:function(e,t,i,r){var s=r.internalGetPath(this,t[3+i]),a=r.internalGetPath(this,t[2+i]),o=r.internalGetPath(this,t[1+i]),l=r.internalGetPath(this,t[0+i]);if(!s)return null;var d=n;return d=d.map(function(e){var t=e*l;return t}),d=d.filter(function(e){return e>=o&&a>=e}),d.push(1),d.sort(n$303),d}}),_nextHigherZoomLevel:n$9({readOnly:!0,dependencies:["zoomLevel","_zoomSteps","_targetZoomLevel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);
if(!s)return 0/0;a=Math.max(a,r);for(var o=0;o<s.length;o++)if(s[o]>a+1e-5)return s[o];return 0/0}}),_nextLowerZoomLevel:n$9({readOnly:!0,dependencies:["zoomLevel","_zoomSteps","_targetZoomLevel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[2+n]),s=i.internalGetPath(this,t[1+n]),a=i.internalGetPath(this,t[0+n]);if(!s)return 0/0;a=Math.min(a,r);for(var o=s.length-1;o>=0;o--)if(s[o]<a-1e-5)return s[o];return 0/0}}),didAttach:function(){this.__s._3rVNB4xskZX$DAB$didAttach.apply(this,arguments),this.getPath("view.assetView.desiredSize").recomputeLayoutIfNecessary(),this.infoPanelOffset=this.observe("navigationManager.infoPanel.offset",function(e){var t=this.getPath("navigationManager.infoPanel.width"),n=e+t;isNaN(n)||this.get("style").set("right",n)}),this._burstThumbailStripOffset=this.observe("_burstThumbnailStrip.offset",function(e){var t=this.getPath("view.assetView.desiredSize");if(t){var n=this.getPath("_burstThumbnailStrip.height"),i=e+n;isNaN(i)||this.setPath("view.burstBottomOffset",i)}}),this._createPreloaders()},didDetach:function(){this.isBurstStripVisible=!1,this.set("mainAsset",null),this.__s._3rVNB4xskZX$DXz$didDetach.apply(this,arguments)},_cachedBurstThumbnailStrip:n$392.create("_burstThumbnailStrip"),_burstThumbnailStrip:n$9({readOnly:!0,dependencies:["mainAsset","_isBurst"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);if(s&&r){var a=this.get("_cachedBurstThumbnailStrip");return a||(a=n$875.extend({loadPriorityBase:this.bindingFor("_burstPreloadPriorityBase")}).create(this)),this.set("_cachedBurstThumbnailStrip",a),a
}}}),selectBurstAsset:function(e){var t=e.get("context");this.set("burstIndex",t)},infoPanelOffset:null,_preloadAssets:n$7("asset","modelProvider","burstAssetModelProvider","isBurstStripVisible",function(e,t,n,i){if(e){i&&(t=n);var r=t.indexOfItem(e);i?t.preloadModelsNearRangeWrapped(r,r+1):t.preloadModelsNearRange(r,r+1)}}),_unzoomOnAssetChange:n$7("asset",function(e){var t=e&&e.get("clientId");this._lastAssetClientId!==t&&(this._lastAssetClientId=t,this._unzoom())}),_unzoomOnceDisallowed:n$7("_isZoomDisabled",function(e){this.isDisposing||!e||this._isUnzooming||(this._isUnzooming=!0,this._unzoom(),this._isUnzooming=!1)}),_unzoom:function(){n$66.pause(),this.setIfChanged("zoomLevel",1);var e=this.get("view");e.setIfChanged("fractionalScrollX",.5),e.setIfChanged("fractionalScrollY",.5),n$66.resume()},dispose:function(){this.isDisposing=!0,this._assetViewWidthObserver&&(this._assetViewWidthObserver.disconnect(),this._assetViewWidthObserver.release(this),this._assetViewWidthObserver=null),this.__s._3rVNB4xskZX$EXK$dispose.apply(this,arguments)},__superMap:{_3rVNB4xskZX$DAB$didAttach:"didAttach",_3rVNB4xskZX$DXz$didDetach:"didDetach",_3rVNB4xskZX$EXK$dispose:"dispose"}}),n=[1/64,1/48,1/32,1/24,1/16,1/12,1/8,1/6,.25,1/3,.5,2/3,1,1.5,2,3,4,6,8,12,16];n$885=t,t.__QUALIFIED_CLASS_NAME__="Photos.OneUpViewController"}();
    
    
        
!function(){"use strict";var e=n$194.extend(n$607,{toolbarConfiguration:n$608,viewClass:n$193.extend(n$663,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinner"}],classes:["photos-pre-startup-view"]}},_spinner:n$424(n$690)})});n$889=e,e.__QUALIFIED_CLASS_NAME__="Photos.PreStartupViewController"}();
    
    
        
!function(){"use strict";var t=30,e=950,n=931,i=n$193.extend(n$663,n$634,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_errorView"},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_messageTitle",attributes:{}}],classes:["photos-firstrun-message-title"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_messageContents",attributes:{}}],classes:["photos-firstrun-message-contents"]},{type:"ELEMENT",tagname:"div",children:[{type:"VIEWOUTLET",tagname:"view",children:[],name:"_spinner"},{type:"ELEMENT",tagname:"span",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_loadingMessage",attributes:{}}],classes:["photos-firstrun-loading-message"]},{type:"VIEWOUTLET",tagname:"view",children:[],name:"_progressBar"},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_loadingLargeLibraryMessage",attributes:{}}],classes:["photos-firstrun-loading-large-library-message"]}],classes:["photos-firstrun-loading"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_messageNotEnabled",attributes:{}}],classes:["photos-firstrun-message-notenabled"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_messageFootnote",attributes:{}}],classes:["photos-firstrun-message-footnote"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_messageComingSoon",attributes:{}}],classes:["photos-firstrun-message-coming-soon"]}],classes:["photos-firstrun-message"],name:"_firstRunMessageContainer"},{type:"ELEMENT",tagname:"img",children:[],name:"_firstRunImage",classes:["photos-firstrun-image"],attributes:{src:{type:"ATTRIBUTEOUTLET",bindingtype:"DIRECTBINDING",name:"_firstRunImageURL",attributes:{},attribute:"src"}}}],classes:["photos-firstrun","selectable"],name:"_firstRunContainer"}},_errorView:n$84(n$844,{errorTitle:n$290("FirstRun.Error.Title"),errorSubtitle:n$290("FirstRun.Error.Message")}),_stateChanged:n$12(),_stateObserver:n$879("viewController.bookmark.state",function(){this._stateChanged()
}),_progressBar:n$9({defaultValue:function(){var t=n$691.create({max:100});return t}}),viewController:n$9(),init:function(){this.__s._1G9pK1vVugl$l7$init.apply(this,arguments);var t=this.get("_firstRunContainer"),e=n$563.create(t);this.set("containerMeasurer",e)},forceProgressToComplete:function(){var t=this.get("_progressBar");t.get("element").classList.add("fast"),t.setPropertiesWithObject({max:100,value:100})},_previousStatusData:null,_statusDataDidChange:n$7("_progressBar",n$330.bindingFor("dataManager.statusData"),function(t,e){var n=1,i=this._previousStatusData;if(this._previousStatusData=e,t){if(!e)return t.set("value",n),void 0;if(!e.queuedBehindCount){var r=e.totalRecords,a=Math.min(r,e.processedRecords);a=a/r*(95-n),this.getPath("_progressBar.element").classList.remove("fast"),t.setPropertiesWithObject({value:a+n}),i||this.getPath("_progressBar.style").forceRedraw()}}}),_loadingMessage:n$9(n$290("FirstRun.Loading.Message")),_loadingLargeLibraryMessage:n$9(n$290("FirstRun.Loading.LargeLibrary.Message")),_messageTitle:n$290("FirstRun.Title"),_messageContents:n$290("FirstRun.Contents.Message"),_messageNotEnabled:n$290("FirstRun.NotEnabled.Advice"),_messageFootnote:n$290("FirstRun.Footnote"),_messageComingSoon:n$290("FirstRun.ComingSoon.Advice"),containerMeasurer:n$9(),_layoutObserver:n$7("_messageContents","_messageNotEnabled","_messageComingSoon","containerMeasurer.width","containerMeasurer.height","_stateChanged",function(t,n,i,r,a){if(a&&a){e>r&&(r=e);var s=this.get("_firstRunMessageContainer");n$160(s).clear();var o=s.clientHeight,l=s.clientWidth,h=.55*r;this._setMessageStyle(l,h,o,a),this._setImageStyle(a,h)
}}),_setMessageStyle:function(e,n,i,r){var a=n/2,s=a-e/2;t>s&&(s=t,e=n-2*t);var o=r/2,l=o-i/2;n$160(this.get("_firstRunMessageContainer")).set({width:e,left:s,top:l})},_setImageStyle:function(t,e){var i=.125*t,r=t-2*i;i>155&&(r=n,i=(t-r)/2);var a=e;n$160(this.get("_firstRunImage")).set({height:r,left:a,top:i})},_cachedSpinner:null,_spinner:n$9({readOnly:!0,dependencies:["viewController.bookmark.state"],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);if("LIBRARY_NOT_PROCESSED"!==r)return null;var a=this._cachedSpinner;return a||(a=this._cachedSpinner=n$690.create()),a}}),_firstRunImageURL:n$9({readOnly:!0,dependencies:[n$522.bindingFor("devicePixelRatio")],get:function(t,e,n,i){var r=i.internalGetPath(this,e[0+n]);return r>1?__CW_PATH_PREFIX+n$881:__CW_PATH_PREFIX+n$880}}),__superMap:{_1G9pK1vVugl$l7$init:"init"}});n$882=i,i.__QUALIFIED_CLASS_NAME__="Photos.FirstRunView"}();
    
    
        
!function(){"use strict";var e=n$194.extend(n$607,{viewClass:n$882,toolbarConfiguration:n$608,didAttach:function(){this.__s._13zg16SafYp$8G$didAttach.apply(this,arguments),this.getPath("view.containerMeasurer").recomputeLayoutIfNecessary()},_navigatedToTimestamp:0,_isActiveViewControllerDidChange:n$7("isActiveViewController",function(e){this._navigatedToTimestamp=e?Date.now():0}),completeAndFireCallback:function(e){var t=Date.now()-this._navigatedToTimestamp,n=Math.max(0,n$211.get("minFirstRunTime")-t);this.get("view").forceProgressToComplete(),n=Math.max(n,n$211.get("firstRunProgressBarTransitionDelay")),n$130(e,n)},__superMap:{_13zg16SafYp$8G$didAttach:"didAttach"}});n$890=e,e.__QUALIFIED_CLASS_NAME__="Photos.FirstRunViewController"}();
    
    
        
!function(){"use strict";var e="first-run",t=n$731.extend({staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$891=e,n$992=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.FirstRun"}();
    
    
        
!function(){"use strict";var e="pre-startup",t=n$731.extend({staticMembers:{type:e}});n$731.registerBookmarkType(e,t),n$892=e,n$993=t,t.__QUALIFIED_CLASS_NAME__="Photos.Bookmarks.PreStartup"}();
    
    
        
!function(){"use strict";var e="-",t=n$193.extend(n$364,{staticMembers:{template:{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_cameraName",attributes:{}}],classes:["photos-info-camera-name"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_lensInfo",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_assetResolution",attributes:{}}],classes:["photos-info-camera-file-resolution"]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_assetFilesize",attributes:{}}],classes:["photos-info-camera-file-size"]},{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:" "}],classes:["photos-info-camera-file-type"]}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_assetTime",attributes:{}}]}],classes:["photos-info-camera-details"]},{type:"ELEMENT",tagname:"div",children:[],classes:["photos-info-camera-divider"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_iso",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_focalLength",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_exposure",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_focalRatio",attributes:{}}]},{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_shutterSpeed",attributes:{}}]}],classes:["photos-info-camera-data"]}],classes:["photos-info-camera"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"DATAOUTLET",bindingtype:"DIRECTBINDING",name:"_caption",attributes:{}}],classes:["photos-info-fake-text"]}],classes:["photos-info-caption"]},{type:"ELEMENT",tagname:"div",children:[{type:"ELEMENT",tagname:"div",children:[{type:"TEXT",data:"Assign a Place"}],classes:["photos-info-location-name"]},{type:"ELEMENT",tagname:"div",children:[],classes:["photos-info-map"]}],classes:["photos-info-location"]}],classes:["photos-info-panel"]}},_asset:n$355(),_assetDidChange:n$7("_asset",function(e){e&&e.load()
}),_cameraName:n$9({readOnly:!0,dependencies:["_asset.details.cameraModel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r:n$290("Asset.Info.No.Camera")}}),_lensInfo:n$9({readOnly:!0,dependencies:["_asset.details.lensModel"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?r:n$290("Asset.Info.No.Lens")}}),_assetResolution:n$9({readOnly:!0,dependencies:["_asset.dimensions"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s&&2===s.get("length")?s.objectAt(0)+" x "+s.objectAt(1):e+" x "+e}}),_assetFilesize:n$9({readOnly:!0,dependencies:["_asset.details.filesize"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);if(s){var a=s/1024;if(1e3>a)return a=+a.toFixed(2),a+" "+n$290("Asset.Info.KB");var o=a/1024;if(1e3>o)return o=+o.toFixed(2),o+" "+n$290("Asset.Info.MB");var l=o/1024;if(1e3>l)return l=+l.toFixed(2),l+" "+n$290("Asset.Info.GB")}return e+" "+n$290("Asset.Info.B")}}),_assetTime:n$9({readOnly:!0,dependencies:["_asset.createdDateObject"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return r?n$290("Asset.Info.Date.Format",{date:r,dateFormatter:n$542}):n$290("Asset.Info.No.Date")}}),_iso:n$9({readOnly:!0,dependencies:["_asset.details.ISOSpeedRatings"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?"ISO "+s:e}}),_focalLength:n$9({readOnly:!0,dependencies:["_asset.details.focalLength"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?s+n$290("Asset.Info.MM"):e}}),_exposure:n$9({readOnly:!0,dependencies:["_asset.details.exposureValue"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);
if(s){var a=s>0?"+":"";return a+s+" "+n$290("Asset.Info.EV")}return e}}),_focalRatio:n$9({readOnly:!0,dependencies:["_asset.details.fnumber"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?"ƒ"+s:e}}),_shutterSpeed:n$9({readOnly:!0,dependencies:["_asset.details.shutterSpeed"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?s:e}}),_caption:n$9({readOnly:!0,dependencies:["_asset.title"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return s?s:e}})});n$884=t,t.__QUALIFIED_CLASS_NAME__="Photos.AssetInfoPanelView"}();
    
    
        
!function(){"use strict";var e=-282,t="__photosInfoPanelVisibilty",n=n$194.extend(n$364,{viewClass:n$884,width:n$9(282),offset:n$9(-282),styleOffset:n$7("offset",function(t){var n=this.getPath("view.style");n.set("right",t),n.set("display",t===e?"none":null)}),parentData:n$9(),asset:n$355({dependencies:["parentData.bookmark"],get:function(e,t,n,i){return n$885.getAssetFromBookmark(i.internalGetPath(this,t[0+n]))},readOnly:!0}),createViewOptions:function(){return n$43(this.__s._4M3UlLNADP0$Im$createViewOptions.call(this),{_asset:this.bindingFor("asset")})},visible:!1,toggleVisibility:function(){this.visible?this.hidePanel():this.showPanel(),this.savePanelVisibilityState(this.visible)},showPanel:function(){this.transitionDirection=1,this.visible||(this.visible=!0),this.startTransition()},hidePanel:function(){this.transitionDirection=-1,this.visible&&(this.visible=!1),this.startTransition()},startTransition:function(){if(-1===this.transitionIntervalId){var e=this;this.transitionIntervalId=setInterval(function(){e.slideTransitionStep()},this.transitionInterval)}},savePanelVisibilityState:function(e){localStorage.setItem(t,e)},getSavedPanelVisibilityState:function(){return localStorage.getItem(t)},restoreToSavedVisibilityState:function(){var e=this.getSavedPanelVisibilityState();"true"===e?this.showPanel():this.hidePanel()},transitionDirection:1,transitionTime:0,transitionIntervalId:-1,transitionInterval:16,slideTransitionStep:function(){var t=this.transitionTime;t+=this.transitionDirection*(this.transitionInterval/1e3);var n=-282,i=282,r=.25,s=-i/2*(Math.cos(Math.PI*t/r)-1)+n;this.set("offset",s),(t>=r||0>=t)&&(clearInterval(this.transitionIntervalId),this.transitionIntervalId=-1,t>r&&(t=r),0>t&&(t=0),this.transitionDirection>0?this.set("offset",0):this.set("offset",e)),this.transitionTime=t
},__superMap:{_4M3UlLNADP0$Im$createViewOptions:"createViewOptions"}});n$893=n,n.__QUALIFIED_CLASS_NAME__="Photos.AssetInfoPanelController"}();
    
    
        
!function(){"use strict";var t=n$194.extend(n$659,{viewClass:n$697,createViewOptions:function(){return n$43(this.__s._1yx3UcAFu8b$Aq$createViewOptions.call(this),{uploadManager:this._uploadManager})},_uploadManager:n$517.get("sharedInstance"),_unroundedBottomOffset:n$660(0),bottomOffset:n$9({readOnly:!0,dependencies:["_unroundedBottomOffset",n$110.get("sharedInstance").bindingFor("devicePixelRatio")],get:function(t,e,n,i){var r=i.internalGetPath(this,e[1+n]),a=i.internalGetPath(this,e[0+n]);return Math.round(a*r)/r}}),_bottomOffsetDidChange:n$7("bottomOffset",function(t){this.get("view").get("style").layerBack().translateY(-t),t>0?this.get("view").show():this.get("view").hide()}),stopUpload:function(){this.get("_uploadManager").abortAllUploads()},uploadFiles:function(t,e){var n=this.get("_uploadManager");n.addFilesWithValidation(t,e)},_uploadWillStart:n$170("_uploadManager.willSend",function(){this._show()}),_uploadDidFail:n$170("_uploadManager.uploadDidFail",function(){this._hide(!0)}),_uploadDidAbort:n$170("_uploadManager.didAbort",function(){this._hide()}),_uploadDidSucceed:n$170("_uploadManager.didSucceed",function(){this._hide(!0)}),_fetchChangeset:n$7("_uploadManager.completedFileCount",function(t){t&&n$326().fetchChangeset()}),_show:function(){clearTimeout(this._hideTimeout);var t=n$211.get("uploadToolbarViewHeight"),e=n$211.get("uploadToolbarViewSlideDuration");this.animate("_unroundedBottomOffset",t,e)},_hide:function(t){clearTimeout(this._hideTimeout),this._hideTimeout=n$130(function(){var t=n$211.get("uploadToolbarViewSlideDuration");this.animate("_unroundedBottomOffset",0,t)
}.bind(this),t?n$211.get("uploadToolbarViewHideDelay"):0)},_hideTimeout:0,__superMap:{_1yx3UcAFu8b$Aq$createViewOptions:"createViewOptions"}});n$894=t,t.__QUALIFIED_CLASS_NAME__="Photos.UploadToolbarViewController"}();
    
    
        
!function(){"use strict";var e=n$666.extend({duration:n$211.actionModeToolbar_transitionDuration,startAnimation:function(){var e,t,n;e=this.get("fromView"),t=this.get("toView"),n=this.get("duration"),window.event&&window.event.shiftKey&&(n*=10),e&&(e._transition&&e._transition.stopTransitioningViewController(this.get("fromViewController")),e.animate("top",-e.get("height"),n,function(){this.animationDidFinish()}.bind(this)),e._transition=this),t&&(t._transition&&t._transition.stopTransitioningViewController(this.get("toViewController")),t.animate("top",0,n,function(){this.animationDidFinish()}.bind(this)),t._transition=this)}});n$895=e,e.__QUALIFIED_CLASS_NAME__="Photos.ActionModeToolbarTransition"}();
    
    
        
!function(){"use strict";function e(e){if(!e)return n$683.OTHER;var t=n$731.getBookmark(e).getRoot().get("type");return n.indexOf(t)>=0?n$683.DATE_FEED:i.indexOf(t)>=0?n$683.FOLDERS:n$683.OTHER}var t={};t[n$734]=n$737,t[n$735]=n$823,t[n$738]=n$831,t[n$832]=n$888,t[n$830]=n$833,t[n$835]=n$839,t[n$840]=n$874,t[n$872]=n$885,t[n$892]=n$889,t[n$891]=n$890;var n=[n$734,n$738],i=[n$830,n$835],r=[n$892,n$891],s=n$887.extend(n$391,n$359,{viewClass:n$886,viewControllerClassesByBookmarkType:n$16(t),dateFeedBookmark:n$9(null),foldersBookmark:n$9(null),defaultBookmark:n$731.getBookmark(n$211.get("defaultBookmark")),preStartupBookmark:n$731.getBookmark({type:n$892}),firstRunBookmark:n$731.getBookmark({type:n$891}),stringifiedLastState:n$4({get:function(){return n$896.get("sharedInstance").getItem("Photos.lastAppState")},set:function(e){this._isLastAppStateDisabled&&e||(e?n$896.get("sharedInstance").setItem("Photos.lastAppState",e):n$896.get("sharedInstance").removeItem("Photos.lastAppState"))}}),preventFurtherAppStateWrites:function(){this._isLastAppStateDisabled=!0},appEntranceBookmark:n$4({get:function(){var e=n$896.get("sharedInstance").getItem("iCloud.loginSessionId")||"",t=this.get("stringifiedLastState");if(!t)return this.get("defaultBookmark");var n=t.substring(0,t.indexOf(":")),i=t.substring(n.length+1,t.indexOf(":",n.length+1)),r=t.substring(n.length+i.length+2);if(n=+n,e!==i)return this.get("defaultBookmark");var s=n$731.getBookmark(r);if(Date.now()-n>=n$298.get("forgetVariousScrollPositionsAfterDelay")){var o=s.get("type");(o===n$738||o===n$835&&s.get("resource")===n$370.ALL_PHOTOS_ID)&&s.set("focusedId",null)
}return s},set:function(t){if(e(t)!==n$683.OTHER){var n=n$896.get("sharedInstance").getItem("iCloud.loginSessionId")||"";this.set("stringifiedLastState",Date.now()+":"+n+":"+t)}}}),_saveAppStateToLocalStorage:n$7("bookmark","bookmark.state",function(){this.__saveAppStateToLocalStorage()}),__saveAppStateToLocalStorage:n$358(function(){this.___saveAppStateToLocalStorage()},1e3),___saveAppStateToLocalStorage:function(){this.set("appEntranceBookmark",this.get("bookmark"))},dateFeedViewController:n$9({readOnly:!0,cacheable:!0,dependencies:["dateFeedBookmark"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.getViewControllerForBookmark(r)}}),foldersViewController:n$9({readOnly:!0,cacheable:!0,dependencies:["foldersBookmark"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[0+n]);return this.getViewControllerForBookmark(r)}}),modeSwitcherSegments:n$9({readOnly:!0,dependencies:["dateFeedViewController.title","foldersViewController.title"],get:function(e,t,n,i){var r=i.internalGetPath(this,t[1+n]),s=i.internalGetPath(this,t[0+n]);return n$99.create([{value:n$683.DATE_FEED,title:s},{value:n$683.FOLDERS,title:r}])}}),_prevMode:null,mode:n$9({dependencies:["bookmark"],get:function(t,n,i,r){var s=r.internalGetPath(this,n[0+i]);return e(s)},set:function(e){var t=this._prevMode;if(e&&e!==t)if(e===n$683.FOLDERS){var n=this.get("foldersBookmark");this.set("bookmark",n)}else if(e===n$683.DATE_FEED){var i=this.get("dateFeedBookmark");this.set("bookmark",i)}},didChange:function(e){this._prevMode=e}}),actionMode:n$9(n$14("activeViewController.actionMode")),actionModeToolbarViewController:n$670.create({binding:n$14("actionMode.toolbarViewController"),createTransition:function(e){return e.viewsArray=this.get("views"),n$895.create(e)
}}),init:function(){this.__s._2uir08fegvV$3Zv$init.apply(this,arguments),n$107(window,"beforeunload",this.___saveAppStateToLocalStorage.bind(this)),n$298.get("enableUnreleasedFeatures")?this.set("dateFeedBookmark",n$737.createBookmark()):this.set("dateFeedBookmark",n$831.createBookmark()),this.set("foldersBookmark",n$833.createBookmark(n$611)),this.set("bookmark",this.get("preStartupBookmark")),n$323.firstSuccessfulStartup().then(function(){var e=function(){var e=this.get("appEntranceBookmark");e.prepareForVisit().then(function(){this.set("bookmark",e)}.bind(this),function(e){this.set("bookmark",e||this.get("defaultBookmark"))}.bind(this))}.bind(this),t=this.get("activeViewController");t&&t.instanceOf(n$890)?t.completeAndFireCallback(e):e()}.bind(this))},createViewOptions:function(){return n$43(this.__s._2uir08fegvV$4HG$createViewOptions.call(this),{applicationMode:this.bindingFor("mode"),modeSwitcherSegments:this.bindingFor("modeSwitcherSegments"),restartingOverlayIsVisible:this.bindingFor("restartingOverlayIsVisible")})},views:n$9(n$14("view.contentViews")),restartingOverlayIsVisible:n$9(n$103.bindingFor("application.isRestarting")),navigateToLibraryNotEnabled:function(){var e=this.get("firstRunBookmark");e.set("state","LIBRARY_NOT_ENABLED"),this.set("bookmark",e)},navigateToLibraryNotProcessed:function(){var e=this.get("firstRunBookmark");e.set("state","LIBRARY_NOT_PROCESSED"),this.set("bookmark",e)},navigateToLibraryProcessingFailed:function(e){var t=this.get("firstRunBookmark");t.set("state","LIBRARY_PROCESSING_FAILED"+(e?"_UNRECOVERABLE":"")),this.set("bookmark",t)},navigateToComingSoon:function(){var e=this.get("firstRunBookmark");
e.set("state","COMING_SOON"),this.set("bookmark",e)},navigateToAssetInFolder:function(e){var t=e.context,n=t.asset,i=t.folder;this.bookmark=n$885.createBookmark(n,i)},navigateToFolder:function(e){var t=e.context,n=t.isRecentlyDeleted?n$874:t.isAlbum?n$839:n$833;this.bookmark=n.createBookmark(t)},navigateToAlbumContentsSelection:function(e){var t=e.context;this.bookmark=n$888.createBookmark(this.bookmark,t)},userNavigationRequest:function(e){this.set("bookmark",e.navigationTarget)},updateForNavigationStateChange:function(){this.__s._2uir08fegvV$4vY$updateForNavigationStateChange.apply(this,arguments);var e=this.get("bookmark");if(e){var t=e.getRoot(),s=t.get("type");n.indexOf(s)>=0?this.set("dateFeedBookmark",e):i.indexOf(s)>=0?this.set("foldersBookmark",e):r.indexOf(s)<0&&(n$63.warn("Got an invalid bookmark: `"+e+"`; redirecting to date feed."),this.set("bookmark",this.get("defaultBookmark")))}},cacheViewControllers:function(e){this.__s._2uir08fegvV$59y$cacheViewControllers.apply(this,arguments),this.cacheViewControllerForBookmark(e,this.get("dateFeedBookmark")),this.cacheViewControllerForBookmark(e,this.get("foldersBookmark"))},transitionWillStart:function(e){this.__s._2uir08fegvV$5Ex$transitionWillStart.apply(this,arguments);var t,n;t=e.get("toViewController"),n=t?t.get("toolbarConfiguration"):null,this.get("view").transitionToToolbarConfiguration(n,{direction:e.direction})},didAttach:function(){this.__s._2uir08fegvV$5Kp$didAttach.apply(this,arguments),this.get("view").updateLayout(),document.body.addEventListener("keydown",this._handleKeyDown),document.body.addEventListener("keyup",this._handleKeyUp)
},didDetach:function(){this.__s._2uir08fegvV$5Qc$didDetach.apply(this,arguments),document.body.removeEventListener("keydown",this._handleKeyDown),document.body.removeEventListener("keyup",this._handleKeyUp)},_handleKeyDown:n$528(function(e){if(!n$103.getPath("application.areKeyboardShortcutsDisabled")){switch(e.which){case n$748.ESC:if(e.shiftKey){var t=this.getPath("view.toolbarView.homeButton.appSwitcherTriggerView");return t&&t.sendEvent("showAppSwitcher"),e.preventDefault(),!0}}var n=!1;if(this.get("isActivePane")){var i=this.get("activeViewController");if(void 0!==i.handleKeyDown&&(n=i.handleKeyDown(e)),!n)switch(e.which){case 65:if(e.ctrlKey||e.metaKey)return e.preventDefault(),!0}}}}),_handleKeyUp:n$528(function(e){if(this.get("isActivePane")){var t=this.get("activeViewController");void 0!==t.handleKeyUp&&t.handleKeyUp(e)}}),toggleInfoPanel:function(){var e=this.get("infoPanel");e.toggleVisibility()},_infoPanel:n$392.create("infoPanel"),infoPanel:n$9({get:function(){if(!n$298.get("enableUnreleasedFeatures"))return null;var e=this.get("_infoPanel");return e||(e=n$893.create({parentData:this}),this.set("_infoPanel",e)),e},set:function(e){return this.set("_infoPanel",e),e}}),transitionInfoPanelState:n$7("bookmark",function(e){if(e){var t=this.get("infoPanel");t&&(e.type!==n$872?t.hidePanel():t.restoreToSavedVisibilityState())}}),createViewControllerForBookmark:function(){var e=this.__s._2uir08fegvV$6F2$createViewControllerForBookmark.apply(this,arguments);return e.set("offsets",this.get("offsets")),e},offsets:n$84(n$712.extend({bottom:n$14("owner._uploadToolbarViewController.bottomOffset")})),_uploadToolbarViewController:n$392.create("uploadToolbarView"),uploadToolbarViewController:n$9({readOnly:!0,get:function(){var e=this.get("_uploadToolbarViewController");
return e||(e=n$894.create(),this.set("_uploadToolbarViewController",e)),e}}),uploadFiles:function(e){var t=this.get("uploadToolbarViewController");t.uploadFiles(e.context,e.folderId)},reloadAllViewControllers:function(){this.__s._2uir08fegvV$6ac$reloadAllViewControllers.apply(this,arguments),this.propertyChanged("dateFeedViewController"),this.propertyChanged("foldersViewController")},__superMap:{_2uir08fegvV$3Zv$init:"init",_2uir08fegvV$4HG$createViewOptions:"createViewOptions",_2uir08fegvV$4vY$updateForNavigationStateChange:"updateForNavigationStateChange",_2uir08fegvV$59y$cacheViewControllers:"cacheViewControllers",_2uir08fegvV$5Ex$transitionWillStart:"transitionWillStart",_2uir08fegvV$5Kp$didAttach:"didAttach",_2uir08fegvV$5Qc$didDetach:"didDetach",_2uir08fegvV$6F2$createViewControllerForBookmark:"createViewControllerForBookmark",_2uir08fegvV$6ac$reloadAllViewControllers:"reloadAllViewControllers"}});n$520=s,s.__QUALIFIED_CLASS_NAME__="Photos.MainViewController"}();
    
    
        
!function(){"use strict";var t=window.console;if(!t){t=window.console=window.consolePolyfill={_logs:[],memory:{jsHeapSizeLimit:void 0,usedJSHeapSize:void 0,totalJSHeapSize:void 0},_log:function(t,e){var n=Array.prototype.slice.apply(e),i={array:n,string:n.join(" "),methodName:t};this._logs.push(i)},log:function(){this._log("log",arguments)},warn:function(){this._log("warn",arguments)},error:function(){this._log("error",arguments)},flush:function(){this._flush("array")},flushStrings:function(){this._flush("string")},_flush:function(t){var e,n,i="string"===t,r=this._logs,a=r.length,s=window.console;if(s===window.consolePolyfill)throw"Can't flush logs from `console` polyfill because there is still no native `console` object available.";for(e=0;a>e;e++)n=r[e],i?s[n.methodName](n.string):Function.prototype.apply.call(s[n.methodName],s,n.array)}};for(var e,n="memory debug error info log warn dir dirxml table trace assert count markTimeline profile profileEnd time timeEnd timeStamp timeline timelineEnd group groupCollapsed groupEnd clear".split(" "),i=n.length;i--;)e=n[i],t[e]||(t[e]=function(){return function(){t.warn("Called `console."+e+"`, which is not available in the `console` polyfill.")}}(e))}n$898=t}();
    
    
        
!function(){"use strict";var e=n$411.extend({delay:n$298.get("idleChangesetFetchDelay"),timesToFire:n$298.get("idleChangesetFetchCount"),callAction:function(){n$323.fetchChangeset()},attach:function(){var e=this._handleInteraction;document.addEventListener("mousemove",e),document.addEventListener("keypress",e),window.addEventListener("focus",e)},_handleInteraction:n$528(function(){var e=Date.now()-n$323.get("lastChangesetFetchTimestamp");e>this.delay&&(this.restart(),this.callAction(this))})}),t=e.create();n$899=t,e.__QUALIFIED_CLASS_NAME__="Photos.IdleChangesetFetcher$685"}();
    
    
        
!function(){"use strict";function e(){n$63.logOutputLevel=n$298.logLevel,n$899.attach(),n$899.start();var e=n$897.create({name:"photos"});n$310.get("isRunningInsideCloudOS")?e.load():e.run()}n$310.get("isRunningInsideCloudOS")||(window["cosk.application.loadCloudOSServiceDelegate"]=function(){return n$5.extend(n$257).create()});var t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("id","viewport"),t.setAttribute("content","width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0, user-scalable=no"),document.head&&document.head.appendChild(t),n$298.get("clearConsoleOnLoad")&&window.console&&console.clear&&console.clear(),n$994=e}();
    
    
        
!function(){"use strict"}();
    
    
        
!function(){"use strict";function e(e){for(var t=e+.005,n=15;n>=0;n--)if(t>=s[n])return n;return 0}function t(e){return s[e]||.75}var n=n$316.extend({datumCountPerPayload:2,read:function(e,n,i,r,s){var a=t(e.read(4)),o=e.read(2),l=o?e.read(2+8*o):s+e.read(2)+1;return this.performFinalReadsAndCallback(e,n,i,r,a,l),l},performFinalReadsAndCallback:function(e,t,n,i,r,s){t.call(n,i,r,s)},write:function(t,n,s,a){t.write(4,e(n));var o=s-a,l=4>=o&&o>=1?0:i>s?1:r>s?2:3;return t.write(2,l),0===l?t.write(2,o-1):t.write(8*l+2,s),s}}),i=Math.pow(2,10),r=Math.pow(2,18);n$316.registerPayloadHandlerForType(n.create(),255);var s=new Float64Array([0,4/3-3*(4/3-1)/4,4/3-2*(4/3-1)/4,1.25,4/3,1.5-2*(1.5-4/3)/3,1.5-1*(1.5-4/3)/3,1.5,1.5694444444444444,1.6388888888888888,1.7083333333333333,16/9,2-2*(2-16/9)/3,2-1*(2-16/9)/3,2,3]);n$311=n,n.__QUALIFIED_CLASS_NAME__="Photos.AssetPayloadHandler"}();
    
    
        
!function(){"use strict";var t=n$311.extend({datumCountPerPayload:3,performFinalReadsAndCallback:function(t,e,n,i,r,a){e.call(n,i,r,a,t.read(3))},write:function(t,e,n,i,r){var a=this.__s._2FcNXoGrK1K$L0$write.call(this,t,e,n,r);return t.write(3,i),a},__superMap:{_2FcNXoGrK1K$L0$write:"write"}});n$316.registerPayloadHandlerForType(t.create(),254),n$312=t,t.__QUALIFIED_CLASS_NAME__="Photos.AssetWithOrientationPayloadHandler"}();
    
    
        
!function(){"use strict";var t=n$316.extend({datumCountPerPayload:0,read:function(t,e,n,i){e.call(n,i)},write:function(){}});n$316.registerPayloadHandlerForType(t.create(),0),n$313=t,t.__QUALIFIED_CLASS_NAME__="Photos.EmptyPayloadHandler"}();
    
    
        
!function(){"use strict";var t=100,e={isPauseable:!1,isSkippable:!1,initVariable:function(t,e,n,i,r){n[i]=-Number.MAX_VALUE,n[i+1]=r,n[i+2]=0,n[i+3]=0},finishVariable:function(){},animatorWillChange:function(){},tick:function(e,n,i,r,a){var s=Date.now(),o=s-i[r];if(i[r]=s,o>t)i[r+2]=0,i[r+3]=0;else if(o>0){var l=i[r+1],h=a-l,d=i[r+2],u=0===o?d:h/o,c=o/t,_=u*c+d*(1-c),p=_-d;i[r+1]=a,i[r+2]=_,i[r+3]=p}return a},velocityForVariable:function(e,n,i,r){var a=Date.now()-i[r];return a>t?0:i[r+2]},accelerationForVariable:function(e,n,i,r){var a=Date.now()-i[r];return a>t?0:i[r+3]}};n$654=e}();
    
    
        
!function(){"use strict";var t=[94.9122,-.0105361,.9],e=[194.957,-.00512933,.95],n=[494.983,-.00202027,.98],i=[994.992,-.00100503,.99],r=.001,a={isPauseable:!0,isSkippable:!1,initVariable:function(t,n,i,r,a,s,o,l,h,d){d&&n$658.setCallbackForVariable(t,h,d),l=l||e,i[r]=a,i[r+1]=s,i[r+2]=l[0],i[r+3]=l[1],i[r+4]=l[2]},finishVariable:function(t){n$658.triggerCallbackForVariableIfNeeded(t),n$658.clearCallbackForVariableIfNeeded(t)},animatorWillChange:function(){},tick:function(t,e,n,i){var a=n[i],s=n[i+1],o=n[i+2],l=n[i+3],h=n[i+4];return s*Math.pow(h,e/10)/s>r?n$658.requestFrameForVariable(t):n$658.reset(t),a+s*o*(1-Math.pow(Math.E,l*e))},velocityForVariable:function(t,e,n,i){return n[i+1]*Math.pow(n[i+4],e/10)},accelerationForVariable:function(t,e,n,i){return this.velocityForVariable(t,e,n,i)-this.velocityForVariable(t,e-1,n,i)}};n$995=t,n$996=e,n$997=n,n$998=i,n$655=a}();
    
    
        
!function(){"use strict";var e={isPauseable:!0,isSkippable:!0,initVariable:function(e,t,n,i,r,s,a,o,l,d,u,h){d!==Number.MAX_VALUE&&(r=d),h&&n$658.setCallbackForVariable(e,u,h);var c=o-r,p=(10*c-3*l*(a*l+2*s))/Math.pow(l,3),g=(l*(3*a*l+8*s)-15*c)/Math.pow(l,4),_=(6*c-l*(a*l+3*s))/Math.pow(l,5);n[i]=r,n[i+1]=s,n[i+2]=a,n[i+3]=p,n[i+4]=g,n[i+5]=_,n[i+6]=o,n[i+7]=l},finishVariable:function(e){n$658.triggerCallbackForVariableIfNeeded(e),n$658.clearCallbackForVariableIfNeeded(e)},animatorWillChange:function(){},tick:function(e,t,n,i,r){var s=n[i+7];if(s>t){var a=n[i],o=n[i+1],l=n[i+2],d=n[i+3],u=n[i+4],h=n[i+5],c=0;return c=a+o*t+l*Math.pow(t,2)+d*Math.pow(t,3)+u*Math.pow(t,4)+h*Math.pow(t,5),n$658.requestFrameForVariable(e),c}return n$658.reset(e,r),n[i+6]},velocityForVariable:function(e,t,n,i){var r=n[i+7];if(t>=r)return 0;var s=n[i+1],a=n[i+2],o=n[i+3],l=n[i+4],d=n[i+5];return s+2*a*t+3*o*Math.pow(t,2)+4*l*Math.pow(t,3)+5*d*Math.pow(t,4)},accelerationForVariable:function(e,t,n,i){var r=n[i+7];if(t>=r)return 0;var s=n[i+2],a=n[i+3],o=n[i+4],l=n[i+5];return 2*s+6*a*t+12*o*Math.pow(t,2)+20*l*Math.pow(t,3)},skipVariableToEnd:function(e,t,n){return t[n+6]},getFinalValue:function(e,t,n){return t[n+6]}};n$656=e}();
    
    
        
!function(){"use strict";function e(e,t,n){for(var i=e.concat([]);i.length>t;){for(var r=0;r<i.length/t;r++)for(var s=0;t>s;s++)i[r*t+s]=(1-n)*i[r*t+s]+n*i[(r+1)*t+s];i.length-=t}return i}var t=[],n={isPauseable:!0,isSkippable:!0,initVariable:function(e,n,i,r,s,o,a,l,h,u,d,c,_){_&&n$658.setCallbackForVariable(e,c,_),t[e]||(t[e]=[]);var g=t[e];g.dx=0,g.d2x=0;for(var p={path:[s].concat(l),timingCurve:h,tweenCurve:u,duration:d,lastTime:0,timeOffset:0},f=0;f<g.length;f++)g[f].timeOffset-=g[f].lastTime,g[f].lastTime=0;g.push(p),i[r]=l[l.length-1]},finishVariable:function(e){n$658.triggerCallbackForVariableIfNeeded(e),n$658.clearCallbackForVariableIfNeeded(e)},animatorWillChange:function(e){var n=t[e];n.splice(0,n.length)},tick:function(n,i,r,s,o){var a=t[n];if(!a||a.length<1)return o;var l,h=i-a[0].lastTime,u=0,d=[],c=null;for(l=a.length-1;l>=0;l--){c=a[l];var _=i-c.timeOffset,g=_/c.duration,p=Math.min(g,1);p=e(c.timingCurve,1,p)[0],l===a.length-1&&(u=p),d.unshift(e(c.path,1,p)[0]),c.lastTime=i}var f=d[0];for(l=1;l<a.length;l++){var m=a[l],$=a[l-1],v=Math.max(m.timeOffset,$.timeOffset),y=Math.min(m.timeOffset+m.duration,$.timeOffset+$.duration)-v,I=i-v,w=I/y;w=e(c.tweenCurve,1,w)[0],w>=1||0>w?(a.splice(0,l),d.splice(0,l),l=0,f=d[0]):f=(1-w)*f+w*d[l]}u>=1?(a.splice(0,a.length),n$658.reset(n,f)):n$658.requestFrameForVariable(n);var b=(f-o)/h;return a.d2x=a.dx-b,a.dx=b,f},velocityForVariable:function(e){var n=t[e];return n&&"number"==typeof n.dx?n.dx:0},accelerationForVariable:function(e){var n=t[e];return n&&"number"==typeof n.d2x?n.d2x:0},skipVariableToEnd:function(e,i,r){var s=n.getFinalValue(e,i,r),o=t[e];
return o.splice(0,o.length),s},getFinalValue:function(e,n,i){var r=t[e];if(!r||r.length<1)return n[i];var s=r[r.length-1].path;if(!s||s.length<1)return n[i];var o=s[s.length-1];return o?o:n[i]}};n$657=n}();
    
    

    
    var _cwTemporaryArgumentsArray = [];
    
    main=n$994;
})(this);

