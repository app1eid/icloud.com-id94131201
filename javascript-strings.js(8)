SC.MODULE_INFO['cloudos_foundation/sharing'].source = "/** @license\n * ==========================================================================\n * SproutCore -- JavaScript Application Framework\n * Copyright ©2008-2011 Apple Inc. All rights reserved.\n * Copyright 2006-2011, Strobe Inc. and contributors.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n *\n * SproutCore and the SproutCore logo are trademarks of Strobe Inc.\n *\n * For more information about SproutCore, visit http://www.sproutcore.com\n *\n * ==========================================================================\n */\n\n/*! @license\n * Raphael 1.5.2 - JavaScript Vector Library\n *\n * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)\n * Licensed under the MIT (http://raphaeljs.com/license.html) license.\n */\n\n\nSC.stringsFor(\"zh-tw\",{\"Sharing.Acceptance.keynote.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此簡報。\\n您將以%{userFullName} (%{userEmailAddress}) 加入。\\n\\n此簡報也將新增至 iCloud Drive。\",\"Sharing.Acceptance.keynote.LoggedInForSharing.Description\":\"您將以%{userFullName} (%{userEmailAddress}) 的身分加入。此簡報也會新增至 iCloud Drive。\",\"Sharing.Acceptance.notes.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此備忘錄。\\n您將以%{userFullName} (%{userEmailAddress}) 加入。\",\"Sharing.Acceptance.notes.LoggedInForSharing.Description\":\"您將以%{userFullName} (%{userEmailAddress}) 的身分加入。\",\"Sharing.Acceptance.numbers.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此試算表。\\n您將以%{userFullName} (%{userEmailAddress}) 加入。\\n\\n此試算表也將新增至 iCloud Drive。\",\"Sharing.Acceptance.numbers.LoggedInForSharing.Description\":\"您將以%{userFullName} (%{userEmailAddress}) 的身分加入。此試算表也會新增至 iCloud Drive。\",\"Sharing.Acceptance.pages.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此文件。\\n您將以%{userFullName} (%{userEmailAddress}) 加入。\\n\\n此文件也將新增至 iCloud Drive。\",\"Sharing.Acceptance.pages.LoggedInForSharing.Description\":\"您將以%{userFullName} (%{userEmailAddress}) 的身分加入。此文件也會新增至 iCloud Drive。\",\"Sharing.Button.AddEmail\":\"新增電子郵件位址\",\"Sharing.Button.Cancel\":\"取消\",\"Sharing.Button.CheckForUpdates\":\"檢查更新項目\",\"Sharing.Button.Continue\":\"繼續\",\"Sharing.Button.Done\":\"完成\",\"Sharing.Button.DownloadCopy\":\"下載拷貝\",\"Sharing.Button.GoTo.keynote\":\"前往 Keynote\",\"Sharing.Button.GoTo.numbers\":\"前往 Numbers\",\"Sharing.Button.GoTo.pages\":\"前往 Pages\",\"Sharing.Button.JoinAndOpen.keynote\":\"在 Keynote 裡開啟\",\"Sharing.Button.JoinAndOpen.notes2\":\"在 備忘錄 裡開啟\",\"Sharing.Button.JoinAndOpen.numbers\":\"在 Numbers 裡開啟\",\"Sharing.Button.JoinAndOpen.pages\"\n:\"在 Pages 裡開啟\",\"Sharing.Button.NotNow\":\"現在不要\",\"Sharing.Button.OK\":\"好\",\"Sharing.Button.Open\":\"打開\",\"Sharing.Button.Preview.keynote\":\"打開簡報\",\"Sharing.Button.Preview.numbers\":\"打開試算表\",\"Sharing.Button.Preview.pages\":\"打開文件\",\"Sharing.Button.SendVerificationLink\":\"傳送驗證連結\",\"Sharing.Button.SignOut\":\"登出\",\"Sharing.Button.TryAgain\":\"再試一次\",\"Sharing.Button.Verify\":\"驗證\",\"Sharing.Button.VisitAppStore\":\"造訪 App Store\",\"Sharing.DefaultTitle\":\"未命名\",\"Sharing.Error.Acceptance.NOT_FOUND.Description\":\"%{ownerName}已停止共享，或您沒有打開此項目的權限。\",\"Sharing.Error.Acceptance.NOT_FOUND.keynote.Title\":\"此簡報目前無法打開。\",\"Sharing.Error.Acceptance.NOT_FOUND.notes2.Title\":\"此備忘錄目前無法打開。\",\"Sharing.Error.Acceptance.NOT_FOUND.numbers.Title\":\"此試算表目前無法打開。\",\"Sharing.Error.Acceptance.NOT_FOUND.pages.Title\":\"此文件目前無法打開。\",\"Sharing.Error.OONetwork.ALREADY_VETTED_TO_USER.Description\":\"「%{selectedEmailAddressOrPhoneNumber}」已經過驗證並新增至您的 Apple ID (%{userEmailAddress})。\",\"Sharing.Error.OONetwork.ALREADY_VETTED_TO_USER.Email.Title\":\"電子郵件地址已驗證\",\"Sharing.Error.OONetwork.ALREADY_VETTED_TO_USER.PhoneNumber.Title\":\"已驗證電話號碼\",\"Sharing.Error.OONetwork.Generic.Description\":\"系統目前無法傳送驗證連結。請稍後再試。\",\"Sharing.Error.OONetwork.Generic.Title\":\"無法傳送連結\",\"Sharing.Error.OONetwork.LIMIT_EXCEEDED.Email.Description\":\"您已達到 Apple ID 加入電子郵件位址的上限，您必須移除一個位址才能新增「%{selectedEmailAddressOrPhoneNumber}」。\",\"Sharing.Error.OONetwork.LIMIT_EXCEEDED.PhoneNumber.Description\":\"您已達到 Apple ID 加入電話號碼的上限，您必須移除一個號碼才能新增「%{selectedEmailAddressOrPhoneNumber}」。\",\"Sharing.Error.OONetwork.PCS_ERROR.Description\":\"請試著在其他裝置上打開「%{shareTitle}」，或聯絡向您提出邀請的人，要求他們嘗試重新共享。\",\"Sharing.Error.OONetwork.SERVER_ERROR.Description\"\n:\"伺服器可能發生問題。請稍後再試。\",\"Sharing.Error.OONetwork.VETTED_TO_OTHER_USER.Email.Description\":\"此電子郵件位址「%{selectedEmailAddressOrPhoneNumber}」已經由其他 Apple ID 使用。請以該 Apple ID 登入 iCloud，並再試一次。\",\"Sharing.Error.OONetwork.VETTED_TO_OTHER_USER.PhoneNumber.Description\":\"此電話號碼「%{selectedEmailAddressOrPhoneNumber}」已經由其他 Apple ID 使用。請以該 Apple ID 登入 iCloud，並再試一次。\",\"Sharing.Error.Sharing.AppUnavailable.notes2.Android.Description\":\"%{ownerName}已共享此備忘錄。若要檢視此項目，請在 Mac 或 iOS 裝置上使用「備忘錄」App，或者在 Mac 或 PC 的瀏覽器中打開連結。\",\"Sharing.Error.Sharing.AppUnavailable.notes2.iOS.Description\":\"%{ownerName}已共享此備忘錄。若要檢視此項目，請安裝最新版本的 iOS，或者在 Mac 或 PC 的瀏覽器中打開連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.keynote.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此文件。若要打開此項目，請前往 Keynote 將帳號升級至 iCloud Drive，然後再按一次簡報連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.keynote.iOSAndAndroid.Description\":\"若要打開此簡報，您必須將您的帳號升級至 iCloud Drive。若要進行升級，請在安裝 iOS 8 或以上版本的裝置上前往「設定」開啟 iCloud Drive，或在 Mac 或 PC 的瀏覽器中開啟 iCloud 版 Keynote。\",\"Sharing.Error.Sharing.DriveNotMigrated.keynote.LoggedInForSharing.Description\":\"若要打開此簡報，請前往 Keynote 將帳號升級至 iCloud Drive，然後再按一次簡報連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.numbers.AlreadyLoggedIn.Description\":\"%{ownerName}已共享此文件。若要打開此項目，請前往 Numbers 將帳號升級至 iCloud Drive，然後再按一次試算表連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.numbers.iOSAndAndroid.Description\":\"若要打開此試算表，您必須將您的帳號升級至 iCloud Drive。若要進行升級，請在安裝 iOS 8 或更新版本的裝置上前往「設定」開啟 iCloud Drive，或在 Mac 或 PC 的瀏覽器中打開 iCloud 版 Numbers。\",\"Sharing.Error.Sharing.DriveNotMigrated.numbers.LoggedInForSharing.Description\":\"若要打開此試算表，請前往 Numbers 將帳號升級至 iCloud Drive，然後再按一次試算表連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.pages.AlreadyLoggedIn.Description\"\n:\"%{ownerName}已共享此文件。若要打開此項目，請前往 Pages 將帳號升級至 iCloud Drive，然後再按一次文件連結。\",\"Sharing.Error.Sharing.DriveNotMigrated.pages.iOSAndAndroid.Description\":\"若要打開此文件，您必須將您的帳號升級至 iCloud Drive。若要進行升級，請在安裝 iOS 8 或更新版本的裝置上前往「設定」來開啟 iCloud Drive，或在 Mac 或 PC 的瀏覽器中打開 iCloud 版 Pages。\",\"Sharing.Error.Sharing.DriveNotMigrated.pages.LoggedInForSharing.Description\":\"若要打開此文件，請前往 Pages 將帳號升級至 iCloud Drive，然後再按一次文件連結。\",\"Sharing.Error.Sharing.ItemNotAvailable.Description\":\"擁有者已停止共享，或您沒有打開此項目的權限。\",\"Sharing.Error.Sharing.ItemNotAvailable.keynote.Title\":\"無法使用此簡報\",\"Sharing.Error.Sharing.ItemNotAvailable.notes2.Title\":\"無法使用此備忘錄\",\"Sharing.Error.Sharing.ItemNotAvailable.numbers.Title\":\"無法使用此試算表\",\"Sharing.Error.Sharing.ItemNotAvailable.pages.Title\":\"無法使用此文件\",\"Sharing.Error.Sharing.ItemNotAvailable.Title\":\"無法使用此項目\",\"Sharing.Error.Vetting.Generic.Description\":\"驗證您的電子郵件位址或電話號碼時發生問題。\\n請再次嘗試打開共享檔案，或嘗試在其他裝置上打開。\",\"Sharing.Error.Vetting.Generic.Title\":\"很抱歉，發生錯誤。\",\"Sharing.Error.Vetting.NOT_FOUND.Description\":\"驗證您的電子郵件位址或電話號碼時發生問題。\\n請再次嘗試打開共享檔案，或試著在其他裝置上打開。\",\"Sharing.Error.Vetting.NOT_FOUND.Title\":\"驗證連結已過期\",\"Sharing.GameCenter.MacOSOrIOSRequired.Title\":\"需要使用 macOS 或 iOS\",\"Sharing.GameCenter.Update.Description\":\"若要接受遊戲邀請，您需要 iOS 10 或 macOS Sierra 或更新版本。\",\"Sharing.GameCenter.Update.Title\":\"需要進行軟體更新\",\"Sharing.Label.FullName\":\"%{lastName}%{firstName}\",\"Sharing.NotMigrated.notes.Description\":\"若要在網路上打開共享備忘錄，您必須在 iOS 9、macOS El Capitan 或更新版本中打開 Notes app，並升級您的 iCloud 帳號。\",\"Sharing.NotMigrated.notes.ShortTitle\":\"升級的時候到了\",\"Sharing.NotMigrated.notes.Title\":\"升級備忘錄的時候到了！\",\"Sharing.OONetwork.NoAccess.Description\":\"請確認您有權限以此 Apple ID 打開「%@」。\"\n,\"Sharing.OONetwork.NoAccess.keynote.Title\":\"此簡報為私人所有。\",\"Sharing.OONetwork.NoAccess.notes.Title\":\"此備忘錄為私人所有。\",\"Sharing.OONetwork.NoAccess.numbers.Title\":\"此試算表為私人所有。\",\"Sharing.OONetwork.NoAccess.pages.Title\":\"此文件為私人所有。\",\"Sharing.OONetwork.Vetting.Description.EMAIL\":\"請選取您的電子郵件位址，讓我們傳送驗證連結給您。\",\"Sharing.OONetwork.Vetting.Description.MIXED\":\"請選取您的電子郵件位址或電話號碼，讓我們傳送驗證連結給您。\",\"Sharing.OONetwork.Vetting.Description.PHONE\":\"請選取您的電話號碼，讓我們傳送驗證連結給您。\",\"Sharing.OONetwork.Vetting.EmailConfirmation.Description\":\"請按照電子郵件中的指示完成驗證。\",\"Sharing.OONetwork.Vetting.EmailConfirmation.Title\":\"驗證電子郵件已傳送\",\"Sharing.OONetwork.Vetting.Footer.EMAIL\":\"如果您沒看到您的電子郵件位址，請聯絡向您提出邀請的成員。\",\"Sharing.OONetwork.Vetting.Footer.MIXED\":\"如果您沒看到您的電子郵件位址或電話號碼，請聯絡提出邀請的人。\",\"Sharing.OONetwork.Vetting.Footer.PHONE\":\"如果您沒看到您的電話號碼，請聯絡向您提出邀請的成員。\",\"Sharing.OONetwork.Vetting.PhoneConfirmation.Description\":\"請使用訊息中的連結完成驗證。\",\"Sharing.OONetwork.Vetting.PhoneConfirmation.Subtitle\":\"已透過 SMS 簡訊將驗證連結傳送至 %{phoneNumber}。\",\"Sharing.OONetwork.Vetting.PhoneConfirmation.Title\":\"驗證 SMS 簡訊已傳送\",\"Sharing.OONetwork.Vetting.Title\":\"請驗證您的存取權限\",\"Sharing.ThirdParty.Description.iOS.AppiPadiPhone\":\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App。\",\"Sharing.ThirdParty.Description.iOS.AppiPadOnly.iPad\":\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App。\",\"Sharing.ThirdParty.Description.iOS.AppiPadOnly.iPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.iOS.AppiPhoneOnly.iPad\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.iOS.AppiPhoneOnly.iPhone\"\n:\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSiPad.iPad\":\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App，或使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSiPad.iPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName} App，或使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSiPadiPhone\":\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App，或使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSiPhone.iPad\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName} App，或使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSiPhone.iPhone\":\"%{ownerShared} 若要檢視此項目，請安裝 iOS 10 或更新版本以及 %{appName} App，或使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}。\",\"Sharing.ThirdParty.Description.iOS.AppmacOSOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.macOS.AppiPadiPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad、iPhone 或 iPod touch 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.macOS.AppiPadOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.macOS.AppiPhoneOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.macOS.AppmacOSiPad\":\"%{ownerShared} 若要檢視此項目，請安裝 macOS Sierra 或更新版本以及 %{appName} App，或使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName}。\",\"Sharing.ThirdParty.Description.macOS.AppmacOSiPadiPhone\"\n:\"%{ownerShared} 若要檢視此項目，請安裝 macOS Sierra 或更新版本以及 %{appName} App，或使用安裝 iOS 10 或更新版本的 iPad、iPhone 或 iPod touch 以及 %{appName}。\",\"Sharing.ThirdParty.Description.macOS.AppmacOSiPhone\":\"%{ownerShared} 若要檢視此項目，請安裝 macOS Sierra 或更新版本以及 %{appName} App，或使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName}。\",\"Sharing.ThirdParty.Description.macOS.AppmacOSOnly\":\"%{ownerShared} 若要檢視此項目，請安裝 macOS Sierra 或更新版本以及 %{appName} App。\",\"Sharing.ThirdParty.Description.NoBundleInfo\":\"%{ownerName}已共享此項目。\",\"Sharing.ThirdParty.Description.OwnerShared\":\"%{ownerName}已共享此項目。\",\"Sharing.ThirdParty.Description.Windows.AppiPadiPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad、iPhone 或 iPod touch 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.Windows.AppiPadOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.Windows.AppiPhoneOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName} App。\",\"Sharing.ThirdParty.Description.Windows.AppmacOSiPad\":\"%{ownerShared} 若要檢視此項目，請使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName} App，或使用安裝 iOS 10 或更新版本的 iPad 以及 %{appName}。\",\"Sharing.ThirdParty.Description.Windows.AppmacOSiPadiPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName}App，或使用安裝 iOS 10 或更新版本的 iPad、iPhone 或 iPod touch 以及 %{appName}。\",\"Sharing.ThirdParty.Description.Windows.AppmacOSiPhone\":\"%{ownerShared} 若要檢視此項目，請使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName} App，或使用安裝 iOS 10 或更新版本的 iPhone 或 iPod touch 以及 %{appName}。\",\"Sharing.ThirdParty.Description.Windows.AppmacOSOnly\":\"%{ownerShared} 若要檢視此項目，請使用安裝 macOS Sierra 或更新版本的 Mac 以及 %{appName} App。\"\n,\"Sharing.ThirdParty.NoAppName\":\"未命名\",\"Sharing.ThirdParty.NoTitle\":\"未命名\",\"Sharing.Title.ClosingQuote\":\"」\",\"Sharing.Title.OpeningQuote\":\"「\"}),Sharing=SC.Object.create({statechart:null,sharingPane:null,ownerAppleId:null,store:null,database:null,contactType:{PHONE:\"PHONE\",EMAIL:\"EMAIL\"},participantListType:{PHONE:\"PHONE\",EMAIL:\"EMAIL\",MIXED:\"MIXED\"},initStateChart:function(e,t){var n=this.get(\"statechart\");n?n.gotoState(\"defaultState\"):(n=Sharing.Statechart.create(),this.set(\"statechart\",n),n.initStatechart()),e&&n.sendAction(e,t)},showPane:function(e,t,n,r){var i=Sharing.shareRetrieveController;i||(i=Sharing.shareRetrieveController=Sharing.ShareRetrieveController.create()),i.set(\"shortGUID\",e),this.set(\"ownerAppleId\",t),this.set(\"isThirdParty\",n),this.set(\"isGameCenter\",r),Sharing.store=CW.Store.create(),Sharing.database||(Sharing.database=CloudOS.shareController.get(\"database\"));var s=this.get(\"isAppAvailable\");n?this.initStateChart(\"goToThirdPartyState\"):s?this.initStateChart(\"gotoRetrieveState\"):this.initStateChart(\"gotoMigrationNeededState\")},isAppAvailable:function(){var e=CloudOS.shareController.get(\"appName\"),t=e?COS.appsController.getAppInfoFor(e):null;return t&&t.get(\"supportsCKSharing\")||e===null}.property(\"CloudOS.shareController.appName\"),removePane:function(e,t){var n=Sharing.get(\"sharingPane\"),r=function(){n.tryToPerform(\"hideSpinner\"),n.remove(),Sharing.statechart.gotoState(\"defaultState\"),Sharing.set(\"sharingPane\",null),t&&t(),e||CW.notificationCenter.postNotification(\"sharingCancelled\")};n?!e&&n.fadeOut?n.fadeOut(r):r():SC.warn(\"No Sharing Pane to remove\")},acceptVettingToken\n:function(e,t){this.initStateChart(\"gotoVettingTokenState\",{vettingToken:e,isVettingTokenVetted:t})},setupAndShowSharingPane:function(e){var t=Sharing.get(\"sharingPane\");return t?t.set(\"nowShowing\",e):(t=Sharing.SharingPane.create({nowShowing:e}),Sharing.set(\"sharingPane\",t)),t.get(\"isPaneAttached\")||t.show(),t}}),Sharing.utils=SC.Object.create({isIWorkApp:function(e){return e===\"keynote\"||e===\"numbers\"||e===\"pages\"},isNotesApp:function(e){return e===\"notes\"||e===\"notes2\"},getStringForEncryptedString:function(e){return decodeURIComponent(escape(atob(e)))},recordInfoHasRequiredFields:function(e){if(!e)return!1;var t=!!e.share,n=!!e.rootRecord,r=!!e.ownerIdentity,i=!!e.potentialMatchList;return t&&r&&(n||i)},getThumbnailUrl:function(){var e=CloudOS.shareController.get(\"recordInfo\"),t=CloudOS.shareController.get(\"appName\"),n=\"\",r;if(!e)return n;if(t){var i=COS.appsController.getAppInfoFor(t);r=i.shareInfo}if(e.rootRecordName!==\"OUT_OF_NETWORK\"&&e.rootRecord){var s=r.thumbnailField;if(!s)return n;n=e.rootRecord.fields[s.name];if(!n)return\"\";n.type===\"ASSETID\"?n=n.value.downloadURL:n=n.value}return n},getShareTitle:function(){var e=CloudOS.shareController.get(\"recordInfo\"),t=CloudOS.shareController.get(\"appName\"),n,r,i,s,o;if(!e)return\"\";t&&(n=COS.appsController.getAppInfoFor(t),i=n.shareInfo);if(i&&i.titleFields&&e.rootRecordName!==\"OUT_OF_NETWORK\"&&e.rootRecord){var u=i.titleFields,a=\"\";for(o=0;o<u.length;o++){var f=u[o],l=f.isType,c=e.rootRecord.fields[f.name];if(!c)continue;s=c.value;var h=c.type;h===\"ENCRYPTED_BYTES\"&&(s=this.getStringForEncryptedString(s)),l?a+=\".\":a!==\"\"&&\n(a+=\" \"),a+=s}r=a}else{s=e.share.fields[\"cloudkit.title\"];if(s){s=s.value;if(t&&this.isIWorkApp(t)){var p=n.supportedFileExtensions,d;for(o=0;o<p.length;o++){d=\".\"+p[o];if(s.slice(-d.length)===d){s=s.slice(0,-d.length);break}}}r=s}}return r||(r=\"Sharing.DefaultTitle\".loc()),\"%@%@%@\".fmt(\"Sharing.Title.OpeningQuote\".loc(),r,\"Sharing.Title.ClosingQuote\".loc())},truncateStringForMultiLine:function(e,t,n,r,i,s){var o=NO,u=100;SC.prepareStringMeasurement(t);if(e.length>u||SC.measureString(e).width>n){e=e.slice(0,u),e=e.replace(/\\s\\s+/g,\" \");var a=[],f=/([⺀-\\u2efe\\u3000-〾㇀-\\u31ee㈀-㋾㌀-㏾㐀-\\u4dbe一-\\u9ffe豈-\\ufafe︰-﹎]|[\\ud840-\\ud868\\ud86a-\\ud86c][\\udc00-\\udfff]|\\ud869[\\udc00-\\udede\\udf00-\\udfff]|\\ud86d[\\udc00-\\udf3e\\udf40-\\udfff]|\\ud86e[\\udc00-\\udc1e]|\\ud87e[\\udc00-\\ude1e])+/g,l=e.match(f),c,h;if(l){var p=0,d=0;for(c=0;c<l.length;c++)d=e.indexOf(l[c]),d!==p&&(a.push({isCJK:NO,fragment:e.slice(p,d)}),p=d),a.push({isCJK:YES,fragment:l[c]}),p+=l[c].length;p!==e.length&&a.push({isCJK:NO,fragment:e.slice(p)})}else a.push({isCJK:NO,fragment:e});var v=\"\";i&&(v+=\"…\"),r&&(v+=\"Sharing.Title.ClosingQuote\".loc());var m=SC.measureString(v).width,g=SC.measureString(\"&nbsp;\",YES).width,y=l?SC.measureString(l[0][0]).width:0,b;for(c=0;c<a.length;c++)b=a[c],b.isCJK?b.width=b.fragment.length*y:b.width=SC.measureString(b.fragment).width;var w=s,E=n,S=NO,x=NO,c=0,h=0;for(;!S&&c<a.length;c++){b=a[c];if(w===0){S=YES;break}if(b.width>n||b.width>E)if(b.isCJK){var T=Math.floor(E/y),N=b.fragment.length-T;b.included=b.fragment.slice(0,T),w--;if(w===0){S=YES;break}E=w===1?n-m:n;while(w&&N)if(N*y>E){N-=Math.floor(E/\ny),b.included=b.fragment.slice(0,-N),w--;if(w===0){S=YES;break}E=w===1?n-m:n}else E-=N*y,N=0,b.included=b.fragment}else{var C=b.fragment.split(\" \"),k;b.included=\"\";for(h=0;h<C.length;h++){k=C[h];var L=SC.measureString(k).width;E=h===0?E:E-g;var A=w>2?n:n-m;if(L>A){x=YES;var O=L-E;w--;if(w===0){S=YES;break}E=w===1?n-m:n;while(w&&O)if(O>E){O-=E,w--;if(w===0){S=YES;break}E=w===1?n-m:n}else E-=O,O=0;if(O){var M=L-O,_=L,D,P=k;do D=Math.floor(P.length/_*M),P=P.slice(0,D),_=SC.measureString(P).width;while(_>M);h===0?b.included=P:b.included+=\" \"+P}else h===0?b.included=k:b.included+=\" \"+k}else if(L>E){w--;if(w===0){S=YES;break}E=w===1?n-m:n,E-=L,h===0?b.included=k:b.included+=\" \"+k}else E-=L,h===0?b.included=k:b.included+=\" \"+k}}else E-=b.width,b.included=b.fragment}SC.teardownStringMeasurement();var H=\"\";for(c=0;c<a.length;c++){if(!a[c].included)break;H+=a[c].included}return{shouldApplyWordBreak:x,truncated:H+(H.length===e.length?\"\":v),original:e}}return{shouldApplyWordBreak:NO,truncated:e,original:e}},getOwnerName:function(){var e=CloudOS.shareController.getPath(\"recordInfo.share.owner.userIdentity.nameComponents\");return e?\"Sharing.Label.FullName\".loc({firstName:e.givenName,lastName:e.familyName}):null}}),Sharing.SHARE_SERVICE_NAME=\"cksharews\",Sharing.DATABASE_SERVICE_NAME=\"ckdatabasews\",Sharing.ShareCommonController=SC.Object.extend({environment:\"production\",createRequest:function(e,t,n,r){var i=CloudOS.getUrlForServiceName(Sharing.SHARE_SERVICE_NAME);i+=\"/ws/v1/com.apple.cloudkit/\"+this.get(\"environment\")+\"/\"+e;var s=CK.Request.postUrl(i,t);s.set(\"isJSON\",YES),s.set(\"reportRequest\"\n,YES),s.notify(200,this,n),s.notify(0,this,r),s.send(t)}}),Sharing.AcceptanceController=Sharing.ShareCommonController.extend({_retryAttempts:0,_maxRetryAttempts:3,sharePermissionUrl:\"share/accept\",shareDetails:null,containerId:null,ownerFullName:function(){return this.getPath(\"shareDetails.ownerFullName\")}.property(\"shareDetails\"),shareRecordTitle:null,acceptShare:function(){Sharing.sharingPane.showSpinner();var e=window.CloudKit.getDefaultContainer();e.acceptShares({value:this.getPath(\"shareDetails.shortGUID.value\")}).then(SC.RunLoop.wrapFunction(function(e){var t=e.errors;t.length>0?this.acceptShareDidFail(e):this.acceptShareDidSucceed(e)}.bind(this))).catch(SC.RunLoop.wrapFunction(function(e){CW.fatalError(\"Error resolving share: \"+e)}.bind(this)))},notifyApplicationWithShare:function(e){var t=CloudOS.shareController,n=t.get(\"appName\"),r=CloudOS.appManagerFor(n);t.set(\"shortGUID\",e.shortGUID.value);if(t.redirectToIWorkIfRequired(n))return;t.set(\"recordInfo\",e),t.launchApp()},acceptShareDidSucceed:function(e){COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_Acceptance_Successful\",{appName:CloudOS.shareController.get(\"appName\")});var t=e.results[0];return this._retryAttempts=0,this.notifyApplicationWithShare(t),YES},acceptShareDidFail:function(e){var t=CloudOS.shareController.get(\"appName\"),n=CloudOS.appManagerFor(t);n.passMessage(\"didFailToResolveCKShortGUID\",CloudOS.shareController.get(\"shortGUID\"),e.errors),COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_Acceptance_Failed\",{appName:t}),Sharing.sharingPane.hideSpinner(),e=SC.Object.create(e);var r=e.getPath\n(\"_errors.firstObject.serverErrorCode\");if(!r)throw\"Share Acceptance: Failed without proper error code\";return this.handleError(t,r),YES},handleError:function(e,t){var n,r=\"Acceptance\",i=e;SC.debug(\"Share Acceptance: Error code from Server is \",t);if(this._retryAttempts===this._maxRetryAttempts)return NO;switch(t){case\"OP_LOCK_FAILURE\":return this._retryAttempts++,this.acceptShare(),YES;case\"NOT_FOUND\":n=\"NOT_FOUND\";break;default:n=\"ItemNotAvailable\",r=\"Sharing\"}Sharing.statechart.sendAction(\"gotoErrorState\",{errorType:n,currentFlow:r,additionalLocKeyPartsForTitle:i,descriptionParams:{ownerName:Sharing.utils.getOwnerName()}})},rejectShare:function(){var e=CloudOS.shareController.get(\"appName\"),t=CloudOS.appManagerFor(e),n=CloudOS.shareController;t.passMessage(\"didResolveCKShortGUIDWithoutAcceptance\",n.get(\"shortGUID\"),n.get(\"recordInfo\"))}}),Sharing.ErrorController=SC.Object.extend({titleParams:null,nonLocTitle:null,descriptionParams:null,nonLocDescription:null,currentFlow:\"Sharing\",errorType:\"Generic\",additionalLocKeyPartsForTitle:null,additionalLocKeyPartsForDescription:null,defaultLocKeyPart:function(){var e=\"Sharing.Error.\"+this.get(\"currentFlow\")+\".\"+this.get(\"errorType\");return e}.property(\"currentFlow\",\"errorType\").cacheable(),title:function(){var e=this.get(\"nonLocTitle\"),t=this.get(\"titleParams\"),n=this.get(\"additionalLocKeyPartsForTitle\")?\".\"+this.get(\"additionalLocKeyPartsForTitle\"):\"\";if(e)return e;var r=this.get(\"defaultLocKeyPart\")+n+\".Title\",i=r.loc(t);return i===r&&(r=\"Sharing.Error.\"+this.get(\"currentFlow\")+\".\"+\"Generic.Title\",i=r.loc(t)),i}.property(\"defaultLocKeyPart\"\n,\"titleParams\",\"additionalLocKeyPartsForTitle\",\"nonLocTitle\").cacheable(),description:function(){var e=this.get(\"nonLocDescription\"),t=this.get(\"descriptionParams\"),n=this.get(\"additionalLocKeyPartsForDescription\")?\".\"+this.get(\"additionalLocKeyPartsForDescription\"):\"\";if(e)return e;var r=this.get(\"defaultLocKeyPart\")+n+\".Description\",i=r.loc(t);return i===r&&(r=\"Sharing.Error.\"+this.get(\"currentFlow\")+\".\"+\"Generic.Description\",i=r.loc(t)),i}.property(\"defaultLocKeyPart\",\"descriptionParams\",\"additionalLocKeyPartsForDescription\",\"nonLocDescription\").cacheable(),buttonsArray:null,updateErrorParams:function(e){if(!e&&SC.typeOf(e)===SC.T_HASH)return;this.beginPropertyChanges();for(var t in e)this.set(t,e[t]);this.endPropertyChanges()},resetProperties:function(){this.beginPropertyChanges(),this.set(\"currentFlow\",\"Sharing\"),this.set(\"errorType\",\"Generic\"),this.set(\"titleParams\",null),this.set(\"descriptionParams\",null),this.set(\"nonLocDescription\",null),this.set(\"nonLocTitle\",null),this.set(\"additionalLocKeyPartsForTitle\",null),this.set(\"additionalLocKeyPartsForDescription\",null),this.set(\"buttonsArray\",null),this.endPropertyChanges()}}),Sharing.vettingMessageSentStatusEnum={NOT_SENT:0,SENT:1,RECEIVED_SUCCESS:2,RECEIVED_ERROR:3},Sharing.OutOfNetworkController=Sharing.ShareCommonController.extend({shareSendVettingUrl:\"share/vetting/initiate\",shareDetails:null,_retryAttempts:0,_maxRetryAttempts:3,vettingMessageSentStatus:Sharing.vettingMessageSentStatusEnum.NOT_SENT,showOONPane:function(){var e=CloudOS.AdjustablePane.create({layout:{minHeight:550},maxHeight:550,delegate:null,isLoading\n:YES});Sharing.set(\"sharingPane\",e),e.append();var t=Sharing.OutOfNetworkView.create();e.set(\"paneContentView\",t),e.invokeLater(function(){this.set(\"isLoading\",NO)},1e3)},init:function(){arguments.callee.base.apply(this,arguments),this.set(\"shareDetails\",Sharing.shareRetrieveController.get(\"shareDetails\"))},selectedParticipant:function(e,t){return t!==undefined?this._selectedParticipant=t:this._selectedParticipant||(this._selectedParticipant=this.getPath(\"shareDetails.potentialMatchList\").firstObject()),this._selectedParticipant}.property(\"shareDetails.potentialMatchList\"),participantListType:function(){var e=this.getPath(\"shareDetails.potentialMatchList\"),t=0,n=0;return e.forEach(function(e){e.get(\"contactType\")==Sharing.contactType.EMAIL?t++:e.get(\"contactType\")==Sharing.contactType.PHONE&&n++}),t>0&&n===0?Sharing.participantListType.EMAIL:t===0&&n>0?Sharing.participantListType.PHONE:Sharing.participantListType.MIXED}.property(\"shareDetails.potentialMatchList\"),sendVettingMessage:function(){var e={shortGUID:this.getPath(\"shareDetails.shortGUID.value\"),participantId:this.getPath(\"selectedParticipant.participantId\")};this.createRequest(this.get(\"shareSendVettingUrl\"),e,this.sendingVettingMessageDidSucceed,this.sendingVettingMessageDidFail),this.set(\"vettingMessageSentStatus\",Sharing.vettingMessageSentStatusEnum.SENT)},sendingVettingMessageDidSucceed:function(e){return e.get(\"body\").vettingError?NO:(COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_OutOfNetwork_VettingLinkSentSuccessfully\",{appName:CloudOS.shareController.get(\"appName\"),medium:this.get(\"participantListType\"\n)}),this.set(\"vettingMessageSentStatus\",Sharing.vettingMessageSentStatusEnum.RECEIVED_SUCCESS),YES)},sendingVettingMessageDidFail:function(e){var t=\"Generic\",n={},r={},i=this.get(\"selectedParticipant\"),s=i.get(\"isContactTypeEmail\"),o=i.get(\"isContactTypePhoneNumber\"),u,a;COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_OutOfNetwork_VettingLinkSentUnsuccessfully\",{appName:CloudOS.shareController.get(\"appName\"),medium:this.get(\"participantListType\")}),this.set(\"vettingMessageSentStatus\",Sharing.vettingMessageSentStatusEnum.RECEIVED_ERROR),e&&(t=e.get(\"body\").vettingError);if(t){if(t===\"SERVER_ERROR\"||t===\"REMOTE_CALL_TIMEOUT\")if(this._retryAttempts<this._maxRetryAttempts){this._retryAttempts++,this.sendVettingMessage();return}if(t===\"VETTED_TO_OTHER_USER\"||t===\"LIMIT_EXCEEDED\"||t===\"VETTED_TO_OTHER_USER\")s?a=\"Email\":a=\"PhoneNumber\";t===\"ALREADY_VETTED_TO_USER\"&&(s?u=\"Email\":u=\"PhoneNumber\")}return Sharing.statechart.sendAction(\"goToErrorState\",{errorType:t,currentFlow:\"OONetwork\",additionalLocKeyPartsForTitle:u,additionalLocKeyPartsForDescription:a,descriptionParams:{shareTitle:Sharing.utils.getShareTitle(),selectedEmailAddressOrPhoneNumber:this.getPath(\"selectedParticipant.contactInformation.emailAddressOrPhoneNumber\"),userEmailAddress:CloudOS.getUser().get(\"primaryEmail\")}}),YES},resetProperties:function(){this.set(\"vettingMessageSentStatus\",Sharing.vettingMessageSentStatusEnum.NOT_SENT),this.set(\"_retryAttempts\",0)}}),Sharing.ROOT_RECORD_OON_KEY=\"OUT_OF_NETWORK\",Sharing.ShareRetrieveController=Sharing.ShareCommonController.extend({retrieveShare:function(e){var t=CloudOS\n.shareController,n=CloudOSBootstrap.isOnSupportedMobile,r=CloudOS.authController.getPath(\"user.brMigrated\"),i=Sharing.utils,s=i.getShareTitle(),o=i.getOwnerName(),u=t.get(\"appName\");e||(e=t.get(\"recordInfo\"));var a=Sharing.statechart;if(!e)return a.sendAction(\"gotoErrorState\",{errorType:\"ItemNotAvailable\",currentFlow:\"Sharing\",additionalLocKeyPartsForTitle:u});var f;if(n&&!t.get(\"isAppSupportedOnMobile\")){var l=SC.browser.isiOS?\"iOS\":\"Android\";return COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_AppUnsupportedOnMobile\",{appName:u}),a.sendAction(\"gotoErrorState\",{errorType:\"AppUnavailable\",currentFlow:\"Sharing\",additionalLocKeyPartsForDescription:u+\".\"+l,nonLocTitle:s,descriptionParams:{ownerName:o}})}var c=i.recordInfoHasRequiredFields(e);if(!c)return COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_ItemNotAvailable\",{appName:u}),a.sendAction(\"gotoErrorState\",{errorType:\"ItemNotAvailable\",currentFlow:\"Sharing\"});if(i.isIWorkApp(u)&&!r){var h=u;return n?h+=\".iOSAndAndroid\":h+=CloudOS.authController.get(\"performedLoginFlow\")?\".LoggedInForSharing\":\".AlreadyLoggedIn\",a.sendAction(\"gotoErrorState\",{errorType:\"DriveNotMigrated\",currentFlow:\"Sharing\",additionalLocKeyPartsForDescription:h,nonLocTitle:s,descriptionParams:{ownerName:o},buttonsArray:n?null:[{title:(\"Sharing.Button.GoTo.\"+u).loc(),action:function(){CloudOS.openApp(u)}},{title:\"Sharing.Button.NotNow\".loc(),action:function(){Sharing.statechart.sendAction(\"removePane\")}}]})}e.rootRecordName||(e.rootRecordName=Sharing.ROOT_RECORD_OON_KEY),Sharing.store||(Sharing.store=CW.Store.create()),Sharing.store.loadRecord\n(Sharing.ShareDetails,e);var p=e.rootRecordName?e.rootRecordName:Sharing.ROOT_RECORD_OON_KEY;f=Sharing.store.find(Sharing.ShareDetails,p),f||CW.fatalError(\"retrieveShareDidSucceed(): Unable to get shareDetails from the store\"),this.set(\"shareDetails\",f);var d=f.get(\"containerIdentifier\");if(f.getPath(\"hasOONParticipants\"))return a.sendAction(\"gotoOutOfNetworkState\");if(f.getPath(\"participantStatus\")!==CloudKit.ShareParticipantAcceptanceStatus.ACCEPTED)return a.sendAction(\"gotoAcceptanceState\",{containerId:d,shareDetails:f});t.set(\"recordInfo\",e),t.launchApp()}});var VETTING_PREFIX=\"V:\";Sharing.VettingTokenController=Sharing.ShareCommonController.extend({vettingToken:null,isVettingTokenVetted:NO,lookupAlternateDsid:function(e,t){this.set(\"vettingToken\",e),this.set(\"isVettingTokenVetted\",t);if(!t){COS.statsController.recordLocationStat(\"cloudos\",\"Vetting_FlowInitiated\");var n=CloudOS.getUrlForServiceName(Sharing.DATABASE_SERVICE_NAME);n+=\"/database/1/com.apple.sharing.public/\"+this.get(\"environment\")+\"/public/records/lookup\";var r={records:[{recordName:VETTING_PREFIX+e}],desiredKeys:[\"alternateDsid\",\"email\",\"phone\"]},i=CK.Request.postUrl(n,r);i.set(\"isJSON\",YES),i.set(\"reportRequest\",YES),i.notify(200,this,this.lookupAlternateDsidDidSucceed),i.notify(0,this,this.lookupAlternateDsidDidFail),i.send()}else COS.statsController.recordLocationStat(\"cloudos\",\"Vetting_FlowCompleted\"),this.fetchShareWithVettingToken(e)},lookupAlternateDsidDidSucceed:function(e){var t=e.get(\"body\"),n=t.records,r=n&&n[0];if(r&&r.serverErrorCode)this.showError(r.serverErrorCode);else{var i=n[0].fields,s=i\n.alternateDsid.value,o=i.email,u=i.phone,a;(o||u)&&COS.statsController.recordLocationStat(\"cloudos\",\"Vetting_RedirectingToIDMS\",{vettingType:o?\"EMAIL\":\"PHONENUMBER\"}),o?(SC.Logger.info(\"Redirecting to IDMS with email address\"),a=CloudOS.authController.getConfigBagUrlForKey(\"vettingUrlForEmail\"),window.location.href=a+\"?key=\"+this.get(\"vettingToken\")+\"&id=\"+s):u?(SC.Logger.info(\"Redirecting to IDMS with phone number\"),a=CloudOS.authController.getConfigBagUrlForKey(\"vettingUrlForPhone\"),window.location.href=a+\"?key=\"+this.get(\"vettingToken\")+\"&id=\"+s):(SC.Logger.info(\"No Email Address or Phone Number, showing error\"),this.showError(\"NOT_FOUND\"))}return YES},showError:function(e){Sharing.statechart.sendAction(\"gotoErrorState\",{errorType:e||\"Generic\",currentFlow:\"Vetting\"})},lookupAlternateDsidDidFail:function(e){return this.showError(\"NOT_FOUND\"),YES},fetchShareWithVettingToken:function(e){var t={vettingToken:e};this.createRequest(\"share/token/getPermission\",t,this.fetchShareWithVettingTokenDidSucceed,this.fetchShareWithVettingTokenDidFail)},fetchShareWithVettingTokenDidSucceed:function(e){var t=e.get(\"body\"),n=t.container.name;CloudOS.shareController.set(\"containerIdentifier\",n);var r=t.share.shortGUID;return r?(CloudOS.shareController.set(\"shortGUID\",r),CloudOS.shareController.retrieveShare(function(e){var t=e.results[0];CloudOS.shareController.set(\"recordInfo\",t);var n=Sharing.shareRetrieveController;n||(Sharing.shareRetrieveController=Sharing.ShareRetrieveController.create(),n=Sharing.shareRetrieveController),n.retrieveShare(t)}.bind(this))):CW.fatalError(\"Server Error. No shortGUID found in the getPermission response\"\n),YES},fetchShareWithVettingTokenDidFail:function(e){return this.showError(\"NOT_FOUND\"),YES}}),Sharing.HorizontalCenterAlign={frameObserver:function(){var e=this.getPath(\"frame.width\"),t=this.getPath(\"parentView.frame.width\"),n=this.get(\"flowSpacing\");if(e===0)return;n||(n={}),n.left=Math.round(t-e)/2,this.set(\"flowSpacing\",n)}.observes(\"frame\")},Sharing.ShareContainer=CW.HashAttribute.extend({env:CW.Record.attr(String),name:CW.Record.attr(String)}),Sharing.PhoneNumberField={},SC.RecordAttribute.registerTransform(Sharing.PhoneNumberField,{to:function(e,t,n,r,i){return r.get(\"formattedValue\")||\"+\"+e}}),Sharing.ContactInfo=CW.HashAttribute.extend(CK.PhoneNumbers.PhoneFormatter,{firstName:CW.Record.attr(String),lastName:CW.Record.attr(String),emailAddress:CW.Record.attr(String),phoneNumber:CW.Record.attr(Sharing.PhoneNumberField),fullName:function(){return\"Sharing.Label.FullName\".loc({firstName:this.get(\"firstName\"),lastName:this.get(\"lastName\")})}.property(\"firstName\",\"lastName\"),defaultCountryCode:function(){var e=CloudOS.authController.getPath(\"accountPreferences.localeForCloudOS\"),t=[\"cs-cz\",\"ja-jp\"].indexOf(e)!==-1?0:1,n=\"us\";return e&&(e===\"vi-vi\"?n=\"vn\":n=e.split(\"-\")[t]),n}.property(\"CloudOS.authController.accountPreferences.localeForCloudOS\"),emailAddressOrPhoneNumber:function(){return this.get(\"emailAddress\")||this.get(\"phoneNumber\")}.property(\"emailAddress\",\"phoneNumber\"),valueBinding:\".phoneNumber\",formattedValueObserver:function(){this.get(\"formattedValue\")!==this.get(\"value\")&&this.getPath(\"parent.parent.parent\").recordDidChange()}.observes(\"formattedValue\")}),Sharing\n.ShareParticipant=CW.HashAttribute.extend({participantId:CW.Record.attr(String),contactInformation:CW.Record.attr(Sharing.ContactInfo),shareParticipantState:CW.Record.attr(String),shareParticipantType:CW.Record.attr(String),permission:CW.Record.attr(String),publicKey:CW.Record.attr(SC.Object),publicKeyVersion:CW.Record.attr(SC.Object),outOfNetworkKeyType:CW.Record.attr(SC.Object),contactEmailAddressOrPhoneNumber:function(){return this.getPath(\"contactInformation.emailAddressOrPhoneNumber\")}.property(\"contactInformation.emailAddressOrPhoneNumber\"),contactType:function(){return this.getPath(\"contactInformation.emailAddress\")?Sharing.contactType.EMAIL:this.getPath(\"contactInformation.phoneNumber\")?Sharing.contactType.PHONE:undefined}.property(\"contactInformation\"),isContactTypeEmail:function(){return this.get(\"contactType\")===Sharing.contactType.EMAIL}.property(\"contactType\"),isContactTypePhoneNumber:function(){return this.get(\"contactType\")===Sharing.contactType.PHONE}.property(\"contactType\")}),Sharing.ShareInfo=CW.HashAttribute.extend({etag:CW.Record.attr(String),shortGUID:CW.Record.attr(String),participantList:CW.Record.toMany(Sharing.ShareParticipant),ownerFullName:function(){var e=this.get(\"participantList\"),t=e.get(\"length\"),n;for(var r=0;r<t;r++){var i=e.objectAt(r);if(i.get(\"shareParticipantType\")===\"owner\"){n=i.getPath(\"contactInformation.fullName\");break}}return n}.property(\"participantList\")}),Sharing.ShareIdentifier=CW.HashAttribute.extend({zone:CW.Record.attr(String),ownerIdentifier:CW.Record.attr(String),shareId:CW.Record.attr(String),recordName:function(){return this\n.get(\"shareId\").split(\"_\")[0]}.property(\"shareId\"),zoneID:function(){return{zoneName:this.get(\"zone\"),ownerRecordName:this.get(\"ownerIdentifier\")}}.property(\"zone\",\"ownerIdentifier\")}),Sharing.ShareDetails=CW.Record.extend({primaryKey:\"rootRecordName\",rootRecordName:CW.Record.attr(String),protectedFullToken:CW.Record.attr(String),shareId:CW.Record.attr(Sharing.ShareIdentifier),container:CW.Record.attr(Sharing.ShareContainer),share:CW.Record.attr(Sharing.ShareInfo),potentialMatchList:CW.Record.toMany(Sharing.ShareParticipant),hasOONParticipants:function(){return this.getPath(\"potentialMatchList.length\")>0}.property(\"potentialMatchList\")}),CW.SectionedViewCollectionItemCellRTLRenderDelegate=CW.SectionedViewCollectionItemCellRenderDelegate.extend({renderContentArea:function(e,t){var n=e.get(\"indentationLevelValue\"),r=e.get(\"indentationWidthValue\"),i=e.get(\"accessoryLayout\"),s=!1;t=t.begin().addClass(\"cw-content\"),s?t.addStyle(\"margin-right\",n*r):t.addStyle(\"margin-left\",n*r);if(i){var o=i.width,u=i.left,a=i.right,f=5;if(o){var l=o+f;s?t.addStyle(\"margin-left\",l+a):t.addStyle(\"margin-right\",l+u)}else u&&t.addStyle(\"margin-right\",u+f)}this.willRenderContentAreaBody(e,t),this.renderContentAreaImage(e,t,CW.SectionedViewCellImageAnchor.CONTENT_AREA),this.renderContentAreaText(e,t),this.renderContentAreaDetailText(e,t),this.didRenderContentAreaBody(e,t),t.end()}}),SC.BaseTheme.sectionedViewCollectionItemCellRTLRenderDelegate=CW.SectionedViewCollectionItemCellRTLRenderDelegate.create(),Sharing.Statechart=SC.Statechart.extend({trace:YES,monitorIsActive:NO,name:\"sharing-statechart\",rootState\n:SC.State.design({initialSubstate:\"defaultState\",gotoErrorState:function(e){this.gotoState(\"errorState\",e)},defaultState:SC.State.design({enterState:function(){CloudOS.workspaceController.hideCentralSpinner()},gotoMigrationNeededState:function(){this.gotoState(\"migrationNeededState\")},gotoRetrieveState:function(){this.gotoState(\"retrieveState\")},gotoVettingTokenState:function(e){this.gotoState(\"vettingTokenState\",e)},goToThirdPartyState:function(){this.gotoState(\"thirdParty\")}}),retrieveState:SC.State.design({enterState:function(){Sharing.shareRetrieveController.retrieveShare()},gotoAcceptanceState:function(e){this.gotoState(\"acceptShareState\",e)},gotoOutOfNetworkState:function(){this.gotoState(\"outOfNetWorkState\")},cancelSharing:function(){Sharing.removePane()}}),acceptShareState:SC.State.design({enterState:function(e){var t=Sharing.get(\"sharingPane\"),n=Sharing.acceptanceController,r;n||(n=Sharing.acceptanceController=Sharing.AcceptanceController.create(e));var i=CloudOS.shareController.get(\"appName\");Sharing.utils.isNotesApp(i)?r=\"inNetworkAcceptance\":Sharing.utils.isIWorkApp(i)?r=\"inNetworkAcceptance\":r=\"thirdParty\",Sharing.setupAndShowSharingPane(r),COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_Acceptance_UILoaded\",{appName:i||\"thirdParty\"})},acceptShare:function(){Sharing.acceptanceController.acceptShare()},cancelSharing:function(){Sharing.acceptanceController.rejectShare(),Sharing.removePane()}}),outOfNetWorkState:SC.State.design({initialSubstate:\"noAccess\",noAccess:SC.State.design({enterState:function(){var e=Sharing.outOfNetworkController;e||(e=Sharing.outOfNetworkController=\nSharing.OutOfNetworkController.create()),Sharing.setupAndShowSharingPane(\"noAccess\"),COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_OutOfNetwork_LoadedVerificationFlow\",{appName:CloudOS.shareController.get(\"appName\")})},cancelSharing:function(){Sharing.removePane()},gotoDeliveryMethodSelection:function(){Sharing.removePane(YES,function(){Sharing.statechart.gotoState(\"deliveryMethodSelection\")})}}),deliveryMethodSelection:SC.State.design({initialSubstate:\"showPane\",sendVettingMessage:function(){Sharing.outOfNetworkController.sendVettingMessage()},vettingMessageSent:function(){Sharing.removePane()},cancelSharing:function(){Sharing.removePane()},goToErrorState:function(e){this.gotoState(\"oonErrorState\",e)},showPane:SC.State.design({enterState:function(){Sharing.outOfNetworkController.showOONPane()}}),oonErrorState:SC.State.design({enterState:function(e){var t=Sharing.errorController;t?t.updateErrorParams(e):t=Sharing.errorController=Sharing.ErrorController.create(e)}})}),exitState:function(){Sharing.outOfNetworkController.resetProperties()}}),vettingTokenState:SC.State.design({enterState:function(e){var t=Sharing.get(\"sharingPane\"),n=Sharing.vettingTokenController;n||(n=Sharing.vettingTokenController=Sharing.VettingTokenController.create()),n.lookupAlternateDsid(e.vettingToken,e.isVettingTokenVetted)},gotoAcceptanceState:function(e){this.gotoState(\"acceptShareState\",e)},cancelSharing:function(){Sharing.removePane()},gotoOutOfNetworkState:function(){this.gotoState(\"errorState\",{errorType:\"Generic\",currentFlow:\"Vetting\"})}}),migrationNeededState:SC.State.design({enterState\n:function(){Sharing.setupAndShowSharingPane(\"notesMigrationNeeded\")},cancelSharing:function(){Sharing.removePane()}}),thirdParty:SC.State.design({initialSubstate:\"genericThirdParty\",genericThirdParty:SC.State.design({enterState:function(){var e=CloudOS.shareController.getPath(\"recordInfo.containerIdentifier\");if(e===\"com.apple.socialgaming.sessions\"){this.gotoState(\"gameCenterUnsupportedState\");return}var t=CloudOS.shareController.getPath(\"recordInfo.webpageURL\");if(t){SC.info(\"Redirecting to the third party sharing URL\");var n=new URI(t);n.protocol()?(COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_ThirdParty_RedirectToWebPage\"),window.location.href=n.toString()+CloudOS.shareController.get(\"shortGUID\")):(SC.warn(\"%@ is not a valid fallback URL.\",t),COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_ThirdParty_UILoaded\"),Sharing.setupAndShowSharingPane(\"thirdParty\"))}else Sharing.setupAndShowSharingPane(\"thirdParty\"),COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_ThirdParty_UILoaded\")}}),gameCenterUnsupportedState:SC.State.design({enterState:function(){COS.statsController.recordLocationStat(\"cloudos\",\"Sharing_GameCenter_UILoaded\"),Sharing.setupAndShowSharingPane(\"gameCenterUpdate\")},removePane:function(){Sharing.removePane()}})}),errorState:SC.State.design({enterState:function(e){var t=Sharing.errorController,n;t?t.updateErrorParams(e):t=Sharing.errorController=Sharing.ErrorController.create(e),Sharing.setupAndShowSharingPane(\"error\")},removePane:function(){Sharing.removePane()},signOut:function(){CloudOS.authController.logoutUser(function(){CK.reloadWithReason\n(\"Sharing: Error State\")},YES)},exitState:function(){Sharing.errorController.resetProperties()}})})}),Sharing.SpinnerView=CW.SpinnerView.extend({asset:CloudOS.SPINNER_IMAGE_SRC,assetIsAlways2x:YES,useAbsoluteLayout:YES,layout:{centerX:0,centerY:0}}),Sharing.AppIconView=SC.ImageView.extend(Sharing.HorizontalCenterAlign,{useCanvas:YES,frame:{x:0,y:0,width:128,height:128},isVisible:function(){var e=this.get(\"forceDefaultIconUsage\"),t=CloudOS.shareController.get(\"appName\");return t===\"notes2\"&&!e?NO:YES}.property(\"CloudOS.shareController.appName\",\"forceDefaultIconUsage\").cacheable(),defaultAppName:\"iclouddrive\",forceDefaultIconUsage:NO,appNameBinding:\"CloudOS.shareController.appName\",isAppThirdPartyBinding:\"Sharing.isThirdParty\",isGameCenterBinding:\"Sharing.isGameCenter\",recordInfo:null,needsMask:function(){if(!this.get(\"isAppThirdParty\"))return NO;var e=this.get(\"recordInfo\");return e?e.bundleInfo?e&&e.bundleInfo&&e.bundleInfo[0].kind===\"iosSoftware\":YES:NO}.property(\"isAppThirdParty\",\"recordInfo\").cacheable(),value:function(){var e,t=this.get(\"recordInfo\");if(this.get(\"isGameCenter\")){var n=\"iclouddrive\",r=CloudOS.appManagerFor(n);r||(e=\"\");var i=window.devicePixelRatio;i>1?e=r.get(\"appIconUrl2x\"):e=r.get(\"appIconUrl\")}else if(this.get(\"isAppThirdParty\")){t=t||{};var s;!t.bundleInfo||!t.bundleInfo[0].iconUrlTemplate?(SC.warn(\"No app icon found in App Store associated to container %@.\",t.containerIdentifier),window.devicePixelRatio>2?s=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/no_icon_128x128@3x.png\":window.devicePixelRatio>1?\ns=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/no_icon_128x128@2x.png\":s=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/no_icon_128x128.png\"):s=t.bundleInfo[0].iconUrlTemplate.replace(/(http:\\/\\/)|({w})|({h})|({f})/g,function(e,t,n,r,i){if(t)return\"http://\";if(n||r)return 128*window.devicePixelRatio;if(i)return\"png\"}),e=s}else{var n=this.get(\"defaultAppName\");this.get(\"forceDefaultIconUsage\")||(n=CloudOS.shareController.get(\"appName\"));if(!n||!t)n=\"iclouddrive\";var r=CloudOS.appManagerFor(n);r||(e=\"\");var i=window.devicePixelRatio;i>1?e=r.get(\"appIconUrl2x\"):e=r.get(\"appIconUrl\")}return e}.property(\"isAppThirdParty\",\"isGameCenter\",\"forceDefaultIconUsage\",\"defaultAppName\",\"recordInfo\").cacheable(),_loadImageUsingCache:function(){if(this.get(\"needsMask\")){var e=this,t=new Promise(function(e){var t;window.devicePixelRatio>2?t=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/mask_128x128@3x.png\":window.devicePixelRatio>1?t=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/mask_128x128@2x.png\":t=\"/system/cloudos/16FProject130/cloudos_foundation/sharing/16FProject130/zh-tw/source/resources/images/mask_128x128.png\",SC.imageQueue.loadImage(t,this,function(t,n){SC.ok(n)&&e(n)})}),n=new Promise(function(t){var n=e.get(\"value\");SC.imageQueue.loadImage(n,this,function(e,n){SC.ok(n)&&t(n)})});return Promise.all([t,n]).then(function(t){e.maskImage=t[0],e.didLoad(t[1])}),YES}arguments\n.callee.base.apply(this,arguments)},renderDelegate:SC.BaseTheme.canvasImageRenderDelegate.create({update:function(e,t){if(e._view.get(\"needsMask\")){var n=t[0],r=e.get(\"image\"),i=e._view.frame.width,s=e._view.frame.height,o=e.get(\"renderState\"),u=e._view.maskImage,a,f=e.didChangeFor(\"canvasImageRenderDelegate\",\"backgroundColor\"),l=e.didChangeFor(\"canvasImageRenderDelegate\",\"image\")||(r&&r.complete)!==o._lastImageComplete;if(f||l){if(n&&n.getContext){var c=n.height=s*devicePixelRatio,h=n.width=i*devicePixelRatio;a=n.getContext(\"2d\"),r&&r.complete&&u&&(a.drawImage(u,0,0,h,c),a.globalCompositeOperation=\"source-atop\",a.drawImage(r,0,0,h,c))}o._lastImageComplete=r&&r.complete}}else arguments.callee.base.apply(this,arguments)}})}),Sharing.ThumbnailIconView=SC.ContainerView.extend({animationDuration:.5,nowShowing:null,init:function(){arguments.callee.base.apply(this,arguments);var e=Sharing.utils.getThumbnailUrl();SC.imageQueue.loadImage(e,this,\"showThumbnailIconView\")},contentView:SC.ImageView.extend(Sharing.HorizontalCenterAlign,{useStaticLayout:!0,classNames:[\"sharing-badge-icon\"],init:function(){arguments.callee.base.apply(this,arguments),SC.Module.loadModule(\"cloudkit/core_types\",this,function(){var e=CloudOS.shareController.get(\"fileExtensionOrUTI\"),t=CoreTypes.API.fetchIcon(e,128,window.devicePixelRatio,\"web\");this.set(\"value\",t.iconURL)})}}),showThumbnailIconView:function(e,t){if(SC.typeOf(t)===\"error\")SC.Logger.warn(\"Failed to load iWork thumbnail in share acceptance flow\");else{var n=this.get(\"contentView\"),r=this.get(\"animationDuration\");n.animate(\"opacity\",0,{duration:r,\ntiming:\"ease\"}),this.invokeLater(function(){this.set(\"nowShowing\",\"thumbnailIconView\"),this.contentView.image=t}.bind(this),r)}},thumbnailIconView:SC.ImageView.extend(Sharing.HorizontalCenterAlign,{useStaticLayout:!0,useImageQueue:!1,value:SC.BLANK_IMAGE_URL,classNames:[\"sharing-thumbnail-badge-icon\"],render:function(e){arguments.callee.base.apply(this,arguments);var t=this.image,n=t.width>t.height;n&&e.addClass(\"sharing-thumbnail-landscape-badge-icon\")},_loadImage:function(){}}),nowShowingDidChange:function(e){e();var t=this.get(\"contentView\");this.invokeLater(function(){t.animate(\"opacity\",1,{duration:this.animationDuration,timing:\"ease\"})}.bind(this),this.animationDuration*50)}.enhance()}),Sharing.IconView=SC.View.extend(Sharing.HorizontalCenterAlign,{init:function(){var e=this.supportsThumbnailView(),t=[];e?t.push(\"thumbnailIconView\"):t.push(\"appIconView\"),this.set(\"childViews\",t),arguments.callee.base.apply(this,arguments)},supportsThumbnailView:function(){var e=CloudOS.shareController.get(\"appName\"),t=CloudOS.shareController.get(\"recordInfo\");return t&&Sharing.utils.isIWorkApp(e)},appIconView:Sharing.AppIconView.design(SC.StaticLayout,{useStaticLayout:!0,classNames:[\"sharing-badge-icon\"],forceDefaultIconUsageBinding:SC.Binding.oneWay(\".parentView.parentView.forceDefaultIconUsageBinding\"),recordInfoBinding:SC.Binding.oneWay(\"CloudOS.shareController.recordInfo\")}),thumbnailIconView:Sharing.ThumbnailIconView.design()}),Sharing.GenericBadgeView=SC.View.extend({classNames:[\"generic-badge-view\"],childViews:[\"loadedView\"],title:\"\",description:\"\",buttonsArray:null,forceDefaultIconUsage\n:!1,loadedView:SC.View.design(SC.StaticLayout,{useStaticLayout:!0,classNames:[\"generic-badge-loaded-view\"],childViews:[\"icon\",\"title\",\"description\"],buttonsArrayBinding:SC.Binding.oneWay(\"*parentView.buttonsArray\"),icon:Sharing.IconView.design(SC.StaticLayout,{useStaticLayout:!0,classNames:[\"sharing-badge-icon\"],forceDefaultIconUsageBinding:SC.Binding.oneWay(\"*parentView.parentView.forceDefaultIconUsage\"),recordInfoBinding:SC.Binding.oneWay(\"CloudOS.shareController.recordInfo\")}),title:SC.LabelView.design(SC.StaticLayout,{classNames:[\"sharing-badge-title\"],useStaticLayout:!0,controlSize:SC.HUGE_CONTROL_SIZE,valueBinding:\".owner.owner.title\",classNameBindings:[\"shouldApplyWordBreak:word-break\"]}),description:SC.LabelView.design(SC.StaticLayout,{classNames:[\"sharing-badge-description\"],controlSize:SC.LARGE_CONTROL_SIZE,useStaticLayout:!0,valueBinding:\".owner.owner.description\"}),buttonsArrayDidChange:function(){this.generateButtons()}.observes(\"buttonsArray\"),generateButtons:function(){var e=this.get(\"buttonsArray\");if(e){var t=this.createChildView(SC.View,{useStaticLayout:YES,classNames:[\"sharing-badge-buttons\"]});this.appendChild(t);var n=0,r=e.length;for(;n<r;++n){var i=t.createChildView(Sharing.GenericBadgeButtonView,e[n]);n===0&&i.set(\"isDefault\",YES),t.appendChild(i)}}}}),didAppendToDocument:function(){var e=this.get(\"title\");if(e.startsWith(\"Sharing.Title.OpeningQuote\".loc())){var t=this.getPath(\"loadedView.title\"),n=Sharing.utils.truncateStringForMultiLine(e,t.$()[0],t.$().width(),YES,YES,2);n.shouldApplyWordBreak&&t.set(\"shouldApplyWordBreak\",YES),this.set(\"title\",n.truncated\n)}}}),Sharing.GenericBadgeButtonView=SC.ButtonView.extend({themeName:\"borderless\",classNames:[\"sharing-badge-button\"],useStaticLayout:YES}),Sharing.AcceptanceInNetwork=Sharing.GenericBadgeView.extend({isLoadedBinding:SC.Binding.bool(\"CloudOS.shareController.recordInfo\"),title:function(e,t){if(t)return this._value=t;var n=Sharing.utils.getShareTitle();return n}.property(\"CloudOS.shareController.recordInfo\").cacheable(),descriptionBinding:SC.Binding.transform(function(){var e=CloudOS.shareController.get(\"recordInfo\");if(!e)return;var t=e.share.owner.userIdentity.nameComponents,n,r=\"Sharing.Label.FullName\".loc({firstName:t.givenName,lastName:t.familyName}),i=CloudOS.shareController.get(\"appName\"),s=\"Sharing\",o=CloudOS.authController.get(\"performedLoginFlow\");o?Sharing.utils.isIWorkApp(i)?s+=\".Acceptance.\"+i+\".LoggedInForSharing.Description\":Sharing.utils.isNotesApp(i)&&(s+=\".Acceptance.notes.LoggedInForSharing.Description\"):Sharing.utils.isIWorkApp(i)?s+=\".Acceptance.\"+i+\".AlreadyLoggedIn.Description\":Sharing.utils.isNotesApp(i)&&(s+=\".Acceptance.notes.AlreadyLoggedIn.Description\");var u=CloudOS.getUser();return s.loc({ownerName:r,userFullName:u?u.get(\"displayName\"):null,userEmailAddress:u?u.get(\"primaryEmail\"):null})}).from(\"CloudOS.shareController.recordInfo\"),buttonsArray:function(){var e=[{titleBinding:SC.Binding.transform(function(e,t){var n=CloudOS.shareController.get(\"appName\"),r=CloudOS.appManagerFor(n);return r?CloudOSBootstrap.isOnSupportedMobile&&Sharing.utils.isIWorkApp(n)?(\"Sharing.Button.Preview.\"+n).loc():(\"Sharing.Button.JoinAndOpen.\"+n).loc():\"\"}).from(\"CloudOS.shareController.recordInfo\"\n),action:function(){Sharing.statechart.sendAction(\"acceptShare\")}}];return CloudOSBootstrap.isOnSupportedMobile?e.push({title:\"Sharing.Button.SignOut\".loc(),action:function(){CloudOS.authController.logoutUser(function(){CK.reloadWithReason(\"Sharing: Acceptance in network\")},YES)}}):e.push({title:\"Sharing.Button.NotNow\".loc(),action:function(){Sharing.statechart.sendAction(\"cancelSharing\")}}),e}.property().cacheable()}),Sharing.AccountMenu=CK.AccountMenuView.extend(CW.Animatability,{classNames:\"cos-account-menu\",userDidChange:function(){this.accountButton.notifyPropertyChange(\"availableTitles\")}.observes(\"COS.authController.user\"),accountMenuItems:function(){var e=[];return e.push({title:\"AccountMenu.AccountSettings\".loc(),tooltip:\"AccountMenu.AccountSettings\".loc(),target:\"CloudOS\",action:\"showAccountSettings\"}),e.push({title:\"AccountMenu.SignOut\".loc(),tooltip:\"AccountMenu.SignOut\".loc(),target:\"CloudOS\",action:\"performLogout\"}),e}.property().cacheable(),childViews:[\"accountIconView\",\"accountButton\",\"dividerView\",\"helpButton\"],accountMenuSize:null,accountMenuSizeBinding:\".accountButton.measuredSize\",relayoutChildren:function(){var e=this.get(\"accountMenuSize\"),t=e?e.width:0,n=this.get(\"frame\");this.accountIconView.adjust(\"right\",Math.min(n.width+36-28,t+65))}.observes(\"accountMenuSize\"),accountIconView:CloudOS.PhotoIconView.design({layout:{right:300,top:7}}),layout:{right:2,top:0,width:100,height:44,zIndex:3},isVisible:function(){return CloudOSBootstrap.isOnSupportedMobile||!CloudOS.getUser()?NO:YES}.property()}),function(){Sharing.BadgeContainerView=SC.ContainerView.extend\n(COS.Paneness).extend(CW.Animatability,CW.PaneAnimationSupport,{layout:function(){return{centerX:0,centerY:0,width:700<Math.max(COS.MIN_WIDTH,window.innerWidth)?700:Math.max(COS.MIN_WIDTH,window.innerWidth),height:460<Math.max(COS.MIN_HEIGHT,window.innerHeight)?460:Math.max(COS.MIN_HEIGHT,window.innerHeight)}}.property(),parentViewDidResize:function(){return this.layoutDidChange(),arguments.callee.base.apply(this,arguments)},contentLayout:{zIndex:5},logRequiredSprites:YES,wantsAcceleratedLayer:YES,isPaneAttached:!1,classNames:\"badge-container-view overflow-always-visible\".w(),init:function(){return Sharing.BadgeContainerView.instances.push(this),this.contentView&&(this.contentView=this.contentView.extend({classNames:\"badge-container-content-view\".w()})),arguments.callee.base.apply(this,arguments)},contentView:null,contentViewChanged:function(){this.setContentLayout()}.observes(\"contentView\"),setContentLayout:function(){var e=this.get(\"contentView\");if(!e)return;e.set(\"layout\",this.get(\"contentLayout\"))},render:function(e){this.setContentLayout()},didCreateLayer:function(){},update:function(){}}),Sharing.BadgeContainerView.instances=[]}(),Sharing.BadgePane=SC.Pane.extend(CW.Animatability,COS.IsShowingSupport,CW.DropTarget,{isDropTarget:YES,classNames:[\"sharing-pane\"],acceptsFileDrags:NO,show:function(){this.append(),this.becomeKeyPane(),this.invokeLast(\"chooseDefaultBadge\"),this._animateKidLists(\"immediateFadingChildren\",\"delayedFadingChildren\",{opacity:{from:0,to:1},duration:500}),this._hideKidTimer&&(this._hideKidTimer.invalidate(),this._hideKidTimer=undefined),this.didShow&&\nthis.didShow()},hide:function(){this.set(\"currentBadge\",\"none\");var e={opacity:0,duration:725};this._animateKidLists(\"immediateFadingChildren\",e),this._hideKidTimer=this.invokeLater(this._animateKidLists,COS.nextShowDelayTime,\"delayedFadingChildren\",e),this.didHide&&this.didHide()},_animateKidLists:function(){var e=0,t=[];for(var n=arguments.length-1-e;typeof arguments[n]!=\"string\";n--)t.unshift(arguments[n]),e++;for(var r=0,i=arguments.length;r<i-e;r++)for(var s=0,o=this.get(arguments[r]),u,a=o&&o.length;s<a;s++)(u=this.get(o[s]))&&u.hasAnimatability&&u.animate.apply(u,t)},chooseDefaultBadge:function(){this.get(\"currentBadge\")===\"none\"&&this.set(\"currentBadge\",this.get(\"defaultBadge\"))},didRemoveFromParent:function(){this._noAnimate=YES,this.set(\"currentBadge\",\"none\"),this.currentBadgeObserver(),this._noAnimate=NO},currentBadge:\"none\",currentBadgeObserver:function(){if(!this.didChangeFor(\"currentBadgeObserver\",\"currentBadge\"))return;var e=this.get(\"currentBadge\"),t=this.get(e),n=this.get(this._lastCurrentBadge),r=this;t&&t.append(),n&&n.remove(),this._lastCurrentBadge=e}.observes(\"currentBadge\"),entranceAnimationDidFinish:function(){},render:function(e){},update:function(){}}),Sharing.ErrorView=Sharing.GenericBadgeView.extend({titleBinding:\"Sharing.errorController.title\",descriptionBinding:\"Sharing.errorController.description\",_defaultButtonsArray:function(){var e=CloudOS.authController.get(\"isAuthenticated\"),t=CloudOSBootstrap.isOnSupportedMobile,n=[];return e?t?n.push({title:\"Sharing.Button.SignOut\".loc(),action:function(){window.location.hash=\"\",Sharing.statechart.sendAction\n(\"signOut\")}}):n.push({title:\"Sharing.Button.OK\".loc(),action:function(){Sharing.statechart.sendAction(\"removePane\")}}):t?n=null:n.push({title:\"Sharing.Button.OK\".loc(),action:function(){window.location.hash=\"\",Sharing.statechart.sendAction(\"removePane\")}}),n}.property(\"CloudOS.authController.isAuthenticated\").cacheable(),buttonsArray:function(){return Sharing.errorController.get(\"buttonsArray\")||this.get(\"_defaultButtonsArray\")}.property(\"Sharing.errorController.buttonsArray\",\"_defaultButtonsArray\"),classNames:[\"error-view\"],forceDefaultIconUsage:YES}),Sharing.GameCenterUnsupported=Sharing.GenericBadgeView.extend({classNames:[\"gamecenter-update\"],titleBinding:SC.Binding.transform(function(){return SC.browser.isiOS||SC.browser.isMac?\"Sharing.GameCenter.Update.Title\".loc():\"Sharing.GameCenter.MacOSOrIOSRequired.Title\".loc()}).from(\"CloudOS.shareController.recordInfo\"),descriptionBinding:SC.Binding.transform(function(){return SC.browser.isiOS||SC.browser.isMac?\"Sharing.GameCenter.Update.Description\".loc():\"\"}).from(\"CloudOS.shareController.recordInfo\"),buttonsArray:function(){var e=[],t=SC.browser.isMac,n=SC.browser.isWindows,r=CloudOS.authController.get(\"isAuthenticated\"),i=SC.browser.isAndroid,s=SC.browser.isiOS;return t&&e.push({title:\"Sharing.Button.CheckForUpdates\".loc(),action:function(){window.location.href=\"macappstore://showUpdatesPage\"}}),(t||n)&&e.push({title:\"Sharing.Button.OK\".loc(),action:function(){Sharing.statechart.sendAction(\"removePane\")}}),r&&(i||s)&&e.push({title:\"Sharing.Button.SignOut\".loc(),action:function(){COS.authController.logoutUser(function(){CK.reloadWithReason\n(\"Sharing: Game Center unsupported\")},YES)}}),e}.property(\"CloudOS.authController.isAuthenticated\").cacheable()}),Sharing.GenericButtonView=SC.ButtonView.extend(SC.AutoResize,{useStaticLayout:YES,themeName:\"borderless\",localize:YES,controlSize:SC.LARGE_CONTROL_SIZE}),Sharing.NoAccessView=Sharing.GenericBadgeView.extend({init:function(){arguments.callee.base.apply(this,arguments);var e=\"Sharing.OONetwork.NoAccess.Description\",t=\"Sharing.OONetwork.NoAccess\",n=CloudOS.shareController.get(\"appName\");Sharing.utils.isNotesApp(n)?t+=\".notes\":t+=\".\"+n,t+=\".Title\",this.set(\"title\",t.loc()),this.set(\"description\",e.loc(Sharing.utils.getShareTitle()))},buttonsArray:function(){var e=[{title:\"Sharing.Button.Verify\".loc(),action:function(){Sharing.statechart.sendAction(\"gotoDeliveryMethodSelection\")},isDefault:YES}];return CloudOSBootstrap.isOnSupportedMobile?e.push({title:\"Sharing.Button.SignOut\".loc(),action:function(){CloudOS.authController.logoutUser(function(){CK.reloadWithReason(\"Sharing: No Access\")},YES)}}):e.push({title:\"Sharing.Button.NotNow\".loc(),action:function(){Sharing.statechart.sendAction(\"cancelSharing\")}}),e}.property().cacheable()}),Sharing.NotesMigrationNeeded=Sharing.GenericBadgeView.extend({title:function(){return COS.MIN_WIDTH>370?\"Sharing.NotMigrated.notes.Title\".loc():\"Sharing.NotMigrated.notes.ShortTitle\".loc()}.property(),description:\"Sharing.NotMigrated.notes.Description\".loc(),buttonsArray:function(){var e=[{title:\"Sharing.Button.OK\".loc(),action:function(){Sharing.statechart.sendAction(\"cancelSharing\")}}];return e}.property().cacheable()}),Sharing.OutOfNetworkView=\nSC.View.extend({classNames:[\"out-of-network\"],childViews:[\"titleView\",\"appleLogo\",\"contentContainer\",\"buttonBar\"],isVisibleBinding:SC.Binding.not(\"*pane.isLoading\"),titleView:SC.LabelView.design({useStaticLayout:YES,classNames:[\"title\"],textAlign:SC.ALIGN_CENTER,localize:YES,value:\"Sharing.OONetwork.Vetting.Title\",controlSize:SC.CUSTOM_CONTROL_SIZE}),appleLogo:SC.ImageView.create({layout:{top:6,left:10,width:30,height:36},classNames:[\"apple-logo\"],acceptsFirstResponder:NO,toolTip:\"Apple.com\"}),contentContainer:SC.ContainerView.design({useStaticLayout:YES,nowShowingBinding:SC.Binding.transform(function(e,t){var n=Sharing.vettingMessageSentStatusEnum;switch(e){case n.NOT_SENT:return\"selectParticipant\";case n.SENT:return\"spinner\";case n.RECEIVED_SUCCESS:return\"messageSent\";case n.RECEIVED_ERROR:return\"errorState\"}}).from(\"Sharing.outOfNetworkController.vettingMessageSentStatus\"),classNames:[\"content-container\"],selectParticipant:SC.View.design({useStaticLayout:YES,childViews:[\"description\",\"list\",\"mobileStyleList\",\"footer\"],description:SC.LabelView.design(Sharing.HorizontalCenterAlign,{useStaticLayout:YES,classNames:[\"content-description\"],valueBinding:SC.Binding.transform(function(e){return(\"Sharing.OONetwork.Vetting.Description.\"+e).loc()}).from(\"Sharing.outOfNetworkController.participantListType\")}),list:CW.SectionedView.design(CW.SectionedViewDesignSupport,CW.MiniFadingCaplessScrollerViewSupport,Sharing.HorizontalCenterAlign,CloudOS.AdjustMaxWidthOnMobile,{useStaticLayout:YES,isVisibleBinding:SC.Binding.not(\"*parentView.parentView.pane.isFullScreen\"),isEnabledBinding:\"*parentView.isEnabled\"\n,layout:{maxWidth:400,maxHeight:105,minHeight:105},rowHeight:35,verticalScrollerView:CW.MiniFadingCaplessScrollerView,style:CW.SectionedViewStyle.create({contentLayout:{left:0,top:0,bottom:0,right:0},sectionSpacing:34,classNames:[\"cw-grouped\"]}),sections:[\"oonParticipantsEmail\"],classNames:[\"oon-participants-email\"],oonParticipantsEmail:CW.SectionedViewCollectionSection.design({contentBinding:SC.Binding.oneWay(\"Sharing.outOfNetworkController.shareDetails.potentialMatchList\"),contentTextKey:\"contactEmailAddressOrPhoneNumber\",selectionBinding:\"Sharing.outOfNetworkController.selectedParticipant\",itemCellExample:CW.SectionedViewCollectionItemCell.extend({style:CW.SectionedViewStyle.NONE,selectionStyle:CW.SectionedViewCellSelectionStyle.NONE,highlightStyle:CW.SectionedViewCellSelectionStyle.NONE,accessoryType:null})})}),mobileStyleList:CW.SectionedView.design(CW.SectionedViewDesignSupport,{isVisibleBinding:SC.Binding.oneWay(\"*parentView.parentView.pane.isFullScreen\"),useStaticLayout:YES,classNames:[\"oon-participants-mobile\"],sections:[\"oonParticipants\"],rowHeight:55,style:CW.SectionedViewStyle.create({useStaticLayout:YES}),touchesDragged:function(e,t){var n=t.getPath(\"firstObject.targetView\"),r=n&&n.$().hasClass(\"oon-participants-mobile-verify\");if(r){n.tryToPerform(\"touchStart\",e);return}arguments.callee.base.apply(this,arguments)},oonParticipants:CW.SectionedViewCollectionSection.design({useStaticLayout:YES,contentBinding:SC.Binding.oneWay(\"Sharing.outOfNetworkController.shareDetails.potentialMatchList\"),style:CW.SectionedViewCellStyle.TEXT_FIELD,contentTextKey:\"contactEmailAddressOrPhoneNumber\"\n,selectionBinding:\"Sharing.outOfNetworkController.selectedParticipant\",selectionStyle:CW.SectionedViewCellSelectionStyle.NONE,itemCellExample:CW.SectionedViewCollectionItemCell.extend({style:CW.SectionedViewStyle.NONE,selectionStyle:CW.SectionedViewCellSelectionStyle.NONE,highlightStyle:CW.SectionedViewCellSelectionStyle.NONE,accessoryType:null,renderDelegateName:\"sectionedViewCollectionItemCellRTLRenderDelegate\",_computeAccessoryLayout:function(e,t){var n=e(t);return n}.enhance(),accessoryView:SC.ButtonView.extend(SC.AutoResize,{classNames:[\"oon-participants-mobile-verify\"],title:\"Sharing.Button.Verify\",localize:YES,themeName:\"borderless\",controlSize:SC.LARGE_CONTROL_SIZE,touchStart:function(){this.invokeLater(function(){Sharing.statechart.sendAction(\"sendVettingMessage\")},100)}})})})}),footer:SC.LabelView.design(Sharing.HorizontalCenterAlign,{useStaticLayout:YES,classNames:[\"footer\"],minHeight:50,escapeHTML:NO,valueBinding:SC.Binding.transform(function(e){return(\"Sharing.OONetwork.Vetting.Footer.\"+e).loc()}).from(\"Sharing.outOfNetworkController.participantListType\")})}),messageSent:SC.View.design({useStaticLayout:YES,classNames:[\"email-sent\"],childViews:[\"title\",\"description\"],useStaticLayout:YES,title:SC.LabelView.design(Sharing.HorizontalCenterAlign,{useStaticLayout:YES,classNames:[\"content-title\"],valueBinding:SC.Binding.transform(function(e,t){var n=e.get(\"contactType\"),r=Sharing.contactType;if(n===r.EMAIL)return\"Sharing.OONetwork.Vetting.EmailConfirmation.Title\".loc();if(n===r.PHONE)return\"Sharing.OONetwork.Vetting.PhoneConfirmation.Title\".loc()}).from(\"Sharing.outOfNetworkController.selectedParticipant\"\n),controlSize:SC.CUSTOM_CONTROL_SIZE}),description:SC.LabelView.design(Sharing.HorizontalCenterAlign,{classNames:[\"content-description\"],useStaticLayout:YES,escapeHTML:NO,valueBinding:SC.Binding.transform(function(e,t){var n=e.get(\"contactType\"),r=Sharing.contactType;if(n===r.EMAIL)return SC.RenderContext.escapeHTML(\"Sharing.OONetwork.Vetting.EmailConfirmation.Description\".loc());if(n===r.PHONE){var i=e.getPath(\"contactInformation.phoneNumber\"),s=SC.RenderContext.escapeHTML(\"Sharing.OONetwork.Vetting.PhoneConfirmation.Description\".loc());return i&&(s=SC.RenderContext.escapeHTML(\"Sharing.OONetwork.Vetting.PhoneConfirmation.Subtitle\".loc({phoneNumber:i}))+\"<br>\"+s),s}}).from(\"Sharing.outOfNetworkController.selectedParticipant\"),controlSize:SC.CUSTOM_CONTROL_SIZE})}),spinner:CW.SpinnerView.design({classNames:[\"cw-spinner-view\"],layout:{centerX:0,centerY:0},asset:SC.platform.dpi>1?\"data:image/png;base64,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\"\n:\"data:image/png;base64,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\"\n}),errorState:SC.View.design({useStaticLayout:YES,childViews:[\"title\",\"description\"],classNames:[\"error-state\"],title:SC.LabelView.design(Sharing.HorizontalCenterAlign,{useStaticLayout:YES,classNames:[\"content-title\"],valueBinding:\"Sharing.errorController.title\",controlSize:SC.CUSTOM_CONTROL_SIZE}),description:SC.LabelView.design(Sharing.HorizontalCenterAlign,{useStaticLayout:YES,classNames:[\"content-description\"],valueBinding:\"Sharing.errorController.description\",controlSize:SC.CUSTOM_CONTROL_SIZE})})}),buttonBar:SC.View.design({classNames:[\"button-bar\"],childViews:function(){var e=[];return CloudOSBootstrap.isOnSupportedMobile||e.push(\"cancelButton\"),e.push(\"continueButton\",\"doneButton\"),e}.property(),useStaticLayout:YES,align:SC.ALIGN_RIGHT,isVisibleBinding:SC.Binding.not(\"*parentView.pane.isFullScreen\"),cancelButton:Sharing.GenericButtonView.extend({title:\"Sharing.Button.Cancel\",isVisibleBinding:SC.Binding.transform(function(e,t){var n=Sharing.vettingMessageSentStatusEnum;return e===n.NOT_SENT}).from(\"Sharing.outOfNetworkController.vettingMessageSentStatus\"),action:function(){Sharing.statechart.sendAction(\"cancelSharing\")}}),continueButton:Sharing.GenericButtonView.extend({classNames:[\"default-button\"],title:\"Sharing.Button.SendVerificationLink\",isVisibleBinding:SC.Binding.transform(function(e,t){var n=Sharing.vettingMessageSentStatusEnum;return e===n.NOT_SENT}).from(\"Sharing.outOfNetworkController.vettingMessageSentStatus\"),action:function(){Sharing.statechart.sendAction(\"sendVettingMessage\")}}),doneButton:Sharing.GenericButtonView.extend({classNames:[\"default-button\"],\ntitle:\"Sharing.Button.Done\",isVisibleBinding:SC.Binding.transform(function(e,t){var n=Sharing.vettingMessageSentStatusEnum;return e===n.RECEIVED_SUCCESS||e===n.RECEIVED_ERROR}).from(\"Sharing.outOfNetworkController.vettingMessageSentStatus\"),action:function(){Sharing.statechart.sendAction(\"vettingMessageSent\")}})})}),Sharing.ThirdParty=Sharing.GenericBadgeView.extend({titleBinding:SC.Binding.transform(function(e,t){var n=\"Sharing.ThirdParty.NoTitle\".loc();return e?Sharing.utils.getShareTitle():n}).from(\"CloudOS.shareController.recordInfo\"),availableAppBundles:function(){var e={},t=CloudOS.shareController.getPath(\"recordInfo.bundleInfo\");if(t){var n=t.reduce(function(t,n){var r=[];return n.kind===\"iosSoftware\"?(r=n.deviceFamilies,e.iosAppBundle=n):n.kind===\"desktopApp\"&&(r=[\"mac\"],e.macAppBundle=n),t.concat(r)},[]);e.oniOS=!!e.iosAppBundle,e.onMac=!!e.macAppBundle,e.oniPhone=n.indexOf(\"iphone\")>-1,e.oniPad=n.indexOf(\"ipad\")>-1}return e}.property(\"CloudOS.shareController.recordInfo\").cacheable(),description:function(){var e=CloudOS.shareController.get(\"recordInfo\");if(!e)return;var t=e.share.owner.userIdentity.nameComponents,n=\"Sharing.Label.FullName\".loc({firstName:t.givenName,lastName:t.familyName});if(!e.bundleInfo)return\"Sharing.ThirdParty.Description.NoBundleInfo\".loc({ownerName:n});var r=SC.browser.isiOS,i=SC.browser.isMac,s=SC.browser.isWindows,o=this.getPath(\"availableAppBundles.oniPhone\"),u=this.getPath(\"availableAppBundles.oniPad\"),a=this.getPath(\"availableAppBundles.onMac\"),f=\"Sharing.ThirdParty.Description\",l;e.bundleInfo?l=e.bundleInfo[0].name:l=\"Sharing.ThirdParty.NoAppName\"\n.loc();if(i)f+=\".macOS\",a&&!u&&!o&&(f+=\".AppmacOSOnly\"),!a&&u&&!o&&(f+=\".AppiPadOnly\"),!a&&!u&&o&&(f+=\".AppiPhoneOnly\"),!a&&u&&o&&(f+=\".AppiPadiPhone\"),a&&u&&!o&&(f+=\".AppmacOSiPad\"),a&&!u&&o&&(f+=\".AppmacOSiPhone\"),a&&!u&&o&&(f+=\".AppmacOSiPhone\"),a&&u&&o&&(f+=\".AppmacOSiPadiPhone\");else if(r){f+=\".iOS\";var c=SC.browser.isiPhone||SC.browser.isiPod,h=SC.browser.isiPad;a&&!u&&!o&&(f+=\".AppmacOSOnly\"),!a&&u&&!o&&h&&(f+=\".AppiPadOnly.iPad\"),!a&&u&&!o&&c&&(f+=\".AppiPadOnly.iPhone\"),!a&&!u&&o&&h&&(f+=\".AppiPhoneOnly.iPad\"),!a&&!u&&o&&c&&(f+=\".AppiPhoneOnly.iPhone\"),!a&&u&&o&&(f+=\".AppiPadiPhone\"),a&&u&&!o&&h&&(f+=\".AppmacOSiPad.iPad\"),a&&u&&!o&&c&&(f+=\".AppmacOSiPad.iPhone\"),a&&!u&&o&&h&&(f+=\".AppmacOSiPhone.iPad\"),a&&!u&&o&&c&&(f+=\".AppmacOSiPhone.iPhone\"),a&&u&&o&&(f+=\".AppmacOSiPadiPhone\")}else f+=\".Windows\",a&&!u&&!o&&(f+=\".AppmacOSOnly\"),!a&&u&&!o&&(f+=\".AppiPadOnly\"),!a&&!u&&o&&(f+=\".AppiPhoneOnly\"),!a&&u&&o&&(f+=\".AppiPadiPhone\"),a&&u&&!o&&(f+=\".AppmacOSiPad\"),a&&!u&&o&&(f+=\".AppmacOSiPhone\"),a&&!u&&o&&(f+=\".AppmacOSiPhone\"),a&&u&&o&&(f+=\".AppmacOSiPadiPhone\");return f.loc({appName:l,ownerShared:\"Sharing.ThirdParty.Description.OwnerShared\".loc({ownerName:n})})}.property(\"CloudOS.shareController.recordInfo\",\"availableAppBundles\"),buttonsArray:function(){var e=[],t=CloudOS.authController.get(\"isAuthenticated\"),n=this.getPath(\"availableAppBundles.macAppBundle\"),r=this.getPath(\"availableAppBundles.iosAppBundle\"),i={goToMacAppStore:{title:\"Sharing.Button.VisitAppStore\".loc(),action:function(){var e=n.url,t=e.replace(/.*(\\/id\\d+.*$)/,\"macappstore://itunes.apple.com/app$1\");window\n.location.href=t}},goToiOSAppStore:{title:\"Sharing.Button.VisitAppStore\".loc(),action:function(){var e=r.url;window.location.href=e}},ok:{title:\"Sharing.Button.OK\".loc(),action:function(){Sharing.removePane()}},notNow:{title:\"Sharing.Button.NotNow\".loc(),action:function(){Sharing.removePane()}},signOut:{title:\"Sharing.Button.SignOut\".loc(),action:function(){COS.authController.logoutUser(function(){CK.reloadWithReason(\"Sharing: Third Party Acceptance\")},YES)}}};if(!CloudOSBootstrap.isOnSupportedMobile)if(SC.browser.isMac){var s=!!n;s?(e.push(i.goToMacAppStore),t&&e.push(i.notNow)):e.push(i.ok)}else e.push(i.ok);else{if(SC.browser.isiOS){var o=!!r;o&&e.push(i.goToiOSAppStore)}t&&e.push(i.signOut)}return e}.property(\"CloudOS.authController.isAuthenticated\",\"availableAppBundles\").cacheable()}),Sharing.SharingPane=Sharing.BadgePane.extend(CW.Animatability,{layout:{left:0,top:CloudOS.bannerManager.get(\"bannerHeight\"),right:0,bottom:0,minWidth:COS.MIN_WIDTH,minHeight:COS.MIN_HEIGHT,zIndex:5,opacity:0},didAppendToDocument:function(){this.animate(\"opacity\",{from:0,to:1,duration:500})},isSpinnerVisible:NO,showSpinner:function(){CloudOS.workspaceController.showCentralSpinner(),this.set(\"isSpinnerVisible\",YES)},hideSpinner:function(){CloudOS.workspaceController.hideCentralSpinner(),this.set(\"isSpinnerVisible\",NO)},fadeOut:function(e){this.animate(\"opacity\",{from:1,to:0,duration:500},{doneShowing:function(){e&&e()}.listens(\"stop\")})},bannerHeightObserver:function(){this.adjust(\"top\",CloudOS.bannerManager.get(\"bannerHeight\"))}.observes(\"CloudOS.bannerManager.bannerHeight\"),childViews:[\"badgeContainer\"\n,\"accountMenu\"],defaultResponder:Sharing.statechart,nowShowing:null,defaultBadge:\"badgeContainer\",accountMenu:Sharing.AccountMenu.design(),badgeContainer:Sharing.BadgeContainerView.extend({isVisibleBinding:SC.Binding.not(\"*parentView.isSpinnerVisible\"),nowShowingBinding:\"*parentView.nowShowing\",gameCenterUpdate:Sharing.GameCenterUnsupported.design(),thirdParty:Sharing.ThirdParty.design(),noAccess:Sharing.NoAccessView.design(),inNetworkAcceptance:Sharing.AcceptanceInNetwork.design(),notesMigrationNeeded:Sharing.NotesMigrationNeeded.design(),error:Sharing.ErrorView.design()})});\n";